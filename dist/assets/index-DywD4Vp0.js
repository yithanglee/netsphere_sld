var hd=Object.defineProperty;var ol=n=>{throw TypeError(n)};var pd=(n,t,e)=>t in n?hd(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var k=(n,t,e)=>pd(n,typeof t!="symbol"?t+"":t,e),Sa=(n,t,e)=>t.has(n)||ol("Cannot "+e);var f=(n,t,e)=>(Sa(n,t,"read from private field"),e?e.call(n):t.get(n)),C=(n,t,e)=>t.has(n)?ol("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,e),b=(n,t,e,r)=>(Sa(n,t,"write to private field"),r?r.call(n,e):t.set(n,e),e),B=(n,t,e)=>(Sa(n,t,"access private method"),e);var Qs=(n,t,e,r)=>({set _(s){b(n,t,s,e)},get _(){return f(n,t,r)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function e(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=e(s);fetch(s.href,i)}})();let ut={datetime(n,t,e){var r=e.columns.filter((s,i)=>s.formatDateTime==!0);r.forEach((s,i)=>{var a=s.offset,o=0;o=e.columns.findIndex((y,g)=>y.data==s.data);try{var l=t[s.data];l=Date.parse(l);var u=new Date(l);u.setTime(u.getTime()+(8+a)*60*60*1e3);var d=u.toGMTString().split(",")[1].split(" ").splice(0,4).join(" "),h=u.toLocaleTimeString();$("td:eq("+o+")",n).html('<span class="text-muted fw-bold">'+d+`</span>

          <small class="fw-bold text-primary">
              `+h+`          
          </small>
             `)}catch(y){console.log(y)}})},custom(n,t,e){var r=e.columns.filter((s,i)=>s.customized==!0);r.forEach((s,i)=>{var a=0;a=e.columns.findIndex((o,l)=>o.data==s.data&&o.xdata==s.xdata);try{$("td:eq("+a+")",n).html(s.xdata.formatFn(t,parseInt(n.getAttribute("aria-index"))))}catch(o){console.log(o)}})},img(n,t,e){var r=e.columns.filter((s,i)=>s.showImg==!0);r.forEach((s,i)=>{var a=0;a=e.columns.findIndex((l,u)=>l.data==s.data);try{var o;o=`

        <div style="

background-size: contain !important; background-image: url('`+t[s.data]+`') !important; 
        height: 80px;width: 80px;
background-position: center;
background-repeat: no-repeat;
" class="text-center 
        bg-white d-flex align-items-center justify-content-center text-white">
        </div>`,$("td:eq("+a+")",n).html(o)}catch{}})},progress(n,t,e){var r=e.columns.filter((s,i)=>s.showProgress==!0);r.forEach((s,i)=>{var a=0;a=e.columns.findIndex((y,g)=>y.data==s.data);try{var o=t[s.data],l=s.progress,u=[],d=1/l.length*100,h=l.findIndex((y,g)=>y==o);l.forEach((y,g)=>{if(h>=g)var v='<div class="progress-bar bg-warning " role="progressbar" style="width: '+d+`%;" ></div>
              `;else var v='<div class="progress-bar " role="progressbar" style="width: '+d+`%;" ></div>
              `;u.push(v)}),p=`
          <small>`+o+`</small>
          <div class="progress gap-1">
          `+u.join("")+`
          </div>
        `,$("td:eq("+a+")",n).html(p)}catch{}})},subtitle(n,t,e){var r=e.columns.filter((s,i)=>s.showSubtitle==!0);r.forEach((s,i)=>{var a=0;a=e.columns.findIndex((d,h)=>d.data==s.data);var o=0;o=e.columns.findIndex((d,h)=>d.data==s.subtitle);try{var l=t[s.data],u=t[s.subtitle];e.columns[a].showChild&&(l=t[s.xdata.child][s.xdata.data]),e.columns[a].formatFloat&&(l=currencyFormat(l)),e.columns[o].formatFloat&&(u=currencyFormat(u)),e.columns[o].showBoolean&&(t[s.subtitle]==!0?u='<i class="text-success fa fa-check"></i>':u='<i class="text-danger fa fa-times"></i>'),$("td:eq("+a+")",n).html('<span class="pe-2">'+l+`</span>
          <small class="text-muted text-truncate" style="max-width: 24vw;display: block;">`+u+"</small>")}catch{}})},bool(n,t,e){var r=e.columns.filter((s,i)=>s.showBoolean==!0);r.forEach((s,i)=>{var a=0;a=e.columns.findIndex((l,u)=>l.data==s.data);try{var o;t[s.data]==!0?o='<i class="text-success fa fa-check"></i>':o='<i class="text-danger fa fa-times"></i>',$("td:eq("+a+")",n).html(o)}catch{}})},json(n,t,e){var r=e.columns.filter((s,i)=>s.showJson==!0);r.forEach((s,i)=>{var a=0;a=e.columns.findIndex((o,l)=>o.data==s.data);try{$("td:eq("+a+")",n).html(`<div aria-data='' class="jsv`+e.makeid.id+'" id="'+s.data+t.id+'"></div>')}catch{}})},child(n,t,e){var r=e.columns.filter((s,i)=>s.showChild==!0);r.forEach((s,i)=>{var a=0;a=e.columns.findIndex((l,u)=>l.data==s.data&&l.xdata==s.xdata);try{if($("td:eq("+a+")",n).html(t[s.xdata.child][s.xdata.data]),s.xdata.showImg)try{if(console.log("attemp to show img..."),t[s.xdata.child][0]!=null){var o;o=`
              <div style="background-size: cover !important; background-image: url('`+t[s.xdata.child][0][s.xdata.data]+`') !important; 
              height: 80px;width: 80px" class="rounded-circle text-center 
              bg-primary d-flex align-items-center justify-content-center text-white">
              </div>`,$("td:eq("+a+")",n).html(o)}}catch{}s.xdata.formatFloat&&$("td:eq("+a+")",n).html(currencyFormatdtdata[s.xdata.child][s.xdata.data])}catch{}})},float(n,t,e){var r=e.columns.filter((s,i)=>s.formatFloat==!0);r.forEach((s,i)=>{var a=0;a=e.columns.findIndex((o,l)=>o.data==s.data);try{$("td:eq("+a+")",n).html(currencyFormat(t[s.data]))}catch{}})},dataFormatter(n,t){var e=null,r=["formatFloat","showBoolean","formatDateTime","showImg","showChild"],s=-1,i=Object.keys(t);switch(r.forEach((h,y)=>{i.indexOf(h)>0&&(s=y)}),console.log(r[s]),r[s]){case"formatFloat":e=this.currencyFormat(n[t.data]);break;case"showImg":try{console.log("simmg"),e=`
        <div style="background-size: cover !important; background-image: url('`+n[t.data]+`') !important; 
        height: 80px;width: 80px" class="rounded-circle text-center 
        bg-primary d-flex align-items-center justify-content-center text-white">
        </div>`}catch(h){console.log(h)}break;case"showChild":try{if(e=n[t.xdata.child][t.xdata.data],t.xdata.showImg)try{console.log("attemp to show img..."),n[t.xdata.child][0]!=null&&(e=`
                <div style="background-size: cover !important; background-image: url('`+n[t.xdata.child][0][t.xdata.data]+`') !important; 
                height: 80px;width: 80px" class="rounded-circle text-center 
                bg-primary d-flex align-items-center justify-content-center text-white">
                </div>`)}catch{}t.xdata.formatFloat&&(e=currencyFormat(n[t.xdata.child][t.xdata.data]))}catch{}break;case"showBoolean":try{var a;n[t.data]==!0?a='<i class="text-success fa fa-check"></i>':a='<i class="text-danger fa fa-times"></i>',e=a}catch{}break;case"formatDateTime":var o=n[t.data];o=Date.parse(o);var l=new Date(o);l.setTime(l.getTime()+8*60*60*1e3);var u=l.toGMTString().split(",")[1].split(" ").splice(0,4).join(" "),d=l.toLocaleTimeString();e='<span class="text-muted fw-bold">'+u+`</span>

              <small class="fw-bold text-primary">
                  `+d+`          
              </small>
                 `;break;default:e=n[t.data]}return e==null&&(e=n[t.data]),e},formatDate(){$(" .format-int, .format-integer").each((n,t)=>{var e="";$(t).html().split(" ").includes("DR")&&(e="DR"),$(t).html().split(" ").includes("CR")&&(e="CR");var r=$(t).html();if(parseFloat(r)>0){var s='<span class="text-end" >'+e+this.currencyFormat(parseFloat(r)).replace(".00","")+"</span>";$(t).html(s)}else parseFloat(r)==0?$(t).html("0.00"):$(t).html(r)}),$(".format_float, .format-float").each((n,t)=>{var e="";$(t).html().split(" ").includes("DR")&&(e="DR"),$(t).html().split(" ").includes("CR")&&(e="CR"),$(t).html().includes("-")&&(e="-");var r=$(t).html().replace("-","");if(parseFloat(r)>0){var s='<span class="text-end" >'+e+this.currencyFormat(parseFloat(r))+" </span>";$(t).html(s)}else parseFloat(r)==0?$(t).html("0.00"):$(t).html(r)}),$(".format_date").each((n,t)=>{var e=$(t).html();if(Date.parse(e)>0){var r=new Date(e),s;r.getDate().toString().length>1?s=r.getDate():s="0"+r.getDate();var i;(r.getMonth()+1).toString().length>1?i=r.getMonth()+1:i="0"+(r.getMonth()+1),$(t).html("<b>"+s+"-"+i+"-"+r.getFullYear()+"</b>")}else $(t).html(e)}),$(".format_datetime").each((n,t)=>{var e;$(t).attr("aria-offset")!=null&&parseInt($(t).attr("aria-offset"));var r=$(t).html();r=Date.parse($(t).html().replace(" ",""));var s=new Date(r);s.setTime(s.getTime()+8*60*60*1e3);try{e=s.toGMTString().split(",")[1].split(" ").splice(1,3).join(" ")}catch(a){console.log(a)}var i=s.toLocaleTimeString();$(t).html(""+e+" "+i)}),$(".is_posted").each((n,t)=>{var e=$(t).html();e=="true"&&$(t).html(`
                <i class="text-success fa fa-check"></i>
                `),e=="false"&&$(t).html(`
                <i class="text-danger fa fa-exclamation-circle"></i>
                `)})},currencyFormat(n){return n==null?"0.00":n.toFixed(2).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")},capitalize(n){return n.replace(/^\w/,t=>t.toUpperCase())}},L={user:{},ranks:[],restoreUser(){this.ranks=m.api("get_ranks",{}),this.user=JSON.parse(localStorage.getItem("user")),this.user!=null&&($("[aria-label='login']").addClass("d-none"),$("[aria-label='logout']").removeClass("d-none")),$("form#register")&&this.user!=null&&($("input[name='user[sales_person_id]']").val(this.user.id),$("input[name='user[username]']").val(""))},override(n){m.form($(n).closest("form"),"override",t=>{L.user=t,L.save(t),$("[aria-label='login']").addClass("d-none"),$("[aria-label='logout']").removeClass("d-none"),window.location="/home"})},extendUser(){m.api("extend_user",{token:this.user.token},null,n=>{console.log(n),n.status=="ok"&&(L.user=n.res,L.save(n.res))})},save(n){localStorage.setItem("user",JSON.stringify(n))},merchantCheckout(n){$(n).closest("form"),m.chosen_country_id_!=null&&$("input[name='user[country_id]']").val(m.chosen_country_id_.id),m.validateForm("form",()=>{console.info("validating form..."),m.form($(n).closest("form"),"merchant_checkout",t=>{console.info("after redeem form..."),console.log(t),t!=null?(console.log("e user"),console.log(t.user),_.emptyCart_(!0),m.navigateTo(t.payment_url)):(_.emptyCart_(!0),m.navigateTo("/profile"))})})},redeem(n){$(n).closest("form"),m.chosen_country_id_!=null&&$("input[name='user[country_id]']").val(m.chosen_country_id_.id),m.validateForm("form",()=>{console.info("validating form..."),m.form($(n).closest("form"),"redeem",t=>{console.info("after redeem form..."),console.log(t),t!=null?(console.log("e user"),console.log(t.user),_.emptyCart_(),m.navigateTo(t.payment_url)):(_.emptyCart_(),m.navigateTo("/profile"))})})},upgrade(n){$(n).closest("form"),$("form#register")&&(this.user!=null&&$("input[name='user[sales_person_id]']").val(this.user.id),m.chosen_country_id_!=null&&$("input[name='user[country_id]']").val(m.chosen_country_id_.id)),m.validateForm("form",()=>{console.info("validating form..."),m.form($(n).closest("form"),"upgrade",t=>{console.info("after upgrade form..."),console.log(t),t!=null?t.billplz_code!=null?(_.emptyCart_(),window.location=t.payment_url):($("input[name='user[instalment]']").val()==null&&m.notify("Please relogin to update rank."),_.emptyCart_(),_.components.userProfile(),m.navigateTo(t.payment_url)):(_.emptyCart_(),m.navigateTo("/profile"))})})},linkRegister(n){$("form#register")&&(this.user!=null&&$("input[name='user[sales_person_id]']").val(this.user.id),$("input[name='user[share_code]']").val(pageParams.share_code),m.chosen_country_id_!=null&&(console.log(m.chosen_country_id_),$("input[name='user[country_id]']").val(m.chosen_country_id_.id))),m.validateForm("form",()=>{console.log("validating form..."),m.form($(n).closest("form"),"link_register",t=>{console.log("after register form..."),console.log(t),t!=null?(_.emptyCart_(),L.user=t,L.save(t),$("[aria-label='login']").addClass("d-none"),$("[aria-label='logout']").removeClass("d-none"),m.navigateTo("/home")):(_.emptyCart_(),m.navigateTo("/login"))})})},register(n){$("form#register")&&(this.user!=null&&$("input[name='user[sales_person_id]']").val(this.user.id),m.chosen_country_id_!=null&&(console.log(m.chosen_country_id_),$("input[name='user[country_id]']").val(m.chosen_country_id_.id))),m.validateForm("form",()=>{console.log("validating form..."),m.form($(n).closest("form"),"register",t=>{console.log("after register form..."),console.log(t),t!=null?(_.emptyCart_(),window.stockistTarget=null,t.billplz_code!=null?window.location=t.payment_url:m.navigateTo(t.payment_url)):(_.emptyCart_(),m.navigateTo("/register"))})})},logout(){console.log("logging out..."),localStorage.removeItem("user"),$("[aria-label='login']").removeClass("d-none"),$("[aria-label='logout']").addClass("d-none"),m.notify("Log out!"),document.cookie="_commerce_front_key=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",setTimeout(()=>{location="/login"},1e3)},updateUser(n){L.user=n,L.save(n)},login(n){$(n).closest("form"),m.form($(n).closest("form"),"login",t=>{L.user=t,L.save(t),$("[aria-label='login']").addClass("d-none"),$("[aria-label='logout']").removeClass("d-none"),m.navigateTo("/home")})}};window.memberApp=L;class Ks{constructor(t){var e={moduleName:"User",link:"users",tableSelector:"#users",data:{},allData:[],buttons:[],tableButtons:[],table:null,columns:[],customCols:null,aliasName:null,onDrawFn:null,makeid:{},xcard:null},r=Object.keys(e);r.forEach((a,o)=>{this[a]=e[a]}),r.forEach((a,o)=>{t[a]!=null&&(this[a]=t[a])}),this.data;var s=this;function i(a){$(a.tableSelector).closest(".dataTables_wrapper").find(".grid_view .xc").each((o,l)=>{var u=l.data;if(console.log("xcard.."),a.xcard!=null){var d=a.xcard(u);$(l).prepend(d)}else{var h=[];a.columns.forEach((g,v)=>{var w=`
              <div class="d-flex flex-column pb-2" role="grid_data" aria-label="`+g.label+`">
                <label class="fw-light font-sm text-secondary">`+g.label+`</label>
                <div>`+this.dataFormatter(u,g)+`</div>
              </div>`;h.push(w)});var y=document.createElement("div");y.className=" card p-2",y.innerHTML=h.join(""),$(l).prepend(y)}})}this.load=function(a,o){a!=null?(this.tableSelector="#"+a,this.makeid={id:a,dom:o},m.Page.createTable(a,o)):m.Page.createTable(this.makeid.id,this.makeid.dom),m.populateTable(this),this.table.on("draw",()=>{var l=`
          <li>
            <a class="dropdown-item" href="javascript:void(0);" onclick="toggleView('`+this.tableSelector+`')">
              <i class="me-3 fa fa-th-large"></i>Grid View
            </a>
          </li>
        `,u=`
          <div class="d-flex align-items-center">
            <div class="btn btn-sm btn-outline-primary me-3" href="javascript:void(0);" data-href="" data-module="add_new" data-ref="">
              <i class="me-3 fa fa-plus"></i>New
            </div>
            <div class="dropdown morphing scale-left ">
              <a href="#" class="more-icon dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                <i class="fa fa-ellipsis-h"></i>
              </a>
              <ul class="dropdown-menu dropdown-animation dropdown-menu-end shadow border-0">
                ${l}
              </ul>
            </div>
          </div>
        `;$(this.tableSelector+"_wrapper .dataTables_filter").before(u),m.populateGridView(s),i(s)})},this.dataFormatter=function(a,o){const l=a[o.data];if(!l)return"-";switch(o.type){case"date":return new Date(l).toLocaleDateString();case"datetime":return new Date(l).toLocaleString();case"currency":return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(l);case"boolean":return l?"Yes":"No";case"image":return`<img src="${l}" alt="" style="max-width: 50px; max-height: 50px;">`;default:return l}},this.refresh=function(){this.table&&this.table.ajax.reload()},this.addRow=function(a){this.allData.push(a),this.table&&this.table.row.add(a).draw()},this.updateRow=function(a,o){this.allData[a]=o,this.table&&this.table.row(a).data(o).draw()},this.deleteRow=function(a){this.allData.splice(a,1),this.table&&this.table.row(a).remove().draw()}}}const md="6.15.0";function gd(n,t,e){const r=t.split("|").map(i=>i.trim());for(let i=0;i<r.length;i++)switch(t){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof n===t)return}const s=new Error(`invalid value for type ${t}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${e}`,s.value=n,s}async function Ot(n){const t=Object.keys(n);return(await Promise.all(t.map(r=>Promise.resolve(n[r])))).reduce((r,s,i)=>(r[t[i]]=s,r),{})}function Q(n,t,e){for(let r in t){let s=t[r];const i=e?e[r]:null;i&&gd(s,i,r),Object.defineProperty(n,r,{enumerable:!0,value:s,writable:!1})}}function Ur(n,t){if(n==null)return"null";if(t==null&&(t=new Set),typeof n=="object"){if(t.has(n))return"[Circular]";t.add(n)}if(Array.isArray(n))return"[ "+n.map(e=>Ur(e,t)).join(", ")+" ]";if(n instanceof Uint8Array){const e="0123456789abcdef";let r="0x";for(let s=0;s<n.length;s++)r+=e[n[s]>>4],r+=e[n[s]&15];return r}if(typeof n=="object"&&typeof n.toJSON=="function")return Ur(n.toJSON(),t);switch(typeof n){case"boolean":case"number":case"symbol":return n.toString();case"bigint":return BigInt(n).toString();case"string":return JSON.stringify(n);case"object":{const e=Object.keys(n);return e.sort(),"{ "+e.map(r=>`${Ur(r,t)}: ${Ur(n[r],t)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function Ct(n,t){return n&&n.code===t}function Uo(n){return Ct(n,"CALL_EXCEPTION")}function dt(n,t,e){let r=n;{const i=[];if(e){if("message"in e||"code"in e||"name"in e)throw new Error(`value will overwrite populated values: ${Ur(e)}`);for(const a in e){if(a==="shortMessage")continue;const o=e[a];i.push(a+"="+Ur(o))}}i.push(`code=${t}`),i.push(`version=${md}`),i.length&&(n+=" ("+i.join(", ")+")")}let s;switch(t){case"INVALID_ARGUMENT":s=new TypeError(n);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(n);break;default:s=new Error(n)}return Q(s,{code:t}),e&&Object.assign(s,e),s.shortMessage==null&&Q(s,{shortMessage:r}),s}function T(n,t,e,r){if(!n)throw dt(t,e,r)}function A(n,t,e,r){T(n,t,"INVALID_ARGUMENT",{argument:e,value:r})}function Ac(n,t,e){e==null&&(e=""),e&&(e=": "+e),T(n>=t,"missing argument"+e,"MISSING_ARGUMENT",{count:n,expectedCount:t}),T(n<=t,"too many arguments"+e,"UNEXPECTED_ARGUMENT",{count:n,expectedCount:t})}["NFD","NFC","NFKD","NFKC"].reduce((n,t)=>{try{if("test".normalize(t)!=="test")throw new Error("bad");if(t==="NFD"&&"é".normalize("NFD")!=="é")throw new Error("broken");n.push(t)}catch{}return n},[]);function Ei(n,t,e){if(e==null&&(e=""),n!==t){let r=e,s="new";e&&(r+=".",s+=" "+e),T(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:s})}}function xc(n,t,e){if(n instanceof Uint8Array)return e?new Uint8Array(n):n;if(typeof n=="string"&&n.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const r=new Uint8Array((n.length-2)/2);let s=2;for(let i=0;i<r.length;i++)r[i]=parseInt(n.substring(s,s+2),16),s+=2;return r}A(!1,"invalid BytesLike value",t||"value",n)}function q(n,t){return xc(n,t,!1)}function $t(n,t){return xc(n,t,!0)}function lt(n,t){return!(typeof n!="string"||!n.match(/^0x[0-9A-Fa-f]*$/)||typeof t=="number"&&n.length!==2+2*t||t===!0&&n.length%2!==0)}function Do(n){return lt(n,!0)||n instanceof Uint8Array}const ll="0123456789abcdef";function F(n){const t=q(n);let e="0x";for(let r=0;r<t.length;r++){const s=t[r];e+=ll[(s&240)>>4]+ll[s&15]}return e}function pt(n){return"0x"+n.map(t=>F(t).substring(2)).join("")}function Gr(n){return lt(n,!0)?(n.length-2)/2:q(n).length}function ht(n,t,e){const r=q(n);return e!=null&&e>r.length&&T(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:e}),F(r.slice(t??0,e??r.length))}function kc(n,t,e){const r=q(n);T(t>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:t,offset:t+1});const s=new Uint8Array(t);return s.fill(0),e?s.set(r,t-r.length):s.set(r,0),F(s)}function en(n,t){return kc(n,t,!0)}function yd(n,t){return kc(n,t,!1)}const ga=BigInt(0),be=BigInt(1),Dr=9007199254740991;function Yi(n,t){const e=ya(n,"value"),r=BigInt(K(t,"width"));if(T(e>>r===ga,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:n}),e>>r-be){const s=(be<<r)-be;return-((~e&s)+be)}return e}function _c(n,t){let e=H(n,"value");const r=BigInt(K(t,"width")),s=be<<r-be;if(e<ga){e=-e,T(e<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:n});const i=(be<<r)-be;return(~e&i)+be}else T(e<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:n});return e}function Jn(n,t){const e=ya(n,"value"),r=BigInt(K(t,"bits"));return e&(be<<r)-be}function H(n,t){switch(typeof n){case"bigint":return n;case"number":return A(Number.isInteger(n),"underflow",t||"value",n),A(n>=-Dr&&n<=Dr,"overflow",t||"value",n),BigInt(n);case"string":try{if(n==="")throw new Error("empty string");return n[0]==="-"&&n[1]!=="-"?-BigInt(n.substring(1)):BigInt(n)}catch(e){A(!1,`invalid BigNumberish string: ${e.message}`,t||"value",n)}}A(!1,"invalid BigNumberish value",t||"value",n)}function ya(n,t){const e=H(n,t);return T(e>=ga,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:n}),e}const cl="0123456789abcdef";function ba(n){if(n instanceof Uint8Array){let t="0x0";for(const e of n)t+=cl[e>>4],t+=cl[e&15];return BigInt(t)}return H(n)}function K(n,t){switch(typeof n){case"bigint":return A(n>=-Dr&&n<=Dr,"overflow",t||"value",n),Number(n);case"number":return A(Number.isInteger(n),"underflow",t||"value",n),A(n>=-Dr&&n<=Dr,"overflow",t||"value",n),n;case"string":try{if(n==="")throw new Error("empty string");return K(BigInt(n),t)}catch(e){A(!1,`invalid numeric string: ${e.message}`,t||"value",n)}}A(!1,"invalid numeric value",t||"value",n)}function bd(n){return K(ba(n))}function Sn(n,t){let r=ya(n,"value").toString(16);if(t==null)r.length%2&&(r="0"+r);else{const s=K(t,"width");for(T(s*2>=r.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:n});r.length<s*2;)r="0"+r}return"0x"+r}function bt(n){const t=ya(n,"value");if(t===ga)return new Uint8Array([]);let e=t.toString(16);e.length%2&&(e="0"+e);const r=new Uint8Array(e.length/2);for(let s=0;s<r.length;s++){const i=s*2;r[s]=parseInt(e.substring(i,i+2),16)}return r}function ye(n){let t=F(Do(n)?n:bt(n)).substring(2);for(;t.startsWith("0");)t=t.substring(1);return t===""&&(t="0"),"0x"+t}const ul="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const dl=BigInt(58);function wd(n){const t=q(n);let e=ba(t),r="";for(;e;)r=ul[Number(e%dl)]+r,e/=dl;for(let s=0;s<t.length&&!t[s];s++)r=ul[0]+r;return r}function vd(n){n=atob(n);const t=new Uint8Array(n.length);for(let e=0;e<n.length;e++)t[e]=n.charCodeAt(e);return q(t)}function Ad(n){const t=q(n);let e="";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return btoa(e)}var Jr;class Ec{constructor(t,e,r){k(this,"filter");k(this,"emitter");C(this,Jr);b(this,Jr,e),Q(this,{emitter:t,filter:r})}async removeListener(){f(this,Jr)!=null&&await this.emitter.off(this.filter,f(this,Jr))}}Jr=new WeakMap;function xd(n,t,e,r,s){A(!1,`invalid codepoint at offset ${t}; ${n}`,"bytes",e)}function Cc(n,t,e,r,s){if(n==="BAD_PREFIX"||n==="UNEXPECTED_CONTINUE"){let i=0;for(let a=t+1;a<e.length&&e[a]>>6===2;a++)i++;return i}return n==="OVERRUN"?e.length-t-1:0}function kd(n,t,e,r,s){return n==="OVERLONG"?(A(typeof s=="number","invalid bad code point for replacement","badCodepoint",s),r.push(s),0):(r.push(65533),Cc(n,t,e))}const _d=Object.freeze({error:xd,ignore:Cc,replace:kd});function Ed(n,t){t==null&&(t=_d.error);const e=q(n,"bytes"),r=[];let s=0;for(;s<e.length;){const i=e[s++];if(!(i>>7)){r.push(i);continue}let a=null,o=null;if((i&224)===192)a=1,o=127;else if((i&240)===224)a=2,o=2047;else if((i&248)===240)a=3,o=65535;else{(i&192)===128?s+=t("UNEXPECTED_CONTINUE",s-1,e,r):s+=t("BAD_PREFIX",s-1,e,r);continue}if(s-1+a>=e.length){s+=t("OVERRUN",s-1,e,r);continue}let l=i&(1<<8-a-1)-1;for(let u=0;u<a;u++){let d=e[s];if((d&192)!=128){s+=t("MISSING_CONTINUE",s,e,r),l=null;break}l=l<<6|d&63,s++}if(l!==null){if(l>1114111){s+=t("OUT_OF_RANGE",s-1-a,e,r,l);continue}if(l>=55296&&l<=57343){s+=t("UTF16_SURROGATE",s-1-a,e,r,l);continue}if(l<=o){s+=t("OVERLONG",s-1-a,e,r,l);continue}r.push(l)}}return r}function Xe(n,t){A(typeof n=="string","invalid string value","str",n);let e=[];for(let r=0;r<n.length;r++){const s=n.charCodeAt(r);if(s<128)e.push(s);else if(s<2048)e.push(s>>6|192),e.push(s&63|128);else if((s&64512)==55296){r++;const i=n.charCodeAt(r);A(r<n.length&&(i&64512)===56320,"invalid surrogate pair","str",n);const a=65536+((s&1023)<<10)+(i&1023);e.push(a>>18|240),e.push(a>>12&63|128),e.push(a>>6&63|128),e.push(a&63|128)}else e.push(s>>12|224),e.push(s>>6&63|128),e.push(s&63|128)}return new Uint8Array(e)}function Cd(n){return n.map(t=>t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10&1023)+55296,(t&1023)+56320))).join("")}function Zi(n,t){return Cd(Ed(n,t))}function Pc(n){async function t(e,r){T(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const s=e.url.split(":")[0].toLowerCase();T(s==="http"||s==="https",`unsupported protocol ${s}`,"UNSUPPORTED_OPERATION",{info:{protocol:s},operation:"request"}),T(s==="https"||!e.credentials||e.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let i=null;const a=new AbortController,o=setTimeout(()=>{i=dt("request timeout","TIMEOUT"),a.abort()},e.timeout);r&&r.addListener(()=>{i=dt("request cancelled","CANCELLED"),a.abort()});const l=Object.assign({},n,{method:e.method,headers:new Headers(Array.from(e)),body:e.body||void 0,signal:a.signal});let u;try{u=await fetch(e.url,l)}catch(g){throw clearTimeout(o),i||g}clearTimeout(o);const d={};u.headers.forEach((g,v)=>{d[v.toLowerCase()]=g});const h=await u.arrayBuffer(),y=h==null?null:new Uint8Array(h);return{statusCode:u.status,statusMessage:u.statusText,headers:d,body:y}}return t}const Pd=12,Id=250;let fl=Pc();const Nd=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),Td=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let Ra=!1;async function Ic(n,t){try{const e=n.match(Nd);if(!e)throw new Error("invalid data");return new Bn(200,"OK",{"content-type":e[1]||"text/plain"},e[2]?vd(e[3]):Sd(e[3]))}catch{return new Bn(599,"BAD REQUEST (invalid data: URI)",{},null,new Rn(n))}}function Nc(n){async function t(e,r){try{const s=e.match(Td);if(!s)throw new Error("invalid link");return new Rn(`${n}${s[2]}`)}catch{return new Bn(599,"BAD REQUEST (invalid IPFS URI)",{},null,new Rn(e))}}return t}const Bi={data:Ic,ipfs:Nc("https://gateway.ipfs.io/ipfs/")},Tc=new WeakMap;var Zn,pn;class Bd{constructor(t){C(this,Zn);C(this,pn);b(this,Zn,[]),b(this,pn,!1),Tc.set(t,()=>{if(!f(this,pn)){b(this,pn,!0);for(const e of f(this,Zn))setTimeout(()=>{e()},0);b(this,Zn,[])}})}addListener(t){T(!f(this,pn),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),f(this,Zn).push(t)}get cancelled(){return f(this,pn)}checkSignal(){T(!this.cancelled,"cancelled","CANCELLED",{})}}Zn=new WeakMap,pn=new WeakMap;function Si(n){if(n==null)throw new Error("missing signal; should not happen");return n.checkSignal(),n}var Kr,qr,de,Me,Yr,Zr,At,qt,He,Wn,Xn,tr,ke,fe,mn,er,qs;const ca=class ca{constructor(t){C(this,er);C(this,Kr);C(this,qr);C(this,de);C(this,Me);C(this,Yr);C(this,Zr);C(this,At);C(this,qt);C(this,He);C(this,Wn);C(this,Xn);C(this,tr);C(this,ke);C(this,fe);C(this,mn);b(this,Zr,String(t)),b(this,Kr,!1),b(this,qr,!0),b(this,de,{}),b(this,Me,""),b(this,Yr,3e5),b(this,fe,{slotInterval:Id,maxAttempts:Pd}),b(this,mn,null)}get url(){return f(this,Zr)}set url(t){b(this,Zr,String(t))}get body(){return f(this,At)==null?null:new Uint8Array(f(this,At))}set body(t){if(t==null)b(this,At,void 0),b(this,qt,void 0);else if(typeof t=="string")b(this,At,Xe(t)),b(this,qt,"text/plain");else if(t instanceof Uint8Array)b(this,At,t),b(this,qt,"application/octet-stream");else if(typeof t=="object")b(this,At,Xe(JSON.stringify(t))),b(this,qt,"application/json");else throw new Error("invalid body")}hasBody(){return f(this,At)!=null}get method(){return f(this,Me)?f(this,Me):this.hasBody()?"POST":"GET"}set method(t){t==null&&(t=""),b(this,Me,String(t).toUpperCase())}get headers(){const t=Object.assign({},f(this,de));return f(this,He)&&(t.authorization=`Basic ${Ad(Xe(f(this,He)))}`),this.allowGzip&&(t["accept-encoding"]="gzip"),t["content-type"]==null&&f(this,qt)&&(t["content-type"]=f(this,qt)),this.body&&(t["content-length"]=String(this.body.length)),t}getHeader(t){return this.headers[t.toLowerCase()]}setHeader(t,e){f(this,de)[String(t).toLowerCase()]=String(e)}clearHeaders(){b(this,de,{})}[Symbol.iterator](){const t=this.headers,e=Object.keys(t);let r=0;return{next:()=>{if(r<e.length){const s=e[r++];return{value:[s,t[s]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return f(this,He)||null}setCredentials(t,e){A(!t.match(/:/),"invalid basic authentication username","username","[REDACTED]"),b(this,He,`${t}:${e}`)}get allowGzip(){return f(this,qr)}set allowGzip(t){b(this,qr,!!t)}get allowInsecureAuthentication(){return!!f(this,Kr)}set allowInsecureAuthentication(t){b(this,Kr,!!t)}get timeout(){return f(this,Yr)}set timeout(t){A(t>=0,"timeout must be non-zero","timeout",t),b(this,Yr,t)}get preflightFunc(){return f(this,Wn)||null}set preflightFunc(t){b(this,Wn,t)}get processFunc(){return f(this,Xn)||null}set processFunc(t){b(this,Xn,t)}get retryFunc(){return f(this,tr)||null}set retryFunc(t){b(this,tr,t)}get getUrlFunc(){return f(this,mn)||fl}set getUrlFunc(t){b(this,mn,t)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${f(this,At)?F(f(this,At)):"null"}>`}setThrottleParams(t){t.slotInterval!=null&&(f(this,fe).slotInterval=t.slotInterval),t.maxAttempts!=null&&(f(this,fe).maxAttempts=t.maxAttempts)}send(){return T(f(this,ke)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),b(this,ke,new Bd(this)),B(this,er,qs).call(this,0,hl()+this.timeout,0,this,new Bn(0,"",{},null,this))}cancel(){T(f(this,ke)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const t=Tc.get(this);if(!t)throw new Error("missing signal; should not happen");t()}redirect(t){const e=this.url.split(":")[0].toLowerCase(),r=t.split(":")[0].toLowerCase();T(this.method==="GET"&&(e!=="https"||r!=="http")&&t.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(t)})`});const s=new ca(t);return s.method="GET",s.allowGzip=this.allowGzip,s.timeout=this.timeout,b(s,de,Object.assign({},f(this,de))),f(this,At)&&b(s,At,new Uint8Array(f(this,At))),b(s,qt,f(this,qt)),s}clone(){const t=new ca(this.url);return b(t,Me,f(this,Me)),f(this,At)&&b(t,At,f(this,At)),b(t,qt,f(this,qt)),b(t,de,Object.assign({},f(this,de))),b(t,He,f(this,He)),this.allowGzip&&(t.allowGzip=!0),t.timeout=this.timeout,this.allowInsecureAuthentication&&(t.allowInsecureAuthentication=!0),b(t,Wn,f(this,Wn)),b(t,Xn,f(this,Xn)),b(t,tr,f(this,tr)),b(t,fe,Object.assign({},f(this,fe))),b(t,mn,f(this,mn)),t}static lockConfig(){Ra=!0}static getGateway(t){return Bi[t.toLowerCase()]||null}static registerGateway(t,e){if(t=t.toLowerCase(),t==="http"||t==="https")throw new Error(`cannot intercept ${t}; use registerGetUrl`);if(Ra)throw new Error("gateways locked");Bi[t]=e}static registerGetUrl(t){if(Ra)throw new Error("gateways locked");fl=t}static createGetUrlFunc(t){return Pc(t)}static createDataGateway(){return Ic}static createIpfsGatewayFunc(t){return Nc(t)}};Kr=new WeakMap,qr=new WeakMap,de=new WeakMap,Me=new WeakMap,Yr=new WeakMap,Zr=new WeakMap,At=new WeakMap,qt=new WeakMap,He=new WeakMap,Wn=new WeakMap,Xn=new WeakMap,tr=new WeakMap,ke=new WeakMap,fe=new WeakMap,mn=new WeakMap,er=new WeakSet,qs=async function(t,e,r,s,i){var d,h,y;if(t>=f(this,fe).maxAttempts)return i.makeServerError("exceeded maximum retry limit");T(hl()<=e,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:s}),r>0&&await Rd(r);let a=this.clone();const o=(a.url.split(":")[0]||"").toLowerCase();if(o in Bi){const g=await Bi[o](a.url,Si(f(s,ke)));if(g instanceof Bn){let v=g;if(this.processFunc){Si(f(s,ke));try{v=await this.processFunc(a,v)}catch(w){(w.throttle==null||typeof w.stall!="number")&&v.makeServerError("error in post-processing function",w).assertOk()}}return v}a=g}this.preflightFunc&&(a=await this.preflightFunc(a));const l=await this.getUrlFunc(a,Si(f(s,ke)));let u=new Bn(l.statusCode,l.statusMessage,l.headers,l.body,s);if(u.statusCode===301||u.statusCode===302){try{const g=u.headers.location||"";return B(d=a.redirect(g),er,qs).call(d,t+1,e,0,s,u)}catch{}return u}else if(u.statusCode===429&&(this.retryFunc==null||await this.retryFunc(a,u,t))){const g=u.headers["retry-after"];let v=f(this,fe).slotInterval*Math.trunc(Math.random()*Math.pow(2,t));return typeof g=="string"&&g.match(/^[1-9][0-9]*$/)&&(v=parseInt(g)),B(h=a.clone(),er,qs).call(h,t+1,e,v,s,u)}if(this.processFunc){Si(f(s,ke));try{u=await this.processFunc(a,u)}catch(g){(g.throttle==null||typeof g.stall!="number")&&u.makeServerError("error in post-processing function",g).assertOk();let v=f(this,fe).slotInterval*Math.trunc(Math.random()*Math.pow(2,t));return g.stall>=0&&(v=g.stall),B(y=a.clone(),er,qs).call(y,t+1,e,v,s,u)}}return u};let Rn=ca;var hi,pi,mi,Yt,Wr,nr;const el=class el{constructor(t,e,r,s,i){C(this,hi);C(this,pi);C(this,mi);C(this,Yt);C(this,Wr);C(this,nr);b(this,hi,t),b(this,pi,e),b(this,mi,Object.keys(r).reduce((a,o)=>(a[o.toLowerCase()]=String(r[o]),a),{})),b(this,Yt,s==null?null:new Uint8Array(s)),b(this,Wr,i||null),b(this,nr,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${f(this,Yt)?F(f(this,Yt)):"null"}>`}get statusCode(){return f(this,hi)}get statusMessage(){return f(this,pi)}get headers(){return Object.assign({},f(this,mi))}get body(){return f(this,Yt)==null?null:new Uint8Array(f(this,Yt))}get bodyText(){try{return f(this,Yt)==null?"":Zi(f(this,Yt))}catch{T(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{T(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const t=this.headers,e=Object.keys(t);let r=0;return{next:()=>{if(r<e.length){const s=e[r++];return{value:[s,t[s]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(t,e){let r;t?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${t})`:(t=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${t})`);const s=new el(599,r,this.headers,this.body,f(this,Wr)||void 0);return b(s,nr,{message:t,error:e}),s}throwThrottleError(t,e){e==null?e=-1:A(Number.isInteger(e)&&e>=0,"invalid stall timeout","stall",e);const r=new Error(t||"throttling requests");throw Q(r,{stall:e,throttle:!0}),r}getHeader(t){return this.headers[t.toLowerCase()]}hasBody(){return f(this,Yt)!=null}get request(){return f(this,Wr)}ok(){return f(this,nr).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:t,error:e}=f(this,nr);t===""&&(t=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let s=null;try{f(this,Yt)&&(s=Zi(f(this,Yt)))}catch{}T(!1,t,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:e,info:{requestUrl:r,responseBody:s,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};hi=new WeakMap,pi=new WeakMap,mi=new WeakMap,Yt=new WeakMap,Wr=new WeakMap,nr=new WeakMap;let Bn=el;function hl(){return new Date().getTime()}function Sd(n){return Xe(n.replace(/%([0-9a-f][0-9a-f])/gi,(t,e)=>String.fromCharCode(parseInt(e,16))))}function Rd(n){return new Promise(t=>setTimeout(t,n))}const Od=BigInt(-1),le=BigInt(0),Fr=BigInt(1),$d=BigInt(5),Tr={};let zr="0000";for(;zr.length<80;)zr+=zr;function Fn(n){let t=zr;for(;t.length<n;)t+=t;return BigInt("1"+t.substring(0,n))}function js(n,t,e){const r=BigInt(t.width);if(t.signed){const s=Fr<<r-Fr;T(e==null||n>=-s&&n<s,"overflow","NUMERIC_FAULT",{operation:e,fault:"overflow",value:n}),n>le?n=Yi(Jn(n,r),r):n=-Yi(Jn(-n,r),r)}else{const s=Fr<<r;T(e==null||n>=0&&n<s,"overflow","NUMERIC_FAULT",{operation:e,fault:"overflow",value:n}),n=(n%s+s)%s&s-Fr}return n}function Oa(n){typeof n=="number"&&(n=`fixed128x${n}`);let t=!0,e=128,r=18;if(typeof n=="string"){if(n!=="fixed")if(n==="ufixed")t=!1;else{const i=n.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);A(i,"invalid fixed format","format",n),t=i[1]!=="u",e=parseInt(i[2]),r=parseInt(i[3])}}else if(n){const i=n,a=(o,l,u)=>i[o]==null?u:(A(typeof i[o]===l,"invalid fixed format ("+o+" not "+l+")","format."+o,i[o]),i[o]);t=a("signed","boolean",t),e=a("width","number",e),r=a("decimals","number",r)}A(e%8===0,"invalid FixedNumber width (not byte aligned)","format.width",e),A(r<=80,"invalid FixedNumber decimals (too large)","format.decimals",r);const s=(t?"":"u")+"fixed"+String(e)+"x"+String(r);return{signed:t,width:e,decimals:r,name:s}}function Ud(n,t){let e="";n<le&&(e="-",n*=Od);let r=n.toString();if(t===0)return e+r;for(;r.length<=t;)r=zr+r;const s=r.length-t;for(r=r.substring(0,s)+"."+r.substring(s);r[0]==="0"&&r[1]!==".";)r=r.substring(1);for(;r[r.length-1]==="0"&&r[r.length-2]!==".";)r=r.substring(0,r.length-1);return e+r}var he,st,St,nt,Mn,Ue,Wa,Xa,to,eo;const hn=class hn{constructor(t,e,r){C(this,nt);k(this,"format");C(this,he);C(this,st);C(this,St);k(this,"_value");Ei(t,Tr,"FixedNumber"),b(this,st,e),b(this,he,r);const s=Ud(e,r.decimals);Q(this,{format:r.name,_value:s}),b(this,St,Fn(r.decimals))}get signed(){return f(this,he).signed}get width(){return f(this,he).width}get decimals(){return f(this,he).decimals}get value(){return f(this,st)}addUnsafe(t){return B(this,nt,Wa).call(this,t)}add(t){return B(this,nt,Wa).call(this,t,"add")}subUnsafe(t){return B(this,nt,Xa).call(this,t)}sub(t){return B(this,nt,Xa).call(this,t,"sub")}mulUnsafe(t){return B(this,nt,to).call(this,t)}mul(t){return B(this,nt,to).call(this,t,"mul")}mulSignal(t){B(this,nt,Mn).call(this,t);const e=f(this,st)*f(t,st);return T(e%f(this,St)===le,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),B(this,nt,Ue).call(this,e/f(this,St),"mulSignal")}divUnsafe(t){return B(this,nt,eo).call(this,t)}div(t){return B(this,nt,eo).call(this,t,"div")}divSignal(t){T(f(t,st)!==le,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),B(this,nt,Mn).call(this,t);const e=f(this,st)*f(this,St);return T(e%f(t,st)===le,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),B(this,nt,Ue).call(this,e/f(t,st),"divSignal")}cmp(t){let e=this.value,r=t.value;const s=this.decimals-t.decimals;return s>0?r*=Fn(s):s<0&&(e*=Fn(-s)),e<r?-1:e>r?1:0}eq(t){return this.cmp(t)===0}lt(t){return this.cmp(t)<0}lte(t){return this.cmp(t)<=0}gt(t){return this.cmp(t)>0}gte(t){return this.cmp(t)>=0}floor(){let t=f(this,st);return f(this,st)<le&&(t-=f(this,St)-Fr),t=f(this,st)/f(this,St)*f(this,St),B(this,nt,Ue).call(this,t,"floor")}ceiling(){let t=f(this,st);return f(this,st)>le&&(t+=f(this,St)-Fr),t=f(this,st)/f(this,St)*f(this,St),B(this,nt,Ue).call(this,t,"ceiling")}round(t){if(t==null&&(t=0),t>=this.decimals)return this;const e=this.decimals-t,r=$d*Fn(e-1);let s=this.value+r;const i=Fn(e);return s=s/i*i,js(s,f(this,he),"round"),new hn(Tr,s,f(this,he))}isZero(){return f(this,st)===le}isNegative(){return f(this,st)<le}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(t){return hn.fromString(this.toString(),t)}static fromValue(t,e,r){const s=e==null?0:K(e),i=Oa(r);let a=H(t,"value");const o=s-i.decimals;if(o>0){const l=Fn(o);T(a%l===le,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:t}),a/=l}else o<0&&(a*=Fn(-o));return js(a,i,"fromValue"),new hn(Tr,a,i)}static fromString(t,e){const r=t.match(/^(-?)([0-9]*)\.?([0-9]*)$/);A(r&&r[2].length+r[3].length>0,"invalid FixedNumber string value","value",t);const s=Oa(e);let i=r[2]||"0",a=r[3]||"";for(;a.length<s.decimals;)a+=zr;T(a.substring(s.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:t}),a=a.substring(0,s.decimals);const o=BigInt(r[1]+i+a);return js(o,s,"fromString"),new hn(Tr,o,s)}static fromBytes(t,e){let r=ba(q(t,"value"));const s=Oa(e);return s.signed&&(r=Yi(r,s.width)),js(r,s,"fromBytes"),new hn(Tr,r,s)}};he=new WeakMap,st=new WeakMap,St=new WeakMap,nt=new WeakSet,Mn=function(t){A(this.format===t.format,"incompatible format; use fixedNumber.toFormat","other",t)},Ue=function(t,e){return t=js(t,f(this,he),e),new hn(Tr,t,f(this,he))},Wa=function(t,e){return B(this,nt,Mn).call(this,t),B(this,nt,Ue).call(this,f(this,st)+f(t,st),e)},Xa=function(t,e){return B(this,nt,Mn).call(this,t),B(this,nt,Ue).call(this,f(this,st)-f(t,st),e)},to=function(t,e){return B(this,nt,Mn).call(this,t),B(this,nt,Ue).call(this,f(this,st)*f(t,st)/f(this,St),e)},eo=function(t,e){return T(f(t,st)!==le,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),B(this,nt,Mn).call(this,t),B(this,nt,Ue).call(this,f(this,st)*f(this,St)/f(t,st),e)};let Za=hn;function Dd(n){let t=n.toString(16);for(;t.length<2;)t="0"+t;return"0x"+t}function pl(n,t,e){let r=0;for(let s=0;s<e;s++)r=r*256+n[t+s];return r}function ml(n,t,e,r){const s=[];for(;e<t+1+r;){const i=Bc(n,e);s.push(i.result),e+=i.consumed,T(e<=t+1+r,"child data too short","BUFFER_OVERRUN",{buffer:n,length:r,offset:t})}return{consumed:1+r,result:s}}function Bc(n,t){T(n.length!==0,"data too short","BUFFER_OVERRUN",{buffer:n,length:0,offset:1});const e=r=>{T(r<=n.length,"data short segment too short","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:r})};if(n[t]>=248){const r=n[t]-247;e(t+1+r);const s=pl(n,t+1,r);return e(t+1+r+s),ml(n,t,t+1+r,r+s)}else if(n[t]>=192){const r=n[t]-192;return e(t+1+r),ml(n,t,t+1,r)}else if(n[t]>=184){const r=n[t]-183;e(t+1+r);const s=pl(n,t+1,r);e(t+1+r+s);const i=F(n.slice(t+1+r,t+1+r+s));return{consumed:1+r+s,result:i}}else if(n[t]>=128){const r=n[t]-128;e(t+1+r);const s=F(n.slice(t+1,t+1+r));return{consumed:1+r,result:s}}return{consumed:1,result:Dd(n[t])}}function Ci(n){const t=q(n,"data"),e=Bc(t,0);return A(e.consumed===t.length,"unexpected junk after rlp payload","data",n),e.result}function gl(n){const t=[];for(;n;)t.unshift(n&255),n>>=8;return t}function Sc(n){if(Array.isArray(n)){let r=[];if(n.forEach(function(i){r=r.concat(Sc(i))}),r.length<=55)return r.unshift(192+r.length),r;const s=gl(r.length);return s.unshift(247+s.length),s.concat(r)}const t=Array.prototype.slice.call(q(n,"object"));if(t.length===1&&t[0]<=127)return t;if(t.length<=55)return t.unshift(128+t.length),t;const e=gl(t.length);return e.unshift(183+e.length),e.concat(t)}const yl="0123456789abcdef";function On(n){let t="0x";for(const e of Sc(n))t+=yl[e>>4],t+=yl[e&15];return t}function Fd(n,t){A(typeof n=="string","value must be a string","value",n);let e=18;return e=K(t,"unit"),Za.fromString(n,{decimals:e,width:512}).value}const Ut=32,no=new Uint8Array(Ut),Ld=["then"],Ri={},Rc=new WeakMap;function Gn(n){return Rc.get(n)}function bl(n,t){Rc.set(n,t)}function Vs(n,t){const e=new Error(`deferred error during ABI decoding triggered accessing ${n}`);throw e.error=t,e}function ro(n,t,e){return n.indexOf(null)>=0?t.map((r,s)=>r instanceof Rs?ro(Gn(r),r,e):r):n.reduce((r,s,i)=>{let a=t.getValue(s);return s in r||(e&&a instanceof Rs&&(a=ro(Gn(a),a,e)),r[s]=a),r},{})}var Xr;const Lr=class Lr extends Array{constructor(...e){const r=e[0];let s=e[1],i=(e[2]||[]).slice(),a=!0;r!==Ri&&(s=e,i=[],a=!1);super(s.length);C(this,Xr);s.forEach((u,d)=>{this[d]=u});const o=i.reduce((u,d)=>(typeof d=="string"&&u.set(d,(u.get(d)||0)+1),u),new Map);if(bl(this,Object.freeze(s.map((u,d)=>{const h=i[d];return h!=null&&o.get(h)===1?h:null}))),b(this,Xr,[]),f(this,Xr)==null&&f(this,Xr),!a)return;Object.freeze(this);const l=new Proxy(this,{get:(u,d,h)=>{if(typeof d=="string"){if(d.match(/^[0-9]+$/)){const g=K(d,"%index");if(g<0||g>=this.length)throw new RangeError("out of result range");const v=u[g];return v instanceof Error&&Vs(`index ${g}`,v),v}if(Ld.indexOf(d)>=0)return Reflect.get(u,d,h);const y=u[d];if(y instanceof Function)return function(...g){return y.apply(this===h?u:this,g)};if(!(d in u))return u.getValue.apply(this===h?u:this,[d])}return Reflect.get(u,d,h)}});return bl(l,Gn(this)),l}toArray(e){const r=[];return this.forEach((s,i)=>{s instanceof Error&&Vs(`index ${i}`,s),e&&s instanceof Lr&&(s=s.toArray(e)),r.push(s)}),r}toObject(e){const r=Gn(this);return r.reduce((s,i,a)=>(T(i!=null,`value at index ${a} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),ro(r,this,e)),{})}slice(e,r){e==null&&(e=0),e<0&&(e+=this.length,e<0&&(e=0)),r==null&&(r=this.length),r<0&&(r+=this.length,r<0&&(r=0)),r>this.length&&(r=this.length);const s=Gn(this),i=[],a=[];for(let o=e;o<r;o++)i.push(this[o]),a.push(s[o]);return new Lr(Ri,i,a)}filter(e,r){const s=Gn(this),i=[],a=[];for(let o=0;o<this.length;o++){const l=this[o];l instanceof Error&&Vs(`index ${o}`,l),e.call(r,l,o,this)&&(i.push(l),a.push(s[o]))}return new Lr(Ri,i,a)}map(e,r){const s=[];for(let i=0;i<this.length;i++){const a=this[i];a instanceof Error&&Vs(`index ${i}`,a),s.push(e.call(r,a,i,this))}return s}getValue(e){const r=Gn(this).indexOf(e);if(r===-1)return;const s=this[r];return s instanceof Error&&Vs(`property ${JSON.stringify(e)}`,s.error),s}static fromItems(e,r){return new Lr(Ri,e,r)}};Xr=new WeakMap;let Rs=Lr;function wl(n){let t=bt(n);return T(t.length<=Ut,"value out-of-bounds","BUFFER_OVERRUN",{buffer:t,length:Ut,offset:t.length}),t.length!==Ut&&(t=$t(pt([no.slice(t.length%Ut),t]))),t}class rn{constructor(t,e,r,s){k(this,"name");k(this,"type");k(this,"localName");k(this,"dynamic");Q(this,{name:t,type:e,localName:r,dynamic:s},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(t,e){A(!1,t,this.localName,e)}}var Ge,rr,ts,Mi;class so{constructor(){C(this,ts);C(this,Ge);C(this,rr);b(this,Ge,[]),b(this,rr,0)}get data(){return pt(f(this,Ge))}get length(){return f(this,rr)}appendWriter(t){return B(this,ts,Mi).call(this,$t(t.data))}writeBytes(t){let e=$t(t);const r=e.length%Ut;return r&&(e=$t(pt([e,no.slice(r)]))),B(this,ts,Mi).call(this,e)}writeValue(t){return B(this,ts,Mi).call(this,wl(t))}writeUpdatableValue(){const t=f(this,Ge).length;return f(this,Ge).push(no),b(this,rr,f(this,rr)+Ut),e=>{f(this,Ge)[t]=wl(e)}}}Ge=new WeakMap,rr=new WeakMap,ts=new WeakSet,Mi=function(t){return f(this,Ge).push(t),b(this,rr,f(this,rr)+t.length),t.length};var Lt,Zt,sr,ir,gn,kr,ao,Oc;const nl=class nl{constructor(t,e,r){C(this,kr);k(this,"allowLoose");C(this,Lt);C(this,Zt);C(this,sr);C(this,ir);C(this,gn);Q(this,{allowLoose:!!e}),b(this,Lt,$t(t)),b(this,sr,0),b(this,ir,null),b(this,gn,r??1024),b(this,Zt,0)}get data(){return F(f(this,Lt))}get dataLength(){return f(this,Lt).length}get consumed(){return f(this,Zt)}get bytes(){return new Uint8Array(f(this,Lt))}subReader(t){const e=new nl(f(this,Lt).slice(f(this,Zt)+t),this.allowLoose,f(this,gn));return b(e,ir,this),e}readBytes(t,e){let r=B(this,kr,Oc).call(this,0,t,!!e);return B(this,kr,ao).call(this,t),b(this,Zt,f(this,Zt)+r.length),r.slice(0,t)}readValue(){return ba(this.readBytes(Ut))}readIndex(){return bd(this.readBytes(Ut))}};Lt=new WeakMap,Zt=new WeakMap,sr=new WeakMap,ir=new WeakMap,gn=new WeakMap,kr=new WeakSet,ao=function(t){var e;if(f(this,ir))return B(e=f(this,ir),kr,ao).call(e,t);b(this,sr,f(this,sr)+t),T(f(this,gn)<1||f(this,sr)<=f(this,gn)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${f(this,gn)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:$t(f(this,Lt)),offset:f(this,Zt),length:t,info:{bytesRead:f(this,sr),dataLength:this.dataLength}})},Oc=function(t,e,r){let s=Math.ceil(e/Ut)*Ut;return f(this,Zt)+s>f(this,Lt).length&&(this.allowLoose&&r&&f(this,Zt)+e<=f(this,Lt).length?s=e:T(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:$t(f(this,Lt)),length:f(this,Lt).length,offset:f(this,Zt)+s})),f(this,Lt).slice(f(this,Zt),f(this,Zt)+s)};let io=nl;function Wi(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function Fo(n,...t){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(n.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${n.length}`)}function Md(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Wi(n.outputLen),Wi(n.blockLen)}function Os(n,t=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(t&&n.finished)throw new Error("Hash#digest() has already been called")}function $c(n,t){Fo(n);const e=t.outputLen;if(n.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}const $a=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Uc=n=>n instanceof Uint8Array,Hd=n=>new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4)),Ua=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),Ae=(n,t)=>n<<32-t|n>>>t,Gd=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Gd)throw new Error("Non little-endian hardware is not supported");function zd(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function wa(n){if(typeof n=="string"&&(n=zd(n)),!Uc(n))throw new Error(`expected Uint8Array, got ${typeof n}`);return n}function Qd(...n){const t=new Uint8Array(n.reduce((r,s)=>r+s.length,0));let e=0;return n.forEach(r=>{if(!Uc(r))throw new Error("Uint8Array expected");t.set(r,e),e+=r.length}),t}class Lo{clone(){return this._cloneInto()}}function Mo(n){const t=r=>n().update(wa(r)).digest(),e=n();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>n(),t}function jd(n=32){if($a&&typeof $a.getRandomValues=="function")return $a.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}class Dc extends Lo{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,Md(t);const r=wa(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?t.create().update(r).digest():r);for(let a=0;a<i.length;a++)i[a]^=54;this.iHash.update(i),this.oHash=t.create();for(let a=0;a<i.length;a++)i[a]^=106;this.oHash.update(i),i.fill(0)}update(t){return Os(this),this.iHash.update(t),this}digestInto(t){Os(this),Fo(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:r,finished:s,destroyed:i,blockLen:a,outputLen:o}=this;return t=t,t.finished=s,t.destroyed=i,t.blockLen=a,t.outputLen=o,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Fc=(n,t,e)=>new Dc(n,t).update(e).digest();Fc.create=(n,t)=>new Dc(n,t);function Vd(n,t,e,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(t,e,r);const s=BigInt(32),i=BigInt(4294967295),a=Number(e>>s&i),o=Number(e&i),l=r?4:0,u=r?0:4;n.setUint32(t+l,a,r),n.setUint32(t+u,o,r)}class Lc extends Lo{constructor(t,e,r,s){super(),this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Ua(this.buffer)}update(t){Os(this);const{view:e,buffer:r,blockLen:s}=this;t=wa(t);const i=t.length;for(let a=0;a<i;){const o=Math.min(s-this.pos,i-a);if(o===s){const l=Ua(t);for(;s<=i-a;a+=s)this.process(l,a);continue}r.set(t.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===s&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Os(this),$c(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:s,isLE:i}=this;let{pos:a}=this;e[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>s-a&&(this.process(r,0),a=0);for(let h=a;h<s;h++)e[h]=0;Vd(r,s-8,BigInt(this.length*8),i),this.process(r,0);const o=Ua(t),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,d=this.get();if(u>d.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<u;h++)o.setUint32(4*h,d[h],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:s,finished:i,destroyed:a,pos:o}=this;return t.length=s,t.pos=o,t.finished=i,t.destroyed=a,s%e&&t.buffer.set(r),t}}const Jd=(n,t,e)=>n&t^~n&e,Kd=(n,t,e)=>n&t^n&e^t&e,qd=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ln=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),cn=new Uint32Array(64);class Yd extends Lc{constructor(){super(64,32,8,!1),this.A=ln[0]|0,this.B=ln[1]|0,this.C=ln[2]|0,this.D=ln[3]|0,this.E=ln[4]|0,this.F=ln[5]|0,this.G=ln[6]|0,this.H=ln[7]|0}get(){const{A:t,B:e,C:r,D:s,E:i,F:a,G:o,H:l}=this;return[t,e,r,s,i,a,o,l]}set(t,e,r,s,i,a,o,l){this.A=t|0,this.B=e|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=a|0,this.G=o|0,this.H=l|0}process(t,e){for(let h=0;h<16;h++,e+=4)cn[h]=t.getUint32(e,!1);for(let h=16;h<64;h++){const y=cn[h-15],g=cn[h-2],v=Ae(y,7)^Ae(y,18)^y>>>3,w=Ae(g,17)^Ae(g,19)^g>>>10;cn[h]=w+cn[h-7]+v+cn[h-16]|0}let{A:r,B:s,C:i,D:a,E:o,F:l,G:u,H:d}=this;for(let h=0;h<64;h++){const y=Ae(o,6)^Ae(o,11)^Ae(o,25),g=d+y+Jd(o,l,u)+qd[h]+cn[h]|0,w=(Ae(r,2)^Ae(r,13)^Ae(r,22))+Kd(r,s,i)|0;d=u,u=l,l=o,o=a+g|0,a=i,i=s,s=r,r=g+w|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,a=a+this.D|0,o=o+this.E|0,l=l+this.F|0,u=u+this.G|0,d=d+this.H|0,this.set(r,s,i,a,o,l,u,d)}roundClean(){cn.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Mc=Mo(()=>new Yd),Oi=BigInt(2**32-1),oo=BigInt(32);function Hc(n,t=!1){return t?{h:Number(n&Oi),l:Number(n>>oo&Oi)}:{h:Number(n>>oo&Oi)|0,l:Number(n&Oi)|0}}function Gc(n,t=!1){let e=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let s=0;s<n.length;s++){const{h:i,l:a}=Hc(n[s],t);[e[s],r[s]]=[i,a]}return[e,r]}const Zd=(n,t)=>BigInt(n>>>0)<<oo|BigInt(t>>>0),Wd=(n,t,e)=>n>>>e,Xd=(n,t,e)=>n<<32-e|t>>>e,tf=(n,t,e)=>n>>>e|t<<32-e,ef=(n,t,e)=>n<<32-e|t>>>e,nf=(n,t,e)=>n<<64-e|t>>>e-32,rf=(n,t,e)=>n>>>e-32|t<<64-e,sf=(n,t)=>t,af=(n,t)=>n,zc=(n,t,e)=>n<<e|t>>>32-e,Qc=(n,t,e)=>t<<e|n>>>32-e,jc=(n,t,e)=>t<<e-32|n>>>64-e,Vc=(n,t,e)=>n<<e-32|t>>>64-e;function of(n,t,e,r){const s=(t>>>0)+(r>>>0);return{h:n+e+(s/2**32|0)|0,l:s|0}}const lf=(n,t,e)=>(n>>>0)+(t>>>0)+(e>>>0),cf=(n,t,e,r)=>t+e+r+(n/2**32|0)|0,uf=(n,t,e,r)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0),df=(n,t,e,r,s)=>t+e+r+s+(n/2**32|0)|0,ff=(n,t,e,r,s)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0)+(s>>>0),hf=(n,t,e,r,s,i)=>t+e+r+s+i+(n/2**32|0)|0,J={fromBig:Hc,split:Gc,toBig:Zd,shrSH:Wd,shrSL:Xd,rotrSH:tf,rotrSL:ef,rotrBH:nf,rotrBL:rf,rotr32H:sf,rotr32L:af,rotlSH:zc,rotlSL:Qc,rotlBH:jc,rotlBL:Vc,add:of,add3L:lf,add3H:cf,add4L:uf,add4H:df,add5H:hf,add5L:ff},[pf,mf]=J.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),un=new Uint32Array(80),dn=new Uint32Array(80);class gf extends Lc{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:r,Bl:s,Ch:i,Cl:a,Dh:o,Dl:l,Eh:u,El:d,Fh:h,Fl:y,Gh:g,Gl:v,Hh:w,Hl:x}=this;return[t,e,r,s,i,a,o,l,u,d,h,y,g,v,w,x]}set(t,e,r,s,i,a,o,l,u,d,h,y,g,v,w,x){this.Ah=t|0,this.Al=e|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=a|0,this.Dh=o|0,this.Dl=l|0,this.Eh=u|0,this.El=d|0,this.Fh=h|0,this.Fl=y|0,this.Gh=g|0,this.Gl=v|0,this.Hh=w|0,this.Hl=x|0}process(t,e){for(let I=0;I<16;I++,e+=4)un[I]=t.getUint32(e),dn[I]=t.getUint32(e+=4);for(let I=16;I<80;I++){const U=un[I-15]|0,R=dn[I-15]|0,N=J.rotrSH(U,R,1)^J.rotrSH(U,R,8)^J.shrSH(U,R,7),S=J.rotrSL(U,R,1)^J.rotrSL(U,R,8)^J.shrSL(U,R,7),D=un[I-2]|0,z=dn[I-2]|0,V=J.rotrSH(D,z,19)^J.rotrBH(D,z,61)^J.shrSH(D,z,6),j=J.rotrSL(D,z,19)^J.rotrBL(D,z,61)^J.shrSL(D,z,6),W=J.add4L(S,j,dn[I-7],dn[I-16]),at=J.add4H(W,N,V,un[I-7],un[I-16]);un[I]=at|0,dn[I]=W|0}let{Ah:r,Al:s,Bh:i,Bl:a,Ch:o,Cl:l,Dh:u,Dl:d,Eh:h,El:y,Fh:g,Fl:v,Gh:w,Gl:x,Hh:E,Hl:P}=this;for(let I=0;I<80;I++){const U=J.rotrSH(h,y,14)^J.rotrSH(h,y,18)^J.rotrBH(h,y,41),R=J.rotrSL(h,y,14)^J.rotrSL(h,y,18)^J.rotrBL(h,y,41),N=h&g^~h&w,S=y&v^~y&x,D=J.add5L(P,R,S,mf[I],dn[I]),z=J.add5H(D,E,U,N,pf[I],un[I]),V=D|0,j=J.rotrSH(r,s,28)^J.rotrBH(r,s,34)^J.rotrBH(r,s,39),W=J.rotrSL(r,s,28)^J.rotrBL(r,s,34)^J.rotrBL(r,s,39),at=r&i^r&o^i&o,wt=s&a^s&l^a&l;E=w|0,P=x|0,w=g|0,x=v|0,g=h|0,v=y|0,{h,l:y}=J.add(u|0,d|0,z|0,V|0),u=o|0,d=l|0,o=i|0,l=a|0,i=r|0,a=s|0;const O=J.add3L(V,W,wt);r=J.add3H(O,z,j,at),s=O|0}({h:r,l:s}=J.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:a}=J.add(this.Bh|0,this.Bl|0,i|0,a|0),{h:o,l}=J.add(this.Ch|0,this.Cl|0,o|0,l|0),{h:u,l:d}=J.add(this.Dh|0,this.Dl|0,u|0,d|0),{h,l:y}=J.add(this.Eh|0,this.El|0,h|0,y|0),{h:g,l:v}=J.add(this.Fh|0,this.Fl|0,g|0,v|0),{h:w,l:x}=J.add(this.Gh|0,this.Gl|0,w|0,x|0),{h:E,l:P}=J.add(this.Hh|0,this.Hl|0,E|0,P|0),this.set(r,s,i,a,o,l,u,d,h,y,g,v,w,x,E,P)}roundClean(){un.fill(0),dn.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const yf=Mo(()=>new gf);function bf(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const vl=bf();vl.crypto||vl.msCrypto;function wf(n){switch(n){case"sha256":return Mc.create();case"sha512":return yf.create()}A(!1,"invalid hashing algorithm name","algorithm",n)}const[Jc,Kc,qc]=[[],[],[]],vf=BigInt(0),Js=BigInt(1),Af=BigInt(2),xf=BigInt(7),kf=BigInt(256),_f=BigInt(113);for(let n=0,t=Js,e=1,r=0;n<24;n++){[e,r]=[r,(2*e+3*r)%5],Jc.push(2*(5*r+e)),Kc.push((n+1)*(n+2)/2%64);let s=vf;for(let i=0;i<7;i++)t=(t<<Js^(t>>xf)*_f)%kf,t&Af&&(s^=Js<<(Js<<BigInt(i))-Js);qc.push(s)}const[Ef,Cf]=Gc(qc,!0),Al=(n,t,e)=>e>32?jc(n,t,e):zc(n,t,e),xl=(n,t,e)=>e>32?Vc(n,t,e):Qc(n,t,e);function Pf(n,t=24){const e=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let a=0;a<10;a++)e[a]=n[a]^n[a+10]^n[a+20]^n[a+30]^n[a+40];for(let a=0;a<10;a+=2){const o=(a+8)%10,l=(a+2)%10,u=e[l],d=e[l+1],h=Al(u,d,1)^e[o],y=xl(u,d,1)^e[o+1];for(let g=0;g<50;g+=10)n[a+g]^=h,n[a+g+1]^=y}let s=n[2],i=n[3];for(let a=0;a<24;a++){const o=Kc[a],l=Al(s,i,o),u=xl(s,i,o),d=Jc[a];s=n[d],i=n[d+1],n[d]=l,n[d+1]=u}for(let a=0;a<50;a+=10){for(let o=0;o<10;o++)e[o]=n[a+o];for(let o=0;o<10;o++)n[a+o]^=~e[(o+2)%10]&e[(o+4)%10]}n[0]^=Ef[r],n[1]^=Cf[r]}e.fill(0)}class Ho extends Lo{constructor(t,e,r,s=!1,i=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Wi(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Hd(this.state)}keccak(){Pf(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){Os(this);const{blockLen:e,state:r}=this;t=wa(t);const s=t.length;for(let i=0;i<s;){const a=Math.min(e-this.pos,s-i);for(let o=0;o<a;o++)r[this.pos++]^=t[i++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:r,blockLen:s}=this;t[r]^=e,e&128&&r===s-1&&this.keccak(),t[s-1]^=128,this.keccak()}writeInto(t){Os(this,!1),Fo(t),this.finish();const e=this.state,{blockLen:r}=this;for(let s=0,i=t.length;s<i;){this.posOut>=r&&this.keccak();const a=Math.min(r-this.posOut,i-s);t.set(e.subarray(this.posOut,this.posOut+a),s),this.posOut+=a,s+=a}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Wi(t),this.xofInto(new Uint8Array(t))}digestInto(t){if($c(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:e,suffix:r,outputLen:s,rounds:i,enableXOF:a}=this;return t||(t=new Ho(e,r,s,a,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=r,t.outputLen=s,t.enableXOF=a,t.destroyed=this.destroyed,t}}const If=(n,t,e)=>Mo(()=>new Ho(t,n,e)),Nf=If(1,136,256/8);let Yc=!1;const Zc=function(n){return Nf(n)};let Wc=Zc;function yt(n){const t=q(n,"data");return F(Wc(t))}yt._=Zc;yt.lock=function(){Yc=!0};yt.register=function(n){if(Yc)throw new TypeError("keccak256 is locked");Wc=n};Object.freeze(yt);const Xc=function(n){return wf("sha256").update(n).digest()};let tu=Xc,eu=!1;function Hs(n){const t=q(n,"data");return F(tu(t))}Hs._=Xc;Hs.lock=function(){eu=!0};Hs.register=function(n){if(eu)throw new Error("sha256 is locked");tu=n};Object.freeze(Hs);Object.freeze(Hs);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const nu=BigInt(0),va=BigInt(1),Tf=BigInt(2),Aa=n=>n instanceof Uint8Array,Bf=Array.from({length:256},(n,t)=>t.toString(16).padStart(2,"0"));function $s(n){if(!Aa(n))throw new Error("Uint8Array expected");let t="";for(let e=0;e<n.length;e++)t+=Bf[n[e]];return t}function ru(n){const t=n.toString(16);return t.length&1?`0${t}`:t}function Go(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return BigInt(n===""?"0":`0x${n}`)}function Us(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const t=n.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const e=new Uint8Array(t/2);for(let r=0;r<e.length;r++){const s=r*2,i=n.slice(s,s+2),a=Number.parseInt(i,16);if(Number.isNaN(a)||a<0)throw new Error("Invalid byte sequence");e[r]=a}return e}function yr(n){return Go($s(n))}function zo(n){if(!Aa(n))throw new Error("Uint8Array expected");return Go($s(Uint8Array.from(n).reverse()))}function Ds(n,t){return Us(n.toString(16).padStart(t*2,"0"))}function Qo(n,t){return Ds(n,t).reverse()}function Sf(n){return Us(ru(n))}function ue(n,t,e){let r;if(typeof t=="string")try{r=Us(t)}catch(i){throw new Error(`${n} must be valid hex string, got "${t}". Cause: ${i}`)}else if(Aa(t))r=Uint8Array.from(t);else throw new Error(`${n} must be hex string or Uint8Array`);const s=r.length;if(typeof e=="number"&&s!==e)throw new Error(`${n} expected ${e} bytes, got ${s}`);return r}function ni(...n){const t=new Uint8Array(n.reduce((r,s)=>r+s.length,0));let e=0;return n.forEach(r=>{if(!Aa(r))throw new Error("Uint8Array expected");t.set(r,e),e+=r.length}),t}function Rf(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;e++)if(n[e]!==t[e])return!1;return!0}function Of(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function $f(n){let t;for(t=0;n>nu;n>>=va,t+=1);return t}function Uf(n,t){return n>>BigInt(t)&va}const Df=(n,t,e)=>n|(e?va:nu)<<BigInt(t),jo=n=>(Tf<<BigInt(n-1))-va,Da=n=>new Uint8Array(n),kl=n=>Uint8Array.from(n);function su(n,t,e){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");let r=Da(n),s=Da(n),i=0;const a=()=>{r.fill(1),s.fill(0),i=0},o=(...h)=>e(s,r,...h),l=(h=Da())=>{s=o(kl([0]),h),r=o(),h.length!==0&&(s=o(kl([1]),h),r=o())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const y=[];for(;h<t;){r=o();const g=r.slice();y.push(g),h+=r.length}return ni(...y)};return(h,y)=>{a(),l(h);let g;for(;!(g=y(u()));)l();return a(),g}}const Ff={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||n instanceof Uint8Array,isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,t)=>t.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function Pi(n,t,e={}){const r=(s,i,a)=>{const o=Ff[i];if(typeof o!="function")throw new Error(`Invalid validator "${i}", expected function`);const l=n[s];if(!(a&&l===void 0)&&!o(l,n))throw new Error(`Invalid param ${String(s)}=${l} (${typeof l}), expected ${i}`)};for(const[s,i]of Object.entries(t))r(s,i,!1);for(const[s,i]of Object.entries(e))r(s,i,!0);return n}const Lf=Object.freeze(Object.defineProperty({__proto__:null,bitGet:Uf,bitLen:$f,bitMask:jo,bitSet:Df,bytesToHex:$s,bytesToNumberBE:yr,bytesToNumberLE:zo,concatBytes:ni,createHmacDrbg:su,ensureBytes:ue,equalBytes:Rf,hexToBytes:Us,hexToNumber:Go,numberToBytesBE:Ds,numberToBytesLE:Qo,numberToHexUnpadded:ru,numberToVarBytesBE:Sf,utf8ToBytes:Of,validateObject:Pi},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const kt=BigInt(0),gt=BigInt(1),zn=BigInt(2),Mf=BigInt(3),lo=BigInt(4),_l=BigInt(5),El=BigInt(8);BigInt(9);BigInt(16);function Ht(n,t){const e=n%t;return e>=kt?e:t+e}function Hf(n,t,e){if(e<=kt||t<kt)throw new Error("Expected power/modulo > 0");if(e===gt)return kt;let r=gt;for(;t>kt;)t&gt&&(r=r*n%e),n=n*n%e,t>>=gt;return r}function Xt(n,t,e){let r=n;for(;t-- >kt;)r*=r,r%=e;return r}function co(n,t){if(n===kt||t<=kt)throw new Error(`invert: expected positive integers, got n=${n} mod=${t}`);let e=Ht(n,t),r=t,s=kt,i=gt;for(;e!==kt;){const o=r/e,l=r%e,u=s-i*o;r=e,e=l,s=i,i=u}if(r!==gt)throw new Error("invert: does not exist");return Ht(s,t)}function Gf(n){const t=(n-gt)/zn;let e,r,s;for(e=n-gt,r=0;e%zn===kt;e/=zn,r++);for(s=zn;s<n&&Hf(s,t,n)!==n-gt;s++);if(r===1){const a=(n+gt)/lo;return function(l,u){const d=l.pow(u,a);if(!l.eql(l.sqr(d),u))throw new Error("Cannot find square root");return d}}const i=(e+gt)/zn;return function(o,l){if(o.pow(l,t)===o.neg(o.ONE))throw new Error("Cannot find square root");let u=r,d=o.pow(o.mul(o.ONE,s),e),h=o.pow(l,i),y=o.pow(l,e);for(;!o.eql(y,o.ONE);){if(o.eql(y,o.ZERO))return o.ZERO;let g=1;for(let w=o.sqr(y);g<u&&!o.eql(w,o.ONE);g++)w=o.sqr(w);const v=o.pow(d,gt<<BigInt(u-g-1));d=o.sqr(v),h=o.mul(h,v),y=o.mul(y,d),u=g}return h}}function zf(n){if(n%lo===Mf){const t=(n+gt)/lo;return function(r,s){const i=r.pow(s,t);if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}if(n%El===_l){const t=(n-_l)/El;return function(r,s){const i=r.mul(s,zn),a=r.pow(i,t),o=r.mul(s,a),l=r.mul(r.mul(o,zn),a),u=r.mul(o,r.sub(l,r.ONE));if(!r.eql(r.sqr(u),s))throw new Error("Cannot find square root");return u}}return Gf(n)}const Qf=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function jf(n){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},e=Qf.reduce((r,s)=>(r[s]="function",r),t);return Pi(n,e)}function Vf(n,t,e){if(e<kt)throw new Error("Expected power > 0");if(e===kt)return n.ONE;if(e===gt)return t;let r=n.ONE,s=t;for(;e>kt;)e&gt&&(r=n.mul(r,s)),s=n.sqr(s),e>>=gt;return r}function Jf(n,t){const e=new Array(t.length),r=t.reduce((i,a,o)=>n.is0(a)?i:(e[o]=i,n.mul(i,a)),n.ONE),s=n.inv(r);return t.reduceRight((i,a,o)=>n.is0(a)?i:(e[o]=n.mul(i,e[o]),n.mul(i,a)),s),e}function iu(n,t){const e=t!==void 0?t:n.toString(2).length,r=Math.ceil(e/8);return{nBitLength:e,nByteLength:r}}function Kf(n,t,e=!1,r={}){if(n<=kt)throw new Error(`Expected Field ORDER > 0, got ${n}`);const{nBitLength:s,nByteLength:i}=iu(n,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const a=zf(n),o=Object.freeze({ORDER:n,BITS:s,BYTES:i,MASK:jo(s),ZERO:kt,ONE:gt,create:l=>Ht(l,n),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return kt<=l&&l<n},is0:l=>l===kt,isOdd:l=>(l&gt)===gt,neg:l=>Ht(-l,n),eql:(l,u)=>l===u,sqr:l=>Ht(l*l,n),add:(l,u)=>Ht(l+u,n),sub:(l,u)=>Ht(l-u,n),mul:(l,u)=>Ht(l*u,n),pow:(l,u)=>Vf(o,l,u),div:(l,u)=>Ht(l*co(u,n),n),sqrN:l=>l*l,addN:(l,u)=>l+u,subN:(l,u)=>l-u,mulN:(l,u)=>l*u,inv:l=>co(l,n),sqrt:r.sqrt||(l=>a(o,l)),invertBatch:l=>Jf(o,l),cmov:(l,u,d)=>d?u:l,toBytes:l=>e?Qo(l,i):Ds(l,i),fromBytes:l=>{if(l.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${l.length}`);return e?zo(l):yr(l)}});return Object.freeze(o)}function au(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const t=n.toString(2).length;return Math.ceil(t/8)}function ou(n){const t=au(n);return t+Math.ceil(t/2)}function qf(n,t,e=!1){const r=n.length,s=au(t),i=ou(t);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);const a=e?yr(n):zo(n),o=Ht(a,t-gt)+gt;return e?Qo(o,s):Ds(o,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Yf=BigInt(0),Fa=BigInt(1);function Zf(n,t){const e=(s,i)=>{const a=i.negate();return s?a:i},r=s=>{const i=Math.ceil(t/s)+1,a=2**(s-1);return{windows:i,windowSize:a}};return{constTimeNegate:e,unsafeLadder(s,i){let a=n.ZERO,o=s;for(;i>Yf;)i&Fa&&(a=a.add(o)),o=o.double(),i>>=Fa;return a},precomputeWindow(s,i){const{windows:a,windowSize:o}=r(i),l=[];let u=s,d=u;for(let h=0;h<a;h++){d=u,l.push(d);for(let y=1;y<o;y++)d=d.add(u),l.push(d);u=d.double()}return l},wNAF(s,i,a){const{windows:o,windowSize:l}=r(s);let u=n.ZERO,d=n.BASE;const h=BigInt(2**s-1),y=2**s,g=BigInt(s);for(let v=0;v<o;v++){const w=v*l;let x=Number(a&h);a>>=g,x>l&&(x-=y,a+=Fa);const E=w,P=w+Math.abs(x)-1,I=v%2!==0,U=x<0;x===0?d=d.add(e(I,i[E])):u=u.add(e(U,i[P]))}return{p:u,f:d}},wNAFCached(s,i,a,o){const l=s._WINDOW_SIZE||1;let u=i.get(s);return u||(u=this.precomputeWindow(s,l),l!==1&&i.set(s,o(u))),this.wNAF(l,u,a)}}}function lu(n){return jf(n.Fp),Pi(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...iu(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Wf(n){const t=lu(n);Pi(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:e,Fp:r,a:s}=t;if(e){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof e!="object"||typeof e.beta!="bigint"||typeof e.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:Xf,hexToBytes:th}=Lf,Kn={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(n){const{Err:t}=Kn;if(n.length<2||n[0]!==2)throw new t("Invalid signature integer tag");const e=n[1],r=n.subarray(2,e+2);if(!e||r.length!==e)throw new t("Invalid signature integer: wrong length");if(r[0]&128)throw new t("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:Xf(r),l:n.subarray(e+2)}},toSig(n){const{Err:t}=Kn,e=typeof n=="string"?th(n):n;if(!(e instanceof Uint8Array))throw new Error("ui8a expected");let r=e.length;if(r<2||e[0]!=48)throw new t("Invalid signature tag");if(e[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:s,l:i}=Kn._parseInt(e.subarray(2)),{d:a,l:o}=Kn._parseInt(i);if(o.length)throw new t("Invalid signature: left bytes after parsing");return{r:s,s:a}},hexFromSig(n){const t=u=>Number.parseInt(u[0],16)&8?"00"+u:u,e=u=>{const d=u.toString(16);return d.length&1?`0${d}`:d},r=t(e(n.s)),s=t(e(n.r)),i=r.length/2,a=s.length/2,o=e(i),l=e(a);return`30${e(a+i+4)}02${l}${s}02${o}${r}`}},Ze=BigInt(0),ae=BigInt(1);BigInt(2);const Cl=BigInt(3);BigInt(4);function eh(n){const t=Wf(n),{Fp:e}=t,r=t.toBytes||((v,w,x)=>{const E=w.toAffine();return ni(Uint8Array.from([4]),e.toBytes(E.x),e.toBytes(E.y))}),s=t.fromBytes||(v=>{const w=v.subarray(1),x=e.fromBytes(w.subarray(0,e.BYTES)),E=e.fromBytes(w.subarray(e.BYTES,2*e.BYTES));return{x,y:E}});function i(v){const{a:w,b:x}=t,E=e.sqr(v),P=e.mul(E,v);return e.add(e.add(P,e.mul(v,w)),x)}if(!e.eql(e.sqr(t.Gy),i(t.Gx)))throw new Error("bad generator point: equation left != right");function a(v){return typeof v=="bigint"&&Ze<v&&v<t.n}function o(v){if(!a(v))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(v){const{allowedPrivateKeyLengths:w,nByteLength:x,wrapPrivateKey:E,n:P}=t;if(w&&typeof v!="bigint"){if(v instanceof Uint8Array&&(v=$s(v)),typeof v!="string"||!w.includes(v.length))throw new Error("Invalid key");v=v.padStart(x*2,"0")}let I;try{I=typeof v=="bigint"?v:yr(ue("private key",v,x))}catch{throw new Error(`private key must be ${x} bytes, hex or bigint, not ${typeof v}`)}return E&&(I=Ht(I,P)),o(I),I}const u=new Map;function d(v){if(!(v instanceof h))throw new Error("ProjectivePoint expected")}class h{constructor(w,x,E){if(this.px=w,this.py=x,this.pz=E,w==null||!e.isValid(w))throw new Error("x required");if(x==null||!e.isValid(x))throw new Error("y required");if(E==null||!e.isValid(E))throw new Error("z required")}static fromAffine(w){const{x,y:E}=w||{};if(!w||!e.isValid(x)||!e.isValid(E))throw new Error("invalid affine point");if(w instanceof h)throw new Error("projective point not allowed");const P=I=>e.eql(I,e.ZERO);return P(x)&&P(E)?h.ZERO:new h(x,E,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(w){const x=e.invertBatch(w.map(E=>E.pz));return w.map((E,P)=>E.toAffine(x[P])).map(h.fromAffine)}static fromHex(w){const x=h.fromAffine(s(ue("pointHex",w)));return x.assertValidity(),x}static fromPrivateKey(w){return h.BASE.multiply(l(w))}_setWindowSize(w){this._WINDOW_SIZE=w,u.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!e.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:w,y:x}=this.toAffine();if(!e.isValid(w)||!e.isValid(x))throw new Error("bad point: x or y not FE");const E=e.sqr(x),P=i(w);if(!e.eql(E,P))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:w}=this.toAffine();if(e.isOdd)return!e.isOdd(w);throw new Error("Field doesn't support isOdd")}equals(w){d(w);const{px:x,py:E,pz:P}=this,{px:I,py:U,pz:R}=w,N=e.eql(e.mul(x,R),e.mul(I,P)),S=e.eql(e.mul(E,R),e.mul(U,P));return N&&S}negate(){return new h(this.px,e.neg(this.py),this.pz)}double(){const{a:w,b:x}=t,E=e.mul(x,Cl),{px:P,py:I,pz:U}=this;let R=e.ZERO,N=e.ZERO,S=e.ZERO,D=e.mul(P,P),z=e.mul(I,I),V=e.mul(U,U),j=e.mul(P,I);return j=e.add(j,j),S=e.mul(P,U),S=e.add(S,S),R=e.mul(w,S),N=e.mul(E,V),N=e.add(R,N),R=e.sub(z,N),N=e.add(z,N),N=e.mul(R,N),R=e.mul(j,R),S=e.mul(E,S),V=e.mul(w,V),j=e.sub(D,V),j=e.mul(w,j),j=e.add(j,S),S=e.add(D,D),D=e.add(S,D),D=e.add(D,V),D=e.mul(D,j),N=e.add(N,D),V=e.mul(I,U),V=e.add(V,V),D=e.mul(V,j),R=e.sub(R,D),S=e.mul(V,z),S=e.add(S,S),S=e.add(S,S),new h(R,N,S)}add(w){d(w);const{px:x,py:E,pz:P}=this,{px:I,py:U,pz:R}=w;let N=e.ZERO,S=e.ZERO,D=e.ZERO;const z=t.a,V=e.mul(t.b,Cl);let j=e.mul(x,I),W=e.mul(E,U),at=e.mul(P,R),wt=e.add(x,E),O=e.add(I,U);wt=e.mul(wt,O),O=e.add(j,W),wt=e.sub(wt,O),O=e.add(x,P);let G=e.add(I,R);return O=e.mul(O,G),G=e.add(j,at),O=e.sub(O,G),G=e.add(E,P),N=e.add(U,R),G=e.mul(G,N),N=e.add(W,at),G=e.sub(G,N),D=e.mul(z,O),N=e.mul(V,at),D=e.add(N,D),N=e.sub(W,D),D=e.add(W,D),S=e.mul(N,D),W=e.add(j,j),W=e.add(W,j),at=e.mul(z,at),O=e.mul(V,O),W=e.add(W,at),at=e.sub(j,at),at=e.mul(z,at),O=e.add(O,at),j=e.mul(W,O),S=e.add(S,j),j=e.mul(G,O),N=e.mul(wt,N),N=e.sub(N,j),j=e.mul(wt,W),D=e.mul(G,D),D=e.add(D,j),new h(N,S,D)}subtract(w){return this.add(w.negate())}is0(){return this.equals(h.ZERO)}wNAF(w){return g.wNAFCached(this,u,w,x=>{const E=e.invertBatch(x.map(P=>P.pz));return x.map((P,I)=>P.toAffine(E[I])).map(h.fromAffine)})}multiplyUnsafe(w){const x=h.ZERO;if(w===Ze)return x;if(o(w),w===ae)return this;const{endo:E}=t;if(!E)return g.unsafeLadder(this,w);let{k1neg:P,k1:I,k2neg:U,k2:R}=E.splitScalar(w),N=x,S=x,D=this;for(;I>Ze||R>Ze;)I&ae&&(N=N.add(D)),R&ae&&(S=S.add(D)),D=D.double(),I>>=ae,R>>=ae;return P&&(N=N.negate()),U&&(S=S.negate()),S=new h(e.mul(S.px,E.beta),S.py,S.pz),N.add(S)}multiply(w){o(w);let x=w,E,P;const{endo:I}=t;if(I){const{k1neg:U,k1:R,k2neg:N,k2:S}=I.splitScalar(x);let{p:D,f:z}=this.wNAF(R),{p:V,f:j}=this.wNAF(S);D=g.constTimeNegate(U,D),V=g.constTimeNegate(N,V),V=new h(e.mul(V.px,I.beta),V.py,V.pz),E=D.add(V),P=z.add(j)}else{const{p:U,f:R}=this.wNAF(x);E=U,P=R}return h.normalizeZ([E,P])[0]}multiplyAndAddUnsafe(w,x,E){const P=h.BASE,I=(R,N)=>N===Ze||N===ae||!R.equals(P)?R.multiplyUnsafe(N):R.multiply(N),U=I(this,x).add(I(w,E));return U.is0()?void 0:U}toAffine(w){const{px:x,py:E,pz:P}=this,I=this.is0();w==null&&(w=I?e.ONE:e.inv(P));const U=e.mul(x,w),R=e.mul(E,w),N=e.mul(P,w);if(I)return{x:e.ZERO,y:e.ZERO};if(!e.eql(N,e.ONE))throw new Error("invZ was invalid");return{x:U,y:R}}isTorsionFree(){const{h:w,isTorsionFree:x}=t;if(w===ae)return!0;if(x)return x(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:w,clearCofactor:x}=t;return w===ae?this:x?x(h,this):this.multiplyUnsafe(t.h)}toRawBytes(w=!0){return this.assertValidity(),r(h,this,w)}toHex(w=!0){return $s(this.toRawBytes(w))}}h.BASE=new h(t.Gx,t.Gy,e.ONE),h.ZERO=new h(e.ZERO,e.ONE,e.ZERO);const y=t.nBitLength,g=Zf(h,t.endo?Math.ceil(y/2):y);return{CURVE:t,ProjectivePoint:h,normPrivateKeyToScalar:l,weierstrassEquation:i,isWithinCurveOrder:a}}function nh(n){const t=lu(n);return Pi(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function rh(n){const t=nh(n),{Fp:e,n:r}=t,s=e.BYTES+1,i=2*e.BYTES+1;function a(O){return Ze<O&&O<e.ORDER}function o(O){return Ht(O,r)}function l(O){return co(O,r)}const{ProjectivePoint:u,normPrivateKeyToScalar:d,weierstrassEquation:h,isWithinCurveOrder:y}=eh({...t,toBytes(O,G,Z){const ct=G.toAffine(),ot=e.toBytes(ct.x),vt=ni;return Z?vt(Uint8Array.from([G.hasEvenY()?2:3]),ot):vt(Uint8Array.from([4]),ot,e.toBytes(ct.y))},fromBytes(O){const G=O.length,Z=O[0],ct=O.subarray(1);if(G===s&&(Z===2||Z===3)){const ot=yr(ct);if(!a(ot))throw new Error("Point is not on curve");const vt=h(ot);let jt=e.sqrt(vt);const Vt=(jt&ae)===ae;return(Z&1)===1!==Vt&&(jt=e.neg(jt)),{x:ot,y:jt}}else if(G===i&&Z===4){const ot=e.fromBytes(ct.subarray(0,e.BYTES)),vt=e.fromBytes(ct.subarray(e.BYTES,2*e.BYTES));return{x:ot,y:vt}}else throw new Error(`Point of length ${G} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),g=O=>$s(Ds(O,t.nByteLength));function v(O){const G=r>>ae;return O>G}function w(O){return v(O)?o(-O):O}const x=(O,G,Z)=>yr(O.slice(G,Z));class E{constructor(G,Z,ct){this.r=G,this.s=Z,this.recovery=ct,this.assertValidity()}static fromCompact(G){const Z=t.nByteLength;return G=ue("compactSignature",G,Z*2),new E(x(G,0,Z),x(G,Z,2*Z))}static fromDER(G){const{r:Z,s:ct}=Kn.toSig(ue("DER",G));return new E(Z,ct)}assertValidity(){if(!y(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!y(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(G){return new E(this.r,this.s,G)}recoverPublicKey(G){const{r:Z,s:ct,recovery:ot}=this,vt=S(ue("msgHash",G));if(ot==null||![0,1,2,3].includes(ot))throw new Error("recovery id invalid");const jt=ot===2||ot===3?Z+t.n:Z;if(jt>=e.ORDER)throw new Error("recovery id 2 or 3 invalid");const Vt=ot&1?"03":"02",sn=u.fromHex(Vt+g(jt)),an=l(jt),Cr=o(-vt*an),zs=o(ct*an),on=u.BASE.multiplyAndAddUnsafe(sn,Cr,zs);if(!on)throw new Error("point at infinify");return on.assertValidity(),on}hasHighS(){return v(this.s)}normalizeS(){return this.hasHighS()?new E(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return Us(this.toDERHex())}toDERHex(){return Kn.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Us(this.toCompactHex())}toCompactHex(){return g(this.r)+g(this.s)}}const P={isValidPrivateKey(O){try{return d(O),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const O=ou(t.n);return qf(t.randomBytes(O),t.n)},precompute(O=8,G=u.BASE){return G._setWindowSize(O),G.multiply(BigInt(3)),G}};function I(O,G=!0){return u.fromPrivateKey(O).toRawBytes(G)}function U(O){const G=O instanceof Uint8Array,Z=typeof O=="string",ct=(G||Z)&&O.length;return G?ct===s||ct===i:Z?ct===2*s||ct===2*i:O instanceof u}function R(O,G,Z=!0){if(U(O))throw new Error("first arg must be private key");if(!U(G))throw new Error("second arg must be public key");return u.fromHex(G).multiply(d(O)).toRawBytes(Z)}const N=t.bits2int||function(O){const G=yr(O),Z=O.length*8-t.nBitLength;return Z>0?G>>BigInt(Z):G},S=t.bits2int_modN||function(O){return o(N(O))},D=jo(t.nBitLength);function z(O){if(typeof O!="bigint")throw new Error("bigint expected");if(!(Ze<=O&&O<D))throw new Error(`bigint expected < 2^${t.nBitLength}`);return Ds(O,t.nByteLength)}function V(O,G,Z=j){if(["recovered","canonical"].some(Dn=>Dn in Z))throw new Error("sign() legacy options not supported");const{hash:ct,randomBytes:ot}=t;let{lowS:vt,prehash:jt,extraEntropy:Vt}=Z;vt==null&&(vt=!0),O=ue("msgHash",O),jt&&(O=ue("prehashed msgHash",ct(O)));const sn=S(O),an=d(G),Cr=[z(an),z(sn)];if(Vt!=null){const Dn=Vt===!0?ot(e.BYTES):Vt;Cr.push(ue("extraEntropy",Dn))}const zs=ni(...Cr),on=sn;function Ba(Dn){const Pr=N(Dn);if(!y(Pr))return;const sl=l(Pr),Ir=u.BASE.multiply(Pr).toAffine(),oe=o(Ir.x);if(oe===Ze)return;const Nr=o(sl*o(on+oe*an));if(Nr===Ze)return;let il=(Ir.x===oe?0:2)|Number(Ir.y&ae),al=Nr;return vt&&v(Nr)&&(al=w(Nr),il^=1),new E(oe,al,il)}return{seed:zs,k2sig:Ba}}const j={lowS:t.lowS,prehash:!1},W={lowS:t.lowS,prehash:!1};function at(O,G,Z=j){const{seed:ct,k2sig:ot}=V(O,G,Z),vt=t;return su(vt.hash.outputLen,vt.nByteLength,vt.hmac)(ct,ot)}u.BASE._setWindowSize(8);function wt(O,G,Z,ct=W){var Ir;const ot=O;if(G=ue("msgHash",G),Z=ue("publicKey",Z),"strict"in ct)throw new Error("options.strict was renamed to lowS");const{lowS:vt,prehash:jt}=ct;let Vt,sn;try{if(typeof ot=="string"||ot instanceof Uint8Array)try{Vt=E.fromDER(ot)}catch(oe){if(!(oe instanceof Kn.Err))throw oe;Vt=E.fromCompact(ot)}else if(typeof ot=="object"&&typeof ot.r=="bigint"&&typeof ot.s=="bigint"){const{r:oe,s:Nr}=ot;Vt=new E(oe,Nr)}else throw new Error("PARSE");sn=u.fromHex(Z)}catch(oe){if(oe.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(vt&&Vt.hasHighS())return!1;jt&&(G=t.hash(G));const{r:an,s:Cr}=Vt,zs=S(G),on=l(Cr),Ba=o(zs*on),Dn=o(an*on),Pr=(Ir=u.BASE.multiplyAndAddUnsafe(sn,Ba,Dn))==null?void 0:Ir.toAffine();return Pr?o(Pr.x)===an:!1}return{CURVE:t,getPublicKey:I,getSharedSecret:R,sign:at,verify:wt,ProjectivePoint:u,Signature:E,utils:P}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function sh(n){return{hash:n,hmac:(t,...e)=>Fc(n,t,Qd(...e)),randomBytes:jd}}function ih(n,t){const e=r=>rh({...n,...sh(r)});return Object.freeze({...e(t),create:e})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const cu=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Pl=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),ah=BigInt(1),uo=BigInt(2),Il=(n,t)=>(n+t/uo)/t;function oh(n){const t=cu,e=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),a=BigInt(23),o=BigInt(44),l=BigInt(88),u=n*n*n%t,d=u*u*n%t,h=Xt(d,e,t)*d%t,y=Xt(h,e,t)*d%t,g=Xt(y,uo,t)*u%t,v=Xt(g,s,t)*g%t,w=Xt(v,i,t)*v%t,x=Xt(w,o,t)*w%t,E=Xt(x,l,t)*x%t,P=Xt(E,o,t)*w%t,I=Xt(P,e,t)*d%t,U=Xt(I,a,t)*v%t,R=Xt(U,r,t)*u%t,N=Xt(R,uo,t);if(!fo.eql(fo.sqr(N),n))throw new Error("Cannot find square root");return N}const fo=Kf(cu,void 0,void 0,{sqrt:oh}),fn=ih({a:BigInt(0),b:BigInt(7),Fp:fo,n:Pl,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const t=Pl,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-ah*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=e,a=BigInt("0x100000000000000000000000000000000"),o=Il(i*n,t),l=Il(-r*n,t);let u=Ht(n-o*e-l*s,t),d=Ht(-o*r-l*i,t);const h=u>a,y=d>a;if(h&&(u=t-u),y&&(d=t-d),u>a||d>a)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:h,k1:u,k2neg:y,k2:d}}}},Mc);BigInt(0);fn.ProjectivePoint;const ri="0x0000000000000000000000000000000000000000",Nl="0x0000000000000000000000000000000000000000000000000000000000000000",Tl=BigInt(0),Bl=BigInt(1),Sl=BigInt(2),Rl=BigInt(27),Ol=BigInt(28),$i=BigInt(35),Br={};function $l(n){return en(bt(n),32)}var es,_e,ns,ar;const ce=class ce{constructor(t,e,r,s){C(this,es);C(this,_e);C(this,ns);C(this,ar);Ei(t,Br,"Signature"),b(this,es,e),b(this,_e,r),b(this,ns,s),b(this,ar,null)}get r(){return f(this,es)}set r(t){A(Gr(t)===32,"invalid r","value",t),b(this,es,F(t))}get s(){return A(parseInt(f(this,_e).substring(0,3))<8,"non-canonical s; use ._s","s",f(this,_e)),f(this,_e)}set s(t){A(Gr(t)===32,"invalid s","value",t),b(this,_e,F(t))}get _s(){return f(this,_e)}isValid(){return parseInt(f(this,_e).substring(0,3))<8}get v(){return f(this,ns)}set v(t){const e=K(t,"value");A(e===27||e===28,"invalid v","v",t),b(this,ns,e)}get networkV(){return f(this,ar)}get legacyChainId(){const t=this.networkV;return t==null?null:ce.getChainId(t)}get yParity(){return this.v===27?0:1}get yParityAndS(){const t=q(this.s);return this.yParity&&(t[0]|=128),F(t)}get compactSerialized(){return pt([this.r,this.yParityAndS])}get serialized(){return pt([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const t=new ce(Br,this.r,this._s,this.v);return this.networkV&&b(t,ar,this.networkV),t}toJSON(){const t=this.networkV;return{_type:"signature",networkV:t!=null?t.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(t){const e=H(t,"v");return e==Rl||e==Ol?Tl:(A(e>=$i,"invalid EIP-155 v","v",t),(e-$i)/Sl)}static getChainIdV(t,e){return H(t)*Sl+BigInt(35+e-27)}static getNormalizedV(t){const e=H(t);return e===Tl||e===Rl?27:e===Bl||e===Ol?28:(A(e>=$i,"invalid v","v",t),e&Bl?27:28)}static from(t){function e(u,d){A(u,d,"signature",t)}if(t==null)return new ce(Br,Nl,Nl,27);if(typeof t=="string"){const u=q(t,"signature");if(u.length===64){const d=F(u.slice(0,32)),h=u.slice(32,64),y=h[0]&128?28:27;return h[0]&=127,new ce(Br,d,F(h),y)}if(u.length===65){const d=F(u.slice(0,32)),h=F(u.slice(32,64)),y=ce.getNormalizedV(u[64]);return new ce(Br,d,h,y)}e(!1,"invalid raw signature length")}if(t instanceof ce)return t.clone();const r=t.r;e(r!=null,"missing r");const s=$l(r),i=function(u,d){if(u!=null)return $l(u);if(d!=null){e(lt(d,32),"invalid yParityAndS");const h=q(d);return h[0]&=127,F(h)}e(!1,"missing s")}(t.s,t.yParityAndS),{networkV:a,v:o}=function(u,d,h){if(u!=null){const y=H(u);return{networkV:y>=$i?y:void 0,v:ce.getNormalizedV(y)}}if(d!=null)return e(lt(d,32),"invalid yParityAndS"),{v:q(d)[0]&128?28:27};if(h!=null){switch(K(h,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}e(!1,"invalid yParity")}e(!1,"missing v")}(t.v,t.yParityAndS,t.yParity),l=new ce(Br,s,i,o);return a&&b(l,ar,a),e(t.yParity==null||K(t.yParity,"sig.yParity")===l.yParity,"yParity mismatch"),e(t.yParityAndS==null||t.yParityAndS===l.yParityAndS,"yParityAndS mismatch"),l}};es=new WeakMap,_e=new WeakMap,ns=new WeakMap,ar=new WeakMap;let zt=ce;var ze;const Qn=class Qn{constructor(t){C(this,ze);A(Gr(t)===32,"invalid private key","privateKey","[REDACTED]"),b(this,ze,F(t))}get privateKey(){return f(this,ze)}get publicKey(){return Qn.computePublicKey(f(this,ze))}get compressedPublicKey(){return Qn.computePublicKey(f(this,ze),!0)}sign(t){A(Gr(t)===32,"invalid digest length","digest",t);const e=fn.sign($t(t),$t(f(this,ze)),{lowS:!0});return zt.from({r:Sn(e.r,32),s:Sn(e.s,32),v:e.recovery?28:27})}computeSharedSecret(t){const e=Qn.computePublicKey(t);return F(fn.getSharedSecret($t(f(this,ze)),q(e),!1))}static computePublicKey(t,e){let r=q(t,"key");if(r.length===32){const i=fn.getPublicKey(r,!!e);return F(i)}if(r.length===64){const i=new Uint8Array(65);i[0]=4,i.set(r,1),r=i}const s=fn.ProjectivePoint.fromHex(r);return F(s.toRawBytes(e))}static recoverPublicKey(t,e){A(Gr(t)===32,"invalid digest length","digest",t);const r=zt.from(e);let s=fn.Signature.fromCompact($t(pt([r.r,r.s])));s=s.addRecoveryBit(r.yParity);const i=s.recoverPublicKey($t(t));return A(i!=null,"invalid signature for digest","signature",e),"0x"+i.toHex(!1)}static addPoints(t,e,r){const s=fn.ProjectivePoint.fromHex(Qn.computePublicKey(t).substring(2)),i=fn.ProjectivePoint.fromHex(Qn.computePublicKey(e).substring(2));return"0x"+s.add(i).toHex(!!r)}};ze=new WeakMap;let si=Qn;const lh=BigInt(0),ch=BigInt(36);function Ul(n){n=n.toLowerCase();const t=n.substring(2).split(""),e=new Uint8Array(40);for(let s=0;s<40;s++)e[s]=t[s].charCodeAt(0);const r=q(yt(e));for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&(t[s]=t[s].toUpperCase()),(r[s>>1]&15)>=8&&(t[s+1]=t[s+1].toUpperCase());return"0x"+t.join("")}const Vo={};for(let n=0;n<10;n++)Vo[String(n)]=String(n);for(let n=0;n<26;n++)Vo[String.fromCharCode(65+n)]=String(10+n);const Dl=15;function uh(n){n=n.toUpperCase(),n=n.substring(4)+n.substring(0,2)+"00";let t=n.split("").map(r=>Vo[r]).join("");for(;t.length>=Dl;){let r=t.substring(0,Dl);t=parseInt(r,10)%97+t.substring(r.length)}let e=String(98-parseInt(t,10)%97);for(;e.length<2;)e="0"+e;return e}const dh=function(){const n={};for(let t=0;t<36;t++){const e="0123456789abcdefghijklmnopqrstuvwxyz"[t];n[e]=BigInt(t)}return n}();function fh(n){n=n.toLowerCase();let t=lh;for(let e=0;e<n.length;e++)t=t*ch+dh[n[e]];return t}function rt(n){if(A(typeof n=="string","invalid address","address",n),n.match(/^(0x)?[0-9a-fA-F]{40}$/)){n.startsWith("0x")||(n="0x"+n);const t=Ul(n);return A(!n.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||t===n,"bad address checksum","address",n),t}if(n.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){A(n.substring(2,4)===uh(n),"bad icap checksum","address",n);let t=fh(n.substring(4)).toString(16);for(;t.length<40;)t="0"+t;return Ul("0x"+t)}A(!1,"invalid address","address",n)}function hh(n){const t=rt(n.from);let r=H(n.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,rt(ht(yt(On([t,r])),12))}function uu(n){return n&&typeof n.getAddress=="function"}async function La(n,t){const e=await t;return(e==null||e==="0x0000000000000000000000000000000000000000")&&(T(typeof n!="string","unconfigured name","UNCONFIGURED_NAME",{value:n}),A(!1,"invalid AddressLike value; did not resolve to a value address","target",n)),rt(e)}function Dt(n,t){if(typeof n=="string")return n.match(/^0x[0-9a-f]{40}$/i)?rt(n):(T(t!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),La(n,t.resolveName(n)));if(uu(n))return La(n,n.getAddress());if(n&&typeof n.then=="function")return La(n,n);A(!1,"unsupported addressable value","target",n)}const De={};function M(n,t){let e=!1;return t<0&&(e=!0,t*=-1),new Bt(De,`${e?"":"u"}int${t}`,n,{signed:e,width:t})}function et(n,t){return new Bt(De,`bytes${t||""}`,n,{size:t})}const Fl=Symbol.for("_ethers_typed");var or;const Fe=class Fe{constructor(t,e,r,s){k(this,"type");k(this,"value");C(this,or);k(this,"_typedSymbol");s==null&&(s=null),Ei(De,t,"Typed"),Q(this,{_typedSymbol:Fl,type:e,value:r}),b(this,or,s),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(t=>t.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return f(this,or)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return f(this,or)===!0?-1:f(this,or)===!1?this.value.length:null}static from(t,e){return new Fe(De,t,e)}static uint8(t){return M(t,8)}static uint16(t){return M(t,16)}static uint24(t){return M(t,24)}static uint32(t){return M(t,32)}static uint40(t){return M(t,40)}static uint48(t){return M(t,48)}static uint56(t){return M(t,56)}static uint64(t){return M(t,64)}static uint72(t){return M(t,72)}static uint80(t){return M(t,80)}static uint88(t){return M(t,88)}static uint96(t){return M(t,96)}static uint104(t){return M(t,104)}static uint112(t){return M(t,112)}static uint120(t){return M(t,120)}static uint128(t){return M(t,128)}static uint136(t){return M(t,136)}static uint144(t){return M(t,144)}static uint152(t){return M(t,152)}static uint160(t){return M(t,160)}static uint168(t){return M(t,168)}static uint176(t){return M(t,176)}static uint184(t){return M(t,184)}static uint192(t){return M(t,192)}static uint200(t){return M(t,200)}static uint208(t){return M(t,208)}static uint216(t){return M(t,216)}static uint224(t){return M(t,224)}static uint232(t){return M(t,232)}static uint240(t){return M(t,240)}static uint248(t){return M(t,248)}static uint256(t){return M(t,256)}static uint(t){return M(t,256)}static int8(t){return M(t,-8)}static int16(t){return M(t,-16)}static int24(t){return M(t,-24)}static int32(t){return M(t,-32)}static int40(t){return M(t,-40)}static int48(t){return M(t,-48)}static int56(t){return M(t,-56)}static int64(t){return M(t,-64)}static int72(t){return M(t,-72)}static int80(t){return M(t,-80)}static int88(t){return M(t,-88)}static int96(t){return M(t,-96)}static int104(t){return M(t,-104)}static int112(t){return M(t,-112)}static int120(t){return M(t,-120)}static int128(t){return M(t,-128)}static int136(t){return M(t,-136)}static int144(t){return M(t,-144)}static int152(t){return M(t,-152)}static int160(t){return M(t,-160)}static int168(t){return M(t,-168)}static int176(t){return M(t,-176)}static int184(t){return M(t,-184)}static int192(t){return M(t,-192)}static int200(t){return M(t,-200)}static int208(t){return M(t,-208)}static int216(t){return M(t,-216)}static int224(t){return M(t,-224)}static int232(t){return M(t,-232)}static int240(t){return M(t,-240)}static int248(t){return M(t,-248)}static int256(t){return M(t,-256)}static int(t){return M(t,-256)}static bytes1(t){return et(t,1)}static bytes2(t){return et(t,2)}static bytes3(t){return et(t,3)}static bytes4(t){return et(t,4)}static bytes5(t){return et(t,5)}static bytes6(t){return et(t,6)}static bytes7(t){return et(t,7)}static bytes8(t){return et(t,8)}static bytes9(t){return et(t,9)}static bytes10(t){return et(t,10)}static bytes11(t){return et(t,11)}static bytes12(t){return et(t,12)}static bytes13(t){return et(t,13)}static bytes14(t){return et(t,14)}static bytes15(t){return et(t,15)}static bytes16(t){return et(t,16)}static bytes17(t){return et(t,17)}static bytes18(t){return et(t,18)}static bytes19(t){return et(t,19)}static bytes20(t){return et(t,20)}static bytes21(t){return et(t,21)}static bytes22(t){return et(t,22)}static bytes23(t){return et(t,23)}static bytes24(t){return et(t,24)}static bytes25(t){return et(t,25)}static bytes26(t){return et(t,26)}static bytes27(t){return et(t,27)}static bytes28(t){return et(t,28)}static bytes29(t){return et(t,29)}static bytes30(t){return et(t,30)}static bytes31(t){return et(t,31)}static bytes32(t){return et(t,32)}static address(t){return new Fe(De,"address",t)}static bool(t){return new Fe(De,"bool",!!t)}static bytes(t){return new Fe(De,"bytes",t)}static string(t){return new Fe(De,"string",t)}static array(t,e){throw new Error("not implemented yet")}static tuple(t,e){throw new Error("not implemented yet")}static overrides(t){return new Fe(De,"overrides",Object.assign({},t))}static isTyped(t){return t&&typeof t=="object"&&"_typedSymbol"in t&&t._typedSymbol===Fl}static dereference(t,e){if(Fe.isTyped(t)){if(t.type!==e)throw new Error(`invalid type: expecetd ${e}, got ${t.type}`);return t.value}return t}};or=new WeakMap;let Bt=Fe;class ph extends rn{constructor(t){super("address","address",t,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(t,e){let r=Bt.dereference(e,"string");try{r=rt(r)}catch(s){return this._throwError(s.message,e)}return t.writeValue(r)}decode(t){return rt(Sn(t.readValue(),20))}}class mh extends rn{constructor(e){super(e.name,e.type,"_",e.dynamic);k(this,"coder");this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,r){return this.coder.encode(e,r)}decode(e){return this.coder.decode(e)}}function du(n,t,e){let r=[];if(Array.isArray(e))r=e;else if(e&&typeof e=="object"){let l={};r=t.map(u=>{const d=u.localName;return T(d,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:u},value:e}),T(!l[d],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:u},value:e}),l[d]=!0,e[d]})}else A(!1,"invalid tuple value","tuple",e);A(t.length===r.length,"types/value length mismatch","tuple",e);let s=new so,i=new so,a=[];t.forEach((l,u)=>{let d=r[u];if(l.dynamic){let h=i.length;l.encode(i,d);let y=s.writeUpdatableValue();a.push(g=>{y(g+h)})}else l.encode(s,d)}),a.forEach(l=>{l(s.length)});let o=n.appendWriter(s);return o+=n.appendWriter(i),o}function fu(n,t){let e=[],r=[],s=n.subReader(0);return t.forEach(i=>{let a=null;if(i.dynamic){let o=n.readIndex(),l=s.subReader(o);try{a=i.decode(l)}catch(u){if(Ct(u,"BUFFER_OVERRUN"))throw u;a=u,a.baseType=i.name,a.name=i.localName,a.type=i.type}}else try{a=i.decode(n)}catch(o){if(Ct(o,"BUFFER_OVERRUN"))throw o;a=o,a.baseType=i.name,a.name=i.localName,a.type=i.type}if(a==null)throw new Error("investigate");e.push(a),r.push(i.localName||null)}),Rs.fromItems(e,r)}class gh extends rn{constructor(e,r,s){const i=e.type+"["+(r>=0?r:"")+"]",a=r===-1||e.dynamic;super("array",i,s,a);k(this,"coder");k(this,"length");Q(this,{coder:e,length:r})}defaultValue(){const e=this.coder.defaultValue(),r=[];for(let s=0;s<this.length;s++)r.push(e);return r}encode(e,r){const s=Bt.dereference(r,"array");Array.isArray(s)||this._throwError("expected array value",s);let i=this.length;i===-1&&(i=s.length,e.writeValue(s.length)),Ac(s.length,i,"coder array"+(this.localName?" "+this.localName:""));let a=[];for(let o=0;o<s.length;o++)a.push(this.coder);return du(e,a,s)}decode(e){let r=this.length;r===-1&&(r=e.readIndex(),T(r*Ut<=e.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:e.bytes,offset:r*Ut,length:e.dataLength}));let s=[];for(let i=0;i<r;i++)s.push(new mh(this.coder));return fu(e,s)}}class yh extends rn{constructor(t){super("bool","bool",t,!1)}defaultValue(){return!1}encode(t,e){const r=Bt.dereference(e,"bool");return t.writeValue(r?1:0)}decode(t){return!!t.readValue()}}class hu extends rn{constructor(t,e){super(t,t,e,!0)}defaultValue(){return"0x"}encode(t,e){e=$t(e);let r=t.writeValue(e.length);return r+=t.writeBytes(e),r}decode(t){return t.readBytes(t.readIndex(),!0)}}class bh extends hu{constructor(t){super("bytes",t)}decode(t){return F(super.decode(t))}}class wh extends rn{constructor(e,r){let s="bytes"+String(e);super(s,s,r,!1);k(this,"size");Q(this,{size:e},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,r){let s=$t(Bt.dereference(r,this.type));return s.length!==this.size&&this._throwError("incorrect data length",r),e.writeBytes(s)}decode(e){return F(e.readBytes(this.size))}}const vh=new Uint8Array([]);class Ah extends rn{constructor(t){super("null","",t,!1)}defaultValue(){return null}encode(t,e){return e!=null&&this._throwError("not null",e),t.writeBytes(vh)}decode(t){return t.readBytes(0),null}}const xh=BigInt(0),kh=BigInt(1),_h=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class Eh extends rn{constructor(e,r,s){const i=(r?"int":"uint")+e*8;super(i,i,s,!1);k(this,"size");k(this,"signed");Q(this,{size:e,signed:r},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(e,r){let s=H(Bt.dereference(r,this.type)),i=Jn(_h,Ut*8);if(this.signed){let a=Jn(i,this.size*8-1);(s>a||s<-(a+kh))&&this._throwError("value out-of-bounds",r),s=_c(s,8*Ut)}else(s<xh||s>Jn(i,this.size*8))&&this._throwError("value out-of-bounds",r);return e.writeValue(s)}decode(e){let r=Jn(e.readValue(),this.size*8);return this.signed&&(r=Yi(r,this.size*8)),r}}class Ch extends hu{constructor(t){super("string",t)}defaultValue(){return""}encode(t,e){return super.encode(t,Xe(Bt.dereference(e,"string")))}decode(t){return Zi(super.decode(t))}}class Ui extends rn{constructor(e,r){let s=!1;const i=[];e.forEach(o=>{o.dynamic&&(s=!0),i.push(o.type)});const a="tuple("+i.join(",")+")";super("tuple",a,r,s);k(this,"coders");Q(this,{coders:Object.freeze(e.slice())})}defaultValue(){const e=[];this.coders.forEach(s=>{e.push(s.defaultValue())});const r=this.coders.reduce((s,i)=>{const a=i.localName;return a&&(s[a]||(s[a]=0),s[a]++),s},{});return this.coders.forEach((s,i)=>{let a=s.localName;!a||r[a]!==1||(a==="length"&&(a="_length"),e[a]==null&&(e[a]=e[i]))}),Object.freeze(e)}encode(e,r){const s=Bt.dereference(r,"tuple");return du(e,this.coders,s)}decode(e){return fu(e,this.coders)}}function Ma(n,t){return{address:rt(n),storageKeys:t.map((e,r)=>(A(lt(e,32),"invalid slot",`storageKeys[${r}]`,e),e.toLowerCase()))}}function _r(n){if(Array.isArray(n))return n.map((e,r)=>Array.isArray(e)?(A(e.length===2,"invalid slot set",`value[${r}]`,e),Ma(e[0],e[1])):(A(e!=null&&typeof e=="object","invalid address-slot set","value",n),Ma(e.address,e.storageKeys)));A(n!=null&&typeof n=="object","invalid access list","value",n);const t=Object.keys(n).map(e=>{const r=n[e].reduce((s,i)=>(s[i]=!0,s),{});return Ma(e,Object.keys(r).sort())});return t.sort((e,r)=>e.address.localeCompare(r.address)),t}function pu(n){return{address:rt(n.address),nonce:H(n.nonce!=null?n.nonce:0),chainId:H(n.chainId!=null?n.chainId:0),signature:zt.from(n.signature)}}function Ph(n){let t;return typeof n=="string"?t=si.computePublicKey(n,!1):t=n.publicKey,rt(yt("0x"+t.substring(4)).substring(26))}function Ih(n,t){return Ph(si.recoverPublicKey(n,t))}const xt=BigInt(0),Nh=BigInt(2),Th=BigInt(27),Bh=BigInt(28),Sh=BigInt(35),Rh=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Ha=4096*32;function Oh(n){return{blobToKzgCommitment:r=>{if("computeBlobProof"in n){if("blobToKzgCommitment"in n&&typeof n.blobToKzgCommitment=="function")return q(n.blobToKzgCommitment(F(r)))}else if("blobToKzgCommitment"in n&&typeof n.blobToKzgCommitment=="function")return q(n.blobToKzgCommitment(r));if("blobToKZGCommitment"in n&&typeof n.blobToKZGCommitment=="function")return q(n.blobToKZGCommitment(F(r)));A(!1,"unsupported KZG library","kzg",n)},computeBlobKzgProof:(r,s)=>{if("computeBlobProof"in n&&typeof n.computeBlobProof=="function")return q(n.computeBlobProof(F(r),F(s)));if("computeBlobKzgProof"in n&&typeof n.computeBlobKzgProof=="function")return n.computeBlobKzgProof(r,s);if("computeBlobKZGProof"in n&&typeof n.computeBlobKZGProof=="function")return q(n.computeBlobKZGProof(F(r),F(s)));A(!1,"unsupported KZG library","kzg",n)}}}function Ll(n,t){let e=n.toString(16);for(;e.length<2;)e="0"+e;return e+=Hs(t).substring(4),"0x"+e}function Gs(n){return n==="0x"?null:rt(n)}function xa(n,t){try{return _r(n)}catch(e){A(!1,e.message,t,n)}}function $h(n,t){try{if(!Array.isArray(n))throw new Error("authorizationList: invalid array");const e=[];for(let r=0;r<n.length;r++){const s=n[r];if(!Array.isArray(s))throw new Error(`authorization[${r}]: invalid array`);if(s.length!==6)throw new Error(`authorization[${r}]: wrong length`);if(!s[1])throw new Error(`authorization[${r}]: null address`);e.push({address:Gs(s[1]),nonce:it(s[2],"nonce"),chainId:it(s[0],"chainId"),signature:zt.from({yParity:Er(s[3],"yParity"),r:en(s[4],32),s:en(s[5],32)})})}return e}catch(e){A(!1,e.message,t,n)}}function Er(n,t){return n==="0x"?0:K(n,t)}function it(n,t){if(n==="0x")return xt;const e=H(n,t);return A(e<=Rh,"value exceeds uint size",t,e),e}function tt(n,t){const e=H(n,"value"),r=bt(e);return A(r.length<=32,"value too large",`tx.${t}`,e),r}function ka(n){return _r(n).map(t=>[t.address,t.storageKeys])}function Uh(n){return n.map(t=>[tt(t.chainId,"chainId"),t.address,tt(t.nonce,"nonce"),tt(t.signature.yParity,"yParity"),bt(t.signature.r),bt(t.signature.s)])}function Dh(n,t){A(Array.isArray(n),`invalid ${t}`,"value",n);for(let e=0;e<n.length;e++)A(lt(n[e],32),"invalid ${ param } hash",`value[${e}]`,n[e]);return n}function Fh(n){const t=Ci(n);A(Array.isArray(t)&&(t.length===9||t.length===6),"invalid field count for legacy transaction","data",n);const e={type:0,nonce:Er(t[0],"nonce"),gasPrice:it(t[1],"gasPrice"),gasLimit:it(t[2],"gasLimit"),to:Gs(t[3]),value:it(t[4],"value"),data:F(t[5]),chainId:xt};if(t.length===6)return e;const r=it(t[6],"v"),s=it(t[7],"r"),i=it(t[8],"s");if(s===xt&&i===xt)e.chainId=r;else{let a=(r-Sh)/Nh;a<xt&&(a=xt),e.chainId=a,A(a!==xt||r===Th||r===Bh,"non-canonical legacy v","v",t[6]),e.signature=zt.from({r:en(t[7],32),s:en(t[8],32),v:r})}return e}function Lh(n,t){const e=[tt(n.nonce,"nonce"),tt(n.gasPrice||0,"gasPrice"),tt(n.gasLimit,"gasLimit"),n.to||"0x",tt(n.value,"value"),n.data];let r=xt;if(n.chainId!=xt)r=H(n.chainId,"tx.chainId"),A(!t||t.networkV==null||t.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",t);else if(n.signature){const i=n.signature.legacyChainId;i!=null&&(r=i)}if(!t)return r!==xt&&(e.push(bt(r)),e.push("0x"),e.push("0x")),On(e);let s=BigInt(27+t.yParity);return r!==xt?s=zt.getChainIdV(r,t.v):BigInt(t.v)!==s&&A(!1,"tx.chainId/sig.v mismatch","sig",t),e.push(bt(s)),e.push(bt(t.r)),e.push(bt(t.s)),On(e)}function _a(n,t){let e;try{if(e=Er(t[0],"yParity"),e!==0&&e!==1)throw new Error("bad yParity")}catch{A(!1,"invalid yParity","yParity",t[0])}const r=en(t[1],32),s=en(t[2],32),i=zt.from({r,s,yParity:e});n.signature=i}function Mh(n){const t=Ci(q(n).slice(1));A(Array.isArray(t)&&(t.length===9||t.length===12),"invalid field count for transaction type: 2","data",F(n));const e={type:2,chainId:it(t[0],"chainId"),nonce:Er(t[1],"nonce"),maxPriorityFeePerGas:it(t[2],"maxPriorityFeePerGas"),maxFeePerGas:it(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:it(t[4],"gasLimit"),to:Gs(t[5]),value:it(t[6],"value"),data:F(t[7]),accessList:xa(t[8],"accessList")};return t.length===9||_a(e,t.slice(9)),e}function Hh(n,t){const e=[tt(n.chainId,"chainId"),tt(n.nonce,"nonce"),tt(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),tt(n.maxFeePerGas||0,"maxFeePerGas"),tt(n.gasLimit,"gasLimit"),n.to||"0x",tt(n.value,"value"),n.data,ka(n.accessList||[])];return t&&(e.push(tt(t.yParity,"yParity")),e.push(bt(t.r)),e.push(bt(t.s))),pt(["0x02",On(e)])}function Gh(n){const t=Ci(q(n).slice(1));A(Array.isArray(t)&&(t.length===8||t.length===11),"invalid field count for transaction type: 1","data",F(n));const e={type:1,chainId:it(t[0],"chainId"),nonce:Er(t[1],"nonce"),gasPrice:it(t[2],"gasPrice"),gasLimit:it(t[3],"gasLimit"),to:Gs(t[4]),value:it(t[5],"value"),data:F(t[6]),accessList:xa(t[7],"accessList")};return t.length===8||_a(e,t.slice(8)),e}function zh(n,t){const e=[tt(n.chainId,"chainId"),tt(n.nonce,"nonce"),tt(n.gasPrice||0,"gasPrice"),tt(n.gasLimit,"gasLimit"),n.to||"0x",tt(n.value,"value"),n.data,ka(n.accessList||[])];return t&&(e.push(tt(t.yParity,"recoveryParam")),e.push(bt(t.r)),e.push(bt(t.s))),pt(["0x01",On(e)])}function Qh(n){let t=Ci(q(n).slice(1)),e="3",r=null;if(t.length===4&&Array.isArray(t[0])){e="3 (network format)";const i=t[1],a=t[2],o=t[3];A(Array.isArray(i),"invalid network format: blobs not an array","fields[1]",i),A(Array.isArray(a),"invalid network format: commitments not an array","fields[2]",a),A(Array.isArray(o),"invalid network format: proofs not an array","fields[3]",o),A(i.length===a.length,"invalid network format: blobs/commitments length mismatch","fields",t),A(i.length===o.length,"invalid network format: blobs/proofs length mismatch","fields",t),r=[];for(let l=0;l<t[1].length;l++)r.push({data:i[l],commitment:a[l],proof:o[l]});t=t[0]}A(Array.isArray(t)&&(t.length===11||t.length===14),`invalid field count for transaction type: ${e}`,"data",F(n));const s={type:3,chainId:it(t[0],"chainId"),nonce:Er(t[1],"nonce"),maxPriorityFeePerGas:it(t[2],"maxPriorityFeePerGas"),maxFeePerGas:it(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:it(t[4],"gasLimit"),to:Gs(t[5]),value:it(t[6],"value"),data:F(t[7]),accessList:xa(t[8],"accessList"),maxFeePerBlobGas:it(t[9],"maxFeePerBlobGas"),blobVersionedHashes:t[10]};r&&(s.blobs=r),A(s.to!=null,`invalid address for transaction type: ${e}`,"data",n),A(Array.isArray(s.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",n);for(let i=0;i<s.blobVersionedHashes.length;i++)A(lt(s.blobVersionedHashes[i],32),`invalid blobVersionedHash at index ${i}: must be length 32`,"data",n);return t.length===11||_a(s,t.slice(11)),s}function jh(n,t,e){const r=[tt(n.chainId,"chainId"),tt(n.nonce,"nonce"),tt(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),tt(n.maxFeePerGas||0,"maxFeePerGas"),tt(n.gasLimit,"gasLimit"),n.to||ri,tt(n.value,"value"),n.data,ka(n.accessList||[]),tt(n.maxFeePerBlobGas||0,"maxFeePerBlobGas"),Dh(n.blobVersionedHashes||[],"blobVersionedHashes")];return t&&(r.push(tt(t.yParity,"yParity")),r.push(bt(t.r)),r.push(bt(t.s)),e)?pt(["0x03",On([r,e.map(s=>s.data),e.map(s=>s.commitment),e.map(s=>s.proof)])]):pt(["0x03",On(r)])}function Vh(n){const t=Ci(q(n).slice(1));A(Array.isArray(t)&&(t.length===10||t.length===13),"invalid field count for transaction type: 4","data",F(n));const e={type:4,chainId:it(t[0],"chainId"),nonce:Er(t[1],"nonce"),maxPriorityFeePerGas:it(t[2],"maxPriorityFeePerGas"),maxFeePerGas:it(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:it(t[4],"gasLimit"),to:Gs(t[5]),value:it(t[6],"value"),data:F(t[7]),accessList:xa(t[8],"accessList"),authorizationList:$h(t[9],"authorizationList")};return t.length===10||_a(e,t.slice(10)),e}function Jh(n,t){const e=[tt(n.chainId,"chainId"),tt(n.nonce,"nonce"),tt(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),tt(n.maxFeePerGas||0,"maxFeePerGas"),tt(n.gasLimit,"gasLimit"),n.to||"0x",tt(n.value,"value"),n.data,ka(n.accessList||[]),Uh(n.authorizationList||[])];return t&&(e.push(tt(t.yParity,"yParity")),e.push(bt(t.r)),e.push(bt(t.s))),pt(["0x04",On(e)])}var pe,rs,ss,is,as,os,ls,cs,us,ds,fs,hs,lr,yn,Ee,bn,ps,ms,Hi;const xe=class xe{constructor(){C(this,ms);C(this,pe);C(this,rs);C(this,ss);C(this,is);C(this,as);C(this,os);C(this,ls);C(this,cs);C(this,us);C(this,ds);C(this,fs);C(this,hs);C(this,lr);C(this,yn);C(this,Ee);C(this,bn);C(this,ps);b(this,pe,null),b(this,rs,null),b(this,is,0),b(this,as,xt),b(this,os,null),b(this,ls,null),b(this,cs,null),b(this,ss,"0x"),b(this,us,xt),b(this,ds,xt),b(this,fs,null),b(this,hs,null),b(this,lr,null),b(this,yn,null),b(this,Ee,null),b(this,bn,null),b(this,ps,null)}get type(){return f(this,pe)}set type(t){switch(t){case null:b(this,pe,null);break;case 0:case"legacy":b(this,pe,0);break;case 1:case"berlin":case"eip-2930":b(this,pe,1);break;case 2:case"london":case"eip-1559":b(this,pe,2);break;case 3:case"cancun":case"eip-4844":b(this,pe,3);break;case 4:case"pectra":case"eip-7702":b(this,pe,4);break;default:A(!1,"unsupported transaction type","type",t)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const t=f(this,rs);return t==null&&this.type===3?ri:t}set to(t){b(this,rs,t==null?null:rt(t))}get nonce(){return f(this,is)}set nonce(t){b(this,is,K(t,"value"))}get gasLimit(){return f(this,as)}set gasLimit(t){b(this,as,H(t))}get gasPrice(){const t=f(this,os);return t==null&&(this.type===0||this.type===1)?xt:t}set gasPrice(t){b(this,os,t==null?null:H(t,"gasPrice"))}get maxPriorityFeePerGas(){const t=f(this,ls);return t??(this.type===2||this.type===3?xt:null)}set maxPriorityFeePerGas(t){b(this,ls,t==null?null:H(t,"maxPriorityFeePerGas"))}get maxFeePerGas(){const t=f(this,cs);return t??(this.type===2||this.type===3?xt:null)}set maxFeePerGas(t){b(this,cs,t==null?null:H(t,"maxFeePerGas"))}get data(){return f(this,ss)}set data(t){b(this,ss,F(t))}get value(){return f(this,us)}set value(t){b(this,us,H(t,"value"))}get chainId(){return f(this,ds)}set chainId(t){b(this,ds,H(t))}get signature(){return f(this,fs)||null}set signature(t){b(this,fs,t==null?null:zt.from(t))}get accessList(){const t=f(this,hs)||null;return t??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(t){b(this,hs,t==null?null:_r(t))}get authorizationList(){const t=f(this,ps)||null;return t==null&&this.type===4?[]:t}set authorizationList(t){b(this,ps,t==null?null:t.map(e=>pu(e)))}get maxFeePerBlobGas(){const t=f(this,lr);return t==null&&this.type===3?xt:t}set maxFeePerBlobGas(t){b(this,lr,t==null?null:H(t,"maxFeePerBlobGas"))}get blobVersionedHashes(){let t=f(this,yn);return t==null&&this.type===3?[]:t}set blobVersionedHashes(t){if(t!=null){A(Array.isArray(t),"blobVersionedHashes must be an Array","value",t),t=t.slice();for(let e=0;e<t.length;e++)A(lt(t[e],32),"invalid blobVersionedHash",`value[${e}]`,t[e])}b(this,yn,t)}get blobs(){return f(this,bn)==null?null:f(this,bn).map(t=>Object.assign({},t))}set blobs(t){if(t==null){b(this,bn,null);return}const e=[],r=[];for(let s=0;s<t.length;s++){const i=t[s];if(Do(i)){T(f(this,Ee),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let a=q(i);if(A(a.length<=Ha,"blob is too large",`blobs[${s}]`,i),a.length!==Ha){const u=new Uint8Array(Ha);u.set(a),a=u}const o=f(this,Ee).blobToKzgCommitment(a),l=F(f(this,Ee).computeBlobKzgProof(a,o));e.push({data:F(a),commitment:F(o),proof:l}),r.push(Ll(1,o))}else{const a=F(i.commitment);e.push({data:F(i.data),commitment:a,proof:F(i.proof)}),r.push(Ll(1,a))}}b(this,bn,e),b(this,yn,r)}get kzg(){return f(this,Ee)}set kzg(t){t==null?b(this,Ee,null):b(this,Ee,Oh(t))}get hash(){return this.signature==null?null:yt(B(this,ms,Hi).call(this,!0,!1))}get unsignedHash(){return yt(this.unsignedSerialized)}get from(){return this.signature==null?null:Ih(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:si.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return B(this,ms,Hi).call(this,!0,!0)}get unsignedSerialized(){return B(this,ms,Hi).call(this,!1,!1)}inferType(){const t=this.inferTypes();return t.indexOf(2)>=0?2:t.pop()}inferTypes(){const t=this.gasPrice!=null,e=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,s=f(this,lr)!=null||f(this,yn);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&T(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),T(!e||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),T(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):this.authorizationList&&this.authorizationList.length?i.push(4):e?i.push(2):t?(i.push(1),r||i.push(0)):r?(i.push(1),i.push(2)):(s&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return xe.from(this)}toJSON(){const t=e=>e==null?null:e.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:t(this.gasLimit),gasPrice:t(this.gasPrice),maxPriorityFeePerGas:t(this.maxPriorityFeePerGas),maxFeePerGas:t(this.maxFeePerGas),value:t(this.value),chainId:t(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(t){if(t==null)return new xe;if(typeof t=="string"){const r=q(t);if(r[0]>=127)return xe.from(Fh(r));switch(r[0]){case 1:return xe.from(Gh(r));case 2:return xe.from(Mh(r));case 3:return xe.from(Qh(r));case 4:return xe.from(Vh(r))}T(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const e=new xe;return t.type!=null&&(e.type=t.type),t.to!=null&&(e.to=t.to),t.nonce!=null&&(e.nonce=t.nonce),t.gasLimit!=null&&(e.gasLimit=t.gasLimit),t.gasPrice!=null&&(e.gasPrice=t.gasPrice),t.maxPriorityFeePerGas!=null&&(e.maxPriorityFeePerGas=t.maxPriorityFeePerGas),t.maxFeePerGas!=null&&(e.maxFeePerGas=t.maxFeePerGas),t.maxFeePerBlobGas!=null&&(e.maxFeePerBlobGas=t.maxFeePerBlobGas),t.data!=null&&(e.data=t.data),t.value!=null&&(e.value=t.value),t.chainId!=null&&(e.chainId=t.chainId),t.signature!=null&&(e.signature=zt.from(t.signature)),t.accessList!=null&&(e.accessList=t.accessList),t.authorizationList!=null&&(e.authorizationList=t.authorizationList),t.blobVersionedHashes!=null&&(e.blobVersionedHashes=t.blobVersionedHashes),t.kzg!=null&&(e.kzg=t.kzg),t.blobs!=null&&(e.blobs=t.blobs),t.hash!=null&&(A(e.isSigned(),"unsigned transaction cannot define '.hash'","tx",t),A(e.hash===t.hash,"hash mismatch","tx",t)),t.from!=null&&(A(e.isSigned(),"unsigned transaction cannot define '.from'","tx",t),A(e.from.toLowerCase()===(t.from||"").toLowerCase(),"from mismatch","tx",t)),e}};pe=new WeakMap,rs=new WeakMap,ss=new WeakMap,is=new WeakMap,as=new WeakMap,os=new WeakMap,ls=new WeakMap,cs=new WeakMap,us=new WeakMap,ds=new WeakMap,fs=new WeakMap,hs=new WeakMap,lr=new WeakMap,yn=new WeakMap,Ee=new WeakMap,bn=new WeakMap,ps=new WeakMap,ms=new WeakSet,Hi=function(t,e){T(!t||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=t?this.signature:null;switch(this.inferType()){case 0:return Lh(this,r);case 1:return zh(this,r);case 2:return Hh(this,r);case 3:return jh(this,r,e?this.blobs:null);case 4:return Jh(this,r)}T(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let Xi=xe;function wr(n){return yt(Xe(n))}var Kh="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";const Ml=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),Hl=4;function qh(n){let t=0;function e(){return n[t++]<<8|n[t++]}let r=e(),s=1,i=[0,1];for(let R=1;R<r;R++)i.push(s+=e());let a=e(),o=t;t+=a;let l=0,u=0;function d(){return l==0&&(u=u<<8|n[t++],l=8),u>>--l&1}const h=31,y=2**h,g=y>>>1,v=g>>1,w=y-1;let x=0;for(let R=0;R<h;R++)x=x<<1|d();let E=[],P=0,I=y;for(;;){let R=Math.floor(((x-P+1)*s-1)/I),N=0,S=r;for(;S-N>1;){let V=N+S>>>1;R<i[V]?S=V:N=V}if(N==0)break;E.push(N);let D=P+Math.floor(I*i[N]/s),z=P+Math.floor(I*i[N+1]/s)-1;for(;!((D^z)&g);)x=x<<1&w|d(),D=D<<1&w,z=z<<1&w|1;for(;D&~z&v;)x=x&g|x<<1&w>>>1|d(),D=D<<1^g,z=(z^g)<<1|g|1;P=D,I=1+z-D}let U=r-4;return E.map(R=>{switch(R-U){case 3:return U+65792+(n[o++]<<16|n[o++]<<8|n[o++]);case 2:return U+256+(n[o++]<<8|n[o++]);case 1:return U+n[o++];default:return R-1}})}function Yh(n){let t=0;return()=>n[t++]}function mu(n){return Yh(qh(Zh(n)))}function Zh(n){let t=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((s,i)=>t[s.charCodeAt(0)]=i);let e=n.length,r=new Uint8Array(6*e>>3);for(let s=0,i=0,a=0,o=0;s<e;s++)o=o<<6|t[n.charCodeAt(s)],a+=6,a>=8&&(r[i++]=o>>(a-=8));return r}function Wh(n){return n&1?~n>>1:n>>1}function Xh(n,t){let e=Array(n);for(let r=0,s=0;r<n;r++)e[r]=s+=Wh(t());return e}function ii(n,t=0){let e=[];for(;;){let r=n(),s=n();if(!s)break;t+=r;for(let i=0;i<s;i++)e.push(t+i);t+=s+1}return e}function gu(n){return ai(()=>{let t=ii(n);if(t.length)return t})}function yu(n){let t=[];for(;;){let e=n();if(e==0)break;t.push(tp(e,n))}for(;;){let e=n()-1;if(e<0)break;t.push(ep(e,n))}return t.flat()}function ai(n){let t=[];for(;;){let e=n(t.length);if(!e)break;t.push(e)}return t}function bu(n,t,e){let r=Array(n).fill().map(()=>[]);for(let s=0;s<t;s++)Xh(n,e).forEach((i,a)=>r[a].push(i));return r}function tp(n,t){let e=1+t(),r=t(),s=ai(t);return bu(s.length,1+n,t).flatMap((a,o)=>{let[l,...u]=a;return Array(s[o]).fill().map((d,h)=>{let y=h*r;return[l+h*e,u.map(g=>g+y)]})})}function ep(n,t){let e=1+t();return bu(e,1+n,t).map(s=>[s[0],s.slice(1)])}function np(n){let t=[],e=ii(n);return s(r([]),[]),t;function r(i){let a=n(),o=ai(()=>{let l=ii(n).map(u=>e[u]);if(l.length)return r(l)});return{S:a,B:o,Q:i}}function s({S:i,B:a},o,l){if(!(i&4&&l===o[o.length-1])){i&2&&(l=o[o.length-1]),i&1&&t.push(o);for(let u of a)for(let d of u.Q)s(u,[...o,d],l)}}}function rp(n){return n.toString(16).toUpperCase().padStart(2,"0")}function wu(n){return`{${rp(n)}}`}function sp(n){let t=[];for(let e=0,r=n.length;e<r;){let s=n.codePointAt(e);e+=s<65536?1:2,t.push(s)}return t}function Fs(n){let e=n.length;if(e<4096)return String.fromCodePoint(...n);let r=[];for(let s=0;s<e;)r.push(String.fromCodePoint(...n.slice(s,s+=4096)));return r.join("")}function ip(n,t){let e=n.length,r=e-t.length;for(let s=0;r==0&&s<e;s++)r=n[s]-t[s];return r}var ap="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";const oi=44032,ta=4352,ea=4449,na=4519,vu=19,Au=21,Ls=28,ra=Au*Ls,op=vu*ra,lp=oi+op,cp=ta+vu,up=ea+Au,dp=na+Ls;function Ys(n){return n>>24&255}function xu(n){return n&16777215}let ho,Gl,po,Gi;function fp(){let n=mu(ap);ho=new Map(gu(n).flatMap((t,e)=>t.map(r=>[r,e+1<<24]))),Gl=new Set(ii(n)),po=new Map,Gi=new Map;for(let[t,e]of yu(n)){if(!Gl.has(t)&&e.length==2){let[r,s]=e,i=Gi.get(r);i||(i=new Map,Gi.set(r,i)),i.set(s,t)}po.set(t,e.reverse())}}function ku(n){return n>=oi&&n<lp}function hp(n,t){if(n>=ta&&n<cp&&t>=ea&&t<up)return oi+(n-ta)*ra+(t-ea)*Ls;if(ku(n)&&t>na&&t<dp&&(n-oi)%Ls==0)return n+(t-na);{let e=Gi.get(n);return e&&(e=e.get(t),e)?e:-1}}function _u(n){ho||fp();let t=[],e=[],r=!1;function s(i){let a=ho.get(i);a&&(r=!0,i|=a),t.push(i)}for(let i of n)for(;;){if(i<128)t.push(i);else if(ku(i)){let a=i-oi,o=a/ra|0,l=a%ra/Ls|0,u=a%Ls;s(ta+o),s(ea+l),u>0&&s(na+u)}else{let a=po.get(i);a?e.push(...a):s(i)}if(!e.length)break;i=e.pop()}if(r&&t.length>1){let i=Ys(t[0]);for(let a=1;a<t.length;a++){let o=Ys(t[a]);if(o==0||i<=o){i=o;continue}let l=a-1;for(;;){let u=t[l+1];if(t[l+1]=t[l],t[l]=u,!l||(i=Ys(t[--l]),i<=o))break}i=Ys(t[a])}}return t}function pp(n){let t=[],e=[],r=-1,s=0;for(let i of n){let a=Ys(i),o=xu(i);if(r==-1)a==0?r=o:t.push(o);else if(s>0&&s>=a)a==0?(t.push(r,...e),e.length=0,r=o):e.push(o),s=a;else{let l=hp(r,o);l>=0?r=l:s==0&&a==0?(t.push(r),r=o):(e.push(o),s=a)}}return r>=0&&t.push(r,...e),t}function Eu(n){return _u(n).map(xu)}function mp(n){return pp(_u(n))}const zl=45,Cu=".",Pu=65039,Iu=1,sa=n=>Array.from(n);function li(n,t){return n.P.has(t)||n.Q.has(t)}class gp extends Array{get is_emoji(){return!0}}let mo,Nu,qn,go,Tu,Qr,Ga,Rr,Hn,Ql,yo;function Jo(){if(mo)return;let n=mu(Kh);const t=()=>ii(n),e=()=>new Set(t()),r=(d,h)=>h.forEach(y=>d.add(y));mo=new Map(yu(n)),Nu=e(),qn=t(),go=new Set(t().map(d=>qn[d])),qn=new Set(qn),Tu=e(),e();let s=gu(n),i=n();const a=()=>{let d=new Set;return t().forEach(h=>r(d,s[h])),r(d,t()),d};Qr=ai(d=>{let h=ai(n).map(y=>y+96);if(h.length){let y=d>=i;h[0]-=32,h=Fs(h),y&&(h=`Restricted[${h}]`);let g=a(),v=a(),w=!n();return{N:h,P:g,Q:v,M:w,R:y}}}),Ga=e(),Rr=new Map;let o=t().concat(sa(Ga)).sort((d,h)=>d-h);o.forEach((d,h)=>{let y=n(),g=o[h]=y?o[h-y]:{V:[],M:new Map};g.V.push(d),Ga.has(d)||Rr.set(d,g)});for(let{V:d,M:h}of new Set(Rr.values())){let y=[];for(let v of d){let w=Qr.filter(E=>li(E,v)),x=y.find(({G:E})=>w.some(P=>E.has(P)));x||(x={G:new Set,V:[]},y.push(x)),x.V.push(v),r(x.G,w)}let g=y.flatMap(v=>sa(v.G));for(let{G:v,V:w}of y){let x=new Set(g.filter(E=>!v.has(E)));for(let E of w)h.set(E,x)}}Hn=new Set;let l=new Set;const u=d=>Hn.has(d)?l.add(d):Hn.add(d);for(let d of Qr){for(let h of d.P)u(h);for(let h of d.Q)u(h)}for(let d of Hn)!Rr.has(d)&&!l.has(d)&&Rr.set(d,Iu);r(Hn,Eu(Hn)),Ql=np(n).map(d=>gp.from(d)).sort(ip),yo=new Map;for(let d of Ql){let h=[yo];for(let y of d){let g=h.map(v=>{let w=v.get(y);return w||(w=new Map,v.set(y,w)),w});y===Pu?h.push(...g):h=g}for(let y of h)y.V=d}}function Ko(n){return(Bu(n)?"":`${qo(Ea([n]))} `)+wu(n)}function qo(n){return`"${n}"‎`}function yp(n){if(n.length>=4&&n[2]==zl&&n[3]==zl)throw new Error(`invalid label extension: "${Fs(n.slice(0,4))}"`)}function bp(n){for(let e=n.lastIndexOf(95);e>0;)if(n[--e]!==95)throw new Error("underscore allowed only at start")}function wp(n){let t=n[0],e=Ml.get(t);if(e)throw ti(`leading ${e}`);let r=n.length,s=-1;for(let i=1;i<r;i++){t=n[i];let a=Ml.get(t);if(a){if(s==i)throw ti(`${e} + ${a}`);s=i+1,e=a}}if(s==r)throw ti(`trailing ${e}`)}function Ea(n,t=1/0,e=wu){let r=[];vp(n[0])&&r.push("◌"),n.length>t&&(t>>=1,n=[...n.slice(0,t),8230,...n.slice(-t)]);let s=0,i=n.length;for(let a=0;a<i;a++){let o=n[a];Bu(o)&&(r.push(Fs(n.slice(s,a))),r.push(e(o)),s=a+1)}return r.push(Fs(n.slice(s,i))),r.join("")}function vp(n){return Jo(),qn.has(n)}function Bu(n){return Jo(),Tu.has(n)}function Ap(n){return Ep(xp(n,mp,Ip))}function xp(n,t,e){if(!n)return[];Jo();let r=0;return n.split(Cu).map(s=>{let i=sp(s),a={input:i,offset:r};r+=i.length+1;try{let o=a.tokens=Pp(i,t,e),l=o.length,u;if(!l)throw new Error("empty label");let d=a.output=o.flat();if(bp(d),!(a.emoji=l>1||o[0].is_emoji)&&d.every(y=>y<128))yp(d),u="ASCII";else{let y=o.flatMap(g=>g.is_emoji?[]:g);if(!y.length)u="Emoji";else{if(qn.has(d[0]))throw ti("leading combining mark");for(let w=1;w<l;w++){let x=o[w];if(!x.is_emoji&&qn.has(x[0]))throw ti(`emoji + combining mark: "${Fs(o[w-1])} + ${Ea([x[0]])}"`)}wp(d);let g=sa(new Set(y)),[v]=_p(g);Cp(v,y),kp(v,g),u=v.N}}a.type=u}catch(o){a.error=o}return a})}function kp(n,t){let e,r=[];for(let s of t){let i=Rr.get(s);if(i===Iu)return;if(i){let a=i.M.get(s);if(e=e?e.filter(o=>a.has(o)):sa(a),!e.length)return}else r.push(s)}if(e){for(let s of e)if(r.every(i=>li(s,i)))throw new Error(`whole-script confusable: ${n.N}/${s.N}`)}}function _p(n){let t=Qr;for(let e of n){let r=t.filter(s=>li(s,e));if(!r.length)throw Qr.some(s=>li(s,e))?Ru(t[0],e):Su(e);if(t=r,r.length==1)break}return t}function Ep(n){return n.map(({input:t,error:e,output:r})=>{if(e){let s=e.message;throw new Error(n.length==1?s:`Invalid label ${qo(Ea(t,63))}: ${s}`)}return Fs(r)}).join(Cu)}function Su(n){return new Error(`disallowed character: ${Ko(n)}`)}function Ru(n,t){let e=Ko(t),r=Qr.find(s=>s.P.has(t));return r&&(e=`${r.N} ${e}`),new Error(`illegal mixture: ${n.N} + ${e}`)}function ti(n){return new Error(`illegal placement: ${n}`)}function Cp(n,t){for(let e of t)if(!li(n,e))throw Ru(n,e);if(n.M){let e=Eu(t);for(let r=1,s=e.length;r<s;r++)if(go.has(e[r])){let i=r+1;for(let a;i<s&&go.has(a=e[i]);i++)for(let o=r;o<i;o++)if(e[o]==a)throw new Error(`duplicate non-spacing marks: ${Ko(a)}`);if(i-r>Hl)throw new Error(`excessive non-spacing marks: ${qo(Ea(e.slice(r-1,i)))} (${i-r}/${Hl})`);r=i}}}function Pp(n,t,e){let r=[],s=[];for(n=n.slice().reverse();n.length;){let i=Np(n);if(i)s.length&&(r.push(t(s)),s=[]),r.push(e(i));else{let a=n.pop();if(Hn.has(a))s.push(a);else{let o=mo.get(a);if(o)s.push(...o);else if(!Nu.has(a))throw Su(a)}}}return s.length&&r.push(t(s)),r}function Ip(n){return n.filter(t=>t!=Pu)}function Np(n,t){let e=yo,r,s=n.length;for(;s&&(e=e.get(n[--s]),!!e);){let{V:i}=e;i&&(r=i,n.length=s)}return r}const Ou=new Uint8Array(32);Ou.fill(0);function jl(n){return A(n.length!==0,"invalid ENS name; empty component","comp",n),n}function $u(n){const t=Xe(Tp(n)),e=[];if(n.length===0)return e;let r=0;for(let s=0;s<t.length;s++)t[s]===46&&(e.push(jl(t.slice(r,s))),r=s+1);return A(r<t.length,"invalid ENS name; empty component","name",n),e.push(jl(t.slice(r))),e}function Tp(n){try{if(n.length===0)throw new Error("empty label");return Ap(n)}catch(t){A(!1,`invalid ENS name (${t.message})`,"name",n)}}function bo(n){A(typeof n=="string","invalid ENS name; not a string","name",n),A(n.length,"invalid ENS name (empty label)","name",n);let t=Ou;const e=$u(n);for(;e.length;)t=yt(pt([t,yt(e.pop())]));return F(t)}function Bp(n,t){const e=t;return A(e<=255,"DNS encoded label cannot exceed 255","length",e),F(pt($u(n).map(r=>{A(r.length<=e,`label ${JSON.stringify(n)} exceeds ${e} bytes`,"name",n);const s=new Uint8Array(r.length+1);return s.set(r,1),s[0]=s.length-1,s})))+"00"}const Uu=new Uint8Array(32);Uu.fill(0);const Sp=BigInt(-1),Du=BigInt(0),Fu=BigInt(1),Rp=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Op(n){const t=q(n),e=t.length%32;return e?pt([t,Uu.slice(e)]):F(t)}const $p=Sn(Fu,32),Up=Sn(Du,32),Vl={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},za=["name","version","chainId","verifyingContract","salt"];function Jl(n){return function(t){return A(typeof t=="string",`invalid domain value for ${JSON.stringify(n)}`,`domain.${n}`,t),t}}const Dp={name:Jl("name"),version:Jl("version"),chainId:function(n){const t=H(n,"domain.chainId");return A(t>=0,"invalid chain ID","domain.chainId",n),Number.isSafeInteger(t)?Number(t):ye(t)},verifyingContract:function(n){try{return rt(n).toLowerCase()}catch{}A(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",n)},salt:function(n){const t=q(n,"domain.salt");return A(t.length===32,'invalid domain value "salt"',"domain.salt",n),F(t)}};function Qa(n){{const t=n.match(/^(u?)int(\d+)$/);if(t){const e=t[1]==="",r=parseInt(t[2]);A(r%8===0&&r!==0&&r<=256&&t[2]===String(r),"invalid numeric width","type",n);const s=Jn(Rp,e?r-1:r),i=e?(s+Fu)*Sp:Du;return function(a){const o=H(a,"value");return A(o>=i&&o<=s,`value out-of-bounds for ${n}`,"value",o),Sn(e?_c(o,256):o,32)}}}{const t=n.match(/^bytes(\d+)$/);if(t){const e=parseInt(t[1]);return A(e!==0&&e<=32&&t[1]===String(e),"invalid bytes width","type",n),function(r){const s=q(r);return A(s.length===e,`invalid length for ${n}`,"value",r),Op(r)}}}switch(n){case"address":return function(t){return en(rt(t),32)};case"bool":return function(t){return t?$p:Up};case"bytes":return function(t){return yt(t)};case"string":return function(t){return wr(t)}}return null}function Kl(n,t){return`${n}(${t.map(({name:e,type:r})=>r+" "+e).join(",")})`}function Di(n){const t=n.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return t?{base:t[1],index:t[2]+t[4],array:{base:t[1],prefix:t[1]+t[2],count:t[5]?parseInt(t[5]):-1}}:{base:n}}var gi,Qe,gs,ua,Lu;const te=class te{constructor(t){C(this,ua);k(this,"primaryType");C(this,gi);C(this,Qe);C(this,gs);b(this,Qe,new Map),b(this,gs,new Map);const e=new Map,r=new Map,s=new Map,i={};Object.keys(t).forEach(l=>{i[l]=t[l].map(({name:u,type:d})=>{let{base:h,index:y}=Di(d);return h==="int"&&!t.int&&(h="int256"),h==="uint"&&!t.uint&&(h="uint256"),{name:u,type:h+(y||"")}}),e.set(l,new Set),r.set(l,[]),s.set(l,new Set)}),b(this,gi,JSON.stringify(i));for(const l in i){const u=new Set;for(const d of i[l]){A(!u.has(d.name),`duplicate variable name ${JSON.stringify(d.name)} in ${JSON.stringify(l)}`,"types",t),u.add(d.name);const h=Di(d.type).base;A(h!==l,`circular type reference to ${JSON.stringify(h)}`,"types",t),!Qa(h)&&(A(r.has(h),`unknown type ${JSON.stringify(h)}`,"types",t),r.get(h).push(l),e.get(l).add(h))}}const a=Array.from(r.keys()).filter(l=>r.get(l).length===0);A(a.length!==0,"missing primary type","types",t),A(a.length===1,`ambiguous primary types or unused types: ${a.map(l=>JSON.stringify(l)).join(", ")}`,"types",t),Q(this,{primaryType:a[0]});function o(l,u){A(!u.has(l),`circular type reference to ${JSON.stringify(l)}`,"types",t),u.add(l);for(const d of e.get(l))if(r.has(d)){o(d,u);for(const h of u)s.get(h).add(d)}u.delete(l)}o(this.primaryType,new Set);for(const[l,u]of s){const d=Array.from(u);d.sort(),f(this,Qe).set(l,Kl(l,i[l])+d.map(h=>Kl(h,i[h])).join(""))}}get types(){return JSON.parse(f(this,gi))}getEncoder(t){let e=f(this,gs).get(t);return e||(e=B(this,ua,Lu).call(this,t),f(this,gs).set(t,e)),e}encodeType(t){const e=f(this,Qe).get(t);return A(e,`unknown type: ${JSON.stringify(t)}`,"name",t),e}encodeData(t,e){return this.getEncoder(t)(e)}hashStruct(t,e){return yt(this.encodeData(t,e))}encode(t){return this.encodeData(this.primaryType,t)}hash(t){return this.hashStruct(this.primaryType,t)}_visit(t,e,r){if(Qa(t))return r(t,e);const s=Di(t).array;if(s)return A(s.count===-1||s.count===e.length,`array length mismatch; expected length ${s.count}`,"value",e),e.map(a=>this._visit(s.prefix,a,r));const i=this.types[t];if(i)return i.reduce((a,{name:o,type:l})=>(a[o]=this._visit(l,e[o],r),a),{});A(!1,`unknown type: ${t}`,"type",t)}visit(t,e){return this._visit(this.primaryType,t,e)}static from(t){return new te(t)}static getPrimaryType(t){return te.from(t).primaryType}static hashStruct(t,e,r){return te.from(e).hashStruct(t,r)}static hashDomain(t){const e=[];for(const r in t){if(t[r]==null)continue;const s=Vl[r];A(s,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",t),e.push({name:r,type:s})}return e.sort((r,s)=>za.indexOf(r.name)-za.indexOf(s.name)),te.hashStruct("EIP712Domain",{EIP712Domain:e},t)}static encode(t,e,r){return pt(["0x1901",te.hashDomain(t),te.from(e).hash(r)])}static hash(t,e,r){return yt(te.encode(t,e,r))}static async resolveNames(t,e,r,s){t=Object.assign({},t);for(const o in t)t[o]==null&&delete t[o];const i={};t.verifyingContract&&!lt(t.verifyingContract,20)&&(i[t.verifyingContract]="0x");const a=te.from(e);a.visit(r,(o,l)=>(o==="address"&&!lt(l,20)&&(i[l]="0x"),l));for(const o in i)i[o]=await s(o);return t.verifyingContract&&i[t.verifyingContract]&&(t.verifyingContract=i[t.verifyingContract]),r=a.visit(r,(o,l)=>o==="address"&&i[l]?i[l]:l),{domain:t,value:r}}static getPayload(t,e,r){te.hashDomain(t);const s={},i=[];za.forEach(l=>{const u=t[l];u!=null&&(s[l]=Dp[l](u),i.push({name:l,type:Vl[l]}))});const a=te.from(e);e=a.types;const o=Object.assign({},e);return A(o.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",e),o.EIP712Domain=i,a.encode(r),{types:o,domain:s,primaryType:a.primaryType,message:a.visit(r,(l,u)=>{if(l.match(/^bytes(\d*)/))return F(q(u));if(l.match(/^u?int/))return H(u).toString();switch(l){case"address":return u.toLowerCase();case"bool":return!!u;case"string":return A(typeof u=="string","invalid string","value",u),u}A(!1,"unsupported type","type",l)})}}};gi=new WeakMap,Qe=new WeakMap,gs=new WeakMap,ua=new WeakSet,Lu=function(t){{const s=Qa(t);if(s)return s}const e=Di(t).array;if(e){const s=e.prefix,i=this.getEncoder(s);return a=>{A(e.count===-1||e.count===a.length,`array length mismatch; expected length ${e.count}`,"value",a);let o=a.map(i);return f(this,Qe).has(s)&&(o=o.map(yt)),yt(pt(o))}}const r=this.types[t];if(r){const s=wr(f(this,Qe).get(t));return i=>{const a=r.map(({name:o,type:l})=>{const u=this.getEncoder(l)(i[o]);return f(this,Qe).has(l)?yt(u):u});return a.unshift(s),pt(a)}}A(!1,`unknown type: ${t}`,"type",t)};let ia=te;function Ft(n){const t=new Set;return n.forEach(e=>t.add(e)),Object.freeze(t)}const Fp="external public payable override",Lp=Ft(Fp.split(" ")),Mu="constant external internal payable private public pure view override",Mp=Ft(Mu.split(" ")),Hu="constructor error event fallback function receive struct",Gu=Ft(Hu.split(" ")),zu="calldata memory storage payable indexed",Hp=Ft(zu.split(" ")),Gp="tuple returns",zp=[Hu,zu,Gp,Mu].join(" "),Qp=Ft(zp.split(" ")),jp={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},Vp=new RegExp("^(\\s*)"),Jp=new RegExp("^([0-9]+)"),Kp=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),Qu=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),ju=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var _t,me,yi,wo;const da=class da{constructor(t){C(this,yi);C(this,_t);C(this,me);b(this,_t,0),b(this,me,t.slice())}get offset(){return f(this,_t)}get length(){return f(this,me).length-f(this,_t)}clone(){return new da(f(this,me))}reset(){b(this,_t,0)}popKeyword(t){const e=this.peek();if(e.type!=="KEYWORD"||!t.has(e.text))throw new Error(`expected keyword ${e.text}`);return this.pop().text}popType(t){if(this.peek().type!==t){const e=this.peek();throw new Error(`expected ${t}; got ${e.type} ${JSON.stringify(e.text)}`)}return this.pop().text}popParen(){const t=this.peek();if(t.type!=="OPEN_PAREN")throw new Error("bad start");const e=B(this,yi,wo).call(this,f(this,_t)+1,t.match+1);return b(this,_t,t.match+1),e}popParams(){const t=this.peek();if(t.type!=="OPEN_PAREN")throw new Error("bad start");const e=[];for(;f(this,_t)<t.match-1;){const r=this.peek().linkNext;e.push(B(this,yi,wo).call(this,f(this,_t)+1,r)),b(this,_t,r)}return b(this,_t,t.match+1),e}peek(){if(f(this,_t)>=f(this,me).length)throw new Error("out-of-bounds");return f(this,me)[f(this,_t)]}peekKeyword(t){const e=this.peekType("KEYWORD");return e!=null&&t.has(e)?e:null}peekType(t){if(this.length===0)return null;const e=this.peek();return e.type===t?e.text:null}pop(){const t=this.peek();return Qs(this,_t)._++,t}toString(){const t=[];for(let e=f(this,_t);e<f(this,me).length;e++){const r=f(this,me)[e];t.push(`${r.type}:${r.text}`)}return`<TokenString ${t.join(" ")}>`}};_t=new WeakMap,me=new WeakMap,yi=new WeakSet,wo=function(t=0,e=0){return new da(f(this,me).slice(t,e).map(r=>Object.freeze(Object.assign({},r,{match:r.match-t,linkBack:r.linkBack-t,linkNext:r.linkNext-t}))))};let we=da;function Un(n){const t=[],e=a=>{const o=i<n.length?JSON.stringify(n[i]):"$EOI";throw new Error(`invalid token ${o} at ${i}: ${a}`)};let r=[],s=[],i=0;for(;i<n.length;){let a=n.substring(i),o=a.match(Vp);o&&(i+=o[1].length,a=n.substring(i));const l={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};t.push(l);let u=jp[a[0]]||"";if(u){if(l.type=u,l.text=a[0],i++,u==="OPEN_PAREN")r.push(t.length-1),s.push(t.length-1);else if(u=="CLOSE_PAREN")r.length===0&&e("no matching open bracket"),l.match=r.pop(),t[l.match].match=t.length-1,l.depth--,l.linkBack=s.pop(),t[l.linkBack].linkNext=t.length-1;else if(u==="COMMA")l.linkBack=s.pop(),t[l.linkBack].linkNext=t.length-1,s.push(t.length-1);else if(u==="OPEN_BRACKET")l.type="BRACKET";else if(u==="CLOSE_BRACKET"){let d=t.pop().text;if(t.length>0&&t[t.length-1].type==="NUMBER"){const h=t.pop().text;d=h+d,t[t.length-1].value=K(h)}if(t.length===0||t[t.length-1].type!=="BRACKET")throw new Error("missing opening bracket");t[t.length-1].text+=d}continue}if(o=a.match(Kp),o){if(l.text=o[1],i+=l.text.length,Qp.has(l.text)){l.type="KEYWORD";continue}if(l.text.match(ju)){l.type="TYPE";continue}l.type="ID";continue}if(o=a.match(Jp),o){l.text=o[1],l.type="NUMBER",i+=l.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(a[0])} at position ${i}`)}return new we(t.map(a=>Object.freeze(a)))}function ql(n,t){let e=[];for(const r in t.keys())n.has(r)&&e.push(r);if(e.length>1)throw new Error(`conflicting types: ${e.join(", ")}`)}function Ca(n,t){if(t.peekKeyword(Gu)){const e=t.pop().text;if(e!==n)throw new Error(`expected ${n}, got ${e}`)}return t.popType("ID")}function nn(n,t){const e=new Set;for(;;){const r=n.peekType("KEYWORD");if(r==null||t&&!t.has(r))break;if(n.pop(),e.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);e.add(r)}return Object.freeze(e)}function Vu(n){let t=nn(n,Mp);return ql(t,Ft("constant payable nonpayable".split(" "))),ql(t,Ft("pure view payable nonpayable".split(" "))),t.has("view")?"view":t.has("pure")?"pure":t.has("payable")?"payable":t.has("nonpayable")?"nonpayable":t.has("constant")?"view":"nonpayable"}function tn(n,t){return n.popParams().map(e=>Pt.from(e,t))}function Ju(n){if(n.peekType("AT")){if(n.pop(),n.peekType("NUMBER"))return H(n.pop().text);throw new Error("invalid gas")}return null}function vr(n){if(n.length)throw new Error(`unexpected tokens at offset ${n.offset}: ${n.toString()}`)}const qp=new RegExp(/^(.*)\[([0-9]*)\]$/);function Yl(n){const t=n.match(ju);if(A(t,"invalid type","type",n),n==="uint")return"uint256";if(n==="int")return"int256";if(t[2]){const e=parseInt(t[2]);A(e!==0&&e<=32,"invalid bytes length","type",n)}else if(t[3]){const e=parseInt(t[3]);A(e!==0&&e<=256&&e%8===0,"invalid numeric width","type",n)}return n}const ft={},Qt=Symbol.for("_ethers_internal"),Zl="_ParamTypeInternal",Wl="_ErrorInternal",Xl="_EventInternal",tc="_ConstructorInternal",ec="_FallbackInternal",nc="_FunctionInternal",rc="_StructInternal";var ys,zi;const ee=class ee{constructor(t,e,r,s,i,a,o,l){C(this,ys);k(this,"name");k(this,"type");k(this,"baseType");k(this,"indexed");k(this,"components");k(this,"arrayLength");k(this,"arrayChildren");if(Ei(t,ft,"ParamType"),Object.defineProperty(this,Qt,{value:Zl}),a&&(a=Object.freeze(a.slice())),s==="array"){if(o==null||l==null)throw new Error("")}else if(o!=null||l!=null)throw new Error("");if(s==="tuple"){if(a==null)throw new Error("")}else if(a!=null)throw new Error("");Q(this,{name:e,type:r,baseType:s,indexed:i,components:a,arrayLength:o,arrayChildren:l})}format(t){if(t==null&&(t="sighash"),t==="json"){const r=this.name||"";if(this.isArray()){const i=JSON.parse(this.arrayChildren.format("json"));return i.name=r,i.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(i)}const s={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(s.indexed=this.indexed),this.isTuple()&&(s.components=this.components.map(i=>JSON.parse(i.format(t)))),JSON.stringify(s)}let e="";return this.isArray()?(e+=this.arrayChildren.format(t),e+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?e+="("+this.components.map(r=>r.format(t)).join(t==="full"?", ":",")+")":e+=this.type,t!=="sighash"&&(this.indexed===!0&&(e+=" indexed"),t==="full"&&this.name&&(e+=" "+this.name)),e}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(t,e){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(this.arrayLength!==-1&&t.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return t.map(s=>r.arrayChildren.walk(s,e))}if(this.isTuple()){if(!Array.isArray(t))throw new Error("invalid tuple value");if(t.length!==this.components.length)throw new Error("array is wrong length");const r=this;return t.map((s,i)=>r.components[i].walk(s,e))}return e(this.type,t)}async walkAsync(t,e){const r=[],s=[t];return B(this,ys,zi).call(this,r,t,e,i=>{s[0]=i}),r.length&&await Promise.all(r),s[0]}static from(t,e){if(ee.isParamType(t))return t;if(typeof t=="string")try{return ee.from(Un(t),e)}catch{A(!1,"invalid param type","obj",t)}else if(t instanceof we){let o="",l="",u=null;nn(t,Ft(["tuple"])).has("tuple")||t.peekType("OPEN_PAREN")?(l="tuple",u=t.popParams().map(w=>ee.from(w)),o=`tuple(${u.map(w=>w.format()).join(",")})`):(o=Yl(t.popType("TYPE")),l=o);let d=null,h=null;for(;t.length&&t.peekType("BRACKET");){const w=t.pop();d=new ee(ft,"",o,l,null,u,h,d),h=w.value,o+=w.text,l="array",u=null}let y=null;if(nn(t,Hp).has("indexed")){if(!e)throw new Error("");y=!0}const v=t.peekType("ID")?t.pop().text:"";if(t.length)throw new Error("leftover tokens");return new ee(ft,v,o,l,y,u,h,d)}const r=t.name;A(!r||typeof r=="string"&&r.match(Qu),"invalid name","obj.name",r);let s=t.indexed;s!=null&&(A(e,"parameter cannot be indexed","obj.indexed",t.indexed),s=!!s);let i=t.type,a=i.match(qp);if(a){const o=parseInt(a[2]||"-1"),l=ee.from({type:a[1],components:t.components});return new ee(ft,r||"",i,"array",s,null,o,l)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const o=t.components!=null?t.components.map(u=>ee.from(u)):null;return new ee(ft,r||"",i,"tuple",s,o,null,null)}return i=Yl(t.type),new ee(ft,r||"",i,i,s,null,null,null)}static isParamType(t){return t&&t[Qt]===Zl}};ys=new WeakSet,zi=function(t,e,r,s){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const a=this.arrayChildren,o=e.slice();o.forEach((l,u)=>{var d;B(d=a,ys,zi).call(d,t,l,r,h=>{o[u]=h})}),s(o);return}if(this.isTuple()){const a=this.components;let o;if(Array.isArray(e))o=e.slice();else{if(e==null||typeof e!="object")throw new Error("invalid tuple value");o=a.map(l=>{if(!l.name)throw new Error("cannot use object value with unnamed components");if(!(l.name in e))throw new Error(`missing value for component ${l.name}`);return e[l.name]})}if(o.length!==this.components.length)throw new Error("array is wrong length");o.forEach((l,u)=>{var d;B(d=a[u],ys,zi).call(d,t,l,r,h=>{o[u]=h})}),s(o);return}const i=r(this.type,e);i.then?t.push(async function(){s(await i)}()):s(i)};let Pt=ee;class Ar{constructor(t,e,r){k(this,"type");k(this,"inputs");Ei(t,ft,"Fragment"),r=Object.freeze(r.slice()),Q(this,{type:e,inputs:r})}static from(t){if(typeof t=="string"){try{Ar.from(JSON.parse(t))}catch{}return Ar.from(Un(t))}if(t instanceof we)switch(t.peekKeyword(Gu)){case"constructor":return We.from(t);case"error":return Gt.from(t);case"event":return Se.from(t);case"fallback":case"receive":return Le.from(t);case"function":return Re.from(t);case"struct":return br.from(t)}else if(typeof t=="object"){switch(t.type){case"constructor":return We.from(t);case"error":return Gt.from(t);case"event":return Se.from(t);case"fallback":case"receive":return Le.from(t);case"function":return Re.from(t);case"struct":return br.from(t)}T(!1,`unsupported type: ${t.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}A(!1,"unsupported frgament object","obj",t)}static isConstructor(t){return We.isFragment(t)}static isError(t){return Gt.isFragment(t)}static isEvent(t){return Se.isFragment(t)}static isFunction(t){return Re.isFragment(t)}static isStruct(t){return br.isFragment(t)}}class Pa extends Ar{constructor(e,r,s,i){super(e,r,i);k(this,"name");A(typeof s=="string"&&s.match(Qu),"invalid identifier","name",s),i=Object.freeze(i.slice()),Q(this,{name:s})}}function ci(n,t){return"("+t.map(e=>e.format(n)).join(n==="full"?", ":",")+")"}class Gt extends Pa{constructor(t,e,r){super(t,"error",e,r),Object.defineProperty(this,Qt,{value:Wl})}get selector(){return wr(this.format("sighash")).substring(0,10)}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(t)))});const e=[];return t!=="sighash"&&e.push("error"),e.push(this.name+ci(t,this.inputs)),e.join(" ")}static from(t){if(Gt.isFragment(t))return t;if(typeof t=="string")return Gt.from(Un(t));if(t instanceof we){const e=Ca("error",t),r=tn(t);return vr(t),new Gt(ft,e,r)}return new Gt(ft,t.name,t.inputs?t.inputs.map(Pt.from):[])}static isFragment(t){return t&&t[Qt]===Wl}}class Se extends Pa{constructor(e,r,s,i){super(e,"event",r,s);k(this,"anonymous");Object.defineProperty(this,Qt,{value:Xl}),Q(this,{anonymous:i})}get topicHash(){return wr(this.format("sighash"))}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(s=>JSON.parse(s.format(e)))});const r=[];return e!=="sighash"&&r.push("event"),r.push(this.name+ci(e,this.inputs)),e!=="sighash"&&this.anonymous&&r.push("anonymous"),r.join(" ")}static getTopicHash(e,r){return r=(r||[]).map(i=>Pt.from(i)),new Se(ft,e,r,!1).topicHash}static from(e){if(Se.isFragment(e))return e;if(typeof e=="string")try{return Se.from(Un(e))}catch{A(!1,"invalid event fragment","obj",e)}else if(e instanceof we){const r=Ca("event",e),s=tn(e,!0),i=!!nn(e,Ft(["anonymous"])).has("anonymous");return vr(e),new Se(ft,r,s,i)}return new Se(ft,e.name,e.inputs?e.inputs.map(r=>Pt.from(r,!0)):[],!!e.anonymous)}static isFragment(e){return e&&e[Qt]===Xl}}class We extends Ar{constructor(e,r,s,i,a){super(e,r,s);k(this,"payable");k(this,"gas");Object.defineProperty(this,Qt,{value:tc}),Q(this,{payable:i,gas:a})}format(e){if(T(e!=null&&e!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),e==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(e)))});const r=[`constructor${ci(e,this.inputs)}`];return this.payable&&r.push("payable"),this.gas!=null&&r.push(`@${this.gas.toString()}`),r.join(" ")}static from(e){if(We.isFragment(e))return e;if(typeof e=="string")try{return We.from(Un(e))}catch{A(!1,"invalid constuctor fragment","obj",e)}else if(e instanceof we){nn(e,Ft(["constructor"]));const r=tn(e),s=!!nn(e,Lp).has("payable"),i=Ju(e);return vr(e),new We(ft,"constructor",r,s,i)}return new We(ft,"constructor",e.inputs?e.inputs.map(Pt.from):[],!!e.payable,e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[Qt]===tc}}class Le extends Ar{constructor(e,r,s){super(e,"fallback",r);k(this,"payable");Object.defineProperty(this,Qt,{value:ec}),Q(this,{payable:s})}format(e){const r=this.inputs.length===0?"receive":"fallback";if(e==="json"){const s=this.payable?"payable":"nonpayable";return JSON.stringify({type:r,stateMutability:s})}return`${r}()${this.payable?" payable":""}`}static from(e){if(Le.isFragment(e))return e;if(typeof e=="string")try{return Le.from(Un(e))}catch{A(!1,"invalid fallback fragment","obj",e)}else if(e instanceof we){const r=e.toString(),s=e.peekKeyword(Ft(["fallback","receive"]));if(A(s,"type must be fallback or receive","obj",r),e.popKeyword(Ft(["fallback","receive"]))==="receive"){const l=tn(e);return A(l.length===0,"receive cannot have arguments","obj.inputs",l),nn(e,Ft(["payable"])),vr(e),new Le(ft,[],!0)}let a=tn(e);a.length?A(a.length===1&&a[0].type==="bytes","invalid fallback inputs","obj.inputs",a.map(l=>l.format("minimal")).join(", ")):a=[Pt.from("bytes")];const o=Vu(e);if(A(o==="nonpayable"||o==="payable","fallback cannot be constants","obj.stateMutability",o),nn(e,Ft(["returns"])).has("returns")){const l=tn(e);A(l.length===1&&l[0].type==="bytes","invalid fallback outputs","obj.outputs",l.map(u=>u.format("minimal")).join(", "))}return vr(e),new Le(ft,a,o==="payable")}if(e.type==="receive")return new Le(ft,[],!0);if(e.type==="fallback"){const r=[Pt.from("bytes")],s=e.stateMutability==="payable";return new Le(ft,r,s)}A(!1,"invalid fallback description","obj",e)}static isFragment(e){return e&&e[Qt]===ec}}class Re extends Pa{constructor(e,r,s,i,a,o){super(e,"function",r,i);k(this,"constant");k(this,"outputs");k(this,"stateMutability");k(this,"payable");k(this,"gas");Object.defineProperty(this,Qt,{value:nc}),a=Object.freeze(a.slice()),Q(this,{constant:s==="view"||s==="pure",gas:o,outputs:a,payable:s==="payable",stateMutability:s})}get selector(){return wr(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(e))),outputs:this.outputs.map(s=>JSON.parse(s.format(e)))});const r=[];return e!=="sighash"&&r.push("function"),r.push(this.name+ci(e,this.inputs)),e!=="sighash"&&(this.stateMutability!=="nonpayable"&&r.push(this.stateMutability),this.outputs&&this.outputs.length&&(r.push("returns"),r.push(ci(e,this.outputs))),this.gas!=null&&r.push(`@${this.gas.toString()}`)),r.join(" ")}static getSelector(e,r){return r=(r||[]).map(i=>Pt.from(i)),new Re(ft,e,"view",r,[],null).selector}static from(e){if(Re.isFragment(e))return e;if(typeof e=="string")try{return Re.from(Un(e))}catch{A(!1,"invalid function fragment","obj",e)}else if(e instanceof we){const s=Ca("function",e),i=tn(e),a=Vu(e);let o=[];nn(e,Ft(["returns"])).has("returns")&&(o=tn(e));const l=Ju(e);return vr(e),new Re(ft,s,a,i,o,l)}let r=e.stateMutability;return r==null&&(r="payable",typeof e.constant=="boolean"?(r="view",e.constant||(r="payable",typeof e.payable=="boolean"&&!e.payable&&(r="nonpayable"))):typeof e.payable=="boolean"&&!e.payable&&(r="nonpayable")),new Re(ft,e.name,r,e.inputs?e.inputs.map(Pt.from):[],e.outputs?e.outputs.map(Pt.from):[],e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[Qt]===nc}}class br extends Pa{constructor(t,e,r){super(t,"struct",e,r),Object.defineProperty(this,Qt,{value:rc})}format(){throw new Error("@TODO")}static from(t){if(typeof t=="string")try{return br.from(Un(t))}catch{A(!1,"invalid struct fragment","obj",t)}else if(t instanceof we){const e=Ca("struct",t),r=tn(t);return vr(t),new br(ft,e,r)}return new br(ft,t.name,t.inputs?t.inputs.map(Pt.from):[])}static isFragment(t){return t&&t[Qt]===rc}}const ve=new Map;ve.set(0,"GENERIC_PANIC");ve.set(1,"ASSERT_FALSE");ve.set(17,"OVERFLOW");ve.set(18,"DIVIDE_BY_ZERO");ve.set(33,"ENUM_RANGE_ERROR");ve.set(34,"BAD_STORAGE_DATA");ve.set(49,"STACK_UNDERFLOW");ve.set(50,"ARRAY_RANGE_ERROR");ve.set(65,"OUT_OF_MEMORY");ve.set(81,"UNINITIALIZED_FUNCTION_CALL");const Yp=new RegExp(/^bytes([0-9]*)$/),Zp=new RegExp(/^(u?int)([0-9]*)$/);let ja=null,sc=1024;function Wp(n,t,e,r){let s="missing revert data",i=null;const a=null;let o=null;if(e){s="execution reverted";const u=q(e);if(e=F(e),u.length===0)s+=" (no data present; likely require(false) occurred",i="require(false)";else if(u.length%32!==4)s+=" (could not decode reason; invalid data length)";else if(F(u.slice(0,4))==="0x08c379a0")try{i=r.decode(["string"],u.slice(4))[0],o={signature:"Error(string)",name:"Error",args:[i]},s+=`: ${JSON.stringify(i)}`}catch{s+=" (could not decode reason; invalid string data)"}else if(F(u.slice(0,4))==="0x4e487b71")try{const d=Number(r.decode(["uint256"],u.slice(4))[0]);o={signature:"Panic(uint256)",name:"Panic",args:[d]},i=`Panic due to ${ve.get(d)||"UNKNOWN"}(${d})`,s+=`: ${i}`}catch{s+=" (could not decode panic code)"}else s+=" (unknown custom error)"}const l={to:t.to?rt(t.to):null,data:t.data||"0x"};return t.from&&(l.from=rt(t.from)),dt(s,"CALL_EXCEPTION",{action:n,data:e,reason:i,transaction:l,invocation:a,revert:o})}var wn,Or;const fa=class fa{constructor(){C(this,wn)}getDefaultValue(t){const e=t.map(s=>B(this,wn,Or).call(this,Pt.from(s)));return new Ui(e,"_").defaultValue()}encode(t,e){Ac(e.length,t.length,"types/values length mismatch");const r=t.map(a=>B(this,wn,Or).call(this,Pt.from(a))),s=new Ui(r,"_"),i=new so;return s.encode(i,e),i.data}decode(t,e,r){const s=t.map(a=>B(this,wn,Or).call(this,Pt.from(a)));return new Ui(s,"_").decode(new io(e,r,sc))}static _setDefaultMaxInflation(t){A(typeof t=="number"&&Number.isInteger(t),"invalid defaultMaxInflation factor","value",t),sc=t}static defaultAbiCoder(){return ja==null&&(ja=new fa),ja}static getBuiltinCallException(t,e,r){return Wp(t,e,r,fa.defaultAbiCoder())}};wn=new WeakSet,Or=function(t){if(t.isArray())return new gh(B(this,wn,Or).call(this,t.arrayChildren),t.arrayLength,t.name);if(t.isTuple())return new Ui(t.components.map(r=>B(this,wn,Or).call(this,r)),t.name);switch(t.baseType){case"address":return new ph(t.name);case"bool":return new yh(t.name);case"string":return new Ch(t.name);case"bytes":return new bh(t.name);case"":return new Ah(t.name)}let e=t.type.match(Zp);if(e){let r=parseInt(e[2]||"256");return A(r!==0&&r<=256&&r%8===0,"invalid "+e[1]+" bit length","param",t),new Eh(r/8,e[1]==="int",t.name)}if(e=t.type.match(Yp),e){let r=parseInt(e[1]);return A(r!==0&&r<=32,"invalid bytes length","param",t),new wh(r,t.name)}A(!1,"invalid type","type",t.type)};let ui=fa;class Xp{constructor(t,e,r){k(this,"fragment");k(this,"name");k(this,"signature");k(this,"topic");k(this,"args");const s=t.name,i=t.format();Q(this,{fragment:t,name:s,signature:i,topic:e,args:r})}}class tm{constructor(t,e,r,s){k(this,"fragment");k(this,"name");k(this,"args");k(this,"signature");k(this,"selector");k(this,"value");const i=t.name,a=t.format();Q(this,{fragment:t,name:i,args:r,signature:a,selector:e,value:s})}}class em{constructor(t,e,r){k(this,"fragment");k(this,"name");k(this,"args");k(this,"signature");k(this,"selector");const s=t.name,i=t.format();Q(this,{fragment:t,name:s,args:r,signature:i,selector:e})}}class ic{constructor(t){k(this,"hash");k(this,"_isIndexed");Q(this,{hash:t,_isIndexed:!0})}static isIndexed(t){return!!(t&&t._isIndexed)}}const ac={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},oc={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:n=>`reverted with reason string ${JSON.stringify(n)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:n=>{let t="unknown panic code";return n>=0&&n<=255&&ac[n.toString()]&&(t=ac[n.toString()]),`reverted with panic code 0x${n.toString(16)} (${t})`}}};var Ce,Pe,Ie,It,$e,Qi,ji;const jn=class jn{constructor(t){C(this,$e);k(this,"fragments");k(this,"deploy");k(this,"fallback");k(this,"receive");C(this,Ce);C(this,Pe);C(this,Ie);C(this,It);let e=[];typeof t=="string"?e=JSON.parse(t):e=t,b(this,Ie,new Map),b(this,Ce,new Map),b(this,Pe,new Map);const r=[];for(const a of e)try{r.push(Ar.from(a))}catch(o){console.log(`[Warning] Invalid Fragment ${JSON.stringify(a)}:`,o.message)}Q(this,{fragments:Object.freeze(r)});let s=null,i=!1;b(this,It,this.getAbiCoder()),this.fragments.forEach((a,o)=>{let l;switch(a.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}Q(this,{deploy:a});return;case"fallback":a.inputs.length===0?i=!0:(A(!s||a.payable!==s.payable,"conflicting fallback fragments",`fragments[${o}]`,a),s=a,i=s.payable);return;case"function":l=f(this,Ie);break;case"event":l=f(this,Pe);break;case"error":l=f(this,Ce);break;default:return}const u=a.format();l.has(u)||l.set(u,a)}),this.deploy||Q(this,{deploy:We.from("constructor()")}),Q(this,{fallback:s,receive:i})}format(t){const e=t?"minimal":"full";return this.fragments.map(s=>s.format(e))}formatJson(){const t=this.fragments.map(e=>e.format("json"));return JSON.stringify(t.map(e=>JSON.parse(e)))}getAbiCoder(){return ui.defaultAbiCoder()}getFunctionName(t){const e=B(this,$e,Qi).call(this,t,null,!1);return A(e,"no matching function","key",t),e.name}hasFunction(t){return!!B(this,$e,Qi).call(this,t,null,!1)}getFunction(t,e){return B(this,$e,Qi).call(this,t,e||null,!0)}forEachFunction(t){const e=Array.from(f(this,Ie).keys());e.sort((r,s)=>r.localeCompare(s));for(let r=0;r<e.length;r++){const s=e[r];t(f(this,Ie).get(s),r)}}getEventName(t){const e=B(this,$e,ji).call(this,t,null,!1);return A(e,"no matching event","key",t),e.name}hasEvent(t){return!!B(this,$e,ji).call(this,t,null,!1)}getEvent(t,e){return B(this,$e,ji).call(this,t,e||null,!0)}forEachEvent(t){const e=Array.from(f(this,Pe).keys());e.sort((r,s)=>r.localeCompare(s));for(let r=0;r<e.length;r++){const s=e[r];t(f(this,Pe).get(s),r)}}getError(t,e){if(lt(t)){const s=t.toLowerCase();if(oc[s])return Gt.from(oc[s].signature);for(const i of f(this,Ce).values())if(s===i.selector)return i;return null}if(t.indexOf("(")===-1){const s=[];for(const[i,a]of f(this,Ce))i.split("(")[0]===t&&s.push(a);if(s.length===0)return t==="Error"?Gt.from("error Error(string)"):t==="Panic"?Gt.from("error Panic(uint256)"):null;if(s.length>1){const i=s.map(a=>JSON.stringify(a.format())).join(", ");A(!1,`ambiguous error description (i.e. ${i})`,"name",t)}return s[0]}if(t=Gt.from(t).format(),t==="Error(string)")return Gt.from("error Error(string)");if(t==="Panic(uint256)")return Gt.from("error Panic(uint256)");const r=f(this,Ce).get(t);return r||null}forEachError(t){const e=Array.from(f(this,Ce).keys());e.sort((r,s)=>r.localeCompare(s));for(let r=0;r<e.length;r++){const s=e[r];t(f(this,Ce).get(s),r)}}_decodeParams(t,e){return f(this,It).decode(t,e)}_encodeParams(t,e){return f(this,It).encode(t,e)}encodeDeploy(t){return this._encodeParams(this.deploy.inputs,t||[])}decodeErrorResult(t,e){if(typeof t=="string"){const r=this.getError(t);A(r,"unknown error","fragment",t),t=r}return A(ht(e,0,4)===t.selector,`data signature does not match error ${t.name}.`,"data",e),this._decodeParams(t.inputs,ht(e,4))}encodeErrorResult(t,e){if(typeof t=="string"){const r=this.getError(t);A(r,"unknown error","fragment",t),t=r}return pt([t.selector,this._encodeParams(t.inputs,e||[])])}decodeFunctionData(t,e){if(typeof t=="string"){const r=this.getFunction(t);A(r,"unknown function","fragment",t),t=r}return A(ht(e,0,4)===t.selector,`data signature does not match function ${t.name}.`,"data",e),this._decodeParams(t.inputs,ht(e,4))}encodeFunctionData(t,e){if(typeof t=="string"){const r=this.getFunction(t);A(r,"unknown function","fragment",t),t=r}return pt([t.selector,this._encodeParams(t.inputs,e||[])])}decodeFunctionResult(t,e){if(typeof t=="string"){const i=this.getFunction(t);A(i,"unknown function","fragment",t),t=i}let r="invalid length for result data";const s=$t(e);if(s.length%32===0)try{return f(this,It).decode(t.outputs,s)}catch{r="could not decode result data"}T(!1,r,"BAD_DATA",{value:F(s),info:{method:t.name,signature:t.format()}})}makeError(t,e){const r=q(t,"data"),s=ui.getBuiltinCallException("call",e,r);if(s.message.startsWith("execution reverted (unknown custom error)")){const o=F(r.slice(0,4)),l=this.getError(o);if(l)try{const u=f(this,It).decode(l.inputs,r.slice(4));s.revert={name:l.name,signature:l.format(),args:u},s.reason=s.revert.signature,s.message=`execution reverted: ${s.reason}`}catch{s.message="execution reverted (coult not decode custom error)"}}const a=this.parseTransaction(e);return a&&(s.invocation={method:a.name,signature:a.signature,args:a.args}),s}encodeFunctionResult(t,e){if(typeof t=="string"){const r=this.getFunction(t);A(r,"unknown function","fragment",t),t=r}return F(f(this,It).encode(t.outputs,e||[]))}encodeFilterTopics(t,e){if(typeof t=="string"){const i=this.getEvent(t);A(i,"unknown event","eventFragment",t),t=i}T(e.length<=t.inputs.length,`too many arguments for ${t.format()}`,"UNEXPECTED_ARGUMENT",{count:e.length,expectedCount:t.inputs.length});const r=[];t.anonymous||r.push(t.topicHash);const s=(i,a)=>i.type==="string"?wr(a):i.type==="bytes"?yt(F(a)):(i.type==="bool"&&typeof a=="boolean"?a=a?"0x01":"0x00":i.type.match(/^u?int/)?a=Sn(a):i.type.match(/^bytes/)?a=yd(a,32):i.type==="address"&&f(this,It).encode(["address"],[a]),en(F(a),32));for(e.forEach((i,a)=>{const o=t.inputs[a];if(!o.indexed){A(i==null,"cannot filter non-indexed parameters; must be null","contract."+o.name,i);return}i==null?r.push(null):o.baseType==="array"||o.baseType==="tuple"?A(!1,"filtering with tuples or arrays not supported","contract."+o.name,i):Array.isArray(i)?r.push(i.map(l=>s(o,l))):r.push(s(o,i))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(t,e){if(typeof t=="string"){const a=this.getEvent(t);A(a,"unknown event","eventFragment",t),t=a}const r=[],s=[],i=[];return t.anonymous||r.push(t.topicHash),A(e.length===t.inputs.length,"event arguments/values mismatch","values",e),t.inputs.forEach((a,o)=>{const l=e[o];if(a.indexed)if(a.type==="string")r.push(wr(l));else if(a.type==="bytes")r.push(yt(l));else{if(a.baseType==="tuple"||a.baseType==="array")throw new Error("not implemented");r.push(f(this,It).encode([a.type],[l]))}else s.push(a),i.push(l)}),{data:f(this,It).encode(s,i),topics:r}}decodeEventLog(t,e,r){if(typeof t=="string"){const g=this.getEvent(t);A(g,"unknown event","eventFragment",t),t=g}if(r!=null&&!t.anonymous){const g=t.topicHash;A(lt(r[0],32)&&r[0].toLowerCase()===g,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const s=[],i=[],a=[];t.inputs.forEach((g,v)=>{g.indexed?g.type==="string"||g.type==="bytes"||g.baseType==="tuple"||g.baseType==="array"?(s.push(Pt.from({type:"bytes32",name:g.name})),a.push(!0)):(s.push(g),a.push(!1)):(i.push(g),a.push(!1))});const o=r!=null?f(this,It).decode(s,pt(r)):null,l=f(this,It).decode(i,e,!0),u=[],d=[];let h=0,y=0;return t.inputs.forEach((g,v)=>{let w=null;if(g.indexed)if(o==null)w=new ic(null);else if(a[v])w=new ic(o[y++]);else try{w=o[y++]}catch(x){w=x}else try{w=l[h++]}catch(x){w=x}u.push(w),d.push(g.name||null)}),Rs.fromItems(u,d)}parseTransaction(t){const e=q(t.data,"tx.data"),r=H(t.value!=null?t.value:0,"tx.value"),s=this.getFunction(F(e.slice(0,4)));if(!s)return null;const i=f(this,It).decode(s.inputs,e.slice(4));return new tm(s,s.selector,i,r)}parseCallResult(t){throw new Error("@TODO")}parseLog(t){const e=this.getEvent(t.topics[0]);return!e||e.anonymous?null:new Xp(e,e.topicHash,this.decodeEventLog(e,t.data,t.topics))}parseError(t){const e=F(t),r=this.getError(ht(e,0,4));if(!r)return null;const s=f(this,It).decode(r.inputs,ht(e,4));return new em(r,r.selector,s)}static from(t){return t instanceof jn?t:typeof t=="string"?new jn(JSON.parse(t)):typeof t.formatJson=="function"?new jn(t.formatJson()):typeof t.format=="function"?new jn(t.format("json")):new jn(t)}};Ce=new WeakMap,Pe=new WeakMap,Ie=new WeakMap,It=new WeakMap,$e=new WeakSet,Qi=function(t,e,r){if(lt(t)){const i=t.toLowerCase();for(const a of f(this,Ie).values())if(i===a.selector)return a;return null}if(t.indexOf("(")===-1){const i=[];for(const[a,o]of f(this,Ie))a.split("(")[0]===t&&i.push(o);if(e){const a=e.length>0?e[e.length-1]:null;let o=e.length,l=!0;Bt.isTyped(a)&&a.type==="overrides"&&(l=!1,o--);for(let u=i.length-1;u>=0;u--){const d=i[u].inputs.length;d!==o&&(!l||d!==o-1)&&i.splice(u,1)}for(let u=i.length-1;u>=0;u--){const d=i[u].inputs;for(let h=0;h<e.length;h++)if(Bt.isTyped(e[h])){if(h>=d.length){if(e[h].type==="overrides")continue;i.splice(u,1);break}if(e[h].type!==d[h].baseType){i.splice(u,1);break}}}}if(i.length===1&&e&&e.length!==i[0].inputs.length){const a=e[e.length-1];(a==null||Array.isArray(a)||typeof a!="object")&&i.splice(0,1)}if(i.length===0)return null;if(i.length>1&&r){const a=i.map(o=>JSON.stringify(o.format())).join(", ");A(!1,`ambiguous function description (i.e. matches ${a})`,"key",t)}return i[0]}const s=f(this,Ie).get(Re.from(t).format());return s||null},ji=function(t,e,r){if(lt(t)){const i=t.toLowerCase();for(const a of f(this,Pe).values())if(i===a.topicHash)return a;return null}if(t.indexOf("(")===-1){const i=[];for(const[a,o]of f(this,Pe))a.split("(")[0]===t&&i.push(o);if(e){for(let a=i.length-1;a>=0;a--)i[a].inputs.length<e.length&&i.splice(a,1);for(let a=i.length-1;a>=0;a--){const o=i[a].inputs;for(let l=0;l<e.length;l++)if(Bt.isTyped(e[l])&&e[l].type!==o[l].baseType){i.splice(a,1);break}}}if(i.length===0)return null;if(i.length>1&&r){const a=i.map(o=>JSON.stringify(o.format())).join(", ");A(!1,`ambiguous event description (i.e. matches ${a})`,"key",t)}return i[0]}const s=f(this,Pe).get(Se.from(t).format());return s||null};let vo=jn;const Ku=BigInt(0);function jr(n){return n??null}function mt(n){return n==null?null:n.toString()}class lc{constructor(t,e,r){k(this,"gasPrice");k(this,"maxFeePerGas");k(this,"maxPriorityFeePerGas");Q(this,{gasPrice:jr(t),maxFeePerGas:jr(e),maxPriorityFeePerGas:jr(r)})}toJSON(){const{gasPrice:t,maxFeePerGas:e,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:mt(t),maxFeePerGas:mt(e),maxPriorityFeePerGas:mt(r)}}}function aa(n){const t={};n.to&&(t.to=n.to),n.from&&(t.from=n.from),n.data&&(t.data=F(n.data));const e="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const s of e)!(s in n)||n[s]==null||(t[s]=H(n[s],`request.${s}`));const r="type,nonce".split(/,/);for(const s of r)!(s in n)||n[s]==null||(t[s]=K(n[s],`request.${s}`));return n.accessList&&(t.accessList=_r(n.accessList)),n.authorizationList&&(t.authorizationList=n.authorizationList.slice()),"blockTag"in n&&(t.blockTag=n.blockTag),"enableCcipRead"in n&&(t.enableCcipRead=!!n.enableCcipRead),"customData"in n&&(t.customData=n.customData),"blobVersionedHashes"in n&&n.blobVersionedHashes&&(t.blobVersionedHashes=n.blobVersionedHashes.slice()),"kzg"in n&&(t.kzg=n.kzg),"blobs"in n&&n.blobs&&(t.blobs=n.blobs.map(s=>Do(s)?F(s):Object.assign({},s))),t}var je;class nm{constructor(t,e){k(this,"provider");k(this,"number");k(this,"hash");k(this,"timestamp");k(this,"parentHash");k(this,"parentBeaconBlockRoot");k(this,"nonce");k(this,"difficulty");k(this,"gasLimit");k(this,"gasUsed");k(this,"stateRoot");k(this,"receiptsRoot");k(this,"blobGasUsed");k(this,"excessBlobGas");k(this,"miner");k(this,"prevRandao");k(this,"extraData");k(this,"baseFeePerGas");C(this,je);b(this,je,t.transactions.map(r=>typeof r!="string"?new di(r,e):r)),Q(this,{provider:e,hash:jr(t.hash),number:t.number,timestamp:t.timestamp,parentHash:t.parentHash,parentBeaconBlockRoot:t.parentBeaconBlockRoot,nonce:t.nonce,difficulty:t.difficulty,gasLimit:t.gasLimit,gasUsed:t.gasUsed,blobGasUsed:t.blobGasUsed,excessBlobGas:t.excessBlobGas,miner:t.miner,prevRandao:jr(t.prevRandao),extraData:t.extraData,baseFeePerGas:jr(t.baseFeePerGas),stateRoot:t.stateRoot,receiptsRoot:t.receiptsRoot})}get transactions(){return f(this,je).map(t=>typeof t=="string"?t:t.hash)}get prefetchedTransactions(){const t=f(this,je).slice();return t.length===0?[]:(T(typeof t[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),t)}toJSON(){const{baseFeePerGas:t,difficulty:e,extraData:r,gasLimit:s,gasUsed:i,hash:a,miner:o,prevRandao:l,nonce:u,number:d,parentHash:h,parentBeaconBlockRoot:y,stateRoot:g,receiptsRoot:v,timestamp:w,transactions:x}=this;return{_type:"Block",baseFeePerGas:mt(t),difficulty:mt(e),extraData:r,gasLimit:mt(s),gasUsed:mt(i),blobGasUsed:mt(this.blobGasUsed),excessBlobGas:mt(this.excessBlobGas),hash:a,miner:o,prevRandao:l,nonce:u,number:d,parentHash:h,timestamp:w,parentBeaconBlockRoot:y,stateRoot:g,receiptsRoot:v,transactions:x}}[Symbol.iterator](){let t=0;const e=this.transactions;return{next:()=>t<this.length?{value:e[t++],done:!1}:{value:void 0,done:!0}}}get length(){return f(this,je).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(t){let e;if(typeof t=="number")e=f(this,je)[t];else{const r=t.toLowerCase();for(const s of f(this,je))if(typeof s=="string"){if(s!==r)continue;e=s;break}else{if(s.hash!==r)continue;e=s;break}}if(e==null)throw new Error("no such tx");return typeof e=="string"?await this.provider.getTransaction(e):e}getPrefetchedTransaction(t){const e=this.prefetchedTransactions;if(typeof t=="number")return e[t];t=t.toLowerCase();for(const r of e)if(r.hash===t)return r;A(!1,"no matching transaction","indexOrHash",t)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return rm(this)}}je=new WeakMap;class Ii{constructor(t,e){k(this,"provider");k(this,"transactionHash");k(this,"blockHash");k(this,"blockNumber");k(this,"removed");k(this,"address");k(this,"data");k(this,"topics");k(this,"index");k(this,"transactionIndex");this.provider=e;const r=Object.freeze(t.topics.slice());Q(this,{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,removed:t.removed,address:t.address,data:t.data,topics:r,index:t.index,transactionIndex:t.transactionIndex})}toJSON(){const{address:t,blockHash:e,blockNumber:r,data:s,index:i,removed:a,topics:o,transactionHash:l,transactionIndex:u}=this;return{_type:"log",address:t,blockHash:e,blockNumber:r,data:s,index:i,removed:a,topics:o,transactionHash:l,transactionIndex:u}}async getBlock(){const t=await this.provider.getBlock(this.blockHash);return T(!!t,"failed to find transaction","UNKNOWN_ERROR",{}),t}async getTransaction(){const t=await this.provider.getTransaction(this.transactionHash);return T(!!t,"failed to find transaction","UNKNOWN_ERROR",{}),t}async getTransactionReceipt(){const t=await this.provider.getTransactionReceipt(this.transactionHash);return T(!!t,"failed to find transaction receipt","UNKNOWN_ERROR",{}),t}removedEvent(){return sm(this)}}var bi;class qu{constructor(t,e){k(this,"provider");k(this,"to");k(this,"from");k(this,"contractAddress");k(this,"hash");k(this,"index");k(this,"blockHash");k(this,"blockNumber");k(this,"logsBloom");k(this,"gasUsed");k(this,"blobGasUsed");k(this,"cumulativeGasUsed");k(this,"gasPrice");k(this,"blobGasPrice");k(this,"type");k(this,"status");k(this,"root");C(this,bi);b(this,bi,Object.freeze(t.logs.map(s=>new Ii(s,e))));let r=Ku;t.effectiveGasPrice!=null?r=t.effectiveGasPrice:t.gasPrice!=null&&(r=t.gasPrice),Q(this,{provider:e,to:t.to,from:t.from,contractAddress:t.contractAddress,hash:t.hash,index:t.index,blockHash:t.blockHash,blockNumber:t.blockNumber,logsBloom:t.logsBloom,gasUsed:t.gasUsed,cumulativeGasUsed:t.cumulativeGasUsed,blobGasUsed:t.blobGasUsed,gasPrice:r,blobGasPrice:t.blobGasPrice,type:t.type,status:t.status,root:t.root})}get logs(){return f(this,bi)}toJSON(){const{to:t,from:e,contractAddress:r,hash:s,index:i,blockHash:a,blockNumber:o,logsBloom:l,logs:u,status:d,root:h}=this;return{_type:"TransactionReceipt",blockHash:a,blockNumber:o,contractAddress:r,cumulativeGasUsed:mt(this.cumulativeGasUsed),from:e,gasPrice:mt(this.gasPrice),blobGasUsed:mt(this.blobGasUsed),blobGasPrice:mt(this.blobGasPrice),gasUsed:mt(this.gasUsed),hash:s,index:i,logs:u,logsBloom:l,root:h,status:d,to:t}}get length(){return this.logs.length}[Symbol.iterator](){let t=0;return{next:()=>t<this.length?{value:this.logs[t++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const t=await this.provider.getBlock(this.blockHash);if(t==null)throw new Error("TODO");return t}async getTransaction(){const t=await this.provider.getTransaction(this.hash);if(t==null)throw new Error("TODO");return t}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return Zu(this)}reorderedEvent(t){return T(!t||t.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),Yu(this,t)}}bi=new WeakMap;var vn;const rl=class rl{constructor(t,e){k(this,"provider");k(this,"blockNumber");k(this,"blockHash");k(this,"index");k(this,"hash");k(this,"type");k(this,"to");k(this,"from");k(this,"nonce");k(this,"gasLimit");k(this,"gasPrice");k(this,"maxPriorityFeePerGas");k(this,"maxFeePerGas");k(this,"maxFeePerBlobGas");k(this,"data");k(this,"value");k(this,"chainId");k(this,"signature");k(this,"accessList");k(this,"blobVersionedHashes");k(this,"authorizationList");C(this,vn);this.provider=e,this.blockNumber=t.blockNumber!=null?t.blockNumber:null,this.blockHash=t.blockHash!=null?t.blockHash:null,this.hash=t.hash,this.index=t.index,this.type=t.type,this.from=t.from,this.to=t.to||null,this.gasLimit=t.gasLimit,this.nonce=t.nonce,this.data=t.data,this.value=t.value,this.gasPrice=t.gasPrice,this.maxPriorityFeePerGas=t.maxPriorityFeePerGas!=null?t.maxPriorityFeePerGas:null,this.maxFeePerGas=t.maxFeePerGas!=null?t.maxFeePerGas:null,this.maxFeePerBlobGas=t.maxFeePerBlobGas!=null?t.maxFeePerBlobGas:null,this.chainId=t.chainId,this.signature=t.signature,this.accessList=t.accessList!=null?t.accessList:null,this.blobVersionedHashes=t.blobVersionedHashes!=null?t.blobVersionedHashes:null,this.authorizationList=t.authorizationList!=null?t.authorizationList:null,b(this,vn,-1)}toJSON(){const{blockNumber:t,blockHash:e,index:r,hash:s,type:i,to:a,from:o,nonce:l,data:u,signature:d,accessList:h,blobVersionedHashes:y}=this;return{_type:"TransactionResponse",accessList:h,blockNumber:t,blockHash:e,blobVersionedHashes:y,chainId:mt(this.chainId),data:u,from:o,gasLimit:mt(this.gasLimit),gasPrice:mt(this.gasPrice),hash:s,maxFeePerGas:mt(this.maxFeePerGas),maxPriorityFeePerGas:mt(this.maxPriorityFeePerGas),maxFeePerBlobGas:mt(this.maxFeePerBlobGas),nonce:l,signature:d,to:a,index:r,type:i,value:mt(this.value)}}async getBlock(){let t=this.blockNumber;if(t==null){const r=await this.getTransaction();r&&(t=r.blockNumber)}if(t==null)return null;const e=this.provider.getBlock(t);if(e==null)throw new Error("TODO");return e}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:e,blockNumber:r}=await Ot({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return e==null||e.blockNumber==null?0:r-e.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(t,e){const r=t??1,s=e??0;let i=f(this,vn),a=-1,o=i===-1;const l=async()=>{if(o)return null;const{blockNumber:y,nonce:g}=await Ot({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(g<this.nonce){i=y;return}if(o)return null;const v=await this.getTransaction();if(!(v&&v.blockNumber!=null))for(a===-1&&(a=i-3,a<f(this,vn)&&(a=f(this,vn)));a<=y;){if(o)return null;const w=await this.provider.getBlock(a,!0);if(w==null)return;for(const x of w)if(x===this.hash)return;for(let x=0;x<w.length;x++){const E=await w.getTransaction(x);if(E.from===this.from&&E.nonce===this.nonce){if(o)return null;const P=await this.provider.getTransactionReceipt(E.hash);if(P==null||y-P.blockNumber+1<r)return;let I="replaced";E.data===this.data&&E.to===this.to&&E.value===this.value?I="repriced":E.data==="0x"&&E.from===E.to&&E.value===Ku&&(I="cancelled"),T(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:I==="replaced"||I==="cancelled",reason:I,replacement:E.replaceableTransaction(i),hash:E.hash,receipt:P})}}a++}},u=y=>{if(y==null||y.status!==0)return y;T(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:y.to,from:y.from,data:""},receipt:y})},d=await this.provider.getTransactionReceipt(this.hash);if(r===0)return u(d);if(d){if(r===1||await d.confirmations()>=r)return u(d)}else if(await l(),r===0)return null;return await new Promise((y,g)=>{const v=[],w=()=>{v.forEach(E=>E())};if(v.push(()=>{o=!0}),s>0){const E=setTimeout(()=>{w(),g(dt("wait for transaction timeout","TIMEOUT"))},s);v.push(()=>{clearTimeout(E)})}const x=async E=>{if(await E.confirmations()>=r){w();try{y(u(E))}catch(P){g(P)}}};if(v.push(()=>{this.provider.off(this.hash,x)}),this.provider.on(this.hash,x),i>=0){const E=async()=>{try{await l()}catch(P){if(Ct(P,"TRANSACTION_REPLACED")){w(),g(P);return}}o||this.provider.once("block",E)};v.push(()=>{this.provider.off("block",E)}),this.provider.once("block",E)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return T(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Zu(this)}reorderedEvent(t){return T(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),T(!t||t.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Yu(this,t)}replaceableTransaction(t){A(Number.isInteger(t)&&t>=0,"invalid startBlock","startBlock",t);const e=new rl(this,this.provider);return b(e,vn,t),e}};vn=new WeakMap;let di=rl;function rm(n){return{orphan:"drop-block",hash:n.hash,number:n.number}}function Yu(n,t){return{orphan:"reorder-transaction",tx:n,other:t}}function Zu(n){return{orphan:"drop-transaction",tx:n}}function sm(n){return{orphan:"drop-log",log:{transactionHash:n.transactionHash,blockHash:n.blockHash,blockNumber:n.blockNumber,address:n.address,data:n.data,topics:Object.freeze(n.topics.slice()),index:n.index}}}class Yo extends Ii{constructor(e,r,s){super(e,e.provider);k(this,"interface");k(this,"fragment");k(this,"args");const i=r.decodeEventLog(s,e.data,e.topics);Q(this,{args:i,fragment:s,interface:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class Wu extends Ii{constructor(e,r){super(e,e.provider);k(this,"error");Q(this,{error:r})}}var bs;class im extends qu{constructor(e,r,s){super(s,r);C(this,bs);b(this,bs,e)}get logs(){return super.logs.map(e=>{const r=e.topics.length?f(this,bs).getEvent(e.topics[0]):null;if(r)try{return new Yo(e,f(this,bs),r)}catch(s){return new Wu(e,s)}return e})}}bs=new WeakMap;var wi;class Zo extends di{constructor(e,r,s){super(s,r);C(this,wi);b(this,wi,e)}async wait(e,r){const s=await super.wait(e,r);return s==null?null:new im(f(this,wi),this.provider,s)}}wi=new WeakMap;class Xu extends Ec{constructor(e,r,s,i){super(e,r,s);k(this,"log");Q(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class am extends Xu{constructor(t,e,r,s,i){super(t,e,r,new Yo(i,t.interface,s));const a=t.interface.decodeEventLog(s,this.log.data,this.log.topics);Q(this,{args:a,fragment:s})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const cc=BigInt(0);function td(n){return n&&typeof n.call=="function"}function ed(n){return n&&typeof n.estimateGas=="function"}function Ia(n){return n&&typeof n.resolveName=="function"}function nd(n){return n&&typeof n.sendTransaction=="function"}function rd(n){if(n!=null){if(Ia(n))return n;if(n.provider)return n.provider}}var vi;class om{constructor(t,e,r){C(this,vi);k(this,"fragment");if(Q(this,{fragment:e}),e.inputs.length<r.length)throw new Error("too many arguments");const s=xr(t.runner,"resolveName"),i=Ia(s)?s:null;b(this,vi,async function(){const a=await Promise.all(e.inputs.map((o,l)=>r[l]==null?null:o.walkAsync(r[l],(d,h)=>d==="address"?Array.isArray(h)?Promise.all(h.map(y=>Dt(y,i))):Dt(h,i):h)));return t.interface.encodeFilterTopics(e,a)}())}getTopicFilter(){return f(this,vi)}}vi=new WeakMap;function xr(n,t){return n==null?null:typeof n[t]=="function"?n:n.provider&&typeof n.provider[t]=="function"?n.provider:null}function Yn(n){return n==null?null:n.provider||null}async function sd(n,t){const e=Bt.dereference(n,"overrides");A(typeof e=="object","invalid overrides parameter","overrides",n);const r=aa(e);return A(r.to==null||(t||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),A(r.data==null||(t||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function lm(n,t,e){const r=xr(n,"resolveName"),s=Ia(r)?r:null;return await Promise.all(t.map((i,a)=>i.walkAsync(e[a],(o,l)=>(l=Bt.dereference(l,o),o==="address"?Dt(l,s):l))))}function cm(n){const t=async function(a){const o=await sd(a,["data"]);o.to=await n.getAddress(),o.from&&(o.from=await Dt(o.from,rd(n.runner)));const l=n.interface,u=H(o.value||cc,"overrides.value")===cc,d=(o.data||"0x")==="0x";l.fallback&&!l.fallback.payable&&l.receive&&!d&&!u&&A(!1,"cannot send data to receive or send value to non-payable fallback","overrides",a),A(l.fallback||d,"cannot send data to receive-only contract","overrides.data",o.data);const h=l.receive||l.fallback&&l.fallback.payable;return A(h||u,"cannot send value to non-payable fallback","overrides.value",o.value),A(l.fallback||d,"cannot send data to receive-only contract","overrides.data",o.data),o},e=async function(a){const o=xr(n.runner,"call");T(td(o),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const l=await t(a);try{return await o.call(l)}catch(u){throw Uo(u)&&u.data?n.interface.makeError(u.data,l):u}},r=async function(a){const o=n.runner;T(nd(o),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const l=await o.sendTransaction(await t(a)),u=Yn(n.runner);return new Zo(n.interface,u,l)},s=async function(a){const o=xr(n.runner,"estimateGas");return T(ed(o),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await o.estimateGas(await t(a))},i=async a=>await r(a);return Q(i,{_contract:n,estimateGas:s,populateTransaction:t,send:r,staticCall:e}),i}function um(n,t){const e=function(...u){const d=n.interface.getFunction(t,u);return T(d,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:u}}),d},r=async function(...u){const d=e(...u);let h={};if(d.inputs.length+1===u.length&&(h=await sd(u.pop()),h.from&&(h.from=await Dt(h.from,rd(n.runner)))),d.inputs.length!==u.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const y=await lm(n.runner,d.inputs,u);return Object.assign({},h,await Ot({to:n.getAddress(),data:n.interface.encodeFunctionData(d,y)}))},s=async function(...u){const d=await o(...u);return d.length===1?d[0]:d},i=async function(...u){const d=n.runner;T(nd(d),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const h=await d.sendTransaction(await r(...u)),y=Yn(n.runner);return new Zo(n.interface,y,h)},a=async function(...u){const d=xr(n.runner,"estimateGas");return T(ed(d),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await d.estimateGas(await r(...u))},o=async function(...u){const d=xr(n.runner,"call");T(td(d),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const h=await r(...u);let y="0x";try{y=await d.call(h)}catch(v){throw Uo(v)&&v.data?n.interface.makeError(v.data,h):v}const g=e(...u);return n.interface.decodeFunctionResult(g,y)},l=async(...u)=>e(...u).constant?await s(...u):await i(...u);return Q(l,{name:n.interface.getFunctionName(t),_contract:n,_key:t,getFragment:e,estimateGas:a,populateTransaction:r,send:i,staticCall:s,staticCallResult:o}),Object.defineProperty(l,"fragment",{configurable:!1,enumerable:!0,get:()=>{const u=n.interface.getFunction(t);return T(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),u}}),l}function dm(n,t){const e=function(...s){const i=n.interface.getEvent(t,s);return T(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:s}}),i},r=function(...s){return new om(n,e(...s),s)};return Q(r,{name:n.interface.getEventName(t),_contract:n,_key:t,getFragment:e}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const s=n.interface.getEvent(t);return T(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),s}}),r}const oa=Symbol.for("_ethersInternal_contract"),id=new WeakMap;function fm(n,t){id.set(n[oa],t)}function Kt(n){return id.get(n[oa])}function hm(n){return n&&typeof n=="object"&&"getTopicFilter"in n&&typeof n.getTopicFilter=="function"&&n.fragment}async function Wo(n,t){let e,r=null;if(Array.isArray(t)){const i=function(a){if(lt(a,32))return a;const o=n.interface.getEvent(a);return A(o,"unknown fragment","name",a),o.topicHash};e=t.map(a=>a==null?null:Array.isArray(a)?a.map(i):i(a))}else t==="*"?e=[null]:typeof t=="string"?lt(t,32)?e=[t]:(r=n.interface.getEvent(t),A(r,"unknown fragment","event",t),e=[r.topicHash]):hm(t)?e=await t.getTopicFilter():"fragment"in t?(r=t.fragment,e=[r.topicHash]):A(!1,"unknown event name","event",t);e=e.map(i=>{if(i==null)return null;if(Array.isArray(i)){const a=Array.from(new Set(i.map(o=>o.toLowerCase())).values());return a.length===1?a[0]:(a.sort(),a)}return i.toLowerCase()});const s=e.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:r,tag:s,topics:e}}async function Zs(n,t){const{subs:e}=Kt(n);return e.get((await Wo(n,t)).tag)||null}async function uc(n,t,e){const r=Yn(n.runner);T(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:t});const{fragment:s,tag:i,topics:a}=await Wo(n,e),{addr:o,subs:l}=Kt(n);let u=l.get(i);if(!u){const h={address:o||n,topics:a},y=x=>{let E=s;if(E==null)try{E=n.interface.getEvent(x.topics[0])}catch{}if(E){const P=E,I=s?n.interface.decodeEventLog(s,x.data,x.topics):[];xo(n,e,I,U=>new am(n,U,e,P,x))}else xo(n,e,[],P=>new Xu(n,P,e,x))};let g=[];u={tag:i,listeners:[],start:()=>{g.length||g.push(r.on(h,y))},stop:async()=>{if(g.length==0)return;let x=g;g=[],await Promise.all(x),r.off(h,y)}},l.set(i,u)}return u}let Ao=Promise.resolve();async function pm(n,t,e,r){await Ao;const s=await Zs(n,t);if(!s)return!1;const i=s.listeners.length;return s.listeners=s.listeners.filter(({listener:a,once:o})=>{const l=Array.from(e);r&&l.push(r(o?null:a));try{a.call(n,...l)}catch{}return!o}),s.listeners.length===0&&(s.stop(),Kt(n).subs.delete(s.tag)),i>0}async function xo(n,t,e,r){try{await Ao}catch{}const s=pm(n,t,e,r);return Ao=s,await s}const Fi=["then"];var vc;vc=oa;const ei=class ei{constructor(t,e,r,s){k(this,"target");k(this,"interface");k(this,"runner");k(this,"filters");k(this,vc);k(this,"fallback");A(typeof t=="string"||uu(t),"invalid value for Contract target","target",t),r==null&&(r=null);const i=vo.from(e);Q(this,{target:t,runner:r,interface:i}),Object.defineProperty(this,oa,{value:{}});let a,o=null,l=null;if(s){const h=Yn(r);l=new Zo(this.interface,h,s)}let u=new Map;if(typeof t=="string")if(lt(t))o=t,a=Promise.resolve(t);else{const h=xr(r,"resolveName");if(!Ia(h))throw dt("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});a=h.resolveName(t).then(y=>{if(y==null)throw dt("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:t});return Kt(this).addr=y,y})}else a=t.getAddress().then(h=>{if(h==null)throw new Error("TODO");return Kt(this).addr=h,h});fm(this,{addrPromise:a,addr:o,deployTx:l,subs:u});const d=new Proxy({},{get:(h,y,g)=>{if(typeof y=="symbol"||Fi.indexOf(y)>=0)return Reflect.get(h,y,g);try{return this.getEvent(y)}catch(v){if(!Ct(v,"INVALID_ARGUMENT")||v.argument!=="key")throw v}},has:(h,y)=>Fi.indexOf(y)>=0?Reflect.has(h,y):Reflect.has(h,y)||this.interface.hasEvent(String(y))});return Q(this,{filters:d}),Q(this,{fallback:i.receive||i.fallback?cm(this):null}),new Proxy(this,{get:(h,y,g)=>{if(typeof y=="symbol"||y in h||Fi.indexOf(y)>=0)return Reflect.get(h,y,g);try{return h.getFunction(y)}catch(v){if(!Ct(v,"INVALID_ARGUMENT")||v.argument!=="key")throw v}},has:(h,y)=>typeof y=="symbol"||y in h||Fi.indexOf(y)>=0?Reflect.has(h,y):h.interface.hasFunction(y)})}connect(t){return new ei(this.target,this.interface,t)}attach(t){return new ei(t,this.interface,this.runner)}async getAddress(){return await Kt(this).addrPromise}async getDeployedCode(){const t=Yn(this.runner);T(t,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const e=await t.getCode(await this.getAddress());return e==="0x"?null:e}async waitForDeployment(){const t=this.deploymentTransaction();if(t)return await t.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=Yn(this.runner);return T(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((s,i)=>{const a=async()=>{try{if(await this.getDeployedCode()!=null)return s(this);r.once("block",a)}catch(o){i(o)}};a()})}deploymentTransaction(){return Kt(this).deployTx}getFunction(t){return typeof t!="string"&&(t=t.format()),um(this,t)}getEvent(t){return typeof t!="string"&&(t=t.format()),dm(this,t)}async queryTransaction(t){throw new Error("@TODO")}async queryFilter(t,e,r){e==null&&(e=0),r==null&&(r="latest");const{addr:s,addrPromise:i}=Kt(this),a=s||await i,{fragment:o,topics:l}=await Wo(this,t),u={address:a,topics:l,fromBlock:e,toBlock:r},d=Yn(this.runner);return T(d,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await d.getLogs(u)).map(h=>{let y=o;if(y==null)try{y=this.interface.getEvent(h.topics[0])}catch{}if(y)try{return new Yo(h,this.interface,y)}catch(g){return new Wu(h,g)}return new Ii(h,d)})}async on(t,e){const r=await uc(this,"on",t);return r.listeners.push({listener:e,once:!1}),r.start(),this}async once(t,e){const r=await uc(this,"once",t);return r.listeners.push({listener:e,once:!0}),r.start(),this}async emit(t,...e){return await xo(this,t,e,null)}async listenerCount(t){if(t){const s=await Zs(this,t);return s?s.listeners.length:0}const{subs:e}=Kt(this);let r=0;for(const{listeners:s}of e.values())r+=s.length;return r}async listeners(t){if(t){const s=await Zs(this,t);return s?s.listeners.map(({listener:i})=>i):[]}const{subs:e}=Kt(this);let r=[];for(const{listeners:s}of e.values())r=r.concat(s.map(({listener:i})=>i));return r}async off(t,e){const r=await Zs(this,t);if(!r)return this;if(e){const s=r.listeners.map(({listener:i})=>i).indexOf(e);s>=0&&r.listeners.splice(s,1)}return(e==null||r.listeners.length===0)&&(r.stop(),Kt(this).subs.delete(r.tag)),this}async removeAllListeners(t){if(t){const e=await Zs(this,t);if(!e)return this;e.stop(),Kt(this).subs.delete(e.tag)}else{const{subs:e}=Kt(this);for(const{tag:r,stop:s}of e.values())s(),e.delete(r)}return this}async addListener(t,e){return await this.on(t,e)}async removeListener(t,e){return await this.off(t,e)}static buildClass(t){class e extends ei{constructor(s,i=null){super(s,t,i)}}return e}static from(t,e,r){return r==null&&(r=null),new this(t,e,r)}};let ko=ei;function mm(){return ko}class Vr extends mm(){}function Va(n){return n.match(/^ipfs:\/\/ipfs\//i)?n=n.substring(12):n.match(/^ipfs:\/\//i)?n=n.substring(7):A(!1,"unsupported IPFS format","link",n),`https://gateway.ipfs.io/ipfs/${n}`}class gm{constructor(t){k(this,"name");Q(this,{name:t})}connect(t){return this}supportsCoinType(t){return!1}async encodeAddress(t,e){throw new Error("unsupported coin")}async decodeAddress(t,e){throw new Error("unsupported coin")}}const ad=new RegExp("^(ipfs)://(.*)$","i"),dc=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),ad,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var An,cr,xn,$r,ha,od;const Mr=class Mr{constructor(t,e,r){C(this,xn);k(this,"provider");k(this,"address");k(this,"name");C(this,An);C(this,cr);Q(this,{provider:t,address:e,name:r}),b(this,An,null),b(this,cr,new Vr(e,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],t))}async supportsWildcard(){return f(this,An)==null&&b(this,An,(async()=>{try{return await f(this,cr).supportsInterface("0x9061b923")}catch(t){if(Ct(t,"CALL_EXCEPTION"))return!1;throw b(this,An,null),t}})()),await f(this,An)}async getAddress(t){if(t==null&&(t=60),t===60)try{const i=await B(this,xn,$r).call(this,"addr(bytes32)");return i==null||i===ri?null:i}catch(i){if(Ct(i,"CALL_EXCEPTION"))return null;throw i}if(t>=0&&t<2147483648){let i=t+2147483648;const a=await B(this,xn,$r).call(this,"addr(bytes32,uint)",[i]);if(lt(a,20))return rt(a)}let e=null;for(const i of this.provider.plugins)if(i instanceof gm&&i.supportsCoinType(t)){e=i;break}if(e==null)return null;const r=await B(this,xn,$r).call(this,"addr(bytes32,uint)",[t]);if(r==null||r==="0x")return null;const s=await e.decodeAddress(t,r);if(s!=null)return s;T(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${t})`,info:{coinType:t,data:r}})}async getText(t){const e=await B(this,xn,$r).call(this,"text(bytes32,string)",[t]);return e==null||e==="0x"?null:e}async getContentHash(){const t=await B(this,xn,$r).call(this,"contenthash(bytes32)");if(t==null||t==="0x")return null;const e=t.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(e){const s=e[1]==="e3010170"?"ipfs":"ipns",i=parseInt(e[4],16);if(e[5].length===i*2)return`${s}://${wd("0x"+e[2])}`}const r=t.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;T(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:t}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const t=[{type:"name",value:this.name}];try{const e=await this.getText("avatar");if(e==null)return t.push({type:"!avatar",value:""}),{url:null,linkage:t};t.push({type:"avatar",value:e});for(let r=0;r<dc.length;r++){const s=e.match(dc[r]);if(s==null)continue;const i=s[1].toLowerCase();switch(i){case"https":case"data":return t.push({type:"url",value:e}),{linkage:t,url:e};case"ipfs":{const a=Va(e);return t.push({type:"ipfs",value:e}),t.push({type:"url",value:a}),{linkage:t,url:a}}case"erc721":case"erc1155":{const a=i==="erc721"?"tokenURI(uint256)":"uri(uint256)";t.push({type:i,value:e});const o=await this.getAddress();if(o==null)return t.push({type:"!owner",value:""}),{url:null,linkage:t};const l=(s[2]||"").split("/");if(l.length!==2)return t.push({type:`!${i}caip`,value:s[2]||""}),{url:null,linkage:t};const u=l[1],d=new Vr(l[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(i==="erc721"){const w=await d.ownerOf(u);if(o!==w)return t.push({type:"!owner",value:w}),{url:null,linkage:t};t.push({type:"owner",value:w})}else if(i==="erc1155"){const w=await d.balanceOf(o,u);if(!w)return t.push({type:"!balance",value:"0"}),{url:null,linkage:t};t.push({type:"balance",value:w.toString()})}let h=await d[a](u);if(h==null||h==="0x")return t.push({type:"!metadata-url",value:""}),{url:null,linkage:t};t.push({type:"metadata-url-base",value:h}),i==="erc1155"&&(h=h.replace("{id}",Sn(u,32).substring(2)),t.push({type:"metadata-url-expanded",value:h})),h.match(/^ipfs:/i)&&(h=Va(h)),t.push({type:"metadata-url",value:h});let y={};const g=await new Rn(h).send();g.assertOk();try{y=g.bodyJson}catch{try{t.push({type:"!metadata",value:g.bodyText})}catch{const E=g.body;return E&&t.push({type:"!metadata",value:F(E)}),{url:null,linkage:t}}return{url:null,linkage:t}}if(!y)return t.push({type:"!metadata",value:""}),{url:null,linkage:t};t.push({type:"metadata",value:JSON.stringify(y)});let v=y.image;if(typeof v!="string")return t.push({type:"!imageUrl",value:""}),{url:null,linkage:t};if(!v.match(/^(https:\/\/|data:)/i)){if(v.match(ad)==null)return t.push({type:"!imageUrl-ipfs",value:v}),{url:null,linkage:t};t.push({type:"imageUrl-ipfs",value:v}),v=Va(v)}return t.push({type:"url",value:v}),{linkage:t,url:v}}}}}catch{}return{linkage:t,url:null}}static async getEnsAddress(t){const e=await t.getNetwork(),r=e.getPlugin("org.ethers.plugins.network.Ens");return T(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:e}}),r.address}static async fromName(t,e){var s;let r=e;for(;;){if(r===""||r==="."||e!=="eth"&&r==="eth")return null;const i=await B(s=Mr,ha,od).call(s,t,r);if(i!=null){const a=new Mr(t,i,e);return r!==e&&!await a.supportsWildcard()?null:a}r=r.split(".").slice(1).join(".")}}};An=new WeakMap,cr=new WeakMap,xn=new WeakSet,$r=async function(t,e){e=(e||[]).slice();const r=f(this,cr).interface;e.unshift(bo(this.name));let s=null;await this.supportsWildcard()&&(s=r.getFunction(t),T(s,"missing fragment","UNKNOWN_ERROR",{info:{funcName:t}}),e=[Bp(this.name,255),r.encodeFunctionData(s,e)],t="resolve(bytes,bytes)"),e.push({enableCcipRead:!0});try{const i=await f(this,cr)[t](...e);return s?r.decodeFunctionResult(s,i)[0]:i}catch(i){if(!Ct(i,"CALL_EXCEPTION"))throw i}return null},ha=new WeakSet,od=async function(t,e){const r=await Mr.getEnsAddress(t);try{const i=await new Vr(r,["function resolver(bytes32) view returns (address)"],t).resolver(bo(e),{enableCcipRead:!0});return i===ri?null:i}catch(s){throw s}return null},C(Mr,ha);let la=Mr;const fc=BigInt(0);function X(n,t){return function(e){return e==null?t:n(e)}}function fi(n,t){return e=>{if(t&&e==null)return null;if(!Array.isArray(e))throw new Error("not an array");return e.map(r=>n(r))}}function Ni(n,t){return e=>{const r={};for(const s in n){let i=s;if(t&&s in t&&!(i in e)){for(const a of t[s])if(a in e){i=a;break}}try{const a=n[s](e[i]);a!==void 0&&(r[s]=a)}catch(a){const o=a instanceof Error?a.message:"not-an-error";T(!1,`invalid value for value.${s} (${o})`,"BAD_DATA",{value:e})}}return r}}function ym(n){switch(n){case!0:case"true":return!0;case!1:case"false":return!1}A(!1,`invalid boolean; ${JSON.stringify(n)}`,"value",n)}function Ms(n){return A(lt(n,!0),"invalid data","value",n),n}function Et(n){return A(lt(n,32),"invalid hash","value",n),n}const bm=Ni({address:rt,blockHash:Et,blockNumber:K,data:Ms,index:K,removed:X(ym,!1),topics:fi(Et),transactionHash:Et,transactionIndex:K},{index:["logIndex"]});function wm(n){return bm(n)}const vm=Ni({hash:X(Et),parentHash:Et,parentBeaconBlockRoot:X(Et,null),number:K,timestamp:K,nonce:X(Ms),difficulty:H,gasLimit:H,gasUsed:H,stateRoot:X(Et,null),receiptsRoot:X(Et,null),blobGasUsed:X(H,null),excessBlobGas:X(H,null),miner:X(rt),prevRandao:X(Et,null),extraData:Ms,baseFeePerGas:X(H)},{prevRandao:["mixHash"]});function Am(n){const t=vm(n);return t.transactions=n.transactions.map(e=>typeof e=="string"?e:ld(e)),t}const xm=Ni({transactionIndex:K,blockNumber:K,transactionHash:Et,address:rt,topics:fi(Et),data:Ms,index:K,blockHash:Et},{index:["logIndex"]});function km(n){return xm(n)}const _m=Ni({to:X(rt,null),from:X(rt,null),contractAddress:X(rt,null),index:K,root:X(F),gasUsed:H,blobGasUsed:X(H,null),logsBloom:X(Ms),blockHash:Et,hash:Et,logs:fi(km),blockNumber:K,cumulativeGasUsed:H,effectiveGasPrice:X(H),blobGasPrice:X(H,null),status:X(K),type:X(K,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function Em(n){return _m(n)}function ld(n){n.to&&H(n.to)===fc&&(n.to="0x0000000000000000000000000000000000000000");const t=Ni({hash:Et,index:X(K,void 0),type:e=>e==="0x"||e==null?0:K(e),accessList:X(_r,null),blobVersionedHashes:X(fi(Et,!0),null),authorizationList:X(fi(e=>{let r;if(e.signature)r=e.signature;else{let s=e.yParity;s==="0x1b"?s=0:s==="0x1c"&&(s=1),r=Object.assign({},e,{yParity:s})}return{address:rt(e.address),chainId:H(e.chainId),nonce:H(e.nonce),signature:zt.from(r)}},!1),null),blockHash:X(Et,null),blockNumber:X(K,null),transactionIndex:X(K,null),from:rt,gasPrice:X(H),maxPriorityFeePerGas:X(H),maxFeePerGas:X(H),maxFeePerBlobGas:X(H,null),gasLimit:H,to:X(rt,null),value:H,nonce:K,data:Ms,creates:X(rt,null),chainId:X(H,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(n);if(t.to==null&&t.creates==null&&(t.creates=hh(t)),(n.type===1||n.type===2)&&n.accessList==null&&(t.accessList=[]),n.signature?t.signature=zt.from(n.signature):t.signature=zt.from(n),t.chainId==null){const e=t.signature.legacyChainId;e!=null&&(t.chainId=e)}return t.blockHash&&H(t.blockHash)===fc&&(t.blockHash=null),t}const Cm="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class Ti{constructor(t){k(this,"name");Q(this,{name:t})}clone(){return new Ti(this.name)}}class Na extends Ti{constructor(e,r){e==null&&(e=0);super(`org.ethers.network.plugins.GasCost#${e||0}`);k(this,"effectiveBlock");k(this,"txBase");k(this,"txCreate");k(this,"txDataZero");k(this,"txDataNonzero");k(this,"txAccessListStorageKey");k(this,"txAccessListAddress");const s={effectiveBlock:e};function i(a,o){let l=(r||{})[a];l==null&&(l=o),A(typeof l=="number",`invalud value for ${a}`,"costs",r),s[a]=l}i("txBase",21e3),i("txCreate",32e3),i("txDataZero",4),i("txDataNonzero",16),i("txAccessListStorageKey",1900),i("txAccessListAddress",2400),Q(this,s)}clone(){return new Na(this.effectiveBlock,this)}}class Ta extends Ti{constructor(e,r){super("org.ethers.plugins.network.Ens");k(this,"address");k(this,"targetNetwork");Q(this,{address:e||Cm,targetNetwork:r??1})}clone(){return new Ta(this.address,this.targetNetwork)}}var Ai,xi;class Pm extends Ti{constructor(e,r){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");C(this,Ai);C(this,xi);b(this,Ai,e),b(this,xi,r)}get url(){return f(this,Ai)}get processFunc(){return f(this,xi)}clone(){return this}}Ai=new WeakMap,xi=new WeakMap;const Ja=new Map;var ws,vs,kn;const Hr=class Hr{constructor(t,e){C(this,ws);C(this,vs);C(this,kn);b(this,ws,t),b(this,vs,H(e)),b(this,kn,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return f(this,ws)}set name(t){b(this,ws,t)}get chainId(){return f(this,vs)}set chainId(t){b(this,vs,H(t,"chainId"))}matches(t){if(t==null)return!1;if(typeof t=="string"){try{return this.chainId===H(t)}catch{}return this.name===t}if(typeof t=="number"||typeof t=="bigint"){try{return this.chainId===H(t)}catch{}return!1}if(typeof t=="object"){if(t.chainId!=null){try{return this.chainId===H(t.chainId)}catch{}return!1}return t.name!=null?this.name===t.name:!1}return!1}get plugins(){return Array.from(f(this,kn).values())}attachPlugin(t){if(f(this,kn).get(t.name))throw new Error(`cannot replace existing plugin: ${t.name} `);return f(this,kn).set(t.name,t.clone()),this}getPlugin(t){return f(this,kn).get(t)||null}getPlugins(t){return this.plugins.filter(e=>e.name.split("#")[0]===t)}clone(){const t=new Hr(this.name,this.chainId);return this.plugins.forEach(e=>{t.attachPlugin(e.clone())}),t}computeIntrinsicGas(t){const e=this.getPlugin("org.ethers.plugins.network.GasCost")||new Na;let r=e.txBase;if(t.to==null&&(r+=e.txCreate),t.data)for(let s=2;s<t.data.length;s+=2)t.data.substring(s,s+2)==="00"?r+=e.txDataZero:r+=e.txDataNonzero;if(t.accessList){const s=_r(t.accessList);for(const i in s)r+=e.txAccessListAddress+e.txAccessListStorageKey*s[i].storageKeys.length}return r}static from(t){if(Im(),t==null)return Hr.from("mainnet");if(typeof t=="number"&&(t=BigInt(t)),typeof t=="string"||typeof t=="bigint"){const e=Ja.get(t);if(e)return e();if(typeof t=="bigint")return new Hr("unknown",t);A(!1,"unknown network","network",t)}if(typeof t.clone=="function")return t.clone();if(typeof t=="object"){A(typeof t.name=="string"&&typeof t.chainId=="number","invalid network object name or chainId","network",t);const e=new Hr(t.name,t.chainId);return(t.ensAddress||t.ensNetwork!=null)&&e.attachPlugin(new Ta(t.ensAddress,t.ensNetwork)),e}A(!1,"invalid network","network",t)}static register(t,e){typeof t=="number"&&(t=BigInt(t));const r=Ja.get(t);r&&A(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",t),Ja.set(t,e)}};ws=new WeakMap,vs=new WeakMap,kn=new WeakMap;let Oe=Hr;function hc(n,t){const e=String(n);if(!e.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${n}`);const r=e.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${n}`);for(;r[1].length<t;)r[1]+="0";if(r[1].length>9){let s=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||s++,r[1]=s.toString()}return BigInt(r[0]+r[1])}function pc(n){return new Pm(n,async(t,e,r)=>{r.setHeader("User-Agent","ethers");let s;try{const[i,a]=await Promise.all([r.send(),t()]);s=i;const o=s.bodyJson.standard;return{gasPrice:a.gasPrice,maxFeePerGas:hc(o.maxFee,9),maxPriorityFeePerGas:hc(o.maxPriorityFee,9)}}catch(i){T(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:s,error:i})}})}let mc=!1;function Im(){if(mc)return;mc=!0;function n(t,e,r){const s=function(){const i=new Oe(t,e);return r.ensNetwork!=null&&i.attachPlugin(new Ta(null,r.ensNetwork)),i.attachPlugin(new Na),(r.plugins||[]).forEach(a=>{i.attachPlugin(a)}),i};Oe.register(t,s),Oe.register(e,s),r.altNames&&r.altNames.forEach(i=>{Oe.register(i,s)})}n("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),n("ropsten",3,{ensNetwork:3}),n("rinkeby",4,{ensNetwork:4}),n("goerli",5,{ensNetwork:5}),n("kovan",42,{ensNetwork:42}),n("sepolia",11155111,{ensNetwork:11155111}),n("holesky",17e3,{ensNetwork:17e3}),n("classic",61,{}),n("classicKotti",6,{}),n("arbitrum",42161,{ensNetwork:1}),n("arbitrum-goerli",421613,{}),n("arbitrum-sepolia",421614,{}),n("base",8453,{ensNetwork:1}),n("base-goerli",84531,{}),n("base-sepolia",84532,{}),n("bnb",56,{ensNetwork:1}),n("bnbt",97,{}),n("linea",59144,{ensNetwork:1}),n("linea-goerli",59140,{}),n("linea-sepolia",59141,{}),n("matic",137,{ensNetwork:1,plugins:[pc("https://gasstation.polygon.technology/v2")]}),n("matic-amoy",80002,{}),n("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[pc("https://gasstation-testnet.polygon.technology/v2")]}),n("optimism",10,{ensNetwork:1,plugins:[]}),n("optimism-goerli",420,{}),n("optimism-sepolia",11155420,{}),n("xdai",100,{ensNetwork:1})}function _o(n){return JSON.parse(JSON.stringify(n))}var Ve,ne,_n,Ne,As,Vi;class Nm{constructor(t){C(this,As);C(this,Ve);C(this,ne);C(this,_n);C(this,Ne);b(this,Ve,t),b(this,ne,null),b(this,_n,4e3),b(this,Ne,-2)}get pollingInterval(){return f(this,_n)}set pollingInterval(t){b(this,_n,t)}start(){f(this,ne)||(b(this,ne,f(this,Ve)._setTimeout(B(this,As,Vi).bind(this),f(this,_n))),B(this,As,Vi).call(this))}stop(){f(this,ne)&&(f(this,Ve)._clearTimeout(f(this,ne)),b(this,ne,null))}pause(t){this.stop(),t&&b(this,Ne,-2)}resume(){this.start()}}Ve=new WeakMap,ne=new WeakMap,_n=new WeakMap,Ne=new WeakMap,As=new WeakSet,Vi=async function(){try{const t=await f(this,Ve).getBlockNumber();if(f(this,Ne)===-2){b(this,Ne,t);return}if(t!==f(this,Ne)){for(let e=f(this,Ne)+1;e<=t;e++){if(f(this,ne)==null)return;await f(this,Ve).emit("block",e)}b(this,Ne,t)}}catch{}f(this,ne)!=null&&b(this,ne,f(this,Ve)._setTimeout(B(this,As,Vi).bind(this),f(this,_n)))};var ur,dr,En;class Xo{constructor(t){C(this,ur);C(this,dr);C(this,En);b(this,ur,t),b(this,En,!1),b(this,dr,e=>{this._poll(e,f(this,ur))})}async _poll(t,e){throw new Error("sub-classes must override this")}start(){f(this,En)||(b(this,En,!0),f(this,dr).call(this,-2),f(this,ur).on("block",f(this,dr)))}stop(){f(this,En)&&(b(this,En,!1),f(this,ur).off("block",f(this,dr)))}pause(t){this.stop()}resume(){this.start()}}ur=new WeakMap,dr=new WeakMap,En=new WeakMap;var xs,Je;class Tm extends Xo{constructor(e,r){super(e);C(this,xs);C(this,Je);b(this,xs,r),b(this,Je,-2)}pause(e){e&&b(this,Je,-2),super.pause(e)}async _poll(e,r){const s=await r.getBlock(f(this,xs));s!=null&&(f(this,Je)===-2?b(this,Je,s.number):s.number>f(this,Je)&&(r.emit(f(this,xs),s.number),b(this,Je,s.number)))}}xs=new WeakMap,Je=new WeakMap;var pa;class Bm extends Xo{constructor(e,r){super(e);C(this,pa);b(this,pa,_o(r))}async _poll(e,r){throw new Error("@TODO")}}pa=new WeakMap;var ks;class Sm extends Xo{constructor(e,r){super(e);C(this,ks);b(this,ks,r)}async _poll(e,r){const s=await r.getTransactionReceipt(f(this,ks));s&&r.emit(f(this,ks),s)}}ks=new WeakMap;var Ke,_s,Es,Cn,re,ma,cd;class tl{constructor(t,e){C(this,ma);C(this,Ke);C(this,_s);C(this,Es);C(this,Cn);C(this,re);b(this,Ke,t),b(this,_s,_o(e)),b(this,Es,B(this,ma,cd).bind(this)),b(this,Cn,!1),b(this,re,-2)}start(){f(this,Cn)||(b(this,Cn,!0),f(this,re)===-2&&f(this,Ke).getBlockNumber().then(t=>{b(this,re,t)}),f(this,Ke).on("block",f(this,Es)))}stop(){f(this,Cn)&&(b(this,Cn,!1),f(this,Ke).off("block",f(this,Es)))}pause(t){this.stop(),t&&b(this,re,-2)}resume(){this.start()}}Ke=new WeakMap,_s=new WeakMap,Es=new WeakMap,Cn=new WeakMap,re=new WeakMap,ma=new WeakSet,cd=async function(t){if(f(this,re)===-2)return;const e=_o(f(this,_s));e.fromBlock=f(this,re)+1,e.toBlock=t;const r=await f(this,Ke).getLogs(e);if(r.length===0){f(this,re)<t-60&&b(this,re,t-60);return}for(const s of r)f(this,Ke).emit(f(this,_s),s),b(this,re,s.blockNumber)};const Rm=BigInt(2),Om=10;function Li(n){return n&&typeof n.then=="function"}function Ji(n,t){return n+":"+JSON.stringify(t,(e,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const s=Object.keys(r);return s.sort(),s.reduce((i,a)=>(i[a]=r[a],i),{})}return r})}class ud{constructor(t){k(this,"name");Q(this,{name:t})}start(){}stop(){}pause(t){}resume(){}}function $m(n){return JSON.parse(JSON.stringify(n))}function Eo(n){return n=Array.from(new Set(n).values()),n.sort(),n}async function Ka(n,t){if(n==null)throw new Error("invalid event");if(Array.isArray(n)&&(n={topics:n}),typeof n=="string")switch(n){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:n,tag:n}}if(lt(n,32)){const e=n.toLowerCase();return{type:"transaction",tag:Ji("tx",{hash:e}),hash:e}}if(n.orphan){const e=n;return{type:"orphan",tag:Ji("orphan",e),filter:$m(e)}}if(n.address||n.topics){const e=n,r={topics:(e.topics||[]).map(s=>s==null?null:Array.isArray(s)?Eo(s.map(i=>i.toLowerCase())):s.toLowerCase())};if(e.address){const s=[],i=[],a=o=>{lt(o)?s.push(o):i.push((async()=>{s.push(await Dt(o,t))})())};Array.isArray(e.address)?e.address.forEach(a):a(e.address),i.length&&await Promise.all(i),r.address=Eo(s.map(o=>o.toLowerCase()))}return{filter:r,tag:Ji("event",r),type:"event"}}A(!1,"unknown ProviderEvent","event",n)}function qa(){return new Date().getTime()}const Um={cacheTimeout:250,pollingInterval:4e3};var Nt,Pn,Tt,Cs,Wt,fr,In,qe,ki,se,Ps,Is,Y,Jt,Co,Po,Ws,Io,Xs,Ki;class Dm{constructor(t,e){C(this,Y);C(this,Nt);C(this,Pn);C(this,Tt);C(this,Cs);C(this,Wt);C(this,fr);C(this,In);C(this,qe);C(this,ki);C(this,se);C(this,Ps);C(this,Is);if(b(this,Is,Object.assign({},Um,e||{})),t==="any")b(this,fr,!0),b(this,Wt,null);else if(t){const r=Oe.from(t);b(this,fr,!1),b(this,Wt,Promise.resolve(r)),setTimeout(()=>{this.emit("network",r,null)},0)}else b(this,fr,!1),b(this,Wt,null);b(this,qe,-1),b(this,In,new Map),b(this,Nt,new Map),b(this,Pn,new Map),b(this,Tt,null),b(this,Cs,!1),b(this,ki,1),b(this,se,new Map),b(this,Ps,!1)}get pollingInterval(){return f(this,Is).pollingInterval}get provider(){return this}get plugins(){return Array.from(f(this,Pn).values())}attachPlugin(t){if(f(this,Pn).get(t.name))throw new Error(`cannot replace existing plugin: ${t.name} `);return f(this,Pn).set(t.name,t.connect(this)),this}getPlugin(t){return f(this,Pn).get(t)||null}get disableCcipRead(){return f(this,Ps)}set disableCcipRead(t){b(this,Ps,!!t)}async ccipReadFetch(t,e,r){if(this.disableCcipRead||r.length===0||t.to==null)return null;const s=t.to.toLowerCase(),i=e.toLowerCase(),a=[];for(let o=0;o<r.length;o++){const l=r[o],u=l.replace("{sender}",s).replace("{data}",i),d=new Rn(u);l.indexOf("{data}")===-1&&(d.body={data:i,sender:s}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:d,index:o,urls:r});let h="unknown error",y;try{y=await d.send()}catch(g){a.push(g.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:d,result:{error:g}});continue}try{const g=y.bodyJson;if(g.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:d,result:g}),g.data;g.message&&(h=g.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:d,result:g})}catch{}T(y.statusCode<400||y.statusCode>=500,`response not found during CCIP fetch: ${h}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:t,info:{url:l,errorMessage:h}}),a.push(h)}T(!1,`error encountered during CCIP fetch: ${a.map(o=>JSON.stringify(o)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:t,info:{urls:r,errorMessages:a}})}_wrapBlock(t,e){return new nm(Am(t),this)}_wrapLog(t,e){return new Ii(wm(t),this)}_wrapTransactionReceipt(t,e){return new qu(Em(t),this)}_wrapTransactionResponse(t,e){return new di(ld(t),this)}_detectNetwork(){T(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(t){T(!1,`unsupported method: ${t.method}`,"UNSUPPORTED_OPERATION",{operation:t.method,info:t})}async getBlockNumber(){const t=K(await B(this,Y,Jt).call(this,{method:"getBlockNumber"}),"%response");return f(this,qe)>=0&&b(this,qe,t),t}_getAddress(t){return Dt(t,this)}_getBlockTag(t){if(t==null)return"latest";switch(t){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return t}if(lt(t))return lt(t,32)?t:ye(t);if(typeof t=="bigint"&&(t=K(t,"blockTag")),typeof t=="number")return t>=0?ye(t):f(this,qe)>=0?ye(f(this,qe)+t):this.getBlockNumber().then(e=>ye(e+t));A(!1,"invalid blockTag","blockTag",t)}_getFilter(t){const e=(t.topics||[]).map(l=>l==null?null:Array.isArray(l)?Eo(l.map(u=>u.toLowerCase())):l.toLowerCase()),r="blockHash"in t?t.blockHash:void 0,s=(l,u,d)=>{let h;switch(l.length){case 0:break;case 1:h=l[0];break;default:l.sort(),h=l}if(r&&(u!=null||d!=null))throw new Error("invalid filter");const y={};return h&&(y.address=h),e.length&&(y.topics=e),u&&(y.fromBlock=u),d&&(y.toBlock=d),r&&(y.blockHash=r),y};let i=[];if(t.address)if(Array.isArray(t.address))for(const l of t.address)i.push(this._getAddress(l));else i.push(this._getAddress(t.address));let a;"fromBlock"in t&&(a=this._getBlockTag(t.fromBlock));let o;return"toBlock"in t&&(o=this._getBlockTag(t.toBlock)),i.filter(l=>typeof l!="string").length||a!=null&&typeof a!="string"||o!=null&&typeof o!="string"?Promise.all([Promise.all(i),a,o]).then(l=>s(l[0],l[1],l[2])):s(i,a,o)}_getTransactionRequest(t){const e=aa(t),r=[];if(["to","from"].forEach(s=>{if(e[s]==null)return;const i=Dt(e[s],this);Li(i)?r.push(async function(){e[s]=await i}()):e[s]=i}),e.blockTag!=null){const s=this._getBlockTag(e.blockTag);Li(s)?r.push(async function(){e.blockTag=await s}()):e.blockTag=s}return r.length?async function(){return await Promise.all(r),e}():e}async getNetwork(){if(f(this,Wt)==null){const s=(async()=>{try{const i=await this._detectNetwork();return this.emit("network",i,null),i}catch(i){throw f(this,Wt)===s&&b(this,Wt,null),i}})();return b(this,Wt,s),(await s).clone()}const t=f(this,Wt),[e,r]=await Promise.all([t,this._detectNetwork()]);return e.chainId!==r.chainId&&(f(this,fr)?(this.emit("network",r,e),f(this,Wt)===t&&b(this,Wt,Promise.resolve(r))):T(!1,`network changed: ${e.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),e.clone()}async getFeeData(){const t=await this.getNetwork(),e=async()=>{const{_block:s,gasPrice:i,priorityFee:a}=await Ot({_block:B(this,Y,Io).call(this,"latest",!1),gasPrice:(async()=>{try{const d=await B(this,Y,Jt).call(this,{method:"getGasPrice"});return H(d,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const d=await B(this,Y,Jt).call(this,{method:"getPriorityFee"});return H(d,"%response")}catch{}return null})()});let o=null,l=null;const u=this._wrapBlock(s,t);return u&&u.baseFeePerGas&&(l=a??BigInt("1000000000"),o=u.baseFeePerGas*Rm+l),new lc(i,o,l)},r=t.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const s=new Rn(r.url),i=await r.processFunc(e,this,s);return new lc(i.gasPrice,i.maxFeePerGas,i.maxPriorityFeePerGas)}return await e()}async estimateGas(t){let e=this._getTransactionRequest(t);return Li(e)&&(e=await e),H(await B(this,Y,Jt).call(this,{method:"estimateGas",transaction:e}),"%response")}async call(t){const{tx:e,blockTag:r}=await Ot({tx:this._getTransactionRequest(t),blockTag:this._getBlockTag(t.blockTag)});return await B(this,Y,Po).call(this,B(this,Y,Co).call(this,e,r,t.enableCcipRead?0:-1))}async getBalance(t,e){return H(await B(this,Y,Ws).call(this,{method:"getBalance"},t,e),"%response")}async getTransactionCount(t,e){return K(await B(this,Y,Ws).call(this,{method:"getTransactionCount"},t,e),"%response")}async getCode(t,e){return F(await B(this,Y,Ws).call(this,{method:"getCode"},t,e))}async getStorage(t,e,r){const s=H(e,"position");return F(await B(this,Y,Ws).call(this,{method:"getStorage",position:s},t,r))}async broadcastTransaction(t){const{blockNumber:e,hash:r,network:s}=await Ot({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:t}),network:this.getNetwork()}),i=Xi.from(t);if(i.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,s).replaceableTransaction(e)}async getBlock(t,e){const{network:r,params:s}=await Ot({network:this.getNetwork(),params:B(this,Y,Io).call(this,t,!!e)});return s==null?null:this._wrapBlock(s,r)}async getTransaction(t){const{network:e,params:r}=await Ot({network:this.getNetwork(),params:B(this,Y,Jt).call(this,{method:"getTransaction",hash:t})});return r==null?null:this._wrapTransactionResponse(r,e)}async getTransactionReceipt(t){const{network:e,params:r}=await Ot({network:this.getNetwork(),params:B(this,Y,Jt).call(this,{method:"getTransactionReceipt",hash:t})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const s=await B(this,Y,Jt).call(this,{method:"getTransaction",hash:t});if(s==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=s.gasPrice}return this._wrapTransactionReceipt(r,e)}async getTransactionResult(t){const{result:e}=await Ot({network:this.getNetwork(),result:B(this,Y,Jt).call(this,{method:"getTransactionResult",hash:t})});return e==null?null:F(e)}async getLogs(t){let e=this._getFilter(t);Li(e)&&(e=await e);const{network:r,params:s}=await Ot({network:this.getNetwork(),params:B(this,Y,Jt).call(this,{method:"getLogs",filter:e})});return s.map(i=>this._wrapLog(i,r))}_getProvider(t){T(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(t){return await la.fromName(this,t)}async getAvatar(t){const e=await this.getResolver(t);return e?await e.getAvatar():null}async resolveName(t){const e=await this.getResolver(t);return e?await e.getAddress():null}async lookupAddress(t){t=rt(t);const e=bo(t.substring(2).toLowerCase()+".addr.reverse");try{const r=await la.getEnsAddress(this),i=await new Vr(r,["function resolver(bytes32) view returns (address)"],this).resolver(e);if(i==null||i===ri)return null;const o=await new Vr(i,["function name(bytes32) view returns (string)"],this).name(e);return await this.resolveName(o)!==t?null:o}catch(r){if(Ct(r,"BAD_DATA")&&r.value==="0x"||Ct(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(t,e,r){const s=e??1;return s===0?this.getTransactionReceipt(t):new Promise(async(i,a)=>{let o=null;const l=async u=>{try{const d=await this.getTransactionReceipt(t);if(d!=null&&u-d.blockNumber+1>=s){i(d),o&&(clearTimeout(o),o=null);return}}catch(d){console.log("EEE",d)}this.once("block",l)};r!=null&&(o=setTimeout(()=>{o!=null&&(o=null,this.off("block",l),a(dt("timeout","TIMEOUT",{reason:"timeout"})))},r)),l(await this.getBlockNumber())})}async waitForBlock(t){T(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(t){const e=f(this,se).get(t);e&&(e.timer&&clearTimeout(e.timer),f(this,se).delete(t))}_setTimeout(t,e){e==null&&(e=0);const r=Qs(this,ki)._++,s=()=>{f(this,se).delete(r),t()};if(this.paused)f(this,se).set(r,{timer:null,func:s,time:e});else{const i=setTimeout(s,e);f(this,se).set(r,{timer:i,func:s,time:qa()})}return r}_forEachSubscriber(t){for(const e of f(this,Nt).values())t(e.subscriber)}_getSubscriber(t){switch(t.type){case"debug":case"error":case"network":return new ud(t.type);case"block":{const e=new Nm(this);return e.pollingInterval=this.pollingInterval,e}case"safe":case"finalized":return new Tm(this,t.type);case"event":return new tl(this,t.filter);case"transaction":return new Sm(this,t.hash);case"orphan":return new Bm(this,t.filter)}throw new Error(`unsupported event: ${t.type}`)}_recoverSubscriber(t,e){for(const r of f(this,Nt).values())if(r.subscriber===t){r.started&&r.subscriber.stop(),r.subscriber=e,r.started&&e.start(),f(this,Tt)!=null&&e.pause(f(this,Tt));break}}async on(t,e){const r=await B(this,Y,Ki).call(this,t);return r.listeners.push({listener:e,once:!1}),r.started||(r.subscriber.start(),r.started=!0,f(this,Tt)!=null&&r.subscriber.pause(f(this,Tt))),this}async once(t,e){const r=await B(this,Y,Ki).call(this,t);return r.listeners.push({listener:e,once:!0}),r.started||(r.subscriber.start(),r.started=!0,f(this,Tt)!=null&&r.subscriber.pause(f(this,Tt))),this}async emit(t,...e){const r=await B(this,Y,Xs).call(this,t,e);if(!r||r.listeners.length===0)return!1;const s=r.listeners.length;return r.listeners=r.listeners.filter(({listener:i,once:a})=>{const o=new Ec(this,a?null:i,t);try{i.call(this,...e,o)}catch{}return!a}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),f(this,Nt).delete(r.tag)),s>0}async listenerCount(t){if(t){const r=await B(this,Y,Xs).call(this,t);return r?r.listeners.length:0}let e=0;for(const{listeners:r}of f(this,Nt).values())e+=r.length;return e}async listeners(t){if(t){const r=await B(this,Y,Xs).call(this,t);return r?r.listeners.map(({listener:s})=>s):[]}let e=[];for(const{listeners:r}of f(this,Nt).values())e=e.concat(r.map(({listener:s})=>s));return e}async off(t,e){const r=await B(this,Y,Xs).call(this,t);if(!r)return this;if(e){const s=r.listeners.map(({listener:i})=>i).indexOf(e);s>=0&&r.listeners.splice(s,1)}return(!e||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),f(this,Nt).delete(r.tag)),this}async removeAllListeners(t){if(t){const{tag:e,started:r,subscriber:s}=await B(this,Y,Ki).call(this,t);r&&s.stop(),f(this,Nt).delete(e)}else for(const[e,{started:r,subscriber:s}]of f(this,Nt))r&&s.stop(),f(this,Nt).delete(e);return this}async addListener(t,e){return await this.on(t,e)}async removeListener(t,e){return this.off(t,e)}get destroyed(){return f(this,Cs)}destroy(){this.removeAllListeners();for(const t of f(this,se).keys())this._clearTimeout(t);b(this,Cs,!0)}get paused(){return f(this,Tt)!=null}set paused(t){!!t!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(t){if(b(this,qe,-1),f(this,Tt)!=null){if(f(this,Tt)==!!t)return;T(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(e=>e.pause(t)),b(this,Tt,!!t);for(const e of f(this,se).values())e.timer&&clearTimeout(e.timer),e.time=qa()-e.time}resume(){if(f(this,Tt)!=null){this._forEachSubscriber(t=>t.resume()),b(this,Tt,null);for(const t of f(this,se).values()){let e=t.time;e<0&&(e=0),t.time=qa(),setTimeout(t.func,e)}}}}Nt=new WeakMap,Pn=new WeakMap,Tt=new WeakMap,Cs=new WeakMap,Wt=new WeakMap,fr=new WeakMap,In=new WeakMap,qe=new WeakMap,ki=new WeakMap,se=new WeakMap,Ps=new WeakMap,Is=new WeakMap,Y=new WeakSet,Jt=async function(t){const e=f(this,Is).cacheTimeout;if(e<0)return await this._perform(t);const r=Ji(t.method,t);let s=f(this,In).get(r);return s||(s=this._perform(t),f(this,In).set(r,s),setTimeout(()=>{f(this,In).get(r)===s&&f(this,In).delete(r)},e)),await s},Co=async function(t,e,r){T(r<Om,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},t,{blockTag:e,enableCcipRead:!0})});const s=aa(t);try{return F(await this._perform({method:"call",transaction:s,blockTag:e}))}catch(i){if(!this.disableCcipRead&&Uo(i)&&i.data&&r>=0&&e==="latest"&&s.to!=null&&ht(i.data,0,4)==="0x556f1830"){const a=i.data,o=await Dt(s.to,this);let l;try{l=Gm(ht(i.data,4))}catch(h){T(!1,h.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:s,info:{data:a}})}T(l.sender.toLowerCase()===o.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:a,reason:"OffchainLookup",transaction:s,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:l.errorArgs}});const u=await this.ccipReadFetch(s,l.calldata,l.urls);T(u!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:s,info:{data:i.data,errorArgs:l.errorArgs}});const d={to:o,data:pt([l.selector,Hm([u,l.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:d});try{const h=await B(this,Y,Co).call(this,d,e,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},d),result:h}),h}catch(h){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},d),error:h}),h}}throw i}},Po=async function(t){const{value:e}=await Ot({network:this.getNetwork(),value:t});return e},Ws=async function(t,e,r){let s=this._getAddress(e),i=this._getBlockTag(r);return(typeof s!="string"||typeof i!="string")&&([s,i]=await Promise.all([s,i])),await B(this,Y,Po).call(this,B(this,Y,Jt).call(this,Object.assign(t,{address:s,blockTag:i})))},Io=async function(t,e){if(lt(t,32))return await B(this,Y,Jt).call(this,{method:"getBlock",blockHash:t,includeTransactions:e});let r=this._getBlockTag(t);return typeof r!="string"&&(r=await r),await B(this,Y,Jt).call(this,{method:"getBlock",blockTag:r,includeTransactions:e})},Xs=async function(t,e){let r=await Ka(t,this);return r.type==="event"&&e&&e.length>0&&e[0].removed===!0&&(r=await Ka({orphan:"drop-log",log:e[0]},this)),f(this,Nt).get(r.tag)||null},Ki=async function(t){const e=await Ka(t,this),r=e.tag;let s=f(this,Nt).get(r);return s||(s={subscriber:this._getSubscriber(e),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},f(this,Nt).set(r,s)),s};function Fm(n,t){try{const e=No(n,t);if(e)return Zi(e)}catch{}return null}function No(n,t){if(n==="0x")return null;try{const e=K(ht(n,t,t+32)),r=K(ht(n,e,e+32));return ht(n,e+32,e+32+r)}catch{}return null}function gc(n){const t=bt(n);if(t.length>32)throw new Error("internal; should not happen");const e=new Uint8Array(32);return e.set(t,32-t.length),e}function Lm(n){if(n.length%32===0)return n;const t=new Uint8Array(Math.ceil(n.length/32)*32);return t.set(n),t}const Mm=new Uint8Array([]);function Hm(n){const t=[];let e=0;for(let r=0;r<n.length;r++)t.push(Mm),e+=32;for(let r=0;r<n.length;r++){const s=q(n[r]);t[r]=gc(e),t.push(gc(s.length)),t.push(Lm(s)),e+=32+Math.ceil(s.length/32)*32}return pt(t)}const yc="0x0000000000000000000000000000000000000000000000000000000000000000";function Gm(n){const t={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};T(Gr(n)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const e=ht(n,0,32);T(ht(e,0,12)===ht(yc,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),t.sender=ht(e,12);try{const r=[],s=K(ht(n,32,64)),i=K(ht(n,s,s+32)),a=ht(n,s+32);for(let o=0;o<i;o++){const l=Fm(a,o*32);if(l==null)throw new Error("abort");r.push(l)}t.urls=r}catch{T(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=No(n,64);if(r==null)throw new Error("abort");t.calldata=r}catch{T(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}T(ht(n,100,128)===ht(yc,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),t.selector=ht(n,96,100);try{const r=No(n,128);if(r==null)throw new Error("abort");t.extraData=r}catch{T(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return t.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>t[r]),t}function Ln(n,t){if(n.provider)return n.provider;T(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:t})}async function bc(n,t){let e=aa(t);if(e.to!=null&&(e.to=Dt(e.to,n)),e.from!=null){const r=e.from;e.from=Promise.all([n.getAddress(),Dt(r,n)]).then(([s,i])=>(A(s.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),s))}else e.from=n.getAddress();return await Ot(e)}class zm{constructor(t){k(this,"provider");Q(this,{provider:t||null})}async getNonce(t){return Ln(this,"getTransactionCount").getTransactionCount(await this.getAddress(),t)}async populateCall(t){return await bc(this,t)}async populateTransaction(t){const e=Ln(this,"populateTransaction"),r=await bc(this,t);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const s=await this.provider.getNetwork();if(r.chainId!=null){const a=H(r.chainId);A(a===s.chainId,"transaction chainId mismatch","tx.chainId",t.chainId)}else r.chainId=s.chainId;const i=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||i)?A(!1,"eip-1559 transaction do not support gasPrice","tx",t):(r.type===0||r.type===1)&&i&&A(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",t),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const a=await e.getFeeData();T(a.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=a.gasPrice)}else{const a=await e.getFeeData();if(r.type==null)if(a.maxFeePerGas!=null&&a.maxPriorityFeePerGas!=null)if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,r.gasPrice!=null){const o=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=o,r.maxPriorityFeePerGas=o}else r.maxFeePerGas==null&&(r.maxFeePerGas=a.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=a.maxPriorityFeePerGas);else a.gasPrice!=null?(T(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=a.gasPrice),r.type=0):T(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3||r.type===4)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=a.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=a.maxPriorityFeePerGas))}return await Ot(r)}async populateAuthorization(t){const e=Object.assign({},t);return e.chainId==null&&(e.chainId=(await Ln(this,"getNetwork").getNetwork()).chainId),e.nonce==null&&(e.nonce=await this.getNonce()),e}async estimateGas(t){return Ln(this,"estimateGas").estimateGas(await this.populateCall(t))}async call(t){return Ln(this,"call").call(await this.populateCall(t))}async resolveName(t){return await Ln(this,"resolveName").resolveName(t)}async sendTransaction(t){const e=Ln(this,"sendTransaction"),r=await this.populateTransaction(t);delete r.from;const s=Xi.from(r);return await e.broadcastTransaction(await this.signTransaction(s))}authorize(t){T(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function Qm(n){return JSON.parse(JSON.stringify(n))}var Rt,Te,hr,Nn,pr,Ns,$n,To,Bo;class dd{constructor(t){C(this,$n);C(this,Rt);C(this,Te);C(this,hr);C(this,Nn);C(this,pr);C(this,Ns);b(this,Rt,t),b(this,Te,null),b(this,hr,B(this,$n,To).bind(this)),b(this,Nn,!1),b(this,pr,null),b(this,Ns,!1)}_subscribe(t){throw new Error("subclasses must override this")}_emitResults(t,e){throw new Error("subclasses must override this")}_recover(t){throw new Error("subclasses must override this")}start(){f(this,Nn)||(b(this,Nn,!0),B(this,$n,To).call(this,-2))}stop(){f(this,Nn)&&(b(this,Nn,!1),b(this,Ns,!0),B(this,$n,Bo).call(this),f(this,Rt).off("block",f(this,hr)))}pause(t){t&&B(this,$n,Bo).call(this),f(this,Rt).off("block",f(this,hr))}resume(){this.start()}}Rt=new WeakMap,Te=new WeakMap,hr=new WeakMap,Nn=new WeakMap,pr=new WeakMap,Ns=new WeakMap,$n=new WeakSet,To=async function(t){try{f(this,Te)==null&&b(this,Te,this._subscribe(f(this,Rt)));let e=null;try{e=await f(this,Te)}catch(i){if(!Ct(i,"UNSUPPORTED_OPERATION")||i.operation!=="eth_newFilter")throw i}if(e==null){b(this,Te,null),f(this,Rt)._recoverSubscriber(this,this._recover(f(this,Rt)));return}const r=await f(this,Rt).getNetwork();if(f(this,pr)||b(this,pr,r),f(this,pr).chainId!==r.chainId)throw new Error("chaid changed");if(f(this,Ns))return;const s=await f(this,Rt).send("eth_getFilterChanges",[e]);await this._emitResults(f(this,Rt),s)}catch(e){console.log("@TODO",e)}f(this,Rt).once("block",f(this,hr))},Bo=function(){const t=f(this,Te);t&&(b(this,Te,null),t.then(e=>{f(this,Rt).destroyed||f(this,Rt).send("eth_uninstallFilter",[e])}))};var mr;class jm extends dd{constructor(e,r){super(e);C(this,mr);b(this,mr,Qm(r))}_recover(e){return new tl(e,f(this,mr))}async _subscribe(e){return await e.send("eth_newFilter",[f(this,mr)])}async _emitResults(e,r){for(const s of r)e.emit(f(this,mr),e._wrapLog(s,e._network))}}mr=new WeakMap;class Vm extends dd{async _subscribe(t){return await t.send("eth_newPendingTransactionFilter",[])}async _emitResults(t,e){for(const r of e)t.emit("pending",r)}}const Jm="bigint,boolean,function,number,string,symbol".split(/,/g);function qi(n){if(n==null||Jm.indexOf(typeof n)>=0||typeof n.getAddress=="function")return n;if(Array.isArray(n))return n.map(qi);if(typeof n=="object")return Object.keys(n).reduce((t,e)=>(t[e]=n[e],t),{});throw new Error(`should not happen: ${n} (${typeof n})`)}function Km(n){return new Promise(t=>{setTimeout(t,n)})}function Sr(n){return n&&n.toLowerCase()}function wc(n){return n&&typeof n.pollingInterval=="number"}const fd={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class Ya extends zm{constructor(e,r){super(e);k(this,"address");r=rt(r),Q(this,{address:r})}connect(e){T(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(e){return await this.populateCall(e)}async sendUncheckedTransaction(e){const r=qi(e),s=[];if(r.from){const a=r.from;s.push((async()=>{const o=await Dt(a,this.provider);A(o!=null&&o.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),r.from=o})())}else r.from=this.address;if(r.gasLimit==null&&s.push((async()=>{r.gasLimit=await this.provider.estimateGas({...r,from:this.address})})()),r.to!=null){const a=r.to;s.push((async()=>{r.to=await Dt(a,this.provider)})())}s.length&&await Promise.all(s);const i=this.provider.getRpcTransaction(r);return this.provider.send("eth_sendTransaction",[i])}async sendTransaction(e){const r=await this.provider.getBlockNumber(),s=await this.sendUncheckedTransaction(e);return await new Promise((i,a)=>{const o=[1e3,100];let l=0;const u=async()=>{try{const d=await this.provider.getTransaction(s);if(d!=null){i(d.replaceableTransaction(r));return}}catch(d){if(Ct(d,"CANCELLED")||Ct(d,"BAD_DATA")||Ct(d,"NETWORK_ERROR")||Ct(d,"UNSUPPORTED_OPERATION")){d.info==null&&(d.info={}),d.info.sendTransactionHash=s,a(d);return}if(Ct(d,"INVALID_ARGUMENT")&&(l++,d.info==null&&(d.info={}),d.info.sendTransactionHash=s,l>10)){a(d);return}this.provider.emit("error",dt("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:d}))}this.provider._setTimeout(()=>{u()},o.pop()||4e3)};u()})}async signTransaction(e){const r=qi(e);if(r.from){const i=await Dt(r.from,this.provider);A(i!=null&&i.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),r.from=i}else r.from=this.address;const s=this.provider.getRpcTransaction(r);return await this.provider.send("eth_signTransaction",[s])}async signMessage(e){const r=typeof e=="string"?Xe(e):e;return await this.provider.send("personal_sign",[F(r),this.address.toLowerCase()])}async signTypedData(e,r,s){const i=qi(s),a=await ia.resolveNames(e,r,i,async o=>{const l=await Dt(o);return A(l!=null,"TypedData does not support null address","value",o),l});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(ia.getPayload(a.domain,r,a.value))])}async unlock(e){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),e,null])}async _legacySignMessage(e){const r=typeof e=="string"?Xe(e):e;return await this.provider.send("eth_sign",[this.address.toLowerCase(),F(r)])}}var gr,Ts,Ye,Be,ge,ie,Mt,_i,So;class qm extends Dm{constructor(e,r){super(e,r);C(this,_i);C(this,gr);C(this,Ts);C(this,Ye);C(this,Be);C(this,ge);C(this,ie);C(this,Mt);b(this,Ts,1),b(this,gr,Object.assign({},fd,r||{})),b(this,Ye,[]),b(this,Be,null),b(this,ie,null),b(this,Mt,null);{let i=null;const a=new Promise(o=>{i=o});b(this,ge,{promise:a,resolve:i})}const s=this._getOption("staticNetwork");typeof s=="boolean"?(A(!s||e!=="any","staticNetwork cannot be used on special network 'any'","options",r),s&&e!=null&&b(this,ie,Oe.from(e))):s&&(A(e==null||s.matches(e),"staticNetwork MUST match network object","options",r),b(this,ie,s))}_getOption(e){return f(this,gr)[e]}get _network(){return T(f(this,ie),"network is not available yet","NETWORK_ERROR"),f(this,ie)}async _perform(e){if(e.method==="call"||e.method==="estimateGas"){let s=e.transaction;if(s&&s.type!=null&&H(s.type)&&s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null){const i=await this.getFeeData();i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null&&(e=Object.assign({},e,{transaction:Object.assign({},s,{type:void 0})}))}}const r=this.getRpcRequest(e);return r!=null?await this.send(r.method,r.args):super._perform(e)}async _detectNetwork(){const e=this._getOption("staticNetwork");if(e)if(e===!0){if(f(this,ie))return f(this,ie)}else return e;return f(this,Mt)?await f(this,Mt):this.ready?(b(this,Mt,(async()=>{try{const r=Oe.from(H(await this.send("eth_chainId",[])));return b(this,Mt,null),r}catch(r){throw b(this,Mt,null),r}})()),await f(this,Mt)):(b(this,Mt,(async()=>{const r={id:Qs(this,Ts)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:r});let s;try{s=(await this._send(r))[0],b(this,Mt,null)}catch(i){throw b(this,Mt,null),this.emit("debug",{action:"receiveRpcError",error:i}),i}if(this.emit("debug",{action:"receiveRpcResult",result:s}),"result"in s)return Oe.from(H(s.result));throw this.getRpcError(r,s)})()),await f(this,Mt))}_start(){f(this,ge)==null||f(this,ge).resolve==null||(f(this,ge).resolve(),b(this,ge,null),(async()=>{for(;f(this,ie)==null&&!this.destroyed;)try{b(this,ie,await this._detectNetwork())}catch(e){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",dt("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:e}})),await Km(1e3)}B(this,_i,So).call(this)})())}async _waitUntilReady(){if(f(this,ge)!=null)return await f(this,ge).promise}_getSubscriber(e){return e.type==="pending"?new Vm(this):e.type==="event"?this._getOption("polling")?new tl(this,e.filter):new jm(this,e.filter):e.type==="orphan"&&e.filter.orphan==="drop-log"?new ud("orphan"):super._getSubscriber(e)}get ready(){return f(this,ge)==null}getRpcTransaction(e){const r={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(s=>{if(e[s]==null)return;let i=s;s==="gasLimit"&&(i="gas"),r[i]=ye(H(e[s],`tx.${s}`))}),["from","to","data"].forEach(s=>{e[s]!=null&&(r[s]=F(e[s]))}),e.accessList&&(r.accessList=_r(e.accessList)),e.blobVersionedHashes&&(r.blobVersionedHashes=e.blobVersionedHashes.map(s=>s.toLowerCase())),e.authorizationList&&(r.authorizationList=e.authorizationList.map(s=>{const i=pu(s);return{address:i.address,nonce:ye(i.nonce),chainId:ye(i.chainId),yParity:ye(i.signature.yParity),r:ye(i.signature.r),s:ye(i.signature.s)}})),r}getRpcRequest(e){switch(e.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[Sr(e.address),e.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[Sr(e.address),e.blockTag]};case"getCode":return{method:"eth_getCode",args:[Sr(e.address),e.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[Sr(e.address),"0x"+e.position.toString(16),e.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[e.signedTransaction]};case"getBlock":if("blockTag"in e)return{method:"eth_getBlockByNumber",args:[e.blockTag,!!e.includeTransactions]};if("blockHash"in e)return{method:"eth_getBlockByHash",args:[e.blockHash,!!e.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[e.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[e.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(e.transaction),e.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(e.transaction)]};case"getLogs":return e.filter&&e.filter.address!=null&&(Array.isArray(e.filter.address)?e.filter.address=e.filter.address.map(Sr):e.filter.address=Sr(e.filter.address)),{method:"eth_getLogs",args:[e.filter]}}return null}getRpcError(e,r){const{method:s}=e,{error:i}=r;if(s==="eth_estimateGas"&&i.message){const l=i.message;if(!l.match(/revert/i)&&l.match(/insufficient funds/i))return dt("insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.params[0],info:{payload:e,error:i}});if(l.match(/nonce/i)&&l.match(/too low/i))return dt("nonce has already been used","NONCE_EXPIRED",{transaction:e.params[0],info:{payload:e,error:i}})}if(s==="eth_call"||s==="eth_estimateGas"){const l=Ro(i),u=ui.getBuiltinCallException(s==="eth_call"?"call":"estimateGas",e.params[0],l?l.data:null);return u.info={error:i,payload:e},u}const a=JSON.stringify(Zm(i));if(typeof i.message=="string"&&i.message.match(/user denied|ethers-user-denied/i))return dt("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[s]||"unknown",reason:"rejected",info:{payload:e,error:i}});if(s==="eth_sendRawTransaction"||s==="eth_sendTransaction"){const l=e.params[0];if(a.match(/insufficient funds|base fee exceeds gas limit/i))return dt("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:l,info:{error:i}});if(a.match(/nonce/i)&&a.match(/too low/i))return dt("nonce has already been used","NONCE_EXPIRED",{transaction:l,info:{error:i}});if(a.match(/replacement transaction/i)&&a.match(/underpriced/i))return dt("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:l,info:{error:i}});if(a.match(/only replay-protected/i))return dt("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:s,info:{transaction:l,info:{error:i}}})}let o=!!a.match(/the method .* does not exist/i);return o||i&&i.details&&i.details.startsWith("Unauthorized method:")&&(o=!0),o?dt("unsupported operation","UNSUPPORTED_OPERATION",{operation:e.method,info:{error:i,payload:e}}):dt("could not coalesce error","UNKNOWN_ERROR",{error:i,payload:e})}send(e,r){if(this.destroyed)return Promise.reject(dt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e}));const s=Qs(this,Ts)._++,i=new Promise((a,o)=>{f(this,Ye).push({resolve:a,reject:o,payload:{method:e,params:r,id:s,jsonrpc:"2.0"}})});return B(this,_i,So).call(this),i}async getSigner(e){e==null&&(e=0);const r=this.send("eth_accounts",[]);if(typeof e=="number"){const i=await r;if(e>=i.length)throw new Error("no such account");return new Ya(this,i[e])}const{accounts:s}=await Ot({network:this.getNetwork(),accounts:r});e=rt(e);for(const i of s)if(rt(i)===e)return new Ya(this,e);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(r=>new Ya(this,r))}destroy(){f(this,Be)&&(clearTimeout(f(this,Be)),b(this,Be,null));for(const{payload:e,reject:r}of f(this,Ye))r(dt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e.method}));b(this,Ye,[]),super.destroy()}}gr=new WeakMap,Ts=new WeakMap,Ye=new WeakMap,Be=new WeakMap,ge=new WeakMap,ie=new WeakMap,Mt=new WeakMap,_i=new WeakSet,So=function(){if(f(this,Be))return;const e=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");b(this,Be,setTimeout(()=>{b(this,Be,null);const r=f(this,Ye);for(b(this,Ye,[]);r.length;){const s=[r.shift()];for(;r.length&&s.length!==f(this,gr).batchMaxCount;)if(s.push(r.shift()),JSON.stringify(s.map(a=>a.payload)).length>f(this,gr).batchMaxSize){r.unshift(s.pop());break}(async()=>{const i=s.length===1?s[0].payload:s.map(a=>a.payload);this.emit("debug",{action:"sendRpcPayload",payload:i});try{const a=await this._send(i);this.emit("debug",{action:"receiveRpcResult",result:a});for(const{resolve:o,reject:l,payload:u}of s){if(this.destroyed){l(dt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:u.method}));continue}const d=a.filter(h=>h.id===u.id)[0];if(d==null){const h=dt("missing response for request","BAD_DATA",{value:a,info:{payload:u}});this.emit("error",h),l(h);continue}if("error"in d){l(this.getRpcError(u,d));continue}o(d.result)}}catch(a){this.emit("debug",{action:"receiveRpcError",error:a});for(const{reject:o}of s)o(a)}})()}},e))};var Tn;class Ym extends qm{constructor(e,r){super(e,r);C(this,Tn);let s=this._getOption("pollingInterval");s==null&&(s=fd.pollingInterval),b(this,Tn,s)}_getSubscriber(e){const r=super._getSubscriber(e);return wc(r)&&(r.pollingInterval=f(this,Tn)),r}get pollingInterval(){return f(this,Tn)}set pollingInterval(e){if(!Number.isInteger(e)||e<0)throw new Error("invalid interval");b(this,Tn,e),this._forEachSubscriber(r=>{wc(r)&&(r.pollingInterval=f(this,Tn))})}}Tn=new WeakMap;function Ro(n){if(n==null)return null;if(typeof n.message=="string"&&n.message.match(/revert/i)&&lt(n.data))return{message:n.message,data:n.data};if(typeof n=="object"){for(const t in n){const e=Ro(n[t]);if(e)return e}return null}if(typeof n=="string")try{return Ro(JSON.parse(n))}catch{}return null}function Oo(n,t){if(n!=null){if(typeof n.message=="string"&&t.push(n.message),typeof n=="object")for(const e in n)Oo(n[e],t);if(typeof n=="string")try{return Oo(JSON.parse(n),t)}catch{}}}function Zm(n){const t=[];return Oo(n,t),t}var Bs,Ss;const Vn=class Vn extends Ym{constructor(e,r,s){const i=Object.assign({},s??{},{batchMaxCount:1});A(e&&e.request,"invalid EIP-1193 provider","ethereum",e);super(r,i);C(this,Bs);C(this,Ss);b(this,Ss,null),s&&s.providerInfo&&b(this,Ss,s.providerInfo),b(this,Bs,async(a,o)=>{const l={method:a,params:o};this.emit("debug",{action:"sendEip1193Request",payload:l});try{const u=await e.request(l);return this.emit("debug",{action:"receiveEip1193Result",result:u}),u}catch(u){const d=new Error(u.message);throw d.code=u.code,d.data=u.data,d.payload=l,this.emit("debug",{action:"receiveEip1193Error",error:d}),d}})}get providerInfo(){return f(this,Ss)}async send(e,r){return await this._start(),await super.send(e,r)}async _send(e){A(!Array.isArray(e),"EIP-1193 does not support batch request","payload",e);try{const r=await f(this,Bs).call(this,e.method,e.params||[]);return[{id:e.id,result:r}]}catch(r){return[{id:e.id,error:{code:r.code,data:r.data,message:r.message}}]}}getRpcError(e,r){switch(r=JSON.parse(JSON.stringify(r)),r.error.code||-1){case 4001:r.error.message=`ethers-user-denied: ${r.error.message}`;break;case 4200:r.error.message=`ethers-unsupported: ${r.error.message}`;break}return super.getRpcError(e,r)}async hasSigner(e){e==null&&(e=0);const r=await this.send("eth_accounts",[]);return typeof e=="number"?r.length>e:(e=e.toLowerCase(),r.filter(s=>s.toLowerCase()===e).length!==0)}async getSigner(e){if(e==null&&(e=0),!await this.hasSigner(e))try{await f(this,Bs).call(this,"eth_requestAccounts",[])}catch(r){const s=r.payload;throw this.getRpcError(s,{id:s.id,error:r})}return await super.getSigner(e)}static async discover(e){if(e==null&&(e={}),e.provider)return new Vn(e.provider);const r=e.window?e.window:typeof window<"u"?window:null;if(r==null)return null;const s=e.anyProvider;if(s&&r.ethereum)return new Vn(r.ethereum);if(!("addEventListener"in r&&"dispatchEvent"in r&&"removeEventListener"in r))return null;const i=e.timeout?e.timeout:300;return i===0?null:await new Promise((a,o)=>{let l=[];const u=y=>{l.push(y.detail),s&&d()},d=()=>{if(clearTimeout(h),l.length)if(e&&e.filter){const y=e.filter(l.map(g=>Object.assign({},g.info)));if(y==null)a(null);else if(y instanceof Vn)a(y);else{let g=null;if(y.uuid&&(g=l.filter(w=>y.uuid===w.info.uuid)[0]),g){const{provider:v,info:w}=g;a(new Vn(v,void 0,{providerInfo:w}))}else o(dt("filter returned unknown info","UNSUPPORTED_OPERATION",{value:y}))}}else{const{provider:y,info:g}=l[0];a(new Vn(y,void 0,{providerInfo:g}))}else a(null);r.removeEventListener("eip6963:announceProvider",u)},h=setTimeout(()=>{d()},i);r.addEventListener("eip6963:announceProvider",u),r.dispatchEvent(new Event("eip6963:requestProvider"))})}};Bs=new WeakMap,Ss=new WeakMap;let $o=Vn,_={cart_:[],mcart_:[],region:"MY",selectedInstalment:null,emptyCart_(n){const t=n?"mcart":"cart",e=n?"first_mcart_country_id":"first_cart_country_id";n?this.mcart_=[]:this.cart_=[],localStorage.setItem(t,JSON.stringify([])),localStorage.removeItem(e),_[e]=null},restoreCart(n){const t=n?"mcart":"cart",e=n?"first_mcart_country_id":"first_cart_country_id",r=localStorage.getItem(t);r!=null&&(n?(this.mcart_=JSON.parse(r),_.first_mcart_country_id=localStorage.getItem(e)):(this.cart_=JSON.parse(r),_.first_cart_country_id=localStorage.getItem(e)))},filterItemsByName(n){var e=this.cart_.filter((r,s)=>r.name.includes(n));return console.log(e),e},hasCartItems(n){return(n?this.mcart_:this.cart_).length},addItem_(n,t){console.info(n);const e=t?this.mcart_:this.cart_,r=e.findIndex(i=>i.id===n.id);n.is_instalment&&(n.payInstalment||(instalment_name=n.name,product_instalment_id=n.id,n=n.first_payment_product,n.selectedInstalmentId=product_instalment_id,n.selectedInstalment={id:product_instalment_id,name:instalment_name})),r>=0?e[r].qty+=1:(n.qty=1,e.unshift(n));const s=t?"mcart":"cart";localStorage.setItem(s,JSON.stringify(e))},addItemById_(n,t){const e=t?"mcart":"cart",r=t?this.mcart_:this.cart_,s=r.findIndex(a=>a.id==parseInt(n));if(s>=0){var i=r[s];m.notify("item "+i.name+" added !",{delay:2e3,type:"success",placement:{from:"top",align:"center"}}),i.qty+=1}localStorage.setItem(e,JSON.stringify(r))},minusItem_(n,t){const e=t?"mcart":"cart",r=t?this.mcart_:this.cart_,s=r.findIndex(a=>a.id==parseInt(n));if(s>=0){var i=r[s];m.notify("item "+i.name+" deducted !",{delay:2e3,type:"success",placement:{from:"top",align:"center"}}),i.qty-=1,i.qty==0&&this.removeItem_(n,t)}localStorage.setItem(e,JSON.stringify(r))},removeItem_(n,t){const e=t?"mcart":"cart",r=t?this.mcart_:this.cart_,s=r.findIndex(a=>a.id==parseInt(n));var i=r[s];m.notify("item "+i.name+" removed !",{delay:2e3,type:"warning",placement:{from:"top",align:"center"}}),r.splice(s,1),localStorage.setItem(e,JSON.stringify(r)),_.cart_.length==0&&(_.first_cart_country_id=null)},toastChanges(){$("input[name='user[share_code]']").length>0||m.toast({content:'<div class=""><ul class="">'+$(".ac").html()+"</ul></div>"})},total_(n){n?this.mcart_:this.cart_;var t=this.cart.map((e,r)=>e.price).reduce((e,r)=>e+r);return t},render(){var n=["merchantProducts","merchantproduct","merchantProfile","merchant","recruit","topup","country","light","primaryBuy","secondaryBuy","assetTranches","userProfile","wallet","crypto_wallet","crypto_wallet_balance","announcement","products","product","bonusLimit","rewardList","rewardSummary","mcart","cart","cartItems","salesItems","upgradeTarget","upgradeTargetMerchant","sponsorTarget","stockistTarget","choosePayment"];n.forEach((t,e)=>{if($(t).length>0)try{this.components[t]()}catch(r){console.error(r)}})},components:{merchantproduct(){$("merchantproduct").customHtml(`
        <div class="text-center mt-4">
          <div class="spinner-border loading2" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
        </div>
          
      <div class="loading2 d-none" id="mpcontent" />
      `),m.api("get_mproduct",{id:pageParams.id},null,n=>{$("title").html(n.name);function t(){var r=_.mcart_.filter((s,i)=>s.merchant_id==n.merchant_id);r.length>0?(_.addItem_(n,!0),_.components.updateMCart(),m.notify("Added "+n.name,{delay:2e3,type:"success",placement:{from:"top",align:"center"}})):_.mcart_.length==0?(_.addItem_(n,!0),_.components.updateMCart(),m.notify("Added "+n.name,{delay:2e3,type:"success",placement:{from:"top",align:"center"}})):alert("cant add due to different merchants, empty it first.")}$(".spinner-border.loading2").parent().remove(),$(".loading2").removeClass("d-none");var e;if(n.img_url!=null)try{e=n.img_url}catch{e="/images/placeholder.png"}$("#mpcontent").customHtml(`

      <div class="d-flex flex-column justify-content-center align-items-center ">
        <h2 id="ptitle">
        </h2>
            <div  class="d-flex justify-content-center p-4 " 
                style="
                  position: relative; 
                  width: 320px;
                  height: 340px;">
            <div class="rounded py-2" style="
                  height: 340px;
                  width: 88%;
                  filter: blur(4px);
                  position: absolute;
                  background-repeat: no-repeat;
                  background-position: center;
                  background-size: cover;
                  background-image: url('`+e+`');
                  top: 30px;
                  left: 20px;
                  ">
            </div>
            <div class="rounded py-2" style="
                  height: 340px;
                  width:  100%;
                  z-index: 1;
                  background-position: center;
                  background-repeat: no-repeat;
                  background-size: cover; 
                  background-image: url('`+e+`');
                  ">
            </div>
          </div>
        <div style="margin-top: 50px;">`+n.description+`</div>
        <div class="font-sm fw-light text-secondary text-center "><span class="format-float">`+n.retail_price+` </span> RP</div>
        <div class="btn btn-outline-primary mt-4" mproduct-id="`+n.id+`">Add</div>
      </div>

      `),$("#ptitle").html(n.name),$("[mproduct-id='"+n.id+"']")[0].onclick=t})},merchantProducts(){let n;function t(){return phxApp.user==null?"b.is_approved=true|b.country_id="+m.chosen_country_id_.id:"b.is_approved=true|b.country_id="+phxApp.user.country_id}function e(a,o,l,u,d){var h=`
                    <div  class="position-relative m-2 d-flex flex-column gap-2" `+a+`>
                      <div  class="d-flex justify-content-center mb-4 py-4 background-p" 
                            style="
                              cursor: pointer;   
                              position: relative; "
                             >
                        <div class="rounded py-2 background-p" style="
                          
                              width: 80%;
                              filter: blur(4px);
                              position: absolute;
                              background-repeat: no-repeat;
                              background-position: center;
                              background-size: cover;
                              background-image: url('`+o+`');
                              
                              ">
                        </div>
                        <div class="rounded py-2 foreground-p" style="
                             
                              width:  100%;
                              z-index: 1;
                              background-position: center;
                              background-repeat: no-repeat;
                              background-size: cover; 
                              background-image: url('`+o+`');
                              ">
                        </div>
                      </div>
                      <div class="d-flex position-absolute" style="left: 10px; top: 12px;z-index: 10;">
                        <div class="bg-primary badge">`+l.name+`</div>
                      </div>
                      <div class="d-flex flex-column justify-content-center gap-2 mt-4">
                        <div class="font-sm fw-bold text-center">`+u.name+`</div>
                         <div class="d-flex flex-column justify-content-center ">
                            <div class="font-sm fw-light text-secondary text-center "><span class="format-float">`+u.retail_price+`</span> RP</div>
                         </div>
                         `+d+`
                      </div>
                    </div>
                    `;return h}function r(a){var o="v2";return a=="Thailand"&&(o="th"),a=="Vietnam"&&(o="vn"),a=="China"&&(o="cn"),o}var s=[];if(m.countries_.forEach((a,o)=>{s.push(`
                <button type="button" aria-name="`+a.name+'" aria-country="'+a.id+'" class="btn btn-primary ">'+a.name+" "+(a.alias||"")+`</button>
              `)}),m.chosen_country_id_==null&&pageParams.share_code==null&&(m.modal({selector:"#mySubModal",content:`
                    <center>
                      <div class="btn-group-vertical">
                      `+s.join("")+`
                      </div>
                    </center>
                  `,header:"Choose region",autoClose:!1}),$("[aria-country]").unbind(),$("[aria-country]").click(function(){var a=$(this).attr("aria-country"),o=$(this).attr("aria-name");m.chosen_country_id_=a,m.notify("Chosen region: "+o),localStorage.setItem("region",o),setTimeout(()=>{$("#chosen-region").html(o)},1e3),localStorage.region!=null&&(langPrefix=r(o)),translationRes=m.api("translation",{lang:langPrefix}),$("#mySubModal").modal("hide"),_.components.country(),m.navigateTo("/home")})),pageParams.share_code!=null&&m.api("get_share_link_by_code",{code:pageParams.share_code},null,a=>{n=m.countries_.filter((l,u)=>l.id==a.user.country_id)[0],console.info(n),m.chosen_country_id_=a.user.country_id,a.user.country_id;var o=n.name;m.notify("Chosen region: "+n.name),localStorage.setItem("region",n.name),setTimeout(()=>{$("#chosen-region").html(o)},1e3),localStorage.region!=null&&(langPrefix=r(o)),translationRes=m.api("translation",{lang:langPrefix}),_.components.country(),$(".sponsor-name").customHtml("_sponsor: "+a.user.username+" _position: "+a.position),$(".sponsor-bank").html(`

                            <div class="d-flex justify-content-between align-items-center">
                              <span class="fw-bold">Bank Details</span>
                              <span class=" my-4 me-4 d-flex justify-content-end align-items-end gap-1 flex-column">
                                <div>`+a.user.bank_name+`</div>
                                <div>`+a.user.bank_account_holder+`</div>
                                <div>`+a.user.bank_account_no+`</div>
                              </span>
                            </div>

                              `)}),m.chosen_country_id_!=null){let a=function(o){var l=$(o).attr("mproduct-id");m.api("get_mproduct",{id:l},()=>{},u=>{var d=_.mcart_.filter((h,y)=>h.merchant_id==u.merchant_id);if(d.length>0)try{_.addItem_(u,!0),_.components.updateMCart(),_.components.cartItems(),m.notify("Added "+u.name,{delay:2e3,type:"success",placement:{from:"top",align:"center"}})}catch(h){console.error(h)}else _.mcart_.length==0?(_.addItem_(u,!0),_.components.updateMCart(),_.components.cartItems(),m.notify("Added "+u.name,{delay:2e3,type:"success",placement:{from:"top",align:"center"}})):alert("cant add due to different merchants, empty it first.")})};var i=a;$("merchantProducts").each((o,l)=>{$(l).customHtml(`
                  <div class="text-center mt-4">
                    <div class="spinner-border loading" role="status">
                      <span class="visually-hidden">Loading...</span>
                    </div>
                  </div>
                    

                  <div class="row gx-0 d-none loading">
                    <div class="col-12 col-lg-10 offset-lg-1">
                      <div id="mproduct_tab1"></div>
                    </div>
                  </div>
                `).then(()=>{var u=null,d="mproducts",h=new Ks({onDrawFn:()=>{$(".spinner-border.loading").parent().remove(),$(".loading").removeClass("d-none"),setTimeout(()=>{$("[mproduct-id]").each((y,g)=>{g.onclick=()=>{a(g)}}),ut.formatDate()},1200)},xcard:y=>{var g=y,v="",w="/images/placeholder.png",x=`onclick="phxApp.navigateTo('/merchant_products/`+g.id+"/"+g.name+`')"`;if($(l).attr("direct")!=null&&(x="",v='<div class="btn btn-outline-primary mt-4" mproduct-id="'+g.id+'">Add</div>'),g.img_url!=null)try{w=g.img_url}catch{w="/images/placeholder.png"}var E=g.merchant;return e(x,w,E,g,v)},data:{sorts:[[1,"asc"]],additional_join_statements:[{merchant:"merchant"}],additional_search_queries:[t()],preloads:["merchant"],grid_class:"col-4 col-lg-3",dom:`

                                                    <"row px-4"
                                                      <"col-lg-6 col-12"i>
                                                      <"col-12 col-lg-6">
                                                    >
                                                    <"row grid_view ">
                                                    <"list_view d-none"t>
                                                    <"row transform-75 px-4"
                                                      <"col-lg-6 col-12">
                                                      <"col-lg-6 col-12"p>
                                                    >

                                                `},columns:[{label:"id",data:"id"},{label:"Action",data:"id"}],moduleName:"MerchantProduct",link:"MerchantProduct",customCols:u,buttons:[],tableSelector:"#"+d});h.load(d,"#mproduct_tab1")})})}},merchantProfile(){$("merchantProfile").html(`
      <form class="with_mod row" module="Merchant" id="Merchant">
      </form>
      `);var n=m.user.merchant;m.user.merchant==null&&(n={id:"0",user_id:phxApp.user.id});var t=new Ks({columns:[{label:"Action",data:"id"}],moduleName:"MerchantCategory",link:"MerchantCategory",buttons:[],tableSelector:"#bc2c"}),e=m.populateTableData(t,100,()=>{});try{console.info(e.allData)}catch(r){console.error(r)}phxApp.createForm(n,null,[{name:"General",list:["id","user_id","name",{label:"merchant_category_id",alt_name:"Business Category",alt_class:"col-12",selection:t.allData},{alt_name:"Merchant Logo",label:"img_url",upload:!0},{label:"description",binary:!0,alt_class:"col-12"},{label:"commission_perc",alt_name:"Percentage Contribution",selection:[{id:.05,name:"5%"},{id:.1,name:"10%"},{id:.15,name:"15%"},{id:.2,name:"20%"},{id:.22,name:"25%"},{id:.3,name:"30%"},{id:.35,name:"35%"},{id:.4,name:"40%"},{id:.45,name:"45%"},{id:.5,name:"50%"}]}]},{name:"CompanyDetails",list:[{label:"company_address",alt_name:"Address",alt_class:"col-12",binary:!0},{label:"company_email",alt_name:"Email",alt_class:"col-12"},{label:"company_phone",alt_name:"Phone",alt_class:"col-12"},{label:"company_reg_no",alt_name:"Reg No",alt_class:"col-12"},{label:"company_ssm_image_url",alt_name:"SSM Image",alt_class:"col-12",upload:!0}]},{name:"BankDetails",list:[{label:"bank_name",alt_name:"Bank Name",alt_class:"col-12"},{label:"bank_account_holder",alt_name:"Bank Account Holder",alt_class:"col-12"},{label:"bank_account_no",alt_name:"Account Number",alt_class:"col-12"}]}],r=>{console.info(r),L.extendUser(),phxApp.navigateTo("/merchant_profile")})},merchant(){var n=' <div class="btn btn-primary btn-lg merchant-apply mb-4 disabled">Apply</div>';m.user.merchant!=null&&(m.user.merchant.is_approved==!1?n=' <div class="btn btn-primary btn-lg merchant-apply ">Pending Approval</div>':m.navigateTo("/merchant_profile"));function t(){console.log("agree"),$(".merchant-apply ").toggleClass("disabled")}window.agree=t,$("merchant").html(`
        <h2 class="mt-2">Merchant Application</h2> 
        <div class="px-4 m-4">
          Terms and condition
        </div>
        <center class="w-100 d-lg-none d-block">
          <iframe class="my-4" style="width:100%; height: 600px;"  src="https://docs.google.com/document/d/e/2PACX-1vShkzZ2LaszYkpcKw82giaYPqzRhB8odK54rkrJLwc6YMiUNp7HLaHYFTYN0hNPngJvJ_XR36_T8b5Z/pub?embedded=true"></iframe>
        </center>
        
        <center class="w-100 d-lg-block d-none">
          <iframe class="my-4" style="width: 60%; height: 600px;"  src="https://docs.google.com/document/d/e/2PACX-1vShkzZ2LaszYkpcKw82giaYPqzRhB8odK54rkrJLwc6YMiUNp7HLaHYFTYN0hNPngJvJ_XR36_T8b5Z/pub?embedded=true"></iframe>
        </center>
        <center>

        <div class="form-check m-4">
          <input class="form-check-input" onchange="agree()" type="checkbox" value="" id="flexCheckDefault">
          <label class="form-check-label" for="flexCheckDefault">
          I agree to above terms and condition
          </label>
        </div>

        </center>
        <div>
         `+n+`
        </div>

      `),$(".merchant-apply").on("click",()=>{m.post("apply_merchant",{id:m.user.id},null,()=>{m.navigateTo("/merchant_profile")})})},recruit(){$("recruit").each((n,t)=>{console.log(t);var e=$(t).attr("merchant");console.log(e==""),e==""?$(t).customHtml(`

          <div class="">
              <label class="my-2">Position</label>
              <select class="form-control" name="mposition">
                <option>auto</option>
              <option>left</option>
                <option>right</option>
              </select>
              <div class="mt-4 btn btn-primary generate-mlink">Generate</div>
          </div>



          `):$(t).customHtml(`

          <div class="">
              <label class="my-2">Position</label>
              <select class="form-control" name="position">
                <option>auto</option>
                <option>left</option>
                <option>right</option>
              </select>
              <div class="mt-4 btn btn-primary generate-link">Generate</div>
          </div>



          `),$(".generate-mlink").click(()=>{m.api("get_merchant_share_link",{username:m.user.username,position:$("select[name='mposition']").val()},null,r=>{m.modal({autoClose:!1,header:"Share Link",selector:"#mySubModal",content:`

                <label class="my-2">Generated</label>
                <input class="form-control" name="link"></input>
                <div class="mt-4 btn btn-primary copy-link">Copy</div>




              `}),$("input[name='link']").val(r.link),$(".copy-link").click(()=>{try{navigator.clipboard.writeText(r.link),console.log("Content copied to clipboard"),m.notify("Copied!")}catch{m.notify("Cant copy",{type:"danger"})}})})}),$(".generate-link").click(()=>{m.api("get_share_link",{username:m.user.username,position:$("select[name='position']").val()},null,r=>{m.modal({autoClose:!1,header:"Share Link",selector:"#mySubModal",content:`

                <label class="my-2">Generated</label>
                <input class="form-control" name="link"></input>
                <div class="mt-4 btn btn-primary copy-link">Copy</div>




              `}),$("input[name='link']").val(r.link),$(".copy-link").click(()=>{try{navigator.clipboard.writeText(r.link),console.log("Content copied to clipboard"),m.notify("Copied!")}catch{m.notify("Cant copy",{type:"danger"})}})})})})},choosePayment(){var n=phxApp.api("razer_list",{}),t=Object.keys(n),e=[];t.forEach((r,s)=>{var i=[];n[r].forEach((a,o)=>{var l=`

          <div class="py-1 col-6 col-lg-4 use-channel" aria-channel-label='`+a.channel_map.direct.request+`' >
            <img class="w-100 m-2 m-lg-0" src="`+a.logo_url_120x43+`"></img>
          </div>
          `;a.currency.includes("MYR")&&a.status==1&&a.channel_map.direct.request!=""&&i.push(l)}),e.push(`

          <div class="row mt-2 pb-1 border-success border-bottom">
         
          `+i.join("")+`
          </div>


          `)}),$("choosePayment").html(`
        <div class="my-4 d-flex justify-content-between">
          <div  class="btn btn-primary" onclick="$('#myPaymentModal').modal('show')">
            Choose Payment
          </div>
          <div class="" id="chosen-payment">
          </div>
        </div>
        <div class="modal" id="myPaymentModal">
          <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title">Choose Payment</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true"></span>
                </button>
              </div>
              <div class="modal-body">
             

                      <section class="ps-0 p-4 razer-display">
                        <h4>Pay with</h4>
                      `+e.join("")+`
                      </section>
             
              </div>
              <div class="modal-footer">
              </div>
            </div>
          </div>
        </div>
      `),$(".use-channel").click(function(){var r=$(this).attr("aria-channel-label");$(".use-channel").removeClass("border border-primary rounded"),$(this).addClass("border border-primary rounded"),console.info("use channel: "+r),$("input[name='user[payment][channel]']").val(r);var s=$(this).html();$("#chosen-payment").html(s),$("#myPaymentModal").modal("hide")})},crypto_wallet_balance(){let n=[];$("crypto_wallet_balance").each((t,e)=>{$(e).customHtml(`
              <div class="card">
                <div class="card-body d-flex flex-column gap-2">
                  <div class="d-flex justify-content-between align-items-center">
                    <h5 class="card-title m-0">Crypto Wallet</h5>
                    <button class="btn btn-sm btn-outline-primary" id="refresh-cw">Refresh</button>
                  </div>
                  <div id="cw-address" class="text-truncate text-secondary">Loading...</div>
                  <div class="d-flex align-items-end gap-2">
                    <div class="display-6" id="cw-balance">-</div>
                    <small class="text-muted" id="cw-symbol">tokens</small>
                  </div>
                </div>
              </div>
              <div class="card mt-4">
                <div class="card-body">
                  <div class="d-flex justify-content-between align-items-center mb-2">
                    <h6 class="card-title m-0">Recent Transfers</h6>
                  </div>
                  <div class="table-responsive">
                    <table class="table table-sm align-middle mb-0">
                      <thead>
                        <tr>
                          <th scope="col">Time</th>
                          <th scope="col">From</th>
                          <th scope="col">To</th>
                          <th scope="col" class="text-end">Amount</th>
                          <th scope="col">Tx</th>
                        </tr>
                      </thead>
                      <tbody id="cw-transfers-body">
                        <tr>
                          <td colspan="5" class="text-center text-muted">No transfers</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            `);function r(l,u){if(!l)return"0";var d=typeof u=="number"?u:parseInt(u||"18",10),h=(l+"").replace(/\D/g,"");if(h.length===0)return"0";if(h.length<=d){var y=("0".repeat(d+1)+h).slice(-(d+1)),g=y.slice(0,y.length-d),v=y.slice(-d).replace(/0+$/,"");return v?g+"."+v.slice(0,6):g}var w=h.slice(0,h.length-d),x=h.slice(h.length-d).replace(/0+$/,"");return w=w.replace(/\B(?=(\d{3})+(?!\d))/g,","),x?w+"."+x.slice(0,6):w}function s(l){if(!l)return"-";var u=l+"";return u.length<=10?u:u.slice(0,6)+"…"+u.slice(-4)}function i(l){if(!l)return"-";var u=parseInt(l,10);if(!isFinite(u))return"-";var d=new Date(u*1e3);return d.toLocaleString()}function a(){var l=$("#cw-transfers-body");if(!Array.isArray(n)||n.length===0){l.html('<tr><td colspan="5" class="text-center text-muted">No transfers</td></tr>');return}var u=n.slice(0,20).map(function(d){var h=r(d.value,parseInt(d.tokenDecimal||"18",10)),y=d.tokenSymbol||"",g=i(d.timeStamp),v=s(d.from),w=s(d.to),x=d.hash?'<a href="https://polygonscan.com/tx/'+d.hash+'" target="_blank" rel="noopener">'+s(d.hash)+"</a>":"-";return"<tr><td>"+g+'</td><td class="font-monospace">'+v+'</td><td class="font-monospace">'+w+'</td><td class="text-end">'+h+(y?" "+y:"")+'</td><td class="font-monospace">'+x+"</td></tr>"}).join("");l.html(u)}function o(){var l=m.api("crypto_wallet_balance",{token:m.user&&m.user.token});if(l&&l.status=="error"){$("#cw-address").html(l.reason||"Error"),$("#cw-balance").html("-");return}l&&($("#cw-address").html(l.address),$("#cw-balance").html(l.formatted),$("#cw-symbol").html("tokens"),n=l.transfers||[],a())}o(),$(document).off("click","#refresh-cw").on("click","#refresh-cw",function(){o()})})},crypto_wallet(){$("crypto_wallet").each((n,t)=>{var e=phxApp.api("crypto_wallet",{token:phxApp.user.token});console.log(e),$("crypto_wallet").html(`
                <div class="d-flex flex-column flex-lg-row align-items-center flex gap-2">
       
                    <h5 class="">Crypto</h5>
                    
                      <span>`+e.address+`</span>

                      <div
                     class="btn btn-primary"
                     onclick="phxApp.copyToClipboard('`+e.address+`')">
                      Copy
                     </div>
               
                </div>
              `)})},async claimFromOwner(n,t){const e="0xa17c6fc7d9ecef353ceb3132ddd619037d134125",r=["function transferFrom(address from, address to, uint256 amount) public returns (bool)"],i=await new $o(window.ethereum).getSigner(),a=new Vr(e,r,i),l=Fd(t.toString(),18),u=await a.transferFrom(n,await i.getAddress(),l);return await u.wait(),{status:"ok",txHash:u.hash}},topup(){function n(i){var a,o=phxApp.rowData(i);console.log(o),o.payment!=null?o.payment.payment_method=="nowpayments"?(a="",o.is_approved==!1&&(a=`<p>You will be redirected to pay this topup.</p>
            <a target="_blank" href="`+o.payment.payment_url+`" class="btn btn-primary">Pay
            </a>`),phxApp.modal({autoClose:!1,selector:"#mySubModal",header:"NowPayments",content:`

            `+a+`
            <div class="btn btn-primary check">Recheck
            </div>

            `}),$(".check").click(()=>{phxApp.api("check_bill",{id:o.payment.billplz_code})})):phxApp.modal({selector:"#mySubModal",header:"Details",content:`

          <div class="btn btn-primary delete">Delete Request
            </div>


            `}):phxApp.modal({selector:"#mySubModal",header:"Details",content:`

            <p>`+o.remarks+`</p>

            `}),$(".delete").unbind(),$(".delete").click(()=>{phxApp.api("delete_topup_request",{id:o.id},null,l=>{$("#mySubModal").modal("hide"),l.status=="error"?l.reason!=""&&phxApp.notify("Not Deleted! Reason: "+l.reason,{type:"danger"}):(phxApp.notify("Deleted!"),phxApp.navigateTo("/topup_register_point"))})})}$("topup").customHtml(`    
                <div class="card-body ">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                    <h3>Topup Transaction</h3>
                    <div class="btn btn-primary " id="new_topup">
                        <span class="d-flex align-items-center"><i class="fa fa-plus me-1"></i>Topup</span></div>
                    </div>
                    <div class="" id="tab2"></div>
                </div>
                    `),window.selectedBank=i=>{$("input[name='WalletTopup[bank]']").val(i)};var t=[];$("#new_topup").click(()=>{phxApp.modal({selector:"#mySubModal",autoClose:!1,header:"New Register Point Topup",content:`
                        <div class="row ">
                            <form class="col-12 offset-lg-1 col-lg-10 with_mod row p-4" module="WalletTopup" 
                            id="WalletTopup">
                            

                            </form>

                        </div>
                    `}),phxApp.createForm({id:"0",user_id:phxApp.user.id,payment_method:"nowpayments"},null,["id",{label:"amount",alt_name:"Amount (USDT-POLYGON)",alt_class:"col-12"},{label:"remarks",alt_name:"Description",alt_class:"col-12"},{label:"payment-placeholder",alt_name:"Choose Payment",alt_class:"col-12",placeholder:`


              <div id="payment-placeholder">
                <section class="py-4 razer-display">
                  <h3>Choose 1 of these methods</h3>
                `+t.join("")+`
                </section>
                <section class="d-none upload-display">
                  <div class="px-4 pt-4">
                    Kindly deposit to either 1 of these account.
                  </div>
                  <div class="p-4 fs-5">
                    USDT POLYGON<br>
                    
                    <span>
                      <div>  </div>
                      <div style="width: 70vw;text-overflow: ellipsis;overflow: hidden;">0x3675cF9333f00188A99791be2fD612353bC54da8 <div class="btn btn-primary" onclick="phxApp.copyToClipboard('0x3675cF9333f00188A99791be2fD612353bC54da8');selectedBank('PBB')">Copy</div></div>
                    </span><br>
                  </div>
                </section>
                <div class="btn-group" role="group" aria-label="PaymentGroup">
                  <input type="radio" class="btn-check show-upload" name="btnradio" id="btnradio1z" autocomplete="off" >
                  <label class="btn btn-outline-primary" for="btnradio1z">Upload Bank In Slip</label>

                  <input type="radio" class="btn-check show-razer" name="btnradio" id="btnradio2z" autocomplete="off" checked="">
                  <label class="btn btn-outline-primary" for="btnradio2z">NowPayments</label>
       
                </div>

              </div>

          `},{label:"payment_method",selection:[{id:"nowpayments",name:"NowPayments"},{id:"bank in slip",name:"BANK IN SLIP"}],alt_class:"d-none"},{label:"img_url",upload:!0,alt_class:"d-none upload-display"},{label:"bank",data:"bank",hidden:!0},"user_id"],i=>{console.info(i),i.payment_method=="nowpayments"?window.open(i.payment_url,"_blank"):phxApp.navigateTo("/topup_register_point")}),$(document).on("click",".show-upload",()=>{$(".upload-display").removeClass("d-none"),$(".razer-display").addClass("d-none"),$("select[name='WalletTopup[payment_method]']").val("bank in slip")}),$(document).on("click",".show-razer",()=>{$(".upload-display").addClass("d-none"),$(".razer-display").removeClass("d-none"),$("select[name='WalletTopup[payment_method]']").val("nowpayments")})});var e=null,r=phxApp.makeid(4),s=new Ks({onDrawFn:()=>{setTimeout(()=>{phxApp.formatDate()},200)},xcard:i=>{console.log(i);var a=i;a.amount<0;var o='<span class="badge bg-warning">PENDING</span>';a.is_approved&&(o='<span class="badge bg-success">APPROVED</span>');var l=`
       

        <div class="row border-1 border-top py-2">
          <div class="col-6 text-start text-sm">`+o+`</div>
         <div class="col-6 text-end text-sm">Amount (RP)</div>
        </div>
        <div class="row">
          <div class="col-6 text-start text-sm format_datetime">`+a.inserted_at+`</div>
     
         <div class="col-6 text-end "> <span class='format-integer'>`+a.amount+`</span></div>
        </div>

        `;return l},data:{grid_class:"col-12 ",dom:`
       <"row px-4 px-lg-0" 
        <"col-12 col-lg-6 "l>
        <"col-12 col-lg-6 text-lg-end "i>
      >
      <"row grid_view d-block d-lg-none">
      <"list_view d-none d-lg-block"t>
      <"row transform-75 px-4"
          <"col-lg-6 col-12">
          <"col-lg-6 col-12"p>
        >
    `,preloads:["user","payment"],additional_join_statements:[{user:"user"}],additional_search_queries:["a.user_id="+phxApp.user.id]},columns:[{label:"id",data:"id"},{label:"Date",data:"inserted_at",formatDateTime:!0,offset:0},{customized:!0,label:"Approved?",data:"is_approved",xdata:{formatFn:(i,a)=>(i.is_approved?html='<div  ><i class="fa fa-check text-success"></i><span  class="ms-2">Approved</span></div>':html='<div  ><i class="fa fa-hourglass text-warning"></i><span class="ms-2">Pending</span></div>',html)}},{label:"Payment",data:"id",showChild:!0,xdata:{child:"payment",data:"payment_method"}},{label:"Amount",data:"amount",className:"format-float"},{label:"Action",data:"id",className:""}],moduleName:"WalletTopup",link:"WalletTopup",customCols:e,buttons:[{name:"Details",iconName:"fa fa-info",color:"btn-sm btn-outline-warning",onClickFunction:n,fnParams:{}}],tableSelector:"#"+r});s.load(r,"#tab2")},country(){if(localStorage.getItem("region")!=null){var n=m.countries_.filter((e,r)=>e.name==localStorage.getItem("region"))[0];m.chosen_country_id_=n,$("country").customHtml(`


      <li class="nav-item">
        <a class="nav-link choose-region" href="javascript:void(0);" > <i class="fa fa-globe"></i>`+localStorage.getItem("region")+`</a>
      </li>

    `)}else $("country").customHtml(`


      <li class="nav-item">
        <a class="nav-link choose-region" href="javascript:void(0);" > <i class="fa fa-globe"></i> MY</a>
      </li>

    `);var t=[];m.countries_.forEach((e,r)=>{t.push(`
          <button type="button" aria-name="`+e.name+'" aria-country="'+e.id+'" class="btn btn-primary ">'+e.name+`</button>
        `)}),$(".choose-region").click(()=>{_.emptyCart_(),m.modal({selector:"#mySubModal",content:`
        <center>
          <div class="btn-group-vertical">
          `+t.join("")+`
          </div>
        </center>
      `,header:"Choose region",autoClose:!1}),$("[aria-country]").unbind(),$("[aria-country]").click(function(){var e=$(this).attr("aria-country"),r=$(this).attr("aria-name");m.chosen_country_id_=e,m.notify("Chosen region: "+r),localStorage.setItem("region",r),setTimeout(()=>{$("#chosen-region").html(r)},1e3),$("#mySubModal").modal("hide");try{let a=function(o){var l="v2";return o=="Thailand"&&(l="th"),o=="Vietnam"&&(l="vn"),o=="China"&&(l="cn"),l};var i=a,s="v2";localStorage.region!=null&&(s=a(localStorage.region)),translationRes=m.api("translation",{lang:s})}catch(a){console.error("Error fetching translation:",a)}_.components.country(),_.components.products(),$("[name='user[pick_up_point_id]']").length>0&&_.components.cartItems()})})},upgradeTarget(){var n=null,t;$("upgradeTarget").attr("instalment")!=null&&(console.log("ok"),_.emptyCart_()),window.upgradeTarget==null&&(window.upgradeTarget=L.user.username),$("input[name='user[upgrade]']").val(window.upgradeTarget),$("upgradeTarget").customHtml('<span>for: <span id="upgradeTarget">'+window.upgradeTarget+'</span> <a class="ms-4" href="javascript:void(0);" aria-upgrade=true> <i class="fa fa-edit"></i> Change</a> </span>'),$("[aria-upgrade]").click(()=>{m.modal({selector:"#mySubModal",autoClose:!1,content:`
        <div>
          <div class="form-group">
            <label>Username</label>
            <input class="my-2 form-control" type="text" name='upgrade[username]'></input>
              <div class="form-text text-muted pv-info"></div>

            <button class="mt-4 btn btn-outline-primary checkUser">Check</button>
            <button class="mt-4 btn btn-primary disabled selectUser">Select this user</button>
          </div>
        </div>
        `,header:"Change Upgrade User"}),$(".checkUser").click(()=>{m.api("get_accumulated_sales",{show_instalment:!0,parent_id:L.user.id,show_rank:!0,username:$("[name='upgrade[username]']").val()},()=>{window.upgradeTarget=L.user.username,$("input[name='user[upgrade]']").val(window.upgradeTarget),$(".selectUser").addClass("disabled")},e=>{m.notify("User verified!"),$(".selectUser").removeClass("disabled"),$(".pv-info").customHtml("Accumulated sales PV: "+e[0]+" | Rank: "+e[1]),e[2].is_direct_downline?$(".to-upgrade").removeClass("disabled"):(m.notify("User not direct downline!",{type:"warning"}),$("label[for='btnradio3']").click(),$(".to-upgrade").addClass("disabled"),e[4].outstanding_instalments!=null&&e[4].outstanding_instalments.product.can_pay_by_drp&&$(".to-upgrade").removeClass("disabled")),console.info(e[4].outstanding_instalments);try{e[4].outstanding_instalments!=null&&($("input[name='user[shipping][fullname]']").val(e[4].outstanding_instalments.user.fullname),$("input[name='user[shipping][phone]']").val(e[4].outstanding_instalments.user.phone),$("input[name='user[instalment]']").val("Month no: "+e[4].outstanding_instalments.month_no+"/"+e[4].outstanding_instalments.instalment.no_of_months),t=e[4].outstanding_instalments.product,n=e[4].outstanding_instalments.member_instalment_product.product)}catch(r){console.error(r)}})}),$(".selectUser").click(()=>{$("input[name='user[upgrade]']").val($("[name='upgrade[username]']").val()),m.notify("User selected!"),$("#mySubModal").modal("hide"),window.upgradeTarget=$("[name='upgrade[username]']").val(),$("#upgradeTarget").html($("[name='upgrade[username]']").val()),t!=null&&(m.addItem(t.id),n!=null&&m.addItem(n.id)),_.components.cartItems(),console.info("need to check if member is direct sponsor")})})},upgradeTargetMerchant(){var n=null,t;$("upgradeTarget").attr("instalment")!=null&&(console.log("ok"),_.emptyCart_()),window.upgradeTarget==null&&(window.upgradeTarget=L.user.username),$("input[name='user[upgrade]']").val(window.upgradeTarget),$("upgradeTargetMerchant").customHtml('<span>for: <span id="upgradeTarget">'+window.upgradeTarget+'</span> <a class="ms-4" href="javascript:void(0);" aria-upgrade=true> <i class="fa fa-edit"></i> Change</a> </span>'),$("[aria-upgrade]").click(()=>{m.modal({selector:"#mySubModal",autoClose:!1,content:`
        <div>
          <div class="form-group">
            <label>Username</label>
            <input class="my-2 form-control" type="text" name='upgrade[username]'></input>
              <div class="form-text text-muted pv-info"></div>

            <button class="mt-4 btn btn-outline-primary checkUser">Check</button>
            <button class="mt-4 btn btn-primary disabled selectUser">Select this user</button>
          </div>
        </div>
        `,header:"Change Upgrade User"}),$(".checkUser").click(()=>{m.api("get_accumulated_sales_merchant",{show_instalment:!0,parent_id:L.user.id,show_rank:!0,username:$("[name='upgrade[username]']").val()},()=>{window.upgradeTarget=L.user.username,$("input[name='user[upgrade]']").val(window.upgradeTarget),$(".selectUser").addClass("disabled")},e=>{m.notify("User verified!"),$(".selectUser").removeClass("disabled"),$(".pv-info").customHtml("Accumulated sales PV: "+e[0]+" | Rank: "+e[1]),e[2].is_direct_downline?$(".to-upgrade").removeClass("disabled"):(m.notify("User not direct downline!",{type:"warning"}),$("label[for='btnradio3']").click(),$(".to-upgrade").addClass("disabled"),e[4].outstanding_instalments!=null&&e[4].outstanding_instalments.product.can_pay_by_drp&&$(".to-upgrade").removeClass("disabled")),console.info(e[4].outstanding_instalments);try{e[4].outstanding_instalments!=null&&($("input[name='user[shipping][fullname]']").val(e[4].outstanding_instalments.user.fullname),$("input[name='user[shipping][phone]']").val(e[4].outstanding_instalments.user.phone),$("input[name='user[instalment]']").val("Month no: "+e[4].outstanding_instalments.month_no+"/"+e[4].outstanding_instalments.instalment.no_of_months),t=e[4].outstanding_instalments.product,n=e[4].outstanding_instalments.member_instalment_product.product)}catch(r){console.error(r)}})}),$(".selectUser").click(()=>{$("input[name='user[upgrade]']").val($("[name='upgrade[username]']").val()),m.notify("User selected!"),$("#mySubModal").modal("hide"),window.upgradeTarget=$("[name='upgrade[username]']").val(),$("#upgradeTarget").html($("[name='upgrade[username]']").val()),t!=null&&(m.addItem(t.id),n!=null&&m.addItem(n.id)),_.components.cartItems(),console.info("need to check if member is direct sponsor")})})},sponsorTarget(){window.sponsorTarget==null&&(window.sponsorTarget=L.user.username),$("input[name='user[sponsor]']").val(""),$("sponsorTarget").customHtml('<span>for: <span id="sponsorTarget">'+window.sponsorTarget+`</span>
     <a class="ms-4" href="javascript:void(0);" aria-sponsor=true> <i class="fa fa-edit"></i> Change</a> </span>`),$("[aria-sponsor]").click(()=>{m.modal({selector:"#mySubModal",autoClose:!1,content:`
        <div>
          <div class="form-group">
            <label>Username</label>
            <input class="my-2 form-control" value="`+L.user.username+`" type="text" name='sponsor[username]'></input>
            

            <button class="mt-4 btn btn-outline-primary checkUser">Check</button>
            <button class="mt-4 btn btn-primary disabled selectUser">Select this user</button>
          </div>
        </div>
        `,header:"Change Sponsor User"}),$(".checkUser").click(()=>{m.api("get_accumulated_sales",{parent_id:L.user.id,show_rank:!0,username:$("[name='sponsor[username]']").val()},()=>{window.sponsorTarget=L.user.username,$("input[name='user[sponsor]']").val(window.sponsorTarget),$(".selectUser").addClass("disabled")},n=>{$(".selectUser").removeClass("disabled"),$(".pv-info").customHtml("Accumulated sales PV: "+n[0]+" | Rank: "+n[1]),n[2].is_direct_downline?$(".to-upgrade").removeClass("disabled"):($("label[for='btnradio3']").click(),$(".to-upgrade").addClass("disabled")),n[3].is_downline||$("input[name='sponsor[username]']").val()==L.user.username?m.notify("User verified!"):(m.notify("Not downline!",{type:"warning"}),$(".selectUser").addClass("disabled"))})}),$(".selectUser").click(()=>{$("input[name='user[sponsor]']").val($("[name='sponsor[username]']").val()),$("input[name='view[sponsor]']").val($("[name='sponsor[username]']").val()),m.notify("User selected!"),$("#mySubModal").modal("hide"),window.sponsorTarget=$("[name='sponsor[username]']").val(),$("#sponsorTarget").html($("[name='sponsor[username]']").val()),_.components.cartItems(),console.info("need to check if member is direct sponsor")})})},stockistTarget(){window.stockistTarget==null&&(window.stockistTarget=L.user.username),$("input[name='user[stockist_user_id]']").val(""),$("stockistTarget").customHtml('<span>for: <span id="stockistTarget">'+window.stockistTarget+`</span>
     <a class="ms-4" href="javascript:void(0);" aria-stockist=true> <i class="fa fa-edit"></i> Change</a> </span>`),$("[aria-stockist]").click(()=>{m.modal({selector:"#mySubModal",autoClose:!1,content:`
        <div>
          <div class="form-group">
            <label>Username</label>
            <input class="my-2 form-control" value="`+L.user.username+`" type="text" name='sponsor[username]'></input>
            

            <button class="mt-4 btn btn-outline-primary checkUser">Check</button>
            <button class="mt-4 btn btn-primary disabled selectUser">Select this user</button>
          </div>
        </div>
        `,header:"Change Stockist User"}),$(".checkUser").click(()=>{m.api("get_stockist",{parent_id:L.user.id,show_rank:!0,username:$("[name='sponsor[username]']").val()},()=>{window.stockistTarget=L.user.username,$("input[name='user[stockist_user_id]']").val(null),$(".selectUser").addClass("disabled")},n=>{$(".selectUser").removeClass("disabled"),n[1].is_stockist?(window.stockistTargetData=n[2],$("input[name='user[stockist_user_id]']").val(window.stockistTargetData.id),m.notify("User verified!")):(m.notify("Not stockist!",{type:"warning"}),$(".selectUser").addClass("disabled"))})}),$(".selectUser").click(()=>{$("input[name='user[stockist]']").val($("[name='sponsor[username]']").val()),$("input[name='view[stockist]']").val($("[name='sponsor[username]']").val()),m.notify("User selected!"),$("#mySubModal").modal("hide"),window.stockistTarget=$("[name='sponsor[username]']").val(),$("#stockistTarget").html($("[name='sponsor[username]']").val()),_.components.cartItems()})})},salesItems(){var n=m.api("get_sale",{id:pageParams.id});n.status=="pending_payment"&&n.payment!=null,$("title").html("Order ID: "+n.id),window.sale=n;var t,e,r=[],s=0,i=0;s=n.sales_items.map((P,I)=>P.qty*P.item_pv).reduce((P,I)=>P+I,0),i=n.sales_items.map((P,I)=>P.qty*P.item_price).reduce((P,I)=>P+I,0),n.sales_items.map((P,I)=>P.qty).reduce((P,I)=>P+I,0);var a=n.shipping_fee||0,o=this.evalRank(i);try{t=JSON.parse(n.registration_details)}catch(P){console.error(P)}var l=!1;t.scope=="merchant_checkout"&&(s=n.total_point_value,l=!0),n.sales_items.forEach((P,I)=>{var U="/images/placeholder.png";if(P.img_url!=null)try{U=P.img_url}catch{U="/images/placeholder.png"}var R='  <span class="font-sm text-info "><span class="format-integer">'+P.item_pv*P.qty+"</span> PV</span>";l&&(R=""),r.push(`

          <div class="d-flex align-items-center justify-content-between gap-2">
            <div class="d-flex align-items-center justify-content-between gap-2">
              <div class="d-flex justify-content-center align-items-center " style="
                                cursor: pointer;   
                                position: relative; 
                                height: 60px;">
                <div class="rounded py-2" style="
                                height: 50px;
                                width: 72%;
                                filter: blur(4px);
                                position: absolute;
                                background-repeat: no-repeat;
                                background-position: center;
                                background-size: cover;
                                background-image: url('`+U+`');
                                bottom: 6px;
                                left: 16px;
                                ">
                </div>
                <div class="rounded py-2" style="
                                height: 50px;
                                width:  60px;
                                z-index: 1;
                                background-position: center;
                                background-repeat: no-repeat;
                                background-size: cover; 
                                background-image: url('`+U+`');
                                ">
                </div>
              </div>
              <div class="d-flex flex-column">
                <span>`+P.item_name+" <small>(x"+P.qty+`)</small></span>
                <div>`+P.remarks+`</div>
              </div>
            </div>
            <div class="d-flex flex-column flex-lg-row justify-content-between align-items-center">
              <div class="d-flex flex-column align-items-end">
                <span class="font-sm ">RP <span class="format-float">`+(P.item_price*P.qty).toFixed(2)+`</span></span>
              `+R+`
              </div>
             
            </div>
          </div>

        
          `)});var u="Total PV";l&&(u="RP Received");var d=`

             <div class="d-flex justify-content-between align-items-center">
                <span class="fs-4">Subtotal</span>
                <span class=" me-4">RP <span class="format-float">`+i+`</span></span>
              </div>
             <div class="d-flex justify-content-between align-items-center">
                <span class="fs-4">Shipping</span>
                <span class=" me-4">RP <span class="format-float">`+a+`</span></span>
              </div>
              <div class="d-flex justify-content-between align-items-center">
                <span class="fs-5">`+u+`</span>
                <span class="text-info me-4"><span class="format-integer">`+s+` PV</span></span>
              </div>
              <div class="d-flex justify-content-between align-items-center">
                <span class="fw-bold text-secondary">Eligible Rank</span>
                <span class="text-info me-4"><span class="format-integer">`+o+`</span></span>
              </div>

    `;try{e=t.user.shipping,console.log("shippnig..."),console.info(e),payment=n.payment}catch(P){console.error(P)}var h={};if(n.payment!=null){n.payment.payment_url!=null&&(d=`

               <div class="d-flex justify-content-between align-items-center">
                  <span class="fs-4">Subtotal</span>
                  <span class=" ">RP <span class="format-float">`+i+`</span></span>
                </div>
               <div class="d-flex justify-content-between align-items-center">
                  <span class="fs-4">Shipping</span>
                  <span class=" me-4">RP <span class="format-float">`+a+`</span></span>
                </div>
                <div class="d-flex justify-content-between align-items-center">
                  <span class="fs-5">`+u+`</span>
                  <span class="text-info "><span class="format-integer">`+s+` PV</span></span>
                </div>
                <div class="d-flex justify-content-between align-items-center">
                  <span class="fw-bold text-secondary">Eligible Rank</span>
                  <span class="text-info "><span class="format-integer">`+o+`</span></span>
                </div>
                <div class="d-flex justify-content-between align-items-center">
                  <span class="fw-bold text-secondary">Paid with</span>
                  <span class="text-primary "><span class="">`+payment.payment_method.split("_").map((P,I)=>ut.capitalize(P)).join(" ")+`</span></span>
                </div>
                <div class="d-flex justify-content-between align-items-center">
                  <span class="fw-bold text-secondary">Payment Link</span>
                  <span class="text-primary "><a target="_blank" href="`+payment.payment_url+'" class="">'+payment.payment_url+`</a></span>
                </div>

      `);try{if(console.info(n.payment),n.payment.webhook_details!=null){n.payment.webhook_details.split("|").map((P,I)=>{data=P.split(": ");var U=data[0].replace(" ","_");console.log(U),h[U]=parseFloat(data[1])}),console.info(h),drp_amount=0;var y="DRP";l&&(y="Merchant Point"),(h.drp_paid!=null||h.mp_paid!=null)&&(drp_amount=h.drp_paid,l&&(drp_amount=h.mp_paid)),h.pp_paid!=null&&(s=0);var g=s-drp_amount,v=i+a-drp_amount-(h.rp_paid||0),w=` <div class="d-flex justify-content-between align-items-center">
                  <span class="fw-bold text-secondary">Eligible Rank</span>
                  <span class="text-info "><span class="format-integer">`+o+`</span></span>
                </div>`;l&&(w="",g=s,v=i+a),d=`

               <div class="d-flex justify-content-between align-items-center">
                  <span class="fs-5">Subtotal</span>
                  <span class=" ">RP <span class="format-float">`+i+`</span></span>
                </div>
               <div class="d-flex justify-content-between align-items-center">
                  <span class="fs-5">Shipping + Tax</span>
                  <span class=" ">RP <span class="format-float">`+a+`</span></span>
                </div>

                <div class="d-flex justify-content-between align-items-center">
                  <span class="fs-5">`+y+`</span>
                  <span class=" ">- RP <span class="format-float">`+drp_amount+`</span></span>
                </div>

               <div class="d-flex justify-content-between align-items-center">
                  <span class="fs-5">Grand Total </span>
                  <span class=" ">RP <span class="format-float">`+(i+a)+`</span></span>
                </div>

                <div class="d-flex justify-content-between align-items-center">
                  <span class="fs-5">`+u+`</span>
                  <span class="text-info "><span class="format-integer">`+g+` PV</span></span>
                </div>
                <div class="d-flex justify-content-between align-items-center">
                  <span class="fs-4">Grand Total  After Payment</span>
                  <span class=" ">RP <span class="format-float">`+v+` </span></span>
                </div>

               `+w+`
                <div class="d-flex justify-content-between align-items-center">
                  <span class="fw-bold text-secondary">Paid with</span>
                  <span class="text-primary "><span class="">`+payment.payment_method.split("_").map((P,I)=>ut.capitalize(P)).join(" ")+`</span></span>
                        </div>

              `}}catch(P){console.error(P)}}var x="      ";try{e!=null?x=`
        <span class="text-secondary">Deliver To:</span> 
                         <span>`+e.line1+", "+e.line2+`</span>
                         <span>`+e.city+" "+e.postcode+", "+e.state+` </span>

    `:e={phone:null,fullname:null},n.pick_up_point!=null&&(x=`           <span class="text-secondary">Pick Up Point: </span>
                      <span>`+n.pick_up_point.name+` </span>
                    <span>`+n.pick_up_point.address+` </span>

        `)}catch(P){console.error(P)}console.info(x);var E='    <a class="btn btn-primary" href="/pdf?id='+n.id+'" target="_blank">Print</a>';n.payment==null&&n.status=="pending_payment"&&(E='<div class="btn btn-success approve-sale" aria-id="'+n.id+'">Approve</div>'),n.merchant_id!=null&&(E='   <a class="btn btn-primary" href="/pdf?type=merchant&id='+n.id+'" target="_blank">Print</a>  <a class="d-none mdo btn btn-primary" href="/pdf?type=merchant_do&id='+n.id+'" target="_blank">Print DO</a>'),console.info(n),$("salesItems").customHtml(`
      <div class="d-flex align-items-center justify-content-between gap-2">
        <h2>Sales Details</h2><small class="badge bg-primary">`+n.status+`</small>
      </div>
              <div class="d-flex flex-column mb-4 ">
                 <span class="text-secondary">Sold To:</span> 
                 <span>`+(t.user.fullname||m.user.fullname)+", "+(t.user.phone||m.user.phone)+`</span>
                 
              </div>
              <div class="d-flex flex-column mb-4 ">
                 <span class="text-secondary">Recipient:</span> 
                 <span>`+(e.fullname||m.user.fullname)+", "+(e.phone||m.user.phone)+`</span>
                 
              </div>


              <div class="d-flex flex-column mb-4 ">
               
                  `+x+`
              </div>

                 <span class="text-secondary">Items:</span>
              <div class="d-flex flex-column gap-2">`+r.join("")+`
              `+d+`
              </div>
              <div class="my-4">
            `+E+`
              </div>

      `),$(".approve-sale").click(function(){var P=$(this).attr("aria-id");m.modal({selector:"#mySubModal",content:`<div>

          <p>Approve this sale ?</p>

          <div class="btn btn-outline-primary confirm-approve">Approve</div>

          </div>`,header:"Confirmation",autoClose:!1}),$(".confirm-approve").click(()=>{m.api("manual_approve_bank_in",{id:P})},null,()=>{m.navigateTo(location.pathname)})}),ut.formatDate()},evalStates(){$("select[name='user[shipping][state]']").customHtml("<option></option>");var n=m.countries_.filter((e,r)=>e.name=="Malaysia")[0];try{if(n.id==m.chosen_country_id_.id){$("[name='user[pick_up_point_id]']").val()==null?$(".ss1").customHtml(`
                                    <select class="form-select" required id="s1" onchange="window.choosenAddress = null" name="user[shipping][state]">
                                    </select>
                                    <label class="ms-2" for="floatingInput">State</label>
                                `):$(".ss1").customHtml(`
                                        <select class="form-select"  id="s1" onchange="window.choosenAddress = null" name="user[shipping][state]">
                                        </select>
                                        <label class="ms-2" for="floatingInput">State</label>
                                    `);var t=[["jhr","Johor"],["kdh","Kedah"],["ktn","Kelantan"],["mlk","Melaka"],["nsn","Negeri Sembilan"],["phg","Pahang"],["prk","Perak"],["pls","Perlis"],["png","Pulau Pinang"],["sgr","Selangor"],["trg","Terengganu"],["kul","Kuala Lumpur"],["pjy","Putra Jaya"],["srw","Sarawak"],["sbh","Sabah"],["lbn","Labuan"]];t.forEach((e,r)=>{window.selectedState==e[1]?$("select[name='user[shipping][state]']").append(`
                                        <option selected value="`+e[1]+'">'+e[1]+"</option>"):$("select[name='user[shipping][state]']").append(`
                                        <option value="`+e[1]+'">'+e[1]+"</option>")}),$("select[name='user[shipping][state]']").change(()=>{window.selectedState=$("select[name='user[shipping][state]']").val(),_.components.updateCart(),_.components.cartItems()})}else $("[name='user[pick_up_point_id]']").val()==null?$(".ss1").customHtml(`
                                    <input class="form-control" required id="s1" onchange="window.choosenAddress = null" name="user[shipping][state]">
                                    </input>
                                    <label class="ms-2" for="floatingInput">State</label>
                                `):$(".ss1").customHtml(`
                                    <input class="form-control"  id="s1" onchange="window.choosenAddress = null" name="user[shipping][state]">
                                    </input>
                                    <label class="ms-2" for="floatingInput">State</label>
                                `)}catch(e){console.error(e)}},evalShipping(n){var t=_.cart_.map((e,r)=>e.qty*e.base_shipping_fee).reduce((e,r)=>e+r,0);return $("[name='user[pick_up_point_id]']").val()!=""&&(t=0),t},evalShippingLegacy(n){var t=$("cartItems").attr("merchant")=="",e=0,r=m.countries_.filter((i,a)=>i.name=="Malaysia")[0],s=m.countries_.filter((i,a)=>i.name=="Singapore")[0];return r.id==m.chosen_country_id_.id?$("[name='user[pick_up_point_id]']").val()!=""?e=0:["Sabah","Sarawak","Labuan"].includes(window.selectedState)?e=Math.ceil(n/200)*4:t?e=Math.ceil(n/200)*2:n>=100?e=0:e=2:(e=n*.1,s.id==m.chosen_country_id_.id&&(e=n*.05,t&&(e=n*.1))),e},evalShippingAddresses(){try{m.api("list_pick_up_point_by_country",{country_id:m.chosen_country_id_.id},null,n=>{if(m.pick_up_points=n,$("[name='user[pick_up_point_id]']").length>0&&$("[name='user[pick_up_point_id]']").val()!=""){var t=$("[name='user[pick_up_point_id]']").val(),e=m.pick_up_points.filter((s,i)=>s.id==t)[0];try{$("[name='user[shipping][state]']").removeAttr("required"),console.log("attr removed"),$(".self-pickup-form").customHtml(`
                 <div class="d-flex flex-column">
                    <span>`+e.name+`</span>
                    <span class="text-secondary">`+e.address+`</span>
                    <span class="mt-4">
                    </span>
                  </div>

          `)}catch{$(".shipping-form").removeClass("d-none"),$(".self-pickup-form").addClass("d-none"),m.notify("No pick up points in this region",{type:"danger"})}}var r=[];n.forEach((s,i)=>{r.push(`
            <div class="card my-2" style="cursor: pointer;">
              <div class="card-body">
                <div class="d-flex flex-column">
                  <span>`+s.name+`</span>
                  <span class="text-secondary">`+s.address+`</span>
                  <span class="mt-4">
                    <div class="btn btn-primary" aria-address="`+s.id+`">Choose</div>
                  </span>
                </div>
              </div>
            </div>
          `)}),$(".self-pickup").unbind(),$(".self-pickup").click(()=>{window.selectedState=null,$(".shipping-form").addClass("d-none"),$(".self-pickup-form").removeClass("d-none"),m.modal({autoClose:!1,selector:"#mySubModal",content:`
          <div class="d-flex flex-column">
            `+r.join("")+`
          </div>
          `,header:"Pick Up Points"}),$("[aria-address]").click(function(){var s=$(this).attr("aria-address"),i=m.pick_up_points.filter((a,o)=>a.id==s)[0];try{$("[name='user[shipping][state]']").removeAttr("required"),console.log("attr removed"),$(".self-pickup-form").customHtml(`
                 <div class="d-flex flex-column">
                    <span>`+i.name+`</span>
                    <span class="text-secondary">`+i.address+`</span>
                    <span class="mt-4">
                    </span>
                  </div>

          `)}catch{$(".shipping-form").removeClass("d-none"),$(".self-pickup-form").addClass("d-none"),m.notify("No pick up points in this region",{type:"danger"})}$("[name='user[pick_up_point_id]']").val(s),$("#mySubModal").modal("hide"),$("[name='user[shipping][state]']").val(null),_.components.cartItems()})})}),pageParams.share_code!=null||m.api("list_user_sales_addresses_by_username",{username:m.user.username},null,n=>{if(m.addresses=n,n.length>0&&window.choosenAddress!=null){var t=n.filter((r,s)=>r.id==window.choosenAddress)[0];$("[name='user[shipping][phone]']").val(t.phone),$("[name='user[shipping][fullname]']").val(t.fullname),$("[name='user[shipping][line1]']").val(t.line1),$("[name='user[shipping][line2]']").val(t.line2),$("[name='user[shipping][city]']").val(t.city),$("[name='user[shipping][postcode]']").val(t.postcode),setTimeout(()=>{$("[name='user[shipping][state]']").val(t.state)},500)}$(".change-address").unbind();var e=[];n.forEach((r,s)=>{e.push(`
            <div class="card my-2" style="cursor: pointer;">
              <div class="card-body">
                <div class="d-flex flex-column">
                  <span>`+r.fullname+`</span>
                  <span class="text-secondary">`+r.line1+", "+r.line2+`</span>
                  <span class="mt-4">
                    <div class="btn btn-primary" aria-address="`+r.id+`">Choose</div>
                  </span>
                </div>
              </div>
            </div>
          `)}),$(".change-address").click(()=>{$("[name='user[pick_up_point_id]']").val(""),$(".shipping-form").removeClass("d-none"),$(".self-pickup-form").addClass("d-none"),$("[name='user[shipping][state]']").attr("required"),console.log("attr add"),m.modal({autoClose:!1,selector:"#mySubModal",content:`
                                            <div class="d-flex flex-column">
                                                `+e.join("")+`
                                            </div>
                                            `,header:"Change address"}),$("[aria-address]").click(function(){var r=$(this).attr("aria-address");window.choosenAddress=r;var s=m.addresses.filter((i,a)=>i.id==r)[0];$("[name='user[shipping][phone]']").val(s.phone),$("[name='user[shipping][fullname]']").val(s.fullname),$("[name='user[shipping][line1]']").val(s.line1),$("[name='user[shipping][line2]']").val(s.line2),$("[name='user[shipping][city]']").val(s.city),$("[name='user[shipping][postcode]']").val(s.postcode),setTimeout(()=>{$("[name='user[shipping][state]']").val(s.state)},500),$("#mySubModal").modal("hide"),_.components.cartItems()})})})}catch(n){console.error(n)}},cartItems(){var n,t=$("cartItems").attr("merchant")=="";const e=t?_.mcart_:_.cart_;var r,s=!1,i=2,a=[],o=0,l=0;o=e.map((N,S)=>N.qty*N.point_value).reduce((N,S)=>N+S,0),l=e.map((N,S)=>N.qty*N.retail_price).reduce((N,S)=>N+S,0),t&&(o=l),e.map((N,S)=>N.qty).reduce((N,S)=>N+S,0),this.evalShippingAddresses(),this.evalStates(),$("cartItems").attr("upgrade")!=null?(window.upgradeTarget!=null?(n=m.api("get_accumulated_sales",{username:window.upgradeTarget}),l=l,r=this.evalRank(l+n)):(l=l,r=this.evalRank(l+L.user.rank.retail_price)),$(".only-downline").click(()=>{m.notify("Only available for direct recruited downline.")})):r=this.evalRank(l),i=this.evalShipping(l),e.forEach((N,S)=>{var D='<span class="font-sm text-info "><span class="format-integer">'+N.point_value*N.qty+"</span> PV</span>";t&&(D="");var z="/images/placeholder.png";if(N.img_url!=null)try{z=N.img_url}catch{z="/images/placeholder.png"}var V="";if(e==_.cart&&parseInt(localStorage.first_cart_country_id)!=m.chosen_country_id_.id)V="border border-danger",a.push(`

                                    <div class="d-flex align-items-center justify-content-between gap-2 `+V+` rounded p-2 me-3">
                                    
                                        <div class="d-flex align-items-center justify-content-between gap-2">
                                        <div class="d-flex justify-content-center align-items-center " style="
                                                            cursor: pointer;   
                                                            position: relative; 
                                                            height: 60px;">
                                            <div class="rounded py-2" style="
                                                            height: 50px;
                                                            width: 72%;
                                                            filter: blur(4px);
                                                            position: absolute;
                                                            background-repeat: no-repeat;
                                                            background-position: center;
                                                            background-size: cover;
                                                            background-image: url('`+z+`');
                                                            bottom: 6px;
                                                            left: 16px;
                                                            ">
                                            </div>
                                            <div class="rounded py-2" style="
                                                            height: 50px;
                                                            width:  60px;
                                                            z-index: 1;
                                                            background-position: center;
                                                            background-repeat: no-repeat;
                                                            background-size: cover; 
                                                            background-image: url('`+z+`');
                                                            ">
                                            </div>
                                        </div>
                                        <span>`+N.name+" <small>(x"+N.qty+`)</small> <br><small> <i class="fa fa-exclamation-triangle text-danger "></i>Product not available for this region</small></span>
                                        </div>
                                        <div class="d-flex flex-column flex-lg-row justify-content-between align-items-center">
                                        
                                        <div class="text-center">
                                            <div class="btn btn-sm" delete-product-id="`+N.id+`"><i class="text-danger fa fa-times"></i></div>
                                        </div>
                                        </div>
                                    </div>

                                    
                                    `);else{N.override_pv&&(s=!0);var j='RP <span class="format-float">'+(N.retail_price*N.qty).toFixed(2);showRP==!1&&(j='MYR <span class="format-float">'+(N.retail_price*N.qty*m.chosen_country_id_.conversion).toFixed(2));var W="",at="";if(N.selectedInstalmentId!=null){var wt=N.selectedInstalment;try{at='<div class="text-sm text-secondary">'+wt.name+"</div>",W='<input type="hidden"  name="user[products]['+S+'][remarks]" value="instalment_product_id:'+N.selectedInstalmentId+'">'}catch(G){console.error(G)}}try{if($("input[name='user[instalment]']").val()!=null){var O=$("input[name='user[instalment]']").val();at=O}}catch(G){console.error(G)}a.push(`

            <div class="d-flex align-items-center justify-content-between gap-2 `+V+` rounded p-2 me-3">
            <input type="hidden"  name="user[products][`+S+'][item_name]" value="'+N.name+`">
            <input type="hidden"  name="user[products][`+S+'][item_price]" value="'+N.retail_price+`">
            <input type="hidden"  name="user[products][`+S+'][item_pv]" value="'+N.point_value+`">
            <input type="hidden"  name="user[products][`+S+'][img_url]" value="'+N.img_url+`">
            <input type="hidden"  name="user[products][`+S+'][qty]" value="'+N.qty+`">
            `+W+`
              <div class="d-flex align-items-center justify-content-between gap-2">
                <div class="d-flex justify-content-center align-items-center " style="
                                  cursor: pointer;   
                                  position: relative; 
                                  height: 60px;">
                  <div class="rounded py-2" style="
                                  height: 50px;
                                 width: 72%;
                                  filter: blur(4px);
                                  position: absolute;
                                  background-repeat: no-repeat;
                                  background-position: center;
                                  background-size: cover;
                                  background-image: url('`+z+`');
                                  bottom: 6px;
                                  left: 16px;
                                  ">
                  </div>
                  <div class="rounded py-2" style="
                                  height: 50px;
                                  width:  60px;
                                  z-index: 1;
                                  background-position: center;
                                  background-repeat: no-repeat;
                                  background-size: cover; 
                                  background-image: url('`+z+`');
                                  ">
                  </div>
                </div>
                <div class="d-flex flex-column">
                  <span>`+N.name+" <small>(x"+N.qty+`)</small></span>
                  `+at+`
                </div>
              </div>
              <div class="d-flex flex-column flex-lg-row justify-content-between align-items-center">
                <div class="d-flex flex-column align-items-end">
                  <span class="font-sm ">`+j+`</span></span>
                  `+D+`
                </div>
                <div class="text-center">
                  <div class="btn btn-sm" add-product-id="`+N.id+`"><i class="text-info fa fa-plus"></i></div>
                  <div class="btn btn-sm" minus-product-id="`+N.id+`"><i class="text-danger fa fa-minus"></i></div>
                  <div class="btn btn-sm" delete-product-id="`+N.id+`"><i class="text-danger fa fa-times"></i></div>
                </div>
              </div>
            </div>

          
            `)}});var u=!1;try{$("input[name='user[instalment]']").val()!=null&&(u=!0)}catch(N){console.error(N)}try{$("input[name='user[stockist_user_id]']").val()!=null&&(i=0)}catch(N){console.error(N)}u&&(i=0),console.log("merchant?"),console.log(t),t&&(i=l*.025,i=0);var d="RP",h=l+i,y=i,g=`

                <div class="d-flex justify-content-between align-items-center">
                  <span class="fw-bold text-secondary">Eligible Rank</span>
                  <span class="text-info me-4"><span class="format-integer">`+r+`</span></span>
                </div>

  `,v=`

    Total PV

  `,w='RP <span class="format-float">'+l;t&&(g="",v="RP received"),showRP||(w='MYR <span class="format-float">'+l*m.chosen_country_id_.conversion,y=i*m.chosen_country_id_.conversion,h=(l+i)*m.chosen_country_id_.conversion,d="MYR"),$("cartItems").customHtml(`

                <div class="d-flex flex-column gap-1">`+a.join("")+`
                  <div class="d-flex justify-content-between align-items-center">
                    <span class="fw-bold">Subtotal</span>
                    <span class=" me-4">`+w+`</span></span>
                  </div>
                  <div class="d-flex justify-content-between align-items-center">
                    <span class="fw-bold">Shipping_Tax</span>
                    <span class=" me-4">`+d+' <span class="format-float">'+y+`</span></span>
                  </div>

                  <div class="d-flex justify-content-between align-items-center">
                    <span class="fs-4">Grand Total</span>
                    <span class=" me-4">`+d+' <span class="format-float fs-4">'+h+`</span></span>
                  </div>
                <div class="d-flex justify-content-between align-items-center pv_label d-none">
                  <span class="fs-5">`+v+`</span>
                  <span class="text-info me-4"><span class="format-integer">`+o+` PV</span></span>
                </div>
                `+g+`

              </div>



      `);var x=L.user,E=[];x!=null&&(x.wallets==null?(E=m.api("user_wallet",{token:x.token}),x.wallets=E):E=x.wallets);function P(){E.length==0||$("wallet").each((N,S)=>{var D=E.filter((j,W)=>j.wallet_type=="direct_recruitment");if(t&&(D=E.filter((j,W)=>j.wallet_type=="merchant")),D.length>0){var z=D[0];if(t)$("#drp_payment").attr("max",l*.2),$("#drp_payment").attr("min",0),$("#drp_payment").attr("step",.01),$("#drp_payment").attr("value",l*.2);else if(s){console.info("here ovier");var V=e.map((j,W)=>j.qty*j.retail_price*j.override_perc).reduce((j,W)=>j+W,0);$("#drp_payment").attr("min",Math.round(V)),$("#drp_payment").attr("value",Math.round(V))}else $("#drp_payment").attr("max",z.total),$("#drp_payment").attr("min",Math.round(l*.5)),$("#drp_payment").attr("value",Math.round(l*.5))}})}$("input[name='user[payment][method]']").unbind(),$("input[name='user[payment][method]']").on("change",()=>{$("#coupon-detail").addClass("d-none"),$("input[name='user[payment][method]']").each((N,S)=>{$(S)[0].checked==!0&&(["register_point","merchant_point"].includes($(S).val())?($("#coupon-detail").removeClass("d-none"),I()):($("#drp_payment").removeAttr("max"),$("#drp_payment").removeAttr("min"),$("#drp_payment").removeAttr("value"),t?_.components.updateMCart():_.components.updateCart(),_.components.cartItems()))})});function I(){P();var N=0,S=2,D=0,z=0;if($("#drp_payment").length>0)try{N=parseFloat($("#drp_payment").val())}catch{N=$("#drp_payment").val()}S=_.components.evalShipping(l),u&&(S=0),D=l+S-N,z=o-N,t&&(S=l*.025,S=0,D=l+S,console.log("w"),z=l-N+S);var V=`


                  <div class="d-flex justify-content-between align-items-center">
                    <span class="fw-bold">DRP</span>
                    <span class=" me-4">- RP <span class="format-float">`+N+`</span></span>
                  </div>
      `;t&&(V=`


                  <div class="d-flex justify-content-between align-items-center">
                    <span class="fw-bold">MP</span>
                    <span class=" me-4">- RP <span class="format-float">`+N+`</span></span>
                  </div>
        `),$("cartItems").customHtml(`

                <div class="d-flex flex-column gap-1">`+a.join("")+`
                  <div class="d-flex justify-content-between align-items-center">
                    <span class="fw-bold">Subtotal</span>
                    <span class=" me-4">RP <span class="format-float">`+l+`</span></span>
                  </div>
                  <div class="d-flex justify-content-between align-items-center">
                    <span class="fw-bold">Shipping_Tax</span>
                    <span class=" me-4">RP <span class="format-float">`+S+`</span></span>
                  </div>
                  `+V+`
                  <div class="d-flex justify-content-between align-items-center">
                    <span class="fs-4">Grand Total</span>
                    <span class=" me-4">RP <span class="format-float fs-4">`+D+`</span></span>
                  </div>

                  <div class="d-flex justify-content-between align-items-center pv_label d-none">
                    <span class="fs-5">`+v+`</span>
                    <span class="text-info me-4"><span class="format-integer">`+z+` PV</span></span>
                  </div>
                 `+g+`
                </div>


        `),t&&$("cartItems").customHtml(`

                          <div class="d-flex flex-column gap-1">`+a.join("")+`
                            <div class="d-flex justify-content-between align-items-center">
                              <span class="fw-bold">Subtotal</span>
                              <span class=" me-4">RP <span class="format-float">`+l+`</span></span>
                            </div>
                            <div class="d-flex justify-content-between align-items-center">
                              <span class="fw-bold">Shipping_Tax</span>
                              <span class=" me-4">RP <span class="format-float">`+S+`</span></span>
                            </div>
                            `+V+`
                            <div class="d-flex justify-content-between align-items-center">
                              <span class="fs-4">Grand Total</span>
                              <span class=" me-4">RP <span class="format-float fs-4">`+z+`</span></span>
                            </div>

                            <div class="d-flex justify-content-between align-items-center pv_label d-none">
                              <span class="fs-5">`+v+`</span>
                              <span class="text-info me-4"><span class="format-integer">`+z+` PV</span></span>
                            </div>
                           `+g+`
                          </div>


                  `),ut.formatDate(),$("[add-product-id]").each((j,W)=>{var at=$(W).attr("add-product-id");function wt(){_.addItemById_(at,t),t?_.components.updateMCart():_.components.updateCart(),_.components.cartItems(),_.toastChanges()}$(W)[0].onclick=wt}),$("[minus-product-id]").each((j,W)=>{var at=$(W).attr("minus-product-id");function wt(){_.minusItem_(at,t),t?_.components.updateMCart():_.components.updateCart(),_.components.cartItems(),_.toastChanges()}$(W)[0].onclick=wt}),$("[delete-product-id]").each((j,W)=>{var at=$(W).attr("delete-product-id");function wt(){_.removeItem_(at,t),t?_.components.updateMCart():_.components.updateCart(),_.components.cartItems(),_.toastChanges()}$(W)[0].onclick=wt})}function U(N){$("#drp_payment").removeAttr("max"),$("#drp_payment").removeAttr("min"),$("#drp_payment").removeAttr("value"),I()}var R=document.getElementById("drp_payment");R!=null&&(R.removeEventListener("change",U),R.addEventListener("change",U)),$("[add-product-id]").each((N,S)=>{var D=$(S).attr("add-product-id");function z(){_.addItemById_(D,t),t?_.components.updateMCart():_.components.updateCart(),_.components.cartItems(),_.toastChanges()}$(S)[0].onclick=z}),$("[minus-product-id]").each((N,S)=>{var D=$(S).attr("minus-product-id");function z(){_.minusItem_(D,t),t?_.components.updateMCart():_.components.updateCart(),_.components.cartItems(),_.toastChanges()}$(S)[0].onclick=z}),$("[delete-product-id]").each((N,S)=>{var D=$(S).attr("delete-product-id");function z(){_.removeItem_(D,t),t?_.components.updateMCart():_.components.updateCart(),_.components.cartItems(),_.toastChanges()}$(S)[0].onclick=z}),$("input[name='user[payment][method]']").each((N,S)=>{$(S)[0].checked==!0&&(["register_point","merchant_point"].includes($(S).val())?($("#coupon-detail").removeClass("d-none"),I()):($("#drp_payment").removeAttr("max"),$("#drp_payment").removeAttr("min"),$("#drp_payment").removeAttr("value")))}),ut.formatDate()},evalRank(n){var t="n/a",e,r=[];return L.ranks.map((s,i)=>{r.push(s)}),r.sort((s,i)=>i.retail_price-s.retail_price),e=r.filter((s,i)=>s.retail_price<=n)[0],e&&(t=e.name,$("input[name='user[rank_id]']").length>0&&$("input[name='user[rank_id]']").val(e.id)),t},updateCart(){var n,t=0,e=[],r=0;r=_.cart_.map((u,d)=>u.qty*u.retail_price).reduce((u,d)=>u+d,0),t=_.cart_.map((u,d)=>u.qty).reduce((u,d)=>u+d,0),$(".bc").html(t),_.cart_.forEach((u,d)=>{var h='<div class="font-sm">RP <span class="font-sm format-float">'+(u.retail_price*u.qty).toFixed(2)+"</span></div>";showRP||(h='<div class="font-sm">MYR <span class="font-sm format-float">'+(u.retail_price*u.qty*m.chosen_country_id_.conversion).toFixed(2)+"</span></div>"),e.push(`

        <li><a class="dropdown-item" href="javascript:void(0);">
          <div style="width: 240px;" class="d-flex justify-content-between align-items-center">
            <span>`+u.name+" <small>(x"+u.qty+`)</small></span>
            <div class="d-flex align-items-center justify-content-between gap-2">
              `+h+`

              <div class="d-lg-block d-none">
                <div class="btn btn-sm" minus-product-id="`+u.id+`"><i class="text-danger fa fa-minus"></i></div>
                <div class="btn btn-sm" delete-product-id="`+u.id+`"><i class="text-danger fa fa-times"></i></div>
              </div>
              

            </div>
          </div>

        </a></li>

          `)}),e.length==0&&e.push(`

        <li><a class="dropdown-item" href="javascript:void(0);">Empty</a></li>

          `);var s,i=[],a=[];L.ranks.map((u,d)=>{a.push(u)}),a.sort((u,d)=>u.retail_price-d.retail_price),a.map((u,d)=>{i.push(`
        <div class="col ">
          <div class="d-flex flex-column">
            <span>`+u.name+`</span>
            <span class="format-float">`+u.retail_price+`</span>
            
          </div>
        </div>`)}),$("cartItems").attr("upgrade")!=null?(window.upgradeTarget!=null?(n=m.api("get_accumulated_sales",{username:window.upgradeTarget}),r=r,console.log(r),s=this.evalRank(r+n)):(r=r,console.log(r),s=this.evalRank(r+L.user.rank.retail_price)),$(".only-downline").click(()=>{m.notify("Only available for direct recruited downline.")})):(r=r,console.log(r),s=this.evalRank(r));var o=L.ranks.sort((u,d)=>u.retail_price-d.retail_price).findIndex(u=>u.name===s);console.log(o);var l=(o+1)*25;$(".ac").each((u,d)=>{var h=e.join("")+`
              <li id="divider">
                <hr class="dropdown-divider">
              </li>
             <li>                  

             <a class="dropdown-item navi" href="/upgrade">
                  <div class="d-flex flex-column">
                    <div class="d-flex justify-content-between align-items-center">
                      <span>Checkout</span>
                      <span class="format-float">`+r+`</span>
                    </div>
                 

                    <div class="d-flex justify-content-between align-items-center">
                      <small>Eligible</small>
                      <small class="text-info">`+s+`</small>
                    </div>

                    <div class="progress my-2" style="height: 4px;">
                      <div class="progress-bar bg-success" role="progressbar" style="width: `+l+'%;" aria-valuenow="'+l+`" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                    <div class="row text-sm">
                      `+i.join("")+`
                    </div>

                  
                  </div>
                </a>
              </li>`;$(d).html(h)}),$("[minus-product-id]").each((u,d)=>{var h=$(d).attr("minus-product-id");function y(){_.minusItem_(h),_.components.updateCart(),_.toastChanges()}$(d)[0].onclick=y}),$("[delete-product-id]").each((u,d)=>{var h=$(d).attr("delete-product-id");function y(){_.removeItem_(h),_.components.updateCart(),_.toastChanges()}$(d)[0].onclick=y}),ut.formatDate()},updateMCart(){var n=0,t=[],e=0;e=_.mcart_.map((r,s)=>r.qty*r.retail_price).reduce((r,s)=>r+s,0),n=_.mcart_.map((r,s)=>r.qty).reduce((r,s)=>r+s,0),$(".mbc").html(n),_.mcart_.forEach((r,s)=>{t.push(`

        <li><a class="dropdown-item" href="javascript:void(0);">
          <div style="width: 240px;" class="d-flex justify-content-between align-items-center">
            <span>`+r.name+" <br><small>(x"+r.qty+`)</small></span>
            <div class="d-flex align-items-center justify-content-between gap-2">
              <span class="font-sm format-float">`+(r.retail_price*r.qty).toFixed(2)+`</span>

           
              

            </div>
          </div>

        </a></li>

          `)}),t.length==0&&t.push(`

        <li><a class="dropdown-item" href="javascript:void(0);">Empty</a></li>

          `),$(".mac").each((r,s)=>{var i=t.join("")+`
              <li id="divider">
                <hr class="dropdown-divider">
              </li>
             <li>                  

             <a class="dropdown-item navi" href="/merchant_checkout">
                  <div class="d-flex flex-column">
                    <div class="d-flex justify-content-between align-items-center">
                      <span>Checkout</span>
                      <span class="format-float">`+e+`</span>
                    </div>
              
                  </div>
                </a>
              </li>`;$(s).html(i)}),$("[minus-product-id]").each((r,s)=>{var i=$(s).attr("minus-product-id");function a(){_.minusItem_(i,!0),_.components.updateMCart(),_.toastChanges()}$(s)[0].onclick=a}),$("[delete-product-id]").each((r,s)=>{var i=$(s).attr("delete-product-id");function a(){_.removeItem_(i,!0),_.components.updateMCart(),_.toastChanges()}$(s)[0].onclick=a}),ut.formatDate()},cart(){var n=0,t=[],e=0;e=_.cart_.map((o,l)=>o.qty*o.retail_price).reduce((o,l)=>o+l,0),n=_.cart_.map((o,l)=>o.qty).reduce((o,l)=>o+l,0),console.log("subtotal",e),console.log("count",n),_.cart_.forEach((o,l)=>{var u='<div class="font-sm">RP <span class="font-sm format-float">'+(o.retail_price*o.qty).toFixed(2)+"</span></div>";showRP||(u='<div class="font-sm">MYR <span class="font-sm format-float">'+(o.retail_price*o.qty*m.chosen_country_id_.conversion).toFixed(2)+"</span></div>"),t.push(`

                <li><a class="dropdown-item" href="javascript:void(0);">
                <div style="width: 240px;" class="d-flex justify-content-between align-items-center">
                    <span>`+o.name+" <small>(x"+o.qty+`)</small></span>
                    <div class="d-flex align-items-center justify-content-between gap-2">
                    `+u+`


                    <div class="d-lg-block d-none">
                        <div class="btn btn-sm" minus-product-id="`+o.id+`"><i class="text-danger fa fa-minus"></i></div>
                        <div class="btn btn-sm" delete-product-id="`+o.id+`"><i class="text-danger fa fa-times"></i></div>
                    </div>

                    </div>
                </div>

                </a></li>

                `)}),t.length==0&&t.push(`

                <li><a class="dropdown-item" href="javascript:void(0);">Empty</a></li>

                `);var r=[],s=[];L.ranks.map((o,l)=>{s.push(o)}),s.sort((o,l)=>o.retail_price-l.retail_price),s.map((o,l)=>{r.push(`
                <div class="col ">
                <div class="d-flex flex-column">
                    <span>`+o.name+`</span>
                    <span class="format-float">`+o.retail_price+`</span>
                    
                </div>
                </div>`)}),$("cartItems").attr("upgrade")!=null&&(e=e+L.user.rank.retail_price);var i=this.evalRank(e),a=e/(L.ranks.length>0?L.ranks[0].retail_price:1)*100;$("cart").each((o,l)=>{var u="dropstart";$(l).attr("dropup")!=null&&(u="dropup"),$(l).customHtml(`
                            <div class="`+u+`  ">
                                <div class="mx-3 py-2 btn btn-outline-light text-white rounded-xl position-relative"  data-bs-toggle="dropdown" aria-expanded="false">
                                <div style="top: 4px !important;" class="badge bg-warning position-absolute top-0 start-100 translate-middle bc">`+n+`</div>
                                <i class="fa fa-shopping-cart"></i>
                                </div>
                                <ul class="dropdown-menu dropdown-menu-end dropdown-menu-lg-start ac">
                                `+t.join("")+`
                                <li id="divider">
                                    <hr class="dropdown-divider">
                                </li>
                                <li>
                                    <a class="dropdown-item navi" href="/upgrade">
                                    <div class="d-flex flex-column">
                                        <div class="d-flex justify-content-between align-items-center">
                                        <span>Checkout</span>
                                        <span class="format-float">`+e+`</span>
                                        </div>
                                    

                                        <div class="d-flex justify-content-between align-items-center">
                                        <small>Eligible</small>
                                        <small class="text-info">`+i+`</small>
                                        </div>

                                        <div class="progress my-2" style="height: 4px;">
                                        <div class="progress-bar bg-success" role="progressbar" style="width: `+a+'%;" aria-valuenow="'+a+`" aria-valuemin="0" aria-valuemax="100"></div>
                                        </div>
                                        <div class="row text-sm">
                                        `+r.join("")+`
                                        </div>

                                    
                                    </div>
                                    </a>
                                </li>

                                </ul>
                            </div>
                        `)}),$("[minus-product-id]").each((o,l)=>{var u=$(l).attr("minus-product-id");function d(){_.minusItem_(u),_.components.updateCart()}$(l)[0].onclick=d}),$("[delete-product-id]").each((o,l)=>{var u=$(l).attr("delete-product-id");function d(){_.removeItem_(u),_.components.updateCart()}$(l)[0].onclick=d}),ut.formatDate()},mcart(){var n=0,t=[],e=0;e=_.mcart_.map((r,s)=>r.qty*r.retail_price).reduce((r,s)=>r+s,0),n=_.mcart_.map((r,s)=>r.qty).reduce((r,s)=>r+s,0),_.mcart_.forEach((r,s)=>{t.push(`

        <li><a class="dropdown-item" href="javascript:void(0);">
          <div style="width: 240px;" class="d-flex justify-content-between align-items-center">
            <span>`+r.name+"<br><small>(x"+r.qty+`)</small></span>
            <div class="d-flex align-items-center justify-content-between gap-2">
              <span class="font-sm format-float">`+(r.retail_price*r.qty).toFixed(2)+`</span>


            </div>
          </div>

        </a></li>

          `)}),t.length==0&&t.push(`

        <li><a class="dropdown-item" href="javascript:void(0);">Empty</a></li>

          `),$("mcart").each((r,s)=>{var i="dropstart";$(s).attr("dropup")!=null&&(i="dropup"),$(s).customHtml(`
          <div class="`+i+`  ">
            <div class="mx-3 py-2 btn btn-outline-danger rounded-xl position-relative"  data-bs-toggle="dropdown" aria-expanded="false">
              <div style="top: 4px !important;" class="badge bg-warning position-absolute top-0 start-100 translate-middle mbc">`+n+`</div>
              <i class="fa fa-shopping-cart"></i>
            </div>
            <ul class="dropdown-menu dropdown-menu-end dropdown-menu-lg-start mac">
              `+t.join("")+`
              <li id="divider">
                <hr class="dropdown-divider">
              </li>
              <li>
                <a class="dropdown-item navi" href="/merchant_checkout">
                  <div class="d-flex flex-column">
                    <div class="d-flex justify-content-between align-items-center">
                      <span>Checkout</span>
                      <span class="format-float">`+e+`</span>
                    </div>
                  </div>
                </a>
              </li>

            </ul>
          </div>
      `)}),$("[minus-product-id]").each((r,s)=>{var i=$(s).attr("minus-product-id");function a(){_.minusItem_(i,!0),_.components.updateMCart()}$(s)[0].onclick=a}),$("[delete-product-id]").each((r,s)=>{var i=$(s).attr("delete-product-id");function a(){_.removeItem_(i,!0),_.components.updateMCart()}$(s)[0].onclick=a}),ut.formatDate()},light(){$("light").customHtml(`
            <div class=" py-2 btn btn-outline-success rounded-xl position-relative light"  >
              <i class="fa fa-lightbulb far"></i>
            </div>
      `),$(".light").unbind(),$(".light").on("click",()=>{$("html").attr("data-bs-theme")=="light"?(localStorage.setItem("data-bs-theme","dark"),$("html").attr("data-bs-theme","dark")):(localStorage.setItem("data-bs-theme","light"),$("html").attr("data-bs-theme","light"))})},product(){$("product").customHtml(`
        <div class="text-center mt-4">
          <div class="spinner-border loading2" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
        </div>
          
      <div class="loading2 d-none" id="pcontent" />
      `),m.api("get_product",{id:pageParams.id},null,n=>{$("title").html(n.name);function t(){_.first_cart_country_id==null&&_.cart_.length==0&&(_.first_cart_country_id=m.chosen_country_id_.id,console.log("first country id is "+m.chosen_country_id_.id),localStorage.setItem("first_cart_country_id",m.chosen_country_id_.id)),console.info(check),n.countries.map((a,o)=>a.id).includes(parseInt(_.first_cart_country_id))?(_.addItem_(n),_.components.updateCart(),m.notify("Added "+n.name,{delay:2e3,type:"success",placement:{from:"top",align:"center"}}),m.toast({content:'<div class=""><ul class="">'+$(".ac").html()+"</ul></div>"})):_.first_cart_country_id==null?(_.addItem_(n),_.components.updateCart(),m.notify("Added "+n.name,{delay:2e3,type:"success",placement:{from:"top",align:"center"}}),m.toast({content:'<div class=""><ul class="">'+$(".ac").html()+"</ul></div>"})):m.notify("Not Added ! Please choose your region products.",{delay:2e3,type:"danger",placement:{from:"top",align:"center"}})}$(".spinner-border.loading2").parent().remove(),$(".loading2").removeClass("d-none");var e;if(n.img_url!=null)try{e=n.img_url}catch{e="/images/placeholder.png"}var r='<div class="font-sm fw-light text-secondary text-center ">RP <span class="format-float">'+n.retail_price+"</span></div>";includeShippingTax&&(r='<div class="font-sm fw-light text-secondary text-center "><span class="format-float">'+(n.retail_price+n.base_shipping_fee)+" </span> RP</div>"),showRP||(r='<div class="font-sm fw-light text-secondary text-center ">MYR <span class="format-float">'+n.retail_price*m.chosen_country_id_.conversion+"</span></div>",includeShippingTax&&(r='<div class="font-sm fw-light text-secondary text-center ">MYR <span class="format-float">'+n.retail_price*m.chosen_country_id_.conversion*1.1+"</span></div>",m.chosen_country_id_.name=="Singapore"&&(r='<div class="font-sm fw-light text-secondary text-center ">MYR <span class="format-float">'+n.retail_price*m.chosen_country_id_.conversion*1.05+"</span></div>")));var s='<div class="btn btn-outline-primary mt-4" product-id="'+n.id+'">Add</div>';if(n.instalment_packages.length>0){var i=[];n.instalment_packages.forEach((a,o)=>{c=`
            <div class=" col-12 col-lg-8 offset-lg-2 ">
              <div class="card m-4 p-4 ">
                <div class="d-flex justify-content-between align-items-center">
                  <div class="fs-4">`+a.name+`</div>
                  <span class="d-flex flex-column">
                    <div class="text-secondary">`+a.retail_price+` RP</div>
                    <div>`+a.point_value+` PV</div> 
                  </span>
                  <span><div class="btn btn-outline-primary" product-id="`+a.id+`">Choose</div></span>
                </div>
              </div>
            </div>

          `,i.push(c)}),s='<div class="row w-100">'+i.join("")+"</div>"}$("#pcontent").customHtml(`

      <div class="d-flex flex-column justify-content-center align-items-center ">
        <h2 id="ptitle">
        </h2>
            <div  class="d-flex justify-content-center p-4 " 
                style="
                  position: relative; 
                  width: 320px;
                  height: 340px;">
            <div class="rounded py-2" style="
                  height: 340px;
                  width: 88%;
                  filter: blur(4px);
                  position: absolute;
                  background-repeat: no-repeat;
                  background-position: center;
                  background-size: cover;
                  background-image: url('`+e+`');
                  top: 30px;
                  left: 20px;
                  ">
            </div>
            <div class="rounded py-2" style="
                  height: 340px;
                  width:  100%;
                  z-index: 1;
                  background-position: center;
                  background-repeat: no-repeat;
                  background-size: cover; 
                  background-image: url('`+e+`');
                  ">
            </div>
          </div>
        <div style="margin-top: 50px;">`+n.desc+`</div>
        `+r+`
        <div class="font-sm fw-light text-info text-center pv_label d-none">PV <span class="format-float">`+n.point_value+`</span></div>
        `+s+`
      </div>

      `),$("#ptitle").html(n.name);try{$("[product-id='"+n.id+"']")[0].onclick=t}catch{}})},products(){function n(r){var s="v2";return r=="Thailand"&&(s="th"),r=="Vietnam"&&(s="vn"),r=="China"&&(s="cn"),s}if(m.chosen_country_id_==null){var t=[];m.countries_.forEach((r,s)=>{t.push(`
                                <button type="button" aria-name="`+r.name+'" aria-country="'+r.id+'" class="btn btn-primary ">'+r.name+" "+(r.alias||"")+`</button>
                                `)}),m.modal({selector:"#mySubModal",content:`
                            <center>
                            <div class="btn-group-vertical">
                            `+t.join("")+`
                            </div>
                            </center>
                        `,header:"Choose region",autoClose:!1}),$("[aria-country]").unbind(),$("[aria-country]").click(function(){var r,s=$(this).attr("aria-country"),i=$(this).attr("aria-name");m.chosen_country_id_=s,m.notify("Chosen region: "+i),localStorage.setItem("region",i),setTimeout(()=>{$("#chosen-region").html(i)},1e3),localStorage.region!=null&&(r=n(i)),m.api("translation",{lang:r}),$("#mySubModal").modal("hide"),_.components.country(),pageParams.share_code!=null?m.api("get_share_link_by_code",{code:pageParams.share_code},null,a=>{_.components.cartItems(),m.navigateTo(location.pathname),$(".sponsor-name").customHtml("_sponsor: "+a.user.username+" _position: "+a.position),$(".sponsor-bank").html(`

                                <div class="d-flex justify-content-between align-items-center">
                                <span class="fw-bold">Bank Details</span>
                                <span class=" my-4 me-4 d-flex justify-content-end align-items-end gap-1 flex-column">
                                    <div>`+a.user.bank_name+`</div>
                                    <div>`+a.user.bank_account_holder+`</div>
                                    <div>`+a.user.bank_account_no+`</div>
                                </span>
                                </div>

                                `)}):m.navigateTo("/home")})}if(m.chosen_country_id_!=null){let r=function(s){var i=$(s).attr("product-id"),a=m.api("get_product",{id:i});try{_.first_cart_country_id==null&&_.cart_.length==0&&(_.first_cart_country_id=m.chosen_country_id_.id,console.log("first country id is "+m.chosen_country_id_.id),localStorage.setItem("first_cart_country_id",m.chosen_country_id_.id)),a.countries.map((o,l)=>o.id).includes(parseInt(_.first_cart_country_id))?(_.selectedInstalment=a,_.addItem_(a),_.components.updateCart(),_.components.cartItems(),m.notify("Added "+a.name,{delay:2e3,type:"success",placement:{from:"top",align:"center"}})):_.first_cart_country_id==null?(_.selectedInstalment=a,_.addItem_(a),_.components.updateCart(),_.components.cartItems(),m.notify("Added "+a.name,{delay:2e3,type:"success",placement:{from:"top",align:"center"}})):m.notify("Not Added ! Please choose your region products.",{delay:2e3,type:"danger",placement:{from:"top",align:"center"}})}catch(o){console.error(o)}};var e=r;$("products").each((s,i)=>{$(i).customHtml(`
                        <div class="text-center mt-4">
                            <div class="spinner-border loading" role="status">
                            <span class="visually-hidden">Loading...</span>
                            </div>
                        </div>
                            

                        <div class="row gx-0 d-none loading">
                            <div class="col-12 col-lg-10 offset-lg-1">
                            <div id="product_tab1"></div>
                            </div>
                        </div>
                        `).then(()=>{console.log("products loading?");var a=null,o="products",l=new Ks({onDrawFn:()=>{setTimeout(()=>{$("[product-id]").each((u,d)=>{d.onclick=()=>{r(d)}}),ut.formatDate(),$(".spinner-border.loading").parent().remove(),$(".loading").removeClass("d-none")},800)},xcard:u=>{var d=u.product,h="",y="/images/placeholder.png",g=`onclick="phxApp.navigateTo('/products/`+d.id+"/"+d.name+`')"`;if($(i).attr("direct")!=null&&(g="",h='<div class="btn btn-outline-primary mt-4" product-id="'+d.id+'">Add</div>'),d.img_url!=null)try{y=d.img_url}catch{y="/images/placeholder.png"}var v='<div class=" text-primary text-center ">RP <span class="format-float">'+d.retail_price+"</span></div>";includeShippingTax&&(v='<div class="text-white text-center "><span class="format-float">'+(d.retail_price+d.base_shipping_fee)+"</span> RP</div>"),showRP||(v='<div class="font-sm fw-light text-white text-center ">MYR <span class="format-float">'+d.retail_price*m.chosen_country_id_.conversion+"</span></div>",includeShippingTax&&(v='<div class="font-sm fw-light text-secondary text-center ">MYR <span class="format-float">'+d.retail_price*m.chosen_country_id_.conversion*1.1+"</span></div>",m.chosen_country_id_.name=="Singapore"&&(v='<div class="font-sm fw-light text-secondary text-center ">MYR <span class="format-float">'+d.retail_price*m.chosen_country_id_.conversion*1.05+"</span></div>")));var w=`
                                                            <div  class="m-2 d-flex flex-column gap-2" `+g+`>
                                                                <div  class="d-flex justify-content-center mb-4 py-4 background-p" 
                                                                    style="
                                                                        cursor: pointer;   
                                                                        position: relative; "
                                                                    >
                                                                <div class="rounded py-2 background-p" style="
                                                                    
                                                                        width: 80%;
                                                                        filter: blur(4px);
                                                                        position: absolute;
                                                                        background-repeat: no-repeat;
                                                                        background-position: center;
                                                                        background-size: cover;
                                                                        background-image: url('`+y+`');
                                                                        
                                                                        ">
                                                                </div>
                                                                <div class="rounded py-2 foreground-p" style="
                                                                    
                                                                        width:  100%;
                                                                        z-index: 1;
                                                                        background-position: center;
                                                                        background-repeat: no-repeat;
                                                                        background-size: contain; 
                                                                        background-image: url('`+y+`');
                                                                        ">
                                                                </div>
                                                                </div>
                                                                <div class="d-flex flex-column justify-content-center gap-2 mt-4">
                                                                <div class="font-sm fw-bold text-center">`+d.name+`</div>
                                                                <div class="d-flex flex-column justify-content-center ">
                                                                    `+v+`
                                                                    <div class="font-sm fw-light text-info text-center pv_label d-none">PV <span class="format-float">`+d.point_value+`</span></div>
                                                                </div>
                                                                `+h+`

                                                            
                                                                </div>
                                                            </div>
                                                            `;return w},data:{pageLength:12,sorts:[[2,"desc"]],additional_join_statements:[{product:"product"}],additional_search_queries:["b.is_instalment=false"],country_id:m.chosen_country_id_.id,preloads:["product"],grid_class:"col-6 col-lg-3",dom:`

                                                    <"row px-4"
                                                    <"col-lg-6 col-12"i>
                                                    <"col-12 col-lg-6">
                                                    >
                                                    <"row grid_view ">
                                                    <"list_view d-none"t>
                                                    <"row transform-75 px-4"
                                                    <"col-lg-6 col-12">
                                                    <"col-lg-6 col-12"p>
                                                    >

                                                `},columns:[{label:"id",data:"id"},{label:"product_id",data:"product_id"},{label:"Action",data:"id"}],moduleName:"ProductCountry",link:"ProductCountry",customCols:a,buttons:[],tableSelector:"#"+o});l.load(o,"#product_tab1")})})}},announcement(){try{$(".anc").slick("destroy")}catch{}$("announcement").customHtml(`
      <div class="spinner-border" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
      `),m.api("announcements",{},null,n=>{$("announcement").customHtml(""),n.forEach((t,e)=>{function r(){m.modal({selector:"#mySubModal",content:t.content,autoClose:!1,header:t.title})}var s=t.img_url,i=`
          <div class="d-flex flex-column align-items-center" >

            <div class="d-flex justify-content-center " style="cursor: pointer;   
            position: relative; height: 240px;" announcement-id="`+t.id+`">
              <div class="sub rounded py-2" style="
               
                  position: absolute;
                  filter: blur(10px); 
                              background-repeat: no-repeat;
                  background-position: center;
                  background-size: contain; 
                  background-image: url('`+s+`');
                 ">
              </div>
              <div class="su rounded py-2" style="
            
           

                  background-position: center;
                  background-repeat: no-repeat;
                  background-size: cover; 
                  background-image: url('`+s+`');
                  z-index: 1;
                  top: 16px;
                  position: absolute;">
              </div>
            </div>
            <span class="mt-3">`+t.title+`</span>
            <small>`+t.subtitle+`</small>
            
          </div>

        `;$("announcement").append(i),$("[announcement-id='"+t.id+"']")[0].onclick=r})}),$(".anc").slick()},bonusLimit(){m.api("get_bonus_limit",{token:L.user.token},null,n=>{var t=Number(n.limit)||0,e=Number(n.accumulated)||0,r=Math.max(0,t-e),s=t>0?Math.min(100,Math.round(e/t*100)):0;$("bonusLimit").customHtml(`
                <div class="d-flex flex-column gap-2">
                  <span> Remaining bonus: <span class="">`+r+`</span> BP</span>
                  <div class="progress" role="progressbar" aria-valuenow="`+s+`" aria-valuemin="0" aria-valuemax="100">
                    <div class="progress-bar progress-bar-striped progress-bar-animated" style="width: `+s+`%;"></div>
                  </div>
                  <span>Please repurchase package, to increase earning limit.</span>
                </div>
              `)})},rewardList(){$("rewardList").each((n,t)=>{$(t).customHtml(`
        <div class="text-center mt-4">
          <div class="spinner-border loading" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
        </div>
          

        <div class="row gx-0 d-none loading">
          <div class="col-12">
            <div id="tab`+n+`">No rewards</div>
          </div>
        </div>
      `);var e=$(t).attr("prev")!=null;console.log(e),m.api("get_reward_summary",{user_id:L.user.id,is_prev:e},null,r=>{$(".spinner-border.loading").parent().remove(),$(".loading").removeClass("d-none");var s=["sharing bonus","team bonus","matching bonus","elite leader","travel fund","repurchase bonus","drp sales level bonus","stockist register bonus","merchant sales level bonus","biz incentive bonus","matching biz incentive bonus"],i=[];s.forEach((a,o)=>{r.forEach((l,u)=>{a==l.name&&i.push(`

                                  <div class="my-2 d-flex align-items-center justify-content-between">

                                    <span class="fs-5">
                                      `+ut.capitalize(l.name)+`
                                    </span>
                                    <span class="d-flex justify-content-between gap-2 align-items-center">
                                      <span class="format-float">
                                        `+l.sum+`
                                      </span>
                                      <a href="/reward_details/`+l.name+"/"+l.period[0]+"/"+l.period[1]+`" class="navi btn btn-primary btn-sm">
                                      <i class="fa fa-info"></i>
                                      </a>
                                    </span>
                                  </div>


                              `)})}),$("#tab"+n).customHtml(""+i.join("")),phxApp.formatDate()})})},rewardSummary(){$("rewardSummary").each((n,t)=>{$(t).customHtml(`
                    <div class="text-center mt-4">
                      <div class="spinner-border loading" role="status">
                        <span class="visually-hidden">Loading...</span>
                      </div>
                    </div>
                      

                    <div class="row gx-0 d-none loading">
                      <div class="col-12">
                        <div id="tabw`+n+`">No rewards</div>
                      </div>
                    </div>
                  `);var e=!1;console.log(e),m.api("get_reward_summary_by_years",{user_id:L.user.id},null,r=>{var s=[];$(".spinner-border.loading").parent().remove(),$(".loading").removeClass("d-none"),console.log("testst");var i=Object.keys(r.years);i.forEach((a,o)=>{s.push(`

                                  <div class="my-2 d-flex align-items-center justify-content-between">

                                    <span class="fs-5">
                                      `+a+`
                                    </span>
                                    <span class="d-flex justify-content-between gap-2 align-items-center">
                                      <div>
                                      <span class="format-float">
                                        `+r.years[a][0].sum+` 
                                      </span>
                                      BP
                                        </div>
                                        <a class="btn btn-primary btn-sm" target="_blank" href="/pdf?type=commission&id=`+L.user.id+"&year="+a+`">
                                        Download
                                      </a>
                                    </span>
                                  </div>


                              `)}),console.info(s),$("#tabw"+n).customHtml(""+s.join("")),phxApp.formatDate()})})},wallet(){if(L.user!=null){var n=L.user,t=m.api("user_wallet",{token:n.token});t.length==0?$("wallet").parent().customHtml('<div class="p-4">Wallet info expired</div>'):$("wallet").each((e,r)=>{var s=t.filter((u,d)=>u.wallet_type==$(r).attr("aria-data"));if(s.length>0){var i=s[0],a="PTS",o=$(r).attr("aria-data").split("_").map((u,d)=>ut.capitalize(u)).join(" "),l=o.split(" ").map((u,d)=>u.split("")[0].toUpperCase()).join("")+"P";o=="Asset"?(o="Asset Token",l="TK",a="TK"):o=="Active Token"?(l="ATK",a="ATK"):o=="Bonus"&&(a="USDT"),$(r).customHtml(`
            <a href="/wallets/`+i.id+`" class="navi" >

            <div class=" card mb-3 mb-lg-0">
 
              <div class="card-body p-1 py-2 " style="width: 220px;">
                <div class="d-flex gap-1 align-items-center">
                  <div wallet-id="`+i.id+`" class="d-none d-lg-block mx-2 py-2 btn btn-outline-success rounded-xl">
                    <i class=" fa fa-dollar-sign "></i>
                  </div>
                  <div class="ps-2 ps-lg-0">
                    <span class="text-sm text-secondary text-truncate">`+o+", <b>"+l+`</b></span>
                    <div class="d-flex align-items-center gap-2">
                      <div class="fs-4 format-int" style="">`+i.total+`</div>
                      <small>${a}</small>
                    </div>
                  </div>
                </div>
              </div>

        
            </div>
            </a>

        `)}}),ut.formatDate()}},primaryBuy(){function n(e){if(!e||!e.lines){$("#quote-summary").html("No quote yet."),$("#quote-lines").html("");return}if($("#quote-summary").html(`Filled Qty: <b>${e.filled_qty}</b> • Total Cost: <b>${e.total_cost}</b>`),e.lines.length===0){$("#quote-lines").html("");return}var r=e.lines.map(s=>`
              <tr>
                <td>#${s.seq}</td>
                <td class="text-end">${s.qty}</td>
                <td class="text-end">${s.unit_price}</td>
              </tr>
            `).join("");$("#quote-lines").html(`
              <div class="table-responsive">
                <table class="table table-sm">
                  <thead>
                    <tr><th>Tranche</th><th class="text-end">Qty</th><th class="text-end">Unit Price</th></tr>
                  </thead>
                  <tbody>${r}</tbody>
                </table>
              </div>
            `)}$(document).on("click","#btn-quote",function(){var e=parseInt($("#asset_id").val()||"0"),r=$("#qty").val()||"0";m.api("primary_buy_quote",{asset_id:e,qty:r},null,function(s){n(s)})});let t="";$(document).on("click","#btn-execute",function(){var e=parseInt($("#asset_id").val()||"0"),r=$("#qty").val()||"0",s=crypto.randomUUID?crypto.randomUUID():Date.now().toString(36)+Math.random().toString(36).slice(2);m.post("primary_buy_execute",{token:m.user&&m.user.token,asset_id:e,qty:r,idempotency_key:s},null,function(i){$("#result-card").removeClass("d-none"),i.status==="ok"?$("#result-summary").html(`Order #${i.order_id} • Filled: ${i.filled_qty} • Paid: ${i.total_cost} • Status: ${i.status2}`):$("#result-summary").html(`<span class="text-danger">${i.reason||"Error"}</span>`)})}),m.api("list_assets",{token:m.user&&m.user.token},null,function(e){t=e.map(r=>`<option value="${r.id}">${r.name}</option>`).join("")}),$("primaryBuy").customHtml(`
                            <div class="card">
                                <div class="card-body">
                                    <div class="row g-2">
                                        <div class="col-12">
                                            <label class="form-label">Asset ID</label>
                                            <select class="form-control" id="asset_id">
                                                <option value="0">Select Asset</option>
                                                `+t+`
                                            </select>
                                        </div>
                                        <div class="col-12">
                                            <label class="form-label">Quantity</label>
                                            <input type="number" class="form-control" id="qty" placeholder="100000" />
                                        </div>
                                        <div class="col-12 d-flex gap-2">
                                            <button id="btn-quote" class="btn btn-outline-primary">Quote</button>
                                            <button id="btn-execute" class="btn btn-primary">Buy</button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="card mt-4">
                                <div class="card-body">
                                    <h5 class="card-title">Quote</h5>
                                    <div id="quote-summary" class="text-secondary">No quote yet.</div>
                                    <div id="quote-lines" class="mt-3"></div>
                                </div>
                            </div>

                            <div class="card d-none mt-4" id="result-card">
                                <div class="card-body">
                                    <h5 class="card-title">Result</h5>
                                    <div id="result-summary"></div>
                                </div>
                            </div>
        `)},secondaryBuy(){function n(i){if(!i){$("#market-depth").html("Loading market data...");return}let a=i.sell_orders.map(l=>{let u="";return m.user&&m.user.id&&m.user.id==l.user.id&&(u=`<div class="btn btn-sm btn-danger cancel-order" id="cancel-sell-${l.id}" style="padding: 4px 12px !important;">Cancel</div>`),`
            <tr>
              <td class="text-end">${Number(l.quantity).toFixed(2)}</td>
              <td class="text-end text-danger">${Number(l.price_per_unit).toFixed(5)}</td>
              <td class="text-end">${l.user.username}</td>
              <td>

                ${u}
              </td>
            </tr>
          `}).join(""),o=i.buy_orders.map(l=>`
            <tr>
              <td class="text-end">${Number(l.quantity).toFixed(2)}</td>
              <td class="text-end text-success">${Number(l.price_per_unit).toFixed(5)}</td>
              <td class="text-end">${l.user.username}</td>
              <td></td>
            </tr>
          `).join("");$("#market-depth").html(`
            <div class="row">
              <div class="col-12 col-lg-6">
                <h6 class="text-danger">Sell Orders</h6>
                <div class="table-responsive">
                  <table class="table table-sm table-striped">
                    <thead>
                      <tr><th class="text-end">Qty</th><th class="text-end">Price</th><th class="text-end">User</th><td></td></tr>
                    </thead>
                    <tbody>${a||'<tr><td colspan="4" class="text-center text-muted">No sell orders</td></tr>'}</tbody>
                  </table>
                </div>
              </div>
              <div class="col-12 col-lg-6">
                <h6 class="text-success">Buy Orders</h6>
                <div class="table-responsive">
                  <table class="table table-sm table-striped">
                    <thead>
                      <tr><th class="text-end">Qty</th><th class="text-end">Price</th><th class="text-end">User</th><td></td></tr>
                    </thead>
                    <tbody>${o||'<tr><td colspan="4" class="text-center text-muted">No buy orders</td></tr>'}</tbody>
                  </table>
                </div>
              </div>
            </div>
          `)}function t(i){m.post("cancel_order",{token:m.user&&m.user.token,order_id:i,user_id:m.user&&m.user.id},null,function(a){a.status==="ok"?($("#mySubModal").modal("hide"),$("#cancel-sell-"+i).remove(),m.notify("Sell order cancelled successfully")):m.notify("Failed to cancel sell order",{type:"danger"})})}$(document).on("click",".cancel-order",function(){var i=$(this).attr("id").split("-")[2];m.modal({selector:"#mySubModal",content:`
              <center>
              <p>Cancel this order?</p>
                <div class="btn-group-vertical">
                    <button class="btn btn-danger" id="btn-cancel-sell-${i}">Cancel</button>
                </div>
              </center>
            `,header:"Cancel Order",autoClose:!1}),$(document).on("click","#btn-cancel-sell-"+i,function(){t(i)})});function e(i){if(!i||i.length===0){$("#recent-trades").html('<div class="text-center text-muted">No recent trades</div>');return}let a=i.map(o=>`
            <tr>
              <td>${new Date(o.trade_date).toLocaleString()}</td>
              <td class="text-end">${Number(o.quantity).toFixed(2)}</td>
              <td class="text-end">${o.price_per_unit}</td>
              <td class="text-end">${Number(o.total_amount).toFixed(2)}</td>
              <td class="text-end">${o.buyer.username}</td>
              <td class="text-end">${o.seller.username}</td>
            </tr>
          `).join("");$("#recent-trades").html(`
            <div class="table-responsive">
              <table class="table table-sm table-striped">
                <thead>
                  <tr>
                    <th>Time</th>
                    <th class="text-end">Qty</th>
                    <th class="text-end">Price</th>
                    <th class="text-end">Total</th>
                    <th class="text-end">Buyer</th>
                    <th class="text-end">Seller</th>
                  </tr>
                </thead>
                <tbody>${a}</tbody>
              </table>
            </div>
          `)}function r(){var i=parseInt($("#sm_asset_id").val()||"0");i>0?(m.api("get_market_depth",{asset_id:i},null,function(a){n(a)}),m.api("get_recent_trades",{asset_id:i},null,function(a){e(a)})):($("#market-depth").html(""),$("#recent-trades").html(""))}$(document).on("change","#sm_asset_id",function(){var i=parseInt($(this).val()||"0");i>0?(m.api("get_market_depth",{asset_id:i},null,function(a){n(a)}),m.api("get_recent_trades",{asset_id:i},null,function(a){e(a)})):($("#market-depth").html(""),$("#recent-trades").html(""))}),$(document).on("click","#btn-create-sell",function(){var i=parseInt($("#sm_asset_id").val()||"0"),a=parseFloat($("#sm_sell_qty").val()||"0"),o=parseFloat($("#sm_sell_price").val()||"0");if(i===0||a<=0||o<=0){alert("Please fill in all fields with valid values");return}m.api("create_sell_order",{token:m.user&&m.user.token,asset_id:i,quantity:a,price_per_unit:o},null,function(l){l.status==="ok"?(m.notify("Sell order created successfully! Order ID: "+l.res.id),$("#sm_asset_id").trigger("change"),$("#sm_sell_qty, #sm_sell_price").val("")):$("#sell-result").html(`<div class="alert alert-danger">Error: ${l.reason||"Failed to create sell order"}</div>`)})}),$(document).on("click","#btn-create-buy",function(){var i=parseInt($("#sm_asset_id").val()||"0"),a=parseFloat($("#sm_buy_qty").val()||"0"),o=parseFloat($("#sm_buy_price").val()||"0");if(i===0||a<=0||o<=0){alert("Please fill in all fields with valid values");return}m.api("create_buy_order",{token:m.user&&m.user.token,asset_id:i,quantity:a,price_per_unit:o},null,function(l){l.status==="ok"?($("#buy-result").html(`<div class="alert alert-success">Buy order created successfully! Order ID: ${l.order_id}</div>`),$("#sm_asset_id").trigger("change"),$("#sm_buy_qty, #sm_buy_price").val("")):$("#buy-result").html(`<div class="alert alert-danger">Error: ${l.reason||"Failed to create buy order"}</div>`)})});let s="";m.api("list_assets",{token:m.user&&m.user.token},null,function(i){s=i.map(a=>`<option value="${a.id}">${a.name}</option>`).join("")}),$("secondaryBuy").customHtml(`
          <div class="row">
            <div class="col-12">
              <div class="card mb-3">
                <div class="card-header">
                  <h5 class="card-title mb-0">Profit Board</h5>
                  <small class="text-muted">Trade your staked assets with other users</small>
                </div>
                <div class="card-body">
                  <div class="row g-3">
                    <div class="col-12">
                      <label class="form-label">Select Asset</label>
                      <select class="form-select" id="sm_asset_id">
                        <option value="0">Choose an asset to trade</option>
                        ${s}
                      </select>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-12 col-lg-6">
              <div class="card mb-3">
                <div class="card-header">
                  <h6 class="card-title mb-0 text-danger">Create Sell Order</h6>
                  <small class="text-muted">Sell your active tokens for cash</small>
                </div>
                <div class="card-body">
                  <div class="row g-2">
                    <div class="col-12">
                      <label class="form-label">Quantity</label>
                      <input type="number" class="form-control" id="sm_sell_qty" placeholder="Enter quantity" step="0.01" />
                    </div>
                    <div class="col-12">
                      <label class="form-label">Price per Unit</label>
                      <input type="number" class="form-control" id="sm_sell_price" placeholder="Enter price per unit" step="0.01" />
                    </div>
                    <div class="col-12">
                      <button id="btn-create-sell" class="btn btn-danger w-100">Create Sell Order</button>
                    </div>
                  </div>
                  <div id="sell-result" class="mt-2"></div>
                </div>
              </div>
            </div>
            
            <div class="col-12 col-lg-6">
              <div class="card mb-3">
                <div class="card-header">
                  <h6 class="card-title mb-0 text-success">Create Buy Order</h6>
                  <small class="text-muted">Buy active tokens with cash</small>
                </div>
                <div class="card-body">
                  <div class="row g-2">
                    <div class="col-12">
                      <label class="form-label">Quantity</label>
                      <input type="number" class="form-control" id="sm_buy_qty" placeholder="Enter quantity" step="0.01" />
                    </div>
                    <div class="col-12">
                      <label class="form-label">Price per Unit</label>
                      <input type="number" class="form-control" id="sm_buy_price" placeholder="Enter price per unit" step="0.01" />
                    </div>
                    <div class="col-12">
                      <button id="btn-create-buy" class="btn btn-success w-100">Create Buy Order</button>
                    </div>
                  </div>
                  <div id="buy-result" class="mt-2"></div>
                </div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-12">
              <div class="card mb-3">
                <div class="card-header">
                  <h6 class="card-title mb-0">Market Depth</h6>
                  <small class="text-muted">Current buy and sell orders</small>
                </div>
                <div class="card-body">
                  <div id="market-depth" class="text-center text-muted">Select an asset to view market depth</div>
                </div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-12">
              <div class="card">
                <div class="card-header">
                  <h6 class="card-title mb-0">Recent Trades</h6>
                  <small class="text-muted">Latest completed trades</small>
                </div>
                <div class="card-body">
                  <div id="recent-trades" class="text-center text-muted">Select an asset to view recent trades</div>
                </div>
              </div>
            </div>
          </div>
        `),$("select#sm_asset_id").val(1),r()},assetTranches(){$("assetTranches").customHtml(`
            <div class="row">
              <div class="col-12">
                <div class="card mb-3">
                  <div class="card-body">
                    <div id="asset-tranches" class="text-center text-muted">Loading asset tranches...</div>
                  </div>
                </div>
              </div>
            </div>
          `),m.api("secondary_qty_by_price_with_tranche",{token:m.user&&m.user.token},null,function(n){let t=[];n.forEach(e=>{t.push(`
                    <tr>
                        <td>#${e.seq}</td>
                        <td>${e.unit_price}</td>
                           <td>${e.total_quantity}</td>
                        <td>${Number(e.total_quantity-e.total_traded).toFixed(2)}</td>
                     
                        <td>${Number(e.company_traded).toFixed(2)}</td>
                        <td>${Number(e.member_traded).toFixed(2)}</td>
                     
                        
                        
                    </tr>
                `)}),$("assetTranches").customHtml(`
            <div class="row">
                <div class="col-12">
                    <div class="card mb-3">
                        <div class="card-header">
                            <h6 class="card-title mb-0">Profit Board</h6>
                            <small class="text-muted">Current tranches</small>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead class="table-light">
                                        <tr>
                                            <th scope="col">Tranche</th>
                                             <th scope="col">Unit Price</th>
                                            <th scope="col">Total Quantity</th>
                                            <th scope="col">Balance</th>
                                            <th scope="col">Company Traded</th>
                                            <th scope="col">Members Traded</th>
                                            
                                            
                                           
                                            
                                        </tr>
                                    </thead>
                                    <tbody>
                                        `+t.join("")+`
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            `)})},userProfile(){var n=L.user;if(n){var t=["Bronze","Silver","Gold","Diamond","Shopper"],e=["Bronze","Silver","Gold","Diamond","Shopper"],r=n.rank!=null?n.rank.name:n.rank_name,s=t[e.indexOf(r)];m.chosen_country_id_.name=="China"&&(s=r);var i=n!=null?'Welcome! <a href="/profile" class="navi">'+n.fullname+" ("+s+")</a>":'<a href="/login" class="navi">Login</a>';$("userProfile").customHtml(`
          
            `+i+`
         
      `)}else $("userProfile").customHtml(`
          
          <a href="/login" class="navi">Login</a>
         
      `)}}};window.commerceApp=_;const Wm="localhost:4700",Xm="http://";let m={endpoint:Xm+Wm,Page:{createTable(n,t){var e=`
            <div class="table-responsive">
                <table class="table"  style="width: 100%;" id="`+n+`">
                    <thead></thead>
                    <tbody></tbody>
                </table>
            </div>
    `;$(t).append(e)}},chosen_country_id_:null,countries_:[],route_names:[{html:"landing.html",title:"Home",route:"/home",public:!0}],render(n){_.components[n]()},rowData(n){var t=n.dataSource;window.currentSelector=t.tableSelector;var e=t.table;e.row(n.row);var r=e.data()[n.index];return r},override(n){L.override(n)},updateUser(n){L.updateUser(n)},login(n){L.login(n)},logout(){L.logout()},user:null,addItem(n){var t=m.api("get_product",{id:n});t.payInstalment=!0,_.addItem_(t),_.components.updateCart(),_.components.cartItems()},filterItemsByName(n){return _.filterItemsByName(n)},hasCartItems(){return console.log("checking..."),console.log(_.hasCartItems()),_.hasCartItems()>0},merchantCheckout(n){L.merchantCheckout(n)},redeem(n){L.redeem(n)},upgrade(n){L.upgrade(n)},linkRegister(n){L.linkRegister(n)},register(n){L.register(n)},formatDate(){ut.formatDate()},ping(){console.log("tell ping o")},reinit(){$(".dataTable").each((n,t)=>{if(t.offsetParent!=null){var e=window.phoenixModels.filter((r,s)=>r.tableSelector=="#"+t.id)[0];e.reload()}})},evalTitle(n){if(localStorage.getItem("default-lang")=="cn")switch(n.replace(" ","")){case"Home":n="首页";break;case"Profile":n="个人";break;case"Upgrade":n="升级";break;case"Restocks":n="朴货";break;case"Registrations":n="审核";break;case"Sales":n="业绩";break;case"Commissions":n="佣金";break;default:n=n}return n},async navigateTo(n,t){n==null&&(n=window.location.pathname);var e=n.split("/").filter((g,v)=>g!=""),r=this.route_names.filter((g,v)=>{var w=g.route.split("/").filter((x,E)=>x!="");return w[w.length-1].includes(":")?w.length==e.length:w.length==e.length&&w[w.length-1]==e[w.length-1]}),s=r.filter((g,v)=>{var w=g.route.split("/").filter((x,E)=>x!="");return w[0]==e[0]});if(this.hide(),L.restoreUser(),s.length>0){var i={};if(s.forEach((g,v)=>{g.route.split("/").forEach((w,x)=>{w.includes(":")&&(i[w.replace(":","")]=e[x-1])})}),console.info(s),!s[0].public)if(await L.restoreUser(),console.log("resting?",s[0].route),L.user!=null){if(s[0].route=="/share_link"&&L.user.rank.name=="Shopper"){m.toast({content:"Please upgrade package to access this page",header:"Unauthorized",type:"danger"}),m.navigateTo("/");return}}else{m.navigateTo("/logout");return}window.pageParams=i;var a="";if(t==null?a="":a=t,window.back)window.back=!1;else{var o={route:n,fn:"phxApp.navigateTo('"+n+"', '"+a+"')",params:i};window.stateObj=o,window.matchTitle=s[0].title,window.matchRoute=n,Object.keys(i).includes("title")?(history.pushState(o,evalTitle(i.title),n),$("title").html(this.evalTitle(i.title))):(history.pushState(o,this.evalTitle(s[0].title),n),$("title").html(this.evalTitle(s[0].title)))}var l=this.html("blog_nav.html"),u=this.html("footer_modals.html"),d=this.html(s[0].html),h=`
      <div class="page-content pb-0">
        `+d+`
      </div>
        `+u+`
          `,y=Object.keys(s[0]);if(y.includes("skipNav"))$("#content").html(h),this.navigateCallback();else{if(y.includes("customNav"))var l=this.html(s[0].customNav);$("#content").html(l),$("#content").append(h),this.navigateCallback()}return s[0]}else{console.info(r);var l=this.html("blog_nav.html"),u=this.html("footer_modals.html"),d=this.html("landing.html"),h=`
      <div class="page-content pb-0">
        `+d+`
      </div>        `+u;$("#content").html(l),$("#content").append(h),this.navigateCallback()}},modal(n){var t={selector:"#myModal",body:".modal-body",title:".modal-title",foot:".modal-footer",header:"Modal Header",content:"Here is content for modal body",footer:"",drawFn:()=>{},autoClose:!0},e=Object.keys(t);e.forEach((r,s)=>{this[r]=t[r]}),e.forEach((r,s)=>{n[r]!=null&&(this[r]=n[r])}),$(this.selector).find(this.title).customHtml(this.header),$(this.selector).find(this.body).customHtml(this.content),$(this.selector).find(this.foot).customHtml(this.footer),$(this.selector).modal("show"),this.drawFn(),this.autoClose&&setTimeout(()=>{$(this.selector).modal("hide")},5e3)},toast(n){var t={selector:"#notification-1",body:".toast-body",title:".tbody",foot:".modal-footer",header:"Modal Header",content:"Here is content for modal body",footer:"",drawFn:()=>{},autoClose:!0},e=Object.keys(t);e.forEach((r,s)=>{this[r]=t[r]}),e.forEach((r,s)=>{n[r]!=null&&(this[r]=n[r])}),$(this.selector).find(this.title).customHtml(this.header),$(this.selector).find(this.body).customHtml(this.content),$(this.selector).toast("show"),this.drawFn(),this.autoClose},notify(n,t){t==null&&(t={});var e={delay:2e3,type:"info"},a=Object.keys(e);a.forEach((o,l)=>{this[o]=e[o]}),a.forEach((o,l)=>{t[o]!=null&&(this[o]=t[o])});var r={},s={};typeof n=="object"?s=n:s={message:n};var i={message:"Your text here",title:"System Message:",icon:"fa fa-exclamation-circle"},a=Object.keys(i);a.forEach((o,l)=>{r[o]=i[o]}),a.forEach((o,l)=>{s[o]!=null&&(r[o]=s[o])});try{typeof $.notify=="function"?(console.log(t),$.notify(r,t)):this.toast({content:r.message,header:r.title})}catch{this.toast({content:r.message,header:r.title})}},reflect(n){var t={};return n.forEach((e,r)=>{console.log(r);var s={};if(r.includes("[")){console.log("has child");var i=r.split("[")[0],a=r.split("[")[1].split("]")[0];s[a]=e,t[i]={...t[i],...s}}else{if(!Reflect.has(t,r)){t[r]=e;return}Array.isArray(t[r])||(t[r]=[t[r]]),t[r].push(e)}}),t},validateForm(n,t){var e=$(n).find("[name]").filter((s,i)=>($(i).removeClass("is-invalid"),i.checkValidity()==!1));if(e.length>0){var r=[];e.map((s,i)=>{$(i).addClass("is-invalid");var a=$(i).closest(".input-style").find("label div").html();a==null&&(a=$(i).attr("name")),r.push(a)}),m.notify("This input: "+r.join(", ")+" is not valid!",{type:"danger"})}else t()},form(n,t,e,r,s){m.show();var i="",a=new FormData($(n)[0]);if(a.append("scope",t),s!=null){var o=Object.keys(s);o.forEach((u,d)=>{a.append(u,s[u])})}t=="login"&&(i="/login");var l=this.csrf_();$.ajax({url:this.endpoint+"/svt_api/webhook"+i,dataType:"json",headers:{"phx-request":"true",Authorization:"Basic "+(m.user!=null?m.user.token:null),"x-csrf-token":l},method:"POST",enctype:"multipart/form-data",processData:!1,contentType:!1,data:a}).done(function(u){if(m.hide(),u.status=="ok"){m.notify("Added!",{type:"success"});try{u.res!=null&&e(u.res)}catch{}}else u.reason!=null?m.notify("Not added! "+u.reason,{type:"danger"}):m.notify("Not added!",{type:"danger"})}).fail(function(u){u.status==403&&L.logout(),m.notify("Not added!",{type:"danger"})})},html(n){$(".modal-body").each((i,a)=>{$(a).html("")});var t="v2";function e(i){var a="v2";return i=="Thailand"&&(a="th"),i=="Vietnam"&&(a="vn"),i=="China"&&(a="cn"),a}localStorage.region!=null&&(t=e(localStorage.region)),t="v2";var r="",s="/html/"+t+"/"+n;return console.log("url",s),$.ajax({async:!1,method:"get",url:s}).done(i=>{r=i}),r},token:null,csrf_(n){if(this.token==null)this.token=$("input[name='_csrf_token_ori']").val();else if(n)this.token=$("input[name='_csrf_token_ori']").val();else return this.token},api(n,t,e,r){var s="",i=this.csrf_();return $.ajax({async:!1,method:"get",headers:{"phx-request":"true",Authorization:"Basic "+(m.user!=null?m.user.token:null),"X-CSRF-Token":i},url:this.endpoint+"/svt_api/webhook?scope="+n,data:t}).done(a=>{console.log(a),r!=null&&r(a),s=a}).fail(function(a){a.status==403&&L.logout();try{m.notify("Not Added! reason: "+a.responseJSON.reason,{type:"danger"})}catch{m.notify("Ops, somethings' not right!",{type:"danger"})}m.show(),setTimeout(()=>{e!=null&&e(),m.hide()},500)}),s},post(n,t,e,r){var s="",i=$("input[name='_csrf_token_ori']").val(),a={...t,_csrf_token:i};return console.log(a),$.ajax({async:!1,method:"post",headers:{"phx-request":"true",Authorization:"Basic "+(m.user!=null?m.user.token:null),"X-CSRF-Token":i},url:this.endpoint+"/svt_api/webhook?scope="+n,data:a}).done(o=>{r!=null&&r(o),s=o}).fail(function(o){o.status==403,m.notify("Ops, somethings' not right!",{type:"danger"}),setTimeout(()=>{e!=null&&e(),m.hide()},500)}),s},evaluateLang(){},toTop(){$("body")[0].scrollIntoView()},async putToken(){this.csrf_(!0),$("input#need-token")&&$("input[name='_csrf_token']").val($("input[name='_csrf_token_ori']").val())},evalCart(){window.location.pathname.includes("merchant")&&($(".showMcart").toggleClass("d-none"),$(".showCart").toggleClass("d-none"))},async navigateCallback(){L.restoreUser(),_.restoreCart(),_.restoreCart(!0),this.user=L.user,this.user!=null&&(this.user.wallets=null);try{_.render()}catch{}this.evaluateLang(),this.toTop(),this.hide(),this.putToken(),this.evalCart()},show(){console.log("drop shadow.."),$(".wrapper-ring").show(),setTimeout(()=>{$(".wrapper-ring").hide()},1e3)},hide(){console.log("hide shadow..");try{$(".wrapper-ring").hide()}catch{}},repopulateFormInput(n,t){console.log(n);var e=$(t).find("[name]");$(e).each(function(r,s){var i=$(s).attr("aria-label");i==null&&(i=$(s).attr("name"));var a=$(s).attr("aria-value"),o=i.split("[")[0],l=i.replace("[","").replace("]","").replace(o,"");if($(s).prop("localName")=="select")console.log("is select"),i.includes("[")?$(s).val(n[o][l]):$(s).val(n[i]);else if(a!=null)$(s).val(a);else if($(s).hasClass("code"))try{$(s).val(n[i]);var u=document.createElement("input");u.setAttribute("type","hidden"),u.setAttribute("name",$(s).attr("name")),$(s).after(u);var d=ace.edit($("textarea")[0],{mode:"ace/mode/html",selectionStyle:"text"});d.resize(),window.editor=d,d.session.setUseWrapMode(!0),d.session.on("change",function(x){$(u).val(window.editor.getValue()),console.log("ace here")})}catch(x){console.log(x),$(s).val(n[i])}else if($(s).attr("type")=="checkbox")if(console.log("got data?"),console.log(n[i]),$(s).hasClass("many_2_many")){var h=parseInt(s.name.split("][")[1].split("]")[0]);try{var y=n[i].filter((x,E)=>x.id==h);y.length>0&&$(s).prop("checked",n[i])}catch(x){console.log(x),$(s).prop("checked",!1)}}else $(s).prop("checked",n[i]);else if(n!=null)if(console.log(i),console.log("name: "+i+", data: "+n[i]),i.includes("."))try{var g=$(s).closest("form").attr("id"),v=i.split(".");v.length==2&&($(s).val(n[v[0]][v[1]]),$(s).parent().append(`<input type='hidden' value="`+n[v[0]].id+'" name="'+g+"["+v[0]+'][id]"></input>')),v.length==3&&($(s).val(n[v[0]][v[1]][v[2]]),$(s).parent().append(`<input type='hidden' value="`+n[v[0]].id+'" name="'+g+"["+v[0]+'][id]"></input>')),v.length==1&&($(s).val(n[v[0]]),$(s).parent().append(`<input type='hidden' value="`+n[v[0]].id+'" name="'+g+"["+v[0]+'][id]"></input>'))}catch(x){console.log(x),$(s).val(n[i])}else if(i.includes("["))try{$(s).val(n[o][l])}catch(x){console.log(x),$(s).val(n[i])}else if(i=="_csrf_token"){var w=$("input[name='_csrf_token_ori']").val();$(s).val(w)}else try{$(s).val(n[i])}catch(x){console.log(x),console.log("missing dom?")}else console.log("name: "+i+", data: ?")})},generateInputs(n,t,e,r){var s="",i="",a="col-12 col-lg-6",l=t.charAt(0).toUpperCase()+t.slice(1);typeof r=="object"&&(r.alt_name!=null&&(l=r.alt_name),r.alt_class!=null&&(a=r.alt_class));var o=Object.keys(i),l=o.reduce((v,w)=>{var x=new RegExp(w,"g");return v.replace(x,i[w])},l);switch(n[t]){case"string":s='<div class="'+a+`">
                      <div class="ps-0 py-0 text-secondary">`+l+`</div>
                      <div class="col-sm-12">
                        <div class="form-group bmd-form-group">
                          <input type="text" aria-label="`+t+'" name="'+e+"["+t+`]" class="form-control-plaintext">
                        </div>
                      </div>
                    </div>`;break;case"boolean":s=`<div class="row d-flex align-items-center ">
                      <label class="offset-lg-1 col-sm-3 col-form-label text-start label-checkbox">`+l+`</label>
                      <div class="col-sm-6 checkbox-radios">
                        <div class="form-check">
                          <label class="form-check-label">
                            <input class="form-check-input" type="checkbox" aria-label="`+t+'" name="'+e+"["+t+']" value=""> This '+t+`
                            <span class="form-check-sign">
                              <span class="check"></span>
                            </span>
                          </label>
                        </div>
                        
                      </div>
                    </div>`;break;case"integer":t.includes("id")||t=="id "?s='<input  aria-label="'+t+'" name="'+e+"["+t+']" type="hidden" class="form-control" value="0">':s='<div class="'+a+`">
                      <div class="ps-1 py-2">`+l+`</div>
                      <div class="col-sm-12">
                        <div class="form-group bmd-form-group">
                          <input type="number" aria-label="`+t+'" name="'+e+"["+t+`]" class="form-control">
                        </div>
                      </div>
                    </div>`;break;case"date":s='<div class="'+a+`">
                      <div class="ps-1 py-2">`+l+`</div>
                      <div class="col-sm-12">
                        <div class="form-group">
                          <input type="text" aria-label="`+t+'" name="'+e+"["+t+`]" class="form-control datepicker">
                        </div>
                      </div>
                    </div>`;break;case"naive_datetime":s='<div class="'+a+`">
                      <div class="ps-1 py-2">`+l+`</div>
                      <div class="col-sm-12">
                        <div class="form-group bmd-form-group">
                          <input type="text" aria-label="`+t+'" name="'+e+"["+t+`]" class="form-control datetimepicker">
                        </div>
                      </div>
                    </div>`;break;default:t=="id"||t.includes("_id")?s='<input  aria-label="'+t+'" name="'+e+"["+t+']" type="hidden" class="form-control" value="0">':s='<div class="'+a+`">
                      <div class="ps-0 py-0 text-secondary">`+l+`</div>
                      <div class="col-sm-12">
                        <div class="form-group bmd-form-group">
                          <input type="text" aria-label="`+t+'" name="'+e+"["+t+`]" class="form-control-plaintext">
                        </div>
                      </div>
                    </div>`}if(typeof r=="object"){var u=[];if(r.selection!=null){var d="",h="";r.live_search!=null&&r.live_search&&(d='data-live-search="true"'),r.multiple!=null&&r.multiple&&(h="multiple"),$(r.selection).each(function(v,w){var x,E;typeof w=="object"?(x=w.name,E=w.id):(x=w,E=w),u.push('<option value="'+E+'">'+x+"</option>")}),s='<div class="'+a+`">
                      <div class="ps-1 py-2">`+l+`</div>
                      <div class="col-sm-12">
                        <div class="form-group">
                         <select `+h+" "+d+'aria-label="'+t+'" name="'+e+"["+t+`]" class="form-control selectpicker" >
                         `+u.join("")+`
                         </select>
                        </div>
                      </div>
                    </div>`}if(r.binary&&(s='<div class="'+a+`">
                      <div class="ps-1 py-2">`+l+`</div>
                      <div class="col-sm-12">
                        <div class="form-group bmd-form-group">
                          <textarea rows=12 cols=12 aria-label="`+t+'" name="'+e+"["+t+`]" class="form-control"></textarea>
                        </div>
                      </div>
                    </div>`),r.placeholder&&(s='<div class="'+a+`">
                      `+r.placeholder+`
                    </div>`),r.code&&(s=`<div class="row">
                      <label class="col-sm-3 col-form-label text-end">`+l+`</label>
                      <div class="col-sm-9">
                        <div class="form-group bmd-form-group">
                          <textarea rows=4 cols=12 aria-label="`+t+'" name="'+e+"["+t+`]" class="form-control code"></textarea>
                        </div>
                      </div>
                    </div>`),r.checkboxes!=null){var y=[];r.checkboxes.sort(function(v,w){return v.name.localeCompare(w.name)}),$(r.checkboxes).each((v,w)=>{var x=`
                    <div class="form-check">
                      <label class="text-capitalize">
                        <input aria-label="`+t+'" class="form-check-input many_2_many" type="checkbox" name="'+e+"["+t+"]["+w.id+']"  value="true"> '+w.name+`
                        <span class="form-check-sign">
                          <span class="check"></span>
                        </span>
                      </label>
                    </div>`;y.push(x)}),s=`<div class="row">
                      <label class="col-sm-2 col-form-label text-end">`+l+`</label>
                      <div class="col-sm-8">
                        <div class="form-group bmd-form-group">
                          `+y.join("")+`
                        </div>
                      </div>
                    </div>`}if(r.upload&&(s='<div class="'+a+`">
                      <div class="pb-1 pt-1 ps-1 text-start">`+l+`</div>
                      <div class="col-sm-12">
                        
                        <img style="display: none;" id="myImg" src="#" alt="your image" width=300>
                          <input style="padding-top: 2vh;" type="file" aria-label="`+t+'" name="'+e+"["+t+`]" class="">
                        
                      </div>
                    </div>`),r.editor&&(s='<div class="'+a+`">
              <div class="form-group bmd-form-group">
              <label class="bmd-label-floating my-2">`+l+`</label>
                  <textarea id="editor1" rows=10 cols=12 aria-label="`+t+'" name="'+e+"["+t+`]" class="form-control" ></textarea>
              </div>
          </div>`),r.datetime&&(s=`<div class="row">
                      <label class="offset-lg-1 col-sm-3 col-form-label text-start">`+l+`</label>
                      <div class="col-sm-6">
                        <div class="form-group bmd-form-group">
                          <input type="datetime-local" aria-label="`+t+'" name="'+e+"["+t+`]" class="form-control datepicker">
                        </div>
                      </div>
                    </div>`),r.date&&(s=`<div class="row">
                      <label class="offset-lg-1 col-sm-3 col-form-label text-start">`+l+`</label>
                      <div class="col-sm-6">
                        <div class="form-group bmd-form-group">
                          <input type="date" aria-label="`+t+'" name="'+e+"["+t+`]" class="form-control datepicker">
                        </div>
                      </div>
                    </div>`),r.alias){var g=t.split(".");console.log("not sure if onclick"),r.onClickFn!=null?(g.length==2&&(s='<div class="'+a+`">
                        <div class="pb-1 pt-1 ps-1 text-start">`+l+`</div>
                        <div class="row gx-0">
                          <div class="col-10">
                            <div class="form-group bmd-form-group">
                              <input type="text" aria-label="`+t+'" name="'+e+"["+g[0]+"]["+g[1]+`]" class="form-control">
                            </div>
                          </div>
                          <div class="col-2">
                            <div class="btn btn-outline-primary" onclick="`+r.onClickFn+`">Change</div>
                          </div>
                        </div>
                      </div>`),g.length==3&&(s='<div class="'+a+`">
                        <div class="pb-1 pt-1 ps-1 text-start">`+l+`</div>
                        <div class="row">
                          <div class="col-10">
                            <div class="form-group bmd-form-group">
                              <input type="text" aria-label="`+t+'" name="'+e+"["+g[0]+"]["+g[1]+"]["+g[2]+`]" class="form-control">
                            </div>
                          </div>
                          <div class="col-2">
                            <div class="btn btn-outline-primary" onclick="`+r.onClickFn+`">Change</div>
                          </div>
                        </div>
                      </div>`)):(g.length==2&&(s='<div class="'+a+`">
                              <div class="pb-1 pt-1 ps-1 text-start">`+l+`</div>
                              <div class="row">
                                <div class="col-12">
                                  <div class="form-group bmd-form-group">
                                    <input type="text" aria-label="`+t+'" name="'+e+"["+g[0]+"]["+g[1]+`]" class="form-control">
                                  </div>
                                </div>
                               
                              </div>
                            </div>`,r.binary&&(s='<div class="'+a+`">
                                        <div class="ps-1 py-2">`+l+`</div>
                                        <div class="col-sm-12">
                                          <div class="form-group bmd-form-group">
                                            <textarea rows=4 cols=12 aria-label="`+t+'"  name="'+e+"["+g[0]+"]["+g[1]+`]" class="form-control"></textarea>
                                          </div>
                                        </div>
                                      </div>`),r.editor&&(s='<div class="'+a+`">
                                        <div class="ps-1 py-2">`+l+`</div>
                                        <div class="col-sm-12">
                                          <div class="form-group bmd-form-group">
                                            <textarea id="editor1" rows=10 cols=12 aria-label="`+t+'"  name="'+e+"["+g[0]+"]["+g[1]+`]" class="form-control"></textarea>
                                          </div>
                                        </div>
                                      </div>`)),g.length==3&&(s='<div class="'+a+`">
                              <div class="pb-1 pt-1 ps-1 text-start">`+l+`</div>
                              <div class="row">
                                <div class="col-12">
                                  <div class="form-group bmd-form-group">
                                    <input type="text" aria-label="`+t+'" name="'+e+"["+g[0]+"]["+g[1]+"]["+g[2]+`]" class="form-control">
                                  </div>
                                </div>
                               
                              </div>
                            </div>`))}if(r.hidden)if(t.includes(".")){var g=t.split(".");s='<input type="hidden" aria-label="'+t+'" name="'+e+"["+g[0]+"]["+g[1]+']"  aria-value="'+r.data+'">'}else console.log("qv",r.data),s='<input type="hidden" aria-label="'+t+'" name="'+e+"["+t+']"  aria-value="'+r.data+'">';r.required&&(s=s.replaceAll("input type","input required type"))}return s},appendInputs(n,t,e,r){$(t).each(function(s,i){var a;typeof i=="object"?a=i.label:a=i;var o="";if(o=m.generateInputs(e,a,r,i),typeof i=="object"&&!i.binary){if(i.sub!=null){var l=i.sub.moduleName,u=i.sub.link,d=i.sub.customCols;$.ajax({headers:{"phx-request":"true"},url:this.endpoint+"/svt_api/webhook?scope=gen_inputs",dataType:"json",async:!1,data:{module:l}}).done(function(h){var y=Object.keys(h);d!=null&&d.length>0&&(y=d);var g=[];$(y).each((v,w)=>{var x;typeof w=="object"?x=w.label:x=w;var E="";E=m.generateInputs(h,x,u,w),g.push(E)}),o=o+'<div class="row subform" style="display: none;"><div class="offset-1 col-sm-9">'+g.join("")+"</div></div>"}).fail(function(h){h.status==403&&L.logout(),m.notify("Not Added!",{type:"danger"})})}}$(n).append(o)})},form_new(n,t,e,r,s){console.log(t);var i=window.phoenixModels.filter((l,u)=>l.tableSelector==n)[0],a="#mySubModal";t.modalSelector!=null&&(a=t.modalSelector),e==null&&(e=i.customCols);var o='<form style="" class="with_mod" id="'+i.link+'"  module="'+i.moduleName+`">
      </form>`;$(a).find(".modal-title").html("Create  New "+i.moduleName),$(a).find(".modal-body").html(o),m.createForm({id:0,...t},i.table,e,r,s),$(a).modal("show")},createForm(n,t,e,r,s){$(".with_mod").each(function(i,a){$(a).html("");var o=$(this).attr("module"),l=$(this).attr("id");$.ajax({async:!1,headers:{"phx-request":"true"},url:phxApp.endpoint+"/svt_api/webhook?scope=gen_inputs",dataType:"json",data:{module:o}}).then((u,d,h)=>{var y=Object.keys(u);e!=null?typeof e[0]=="object"&&e[0]!==null?(console.log("has multi list,"+e.length),$(a).customHtml(`<input type="hidden" name="_csrf_token"  value="">
                            <div class="row">
                              <div class="col-12 col-lg-4">
                                <ul class="nav nav-pills flex-column form_nav">
                                 
                               
                                </ul>

                              </div>
                              <div class="col-12 col-lg-8 p-4 pt-lg-0 px-lg-4 " id="form_panels">

                              </div>
                            </div>

                        `),$(e).each((P,I)=>{P==0?$(a).find(".form_nav").customAppend(`
                                   <li class="nav-item">
                                      <a class="active nav-link fnc" aria-index="`+P+'" href="javascript:void(0);"  >'+I.name+`</a>
                                    </li>
                          `):$(a).find(".form_nav").customAppend(`
                                   <li class="nav-item">
                                      <a class="nav-link fnc" aria-index="`+P+'" href="javascript:void(0);"  >'+I.name+`</a>
                                    </li>
                          `),$(a).find(".fnc").each((U,R)=>{R.onclick=()=>{var N=$(R).attr("aria-index");$(".form_nav .nav-link").removeClass("active"),$(".nav-link[aria-index='"+N+"']").toggleClass("active"),$(".fp").addClass("d-none"),$("#panel_"+N).toggleClass("d-none")}}),P==0?$(a).find("#form_panels").customAppend('<div class="fp row" id="panel_'+P+'"></div>'):$(a).find("#form_panels").customAppend('<div class="fp row d-none"  id="panel_'+P+'"></div>'),$(a).find("#panel_"+P).customAppend('<div class="col-lg-12"><b class="pb-4">'+I.name+"</b></div>"),m.appendInputs($(a).find("#panel_"+P),I.list,u,l)})):(y=e,$(a).append('<input type="hidden" name="_csrf_token"  value="">'),m.appendInputs(a,y,u,l),console.log(y.join("','"))):(y=y.filter((P,I)=>P!="inserted_at"),y=y.filter((P,I)=>P!="updated_at"),m.appendInputs(a,y,u,l),console.log(y.join("','"))),$($(a).find("select")).on("change",function(){var P=$(this).val(),I=$($(this).closest(".subform")).length;console.log(P),I==0&&(P==0?$(".subform").fadeIn():$(".subform").hide())});function g(){$("#myModal .modal-dialog").hasClass("modal-lg")&&$("#myModal .modal-dialog").toggleClass("modal-lg");var P=new FormData($(a).closest("form")[0]);$(a).find("input[type='checkbox']").each((U,R)=>{$(R).val($(R).prop("checked")),P.append(l+"["+$(R).attr("aria-label")+"]",$(R).prop("checked"))}),$(a).find("textarea").each((U,R)=>{P.append(l+"["+$(R).attr("aria-label")+"]",$(R).val())});var I=$(".with_mod").closest("form").find("input").filter((U,R)=>(console.log("checking vaidity"),console.log(R),R.checkValidity()==!1));console.log(I),I.length>0?I.map((U,R)=>{m.notify("This input: "+$(R).attr("placeholder")+" is not valid!",{type:"danger"})}):(m.csrf_(!0),$.ajax({url:phxApp.endpoint+"/svt_api/"+l,dataType:"json",headers:{Authorization:"Basic "+(m.user!=null?m.user.token:null)},method:"POST",enctype:"multipart/form-data",processData:!1,contentType:!1,data:P}).done(function(U){if(m.notify("Added!",{type:"success"}),$("#mySubModal").modal("hide"),$("#sideModal").modal("hide"),t!=null){console.log("redrawing table.. "+window.currentSelector),console.log(l),console.log(window.currentSelector);var R=window.phoenixModels.filter((N,S)=>N.moduleName==l&&N.tableSelector==window.currentSelector);R.forEach((N,S)=>{try{window.prev_page=N.table.page(),N.reload()}catch{console.log("cant find the table")}})}r!=null&&(n.xparams!=null?r(n.xparams):r(U))}).fail(function(U){U.status==403&&L.logout();try{console.log(U.responseJSON.status),m.notify("Not Added! reason: "+U.responseJSON.status,{type:"danger"})}catch{m.notify("Not Added!",{type:"danger"})}}))}var v=document.createElement("div");v.className="row";var w=document.createElement("div");w.className="pt-4 col-lg-12",v.append(w);try{var x=CKEDITOR.replace("editor1",{height:500,on:{instanceReady:function(){this.document.appendStyleSheet("/css/bootstrap.min.css")}}});CKEDITOR.config.allowedContent=!0,CKEDITOR.config.removeButtons="Image",CKEDITOR.instances.editor1.on("change",function(){var P=CKEDITOR.instances.editor1.getData();$(CKEDITOR.instances.editor1.element.$).val(P)}),x.addCommand("mySimpleCommand",{exec:function(P){try{callStoredMedia(CKEDITOR.instances.editor1)}catch{}}}),x.ui.addButton("SuperButton",{label:"Click me",command:"mySimpleCommand",toolbar:"insert",icon:"/images/image-solid.svg"})}catch{console.log("no editor")}var E=m.formButton({iconName:"check",color:"primary subm",name:"Submit"},{},g);w.append(E),$(a).find(".subm").length==0&&$(a).append(v),console.info(n),m.repopulateFormInput(n,a)}).fail(function(u){u.status==403&&L.logout(),console.log(u.responseJSON.status),m.notify("Not Added!",{type:"danger"})})}),s!=null&&s()},submitFormData(n,t,e,r){$("#myModal .modal-dialog").hasClass("modal-lg")&&$("#myModal .modal-dialog").toggleClass("modal-lg");var s=t,i=$(n)[0],a=new FormData(i);$(i).find("input[type='checkbox']").each((o,l)=>{$(l).val($(l).prop("checked")),a.append(s+"["+$(l).attr("aria-label")+"]",$(l).prop("checked"))}),console.log(a),$.ajax({url:this.endpoint+"/api/"+s,dataType:"json",method:"POST",headers:{Authorization:"Basic "+(m.user!=null?m.user.token:null)},enctype:"multipart/form-data",processData:!1,contentType:!1,data:a,xhr:function(){$("#helper").fadeIn();var o=$.ajaxSettings.xhr();return o.upload.onprogress=function(l){var u=Math.round(l.loaded/l.total*100);$("[role='progressbar']").css("width",u+"%"),$("#helper").text(u+"%")},o},error:function(o){console.error("Error has occurred while uploading the media file.")}}).done(function(o){m.notify("Added!",{type:"success"});try{m.reinit(),$("#myModal").modal("hide")}catch{}try{e!=null&&e(r)}catch{}m.hide()}).fail(function(o){o.status==403&&L.logout();try{console.log(o.responseJSON.status),m.notify("Not Added! reason: "+o.responseJSON.status,{type:"danger"})}catch{m.notify("Not Added! reason: 404",{type:"danger"})}})},formButton(n,t,e){var r={iconName:"fa fa-check",color:"btn btn-primary",onClickFunction:null,fnParams:null,name:"Submit",tooltipText:"Hints"},s=Object.keys(r);s.forEach((u,d)=>{this[u]=r[u]}),s.forEach((u,d)=>{n[u]!=null&&(this[u]=n[u])});var i=document.createElement("button");i.setAttribute("type","button"),i.setAttribute("data-bs-toggle","tooltip"),i.setAttribute("data-bs-original-title",""),i.setAttribute("data-bs-placement","left"),i.setAttribute("class","btn btn-"+this.color+" btn-sm"),i.setAttribute("title",this.tooltipText);var a=document.createElement("i");a.className=this.iconName,i.append(a);var o=document.createElement("span");this.name==null?this.name="":o.setAttribute("style","padding: 0 10px;"),o.innerHTML=this.name,i.append(o);var l=document.createElement("div");if(l.className="ripple-container",i.append(l),i.style="margin-left: 10px;",e!=null){try{i.id=this.fnParams.dtdata.id}catch{console.log("dont hav id in fnParams")}i.onclick=function(){$($(i).closest("tr")).attr("aria-index")==null?t.index=parseInt($($(i).closest("div")).attr("aria-index")):t.index=parseInt($($(i).closest("tr")).attr("aria-index")),t.row=$(i).closest("tr"),t.tbody=$(i).closest("tbody"),e(t)}}return i},groupedFormButton(n,t,e,r){var s=m.makeid(6),i=document.createElement("div");i.setAttribute("class","btn-group"),i.setAttribute("role","group"),i.setAttribute("aria-label","Button group with nested dropdown"),i.setAttribute("style","margin-left: 10px;");var a=document.createElement("button");a.setAttribute("type","button"),a.setAttribute("class","manage btn btn-sm btn-"+t),a.innerHTML=n,i.append(a);var o=document.createElement("div");o.setAttribute("class","btn-group"),o.setAttribute("role","group");var l=document.createElement("button");l.setAttribute("id",s),l.setAttribute("type","button"),l.setAttribute("class","btn btn-sm btn-"+t+" dropdown-toggle"),l.setAttribute("data-bs-toggle","dropdown"),l.setAttribute("aria-haspopup","true"),l.setAttribute("aria-expanded","false"),o.append(l);var u=document.createElement("div");return u.setAttribute("class","dropdown-menu"),u.setAttribute("aria-labelledby",s),$(e).each((d,h)=>{h.fnParams!=null?h.fnParams.dataSource=r.dataSource:h.fnParams=r;var y=m.childGroupedFormButton(h.name,h.onClickFunction,h.fnParams);u.append(y)}),o.append(u),i.append(o),i},childGroupedFormButton(n,t,e){var r=document.createElement("a");if(r.setAttribute("class","dropdown-item"),r.setAttribute("href","javascript:void(0);"),r.innerHTML=n,t!=null){try{r.id=e.dtdata.id}catch{}r.onclick=function(){e.index=parseInt($($(r).closest("tr")).attr("aria-index")),e.index>-1||(e.index=parseInt($($(r).closest(".card-footer")).attr("aria-index"))),e.row=$(r).closest("tr"),t(e)}}return r},makeid(n){for(var t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=e.length,s=0;s<n;s++)t+=e.charAt(Math.floor(Math.random()*r));return t},appendDtButtons(n,t,e){$(n).closest(t).find(".module_buttons").customHtml(`
                <button type="submit" onclick="toggleView('`+n+`')" class="btn btn-fill btn-round btn-primary" data-href="" data-module="" data-ref="">
                <i class="fa fa-th-large"></i></button>
                <button type="submit" onclick="phxApp.reinit()" class="btn btn-fill btn-round btn-primary" data-href="" data-module="" data-ref="">
                <i class="fa fa-circle-notch
      "></i></button>
                <button type="submit" class="btn btn-fill btn-round btn-primary"  data-href="" data-module="add_new" data-ref=""><i class="fa fa-plus"></i></button>
                `);var r=$(n).closest(t).find(".module_buttons button[data-module='add_new']");try{r[0].onclick=function(){window.currentSelector=n,console.log("sub sub table data"),console.log(e),form_new(n,e)}}catch{}},appendRowDtButtons(n,t){$(n.buttons).each((e,r)=>{if(r.buttonType!=null)if(r.buttonType=="grouped"){console.log("creating grouped...button..."),r.fnParams.dataSource=n,r.fnParams.aParams=n.data;var s=m.groupedFormButton(r.name,r.color,r.buttonList,r.fnParams);$(n.tableSelector).closest(".table-responsive").find(".gd[aria-index='"+t+"']").removeClass("d-none"),$(n.tableSelector).closest(".table-responsive").find(".gd[aria-index='"+t+"']").append(s)}else{r.fnParams.dataSource=n,r.fnParams.aParams=n.data;var s=m.formButton({iconName:r.iconName,color:r.color,name:r.name},r.fnParams,r.onClickFunction);$(n.tableSelector).closest(".table-responsive").find(".gd[aria-index='"+t+"']").removeClass("d-none"),$(n.tableSelector).closest(".table-responsive").find(".gd[aria-index='"+t+"']").append(s)}else{console.log("appending gd buttons : "+e),r.fnParams.dataSource=n,r.fnParams.aParams=n.data;var s=m.formButton({iconName:r.iconName,color:r.color,name:r.name,tooltipText:r.tooltipText},r.fnParams,r.onClickFunction);$(n.tableSelector).closest(".table-responsive").find(".gd[aria-index='"+t+"']").removeClass("d-none"),$(n.tableSelector).closest(".table-responsive").find(".gd[aria-index='"+t+"']").append(s)}})},getTableData(n,t,e){var r=100;t!=null&&(r=t);var s=Object.keys(n.data),i=[];$(s).each((a,o)=>{i.push("&"+o+"="+n.data[o])}),$.ajax({async:!1,url:this.endpoint+"/api/"+n.link+"?foo=bar"+i.join(""),data:{draw:"1",order:{0:{column:"0",dir:"desc"}},columns:{0:{data:"id"}},length:r,start:0}}).done(function(a){$(a.data).each((o,l)=>{var u=$(n.allData).filter(function(d,h){return h.id==l.id});u.length==0&&n.allData.push(l)}),e!=null&&e()}).fail(function(a){a.status==403&&L.logout(),m.notify("Not Added!",{type:"danger"})})},copyToClipboard(n){navigator.clipboard.writeText(n).then(()=>{console.log("Text copied to clipboard:",n),alert("Text copied to clipboard!")}).catch(t=>{console.error("Could not copy text: ",t),alert("Could not copy text: "+t)})},populateTableData(n,t,e){this.getTableData(n,t,e)},populateGridView(n){console.log("populateGridView",n);var t="col-12 col-lg-3 xc";try{n.data.grid_class!=null&&(t=n.data.grid_class+" xc")}catch{}$(n.tableSelector).closest(".dataTables_wrapper").find(".grid_view").html("<div></div>");var e=[];for(n.table.data().length,r=0,s=n.table.data().length;r<s;r++)n.table.data()[r].index=r,e.push(n.table.data()[r]);var r,s,i=12,a=[];for(r=0,s=e.length;r<s;r+=i)a.push(e.slice(r,r+i));a.forEach((o,l)=>{var u=document.createElement("div");u.setAttribute("class","row gx-0 "),o.forEach((d,h)=>{var y=d,g=document.createElement("div");g.setAttribute("class",t);var v=document.createElement("div");v.setAttribute("id",y.id),v.className="card-footer gd d-none",g.data=d,g.data.dataSource=n,y.index!=null&&v.setAttribute("aria-index",y.index),g.appendChild(v),u.appendChild(g)}),$(n.tableSelector).closest(".dataTables_wrapper").find(".grid_view").append(u)}),$(n.tableSelector).closest(".table-responsive").find(" .gd").each((o,l)=>{var u=$(l).attr("aria-index");console.log("there is index... d"+o),m.appendRowDtButtons(n,u)})},populateTable(n){var t=[[0,"desc"]],e=phxApp.endpoint+"/svt_api/";n.data.host!=null&&(e=n.data.host+"/svt_api/");var r=10,s=`

    <"row align-items-center"
      <"col-lg-4"l>
      <"gap-2 col-lg-8 text-center 
        module_buttons 
        d-flex justify-content-lg-end 
        justify-content-center py-2 py-lg-0">
    >
    <"row grid_view d-block d-lg-none">
    <"list_view d-lg-block d-none"t>
    <"row transform-75 p-4"
      <"col-lg-6"i><"col-lg-6"p>
    >

    `;n.data.dom!=null&&(s=n.data.dom),n.data.sorts!=null&&(t=n.data.sorts),n.data.pageLength!=null&&(r=n.data.pageLength);var i=document.createElement("tr"),a=document.createElement("tr");$(n.columns).each(function(g,v){var w=document.createElement("td");w.innerHTML=v.label,i.append(w)}),$(n.columns).each(function(g,v){var w=document.createElement("td");a.append(w)}),console.info(t),$(n.tableSelector).find("thead").append(i),$(n.tableSelector).find("tfoot").html(a),console.log(n.data);var o=Object.keys(n.data),l=[];$(o).each((g,v)=>{["modalSelector","sorts","dom","footerFn","rowFn","preloads","grid_class"].includes(v)||l.push("&"+v+"="+n.data[v]),["preloads"].includes(v)&&l.push("&"+v+"="+JSON.stringify(n.data[v])),["additional_join_statements"].includes(v)&&l.push("&"+v+"="+JSON.stringify(n.data[v]))});var u=n.tableSelector,d=$(u).DataTable({pageLength:r,processing:!0,responsive:!0,serverSide:!0,ajax:{url:e+n.link+"?foo=bar"+l.join("")},columns:n.columns,lengthMenu:[8,10,12,25,50,100],rowCallback:function(g,v,w){console.log("dt rowcallback index "+w);var x=$(n.allData).filter(function(P,I){return I.id==v.id});x.length==0&&n.allData.push(v),$(g).addClass("d-none"),$(g).attr("aria-index",w);var E=$(g).find("td").length-1;g.dataset.dtdata=JSON.stringify(v),ut.datetime(g,v,n),ut.img(g,v,n),ut.bool(g,v,n),ut.float(g,v,n),ut.child(g,v,n),ut.json(g,v,n),ut.subtitle(g,v,n),ut.progress(g,v,n),ut.custom(g,v,n),$("td:eq("+E+")",g).attr("class","td-actions text-end"),$("td:eq("+E+")",g).html(""),$(n.buttons).each((P,I)=>{if(I.buttonType!=null)if(I.buttonType=="grouped"){console.log("creating grouped...button..."),I.fnParams.dataSource=n,I.fnParams.aParams=n.data;var U=m.groupedFormButton(I.name,I.color,I.buttonList,I.fnParams);$("td:eq("+E+")",g).append(U)}else{I.fnParams.dataSource=n,I.fnParams.aParams=n.data;var U=m.formButton({iconName:I.iconName,color:I.color,name:I.name},I.fnParams,I.onClickFunction);$("td:eq("+E+")",g).append(U)}else{I.fnParams.dataSource=n,I.fnParams.aParams=n.data;var U=m.formButton({iconName:I.iconName,color:I.color,name:I.name,tooltipText:I.tooltipText},I.fnParams,I.onClickFunction);$("td:eq("+E+")",g).append(U)}}),n.data.rowFn!=null&&n.data.rowFn(g,v,w)},footerCallback:function(g,v,w,x,E){n.data!=null&&n.data.footerFn!=null&&n.data.footerFn(g,v,w,x,E)},order:t,dom:s,autoWidth:!1});n.table=d,d.on("preXhr",()=>{console.log("fetching...")}),d.on("draw",()=>{$(".jsv"+n.makeid.id).closest("tr").each((g,v)=>{var w=n.columns.filter((x,E)=>x.showJson==!0);w.forEach((x,E)=>{$($(v).find(".jsv"+n.makeid.id)[E]).jsonViewer(d.data()[g][x.data],{collapsed:!0})})}),$(".table tbody tr").each((g,v)=>{setTimeout(()=>{$(v).removeClass("d-none")},10*g+1)}),console.log("table draw"),typeof n.onDrawFn=="function"&&n.onDrawFn()}),d.on("xhr",()=>{console.log("fetched")});var h=window.phoenixModels.findIndex((g,v)=>g.tableSelector=="#subSubTable");h!=-1&&window.phoenixModels.splice(h,1);var y=window.phoenixModels.filter((g,v)=>g.moduleName==n.moduleName&&g.tableSelector==n.tableSelector);if(y.length==0)window.phoenixModels.push(n);else{console.info("the dt already exist, consider reinsert?");var h=window.phoenixModels.findIndex((v,w)=>v.moduleName==n.moduleName&&v.tableSelector==n.tableSelector);h!=-1&&(window.phoenixModels.splice(h,1),window.phoenixModels.push(n))}return d},editData(n){console.log("editing data...");var t=n.dataSource;window.currentSelector=t.tableSelector;var e=t.table,r=e.row(n.row),s=e.data()[n.index],i;n.link!=null?i=n.link:i=t.link;var a="#sideModal";$(a).length==0&&(a="#mySubModal"),t.data.modalSelector!=null&&(a=t.data.modalSelector);function o(){console.log(s);var l='<form style="margin-top: 0px;" class="with_mod" id="'+i+'"  module="'+t.moduleName+'"></form>';$(a).find(".modal-title").html("Edit "+t.moduleName),$(a).find(".modal-body").html(l),$(a).modal("show"),m.createForm(s,e,n.customCols,n.postFn),n.drawFn!=null&&n.drawFn()}r.child.isShown()?(r.child.hide(),o()):(e.rows().every(function(l,u,d){this.child.hide()}),o())},deleteData(n){console.log("editing data...");var t=n.dataSource;window.currentSelector=t.tableSelector;var e=t.table;e.row(n.row);var r=e.data()[n.index];$("#myModal").find(".modal-title").html("Confirm delete this data?");var s=m.formButton("fa fa-check","outline-danger"),i=this.csrf_();s.onclick=function(){console.log(t),$("#myModal").modal("hide"),$.ajax({url:this.endpoint+"/api/"+t.link+"/"+r.id,dataType:"json",headers:{Authorization:"Basic "+(m.user!=null?m.user.token:null),"x-csrf-token":i},method:"DELETE"}).done(function(o){if($("#myModal").modal("hide"),m.notify("Deleted!",{type:"info"}),e!=null){console.log("redrawing table.. "+window.currentSelector),console.log(t.link),console.log(window.currentSelector);var l=window.phoenixModels.filter((u,d)=>u.moduleName==t.link&&u.tableSelector==window.currentSelector);l.forEach((u,d)=>{try{window.prev_page=u.table.page(),u.reload()}catch{console.log("cant find the table")}})}}).fail(function(o){console.log(o.responseJSON.status),m.notify("Not Added! reason: "+o.responseJSON.status,{type:"warning"})})};var a=document.createElement("center");a.append(s),$("#myModal").find(".modal-body").html(a),$("#myModal").modal("show")}};window.phxApp=m;class tg{constructor(){this.init()}init(){$("html").attr("data-bs-theme",localStorage.getItem("data-bs-theme")||"light"),window.showRP=!0,window.includeShippingTax=!0,window.toggleMcart=!1,this.initializeApps(),_.restoreCart(),_.restoreCart(!0),$(document).on("click","a.navi",function(t){m.show(),t.preventDefault(),setTimeout(()=>{$(this).attr("href").includes("#")||m.navigateTo($(this).attr("href"))},200)}),window.addEventListener("popstate",t=>{try{history.state!=null?(window.back=!0,window.parsePage=!0,m.navigateTo(history.state.route)):(m.notify("Can't go back"),m.navigateTo("/home"))}catch(e){console.log("Navigation error:",e)}},!0),this.initializeTranslation(),this.loadCountries(),this.addRoutes(),m.navigateTo()}initializeApps(){window.phoenixModel=Ks,window.phoenixModels=[],window.phxApp=m,window.location.hostname==="localhost"&&(window.commerceApp=_,window.memberApp=L)}initializeTranslation(){let t="v2",e="";function r(s){return s==="Thailand"?"th":s==="Vietnam"?"vn":s==="China"?"cn":"v2"}try{localStorage.region!=null&&(t=r(localStorage.region)),e=m.api("translation",{lang:t})}catch(s){console.error("Error fetching translation:",s)}$.fn.extend({customHtml:async function(s){console.log("customHtml parsing..");var i=Object.keys(e),a=i.reduce((o,l)=>{var u=new RegExp(l,"g");return o.replace(u,e[l])},s);return this.html(a)},customAppend:async function(s){var i=Object.keys(e),a=i.reduce((o,l)=>{var u=new RegExp(l,"g");return o.replace(u,e[l])},s);return this.append(a)}})}loadCountries(){m.api("countries",{},null,t=>{window.countries=t,m.countries_=t})}addRoutes(){[{html:"crypto_wallet.html",title:"Crypto Wallet ",route:"/crypto_wallet"},{html:"secondary_buy.html",title:"Secondary Buy ",route:"/secondary_buy"},{html:"ledger_entries.html",title:"Ledger Entries ",route:"/ledger_entries"},{html:"shipping_management.html",title:"Shipping Management ",route:"/shipping_management"},{html:"override.html",title:"Override Login ",route:"/admin_override",public:!0,skipNav:!0},{html:"commissions.html",title:"Commissions ",route:"/commissions"},{html:"merchant_withdrawal.html",title:"Merchant Withdrawal ",route:"/merchant_withdrawals"},{html:"merchant_application.html",title:"Merchant Application ",route:"/merchant_application"},{html:"merchant_profile.html",title:"Merchant Profile ",route:"/merchant_profile"},{html:"merchant_checkout_register.html",title:"Merchant Checkout ",route:"/merchant_checkout_register"},{html:"merchant_checkout.html",title:"Merchant Checkout ",route:"/merchant_checkout"},{html:"merchant_checkout_bd.html",title:"Merchant Checkout Back Date",route:"/merchant_checkout_bd"},{html:"merchant_purchases.html",title:"Merchant Purchases",route:"/merchant_purchases"},{html:"merchant_sales.html",title:"Merchant Sales",route:"/merchant_sales"},{html:"merchant_mall.html",title:"Merchant Mall",route:"/merchant_mall"},{html:"merchant_products.html",title:"Merchant Products",route:"/merchant_products"},{html:"mproduct.html",title:"Merchant Product",route:"/merchant_products/:id/:name"},{html:"refund_policy.html",title:"Refund Policy ",route:"/refund_policy",public:!0,skipNav:!0},{html:"terms_condition.html",title:"Terms Condition ",route:"/terms_condition",public:!0,skipNav:!0},{html:"merchant_code_register.html",title:"Register ",route:"/merchant_code_register/:share_code",public:!0,skipNav:!0},{html:"code_register.html",title:"Register ",route:"/code_register/:share_code",public:!0,skipNav:!0},{html:"share_link.html",title:"Share Link ",route:"/share_link"},{html:"register_wallet.html",title:"Register Wallet ",route:"/register_wallet"},{html:"bonus_wallet.html",title:"Bonus Wallet ",route:"/bonus_wallet"},{html:"new_topup.html",title:"Register Point Topup ",route:"/topup_register_point"},{html:"upgrade.html",title:"Upgrade ",route:"/upgrade"},{html:"redeem.html",title:"Redeem ",route:"/redeem"},{html:"withdrawal.html",title:"Withdrawal ",route:"/withdrawals"},{html:"reward_details.html",title:"Reward Details ",route:"/reward_details/:name/:month/:year"},{html:"sales_detail.html",title:"Sales Details",route:"/sales/:id"},{html:"sales.html",title:"Sales History",route:"/sales"},{html:"pay_instalment.html",title:"Pay Instalment",route:"/pay_instalment"},{html:"instalment_payments.html",title:"Instalment Payments",route:"/instalment_payments"},{html:"wallet_transaction.html",title:"Transactions ",route:"/wallets/:id"},{html:"product.html",title:"Product",route:"/products/:id/:name"},{html:"topup_card_register.html",title:"Topup Card Register",route:"/topup_card_register"},{html:"register.html",title:"Register",route:"/register"},{html:"logout.html",title:"Logout",route:"/logout",public:!0},{html:"thank_you.html",title:"Login",route:"/thank_you",public:!0},{html:"login.html",title:"Login",route:"/login",public:!0},{html:"profile.html",title:"Profile",route:"/profile"},{html:"placement.html",title:"Placement",route:"/placement"},{html:"placement_full.html",title:"Placement(Full)",route:"/placement_full"},{html:"referal.html",title:"Referal",route:"/referal"},{html:"gs_summary.html",title:"Group Sales",route:"/group_sales"}].forEach((e,r)=>{m.route_names.push(e)})}}document.addEventListener("DOMContentLoaded",()=>{new tg});
