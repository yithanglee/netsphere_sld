var hd=Object.defineProperty;var ol=n=>{throw TypeError(n)};var pd=(n,t,e)=>t in n?hd(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var _=(n,t,e)=>pd(n,typeof t!="symbol"?t+"":t,e),$a=(n,t,e)=>t.has(n)||ol("Cannot "+e);var f=(n,t,e)=>($a(n,t,"read from private field"),e?e.call(n):t.get(n)),I=(n,t,e)=>t.has(n)?ol("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,e),b=(n,t,e,s)=>($a(n,t,"write to private field"),s?s.call(n,e):t.set(n,e),e),S=(n,t,e)=>($a(n,t,"access private method"),e);var Vr=(n,t,e,s)=>({set _(r){b(n,t,r,e)},get _(){return f(n,t,s)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function e(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=e(r);fetch(r.href,i)}})();let ut={datetime(n,t,e){var s=e.columns.filter((r,i)=>r.formatDateTime==!0);s.forEach((r,i)=>{var a=r.offset,o=0;o=e.columns.findIndex((y,g)=>y.data==r.data);try{var l=t[r.data];l=Date.parse(l);var u=new Date(l);u.setTime(u.getTime()+(8+a)*60*60*1e3);var d=u.toGMTString().split(",")[1].split(" ").splice(0,4).join(" "),h=u.toLocaleTimeString();$("td:eq("+o+")",n).html('<span class="text-muted fw-bold">'+d+`</span>

          <small class="fw-bold text-primary">
              `+h+`          
          </small>
             `)}catch(y){console.log(y)}})},custom(n,t,e){var s=e.columns.filter((r,i)=>r.customized==!0);s.forEach((r,i)=>{var a=0;a=e.columns.findIndex((o,l)=>o.data==r.data&&o.xdata==r.xdata);try{$("td:eq("+a+")",n).html(r.xdata.formatFn(t,parseInt(n.getAttribute("aria-index"))))}catch(o){console.log(o)}})},img(n,t,e){var s=e.columns.filter((r,i)=>r.showImg==!0);s.forEach((r,i)=>{var a=0;a=e.columns.findIndex((l,u)=>l.data==r.data);try{var o;o=`

        <div style="

background-size: contain !important; background-image: url('`+t[r.data]+`') !important; 
        height: 80px;width: 80px;
background-position: center;
background-repeat: no-repeat;
" class="text-center 
        bg-white d-flex align-items-center justify-content-center text-white">
        </div>`,$("td:eq("+a+")",n).html(o)}catch{}})},progress(n,t,e){var s=e.columns.filter((r,i)=>r.showProgress==!0);s.forEach((r,i)=>{var a=0;a=e.columns.findIndex((y,g)=>y.data==r.data);try{var o=t[r.data],l=r.progress,u=[],d=1/l.length*100,h=l.findIndex((y,g)=>y==o);l.forEach((y,g)=>{if(h>=g)var w='<div class="progress-bar bg-warning " role="progressbar" style="width: '+d+`%;" ></div>
              `;else var w='<div class="progress-bar " role="progressbar" style="width: '+d+`%;" ></div>
              `;u.push(w)}),p=`
          <small>`+o+`</small>
          <div class="progress gap-1">
          `+u.join("")+`
          </div>
        `,$("td:eq("+a+")",n).html(p)}catch{}})},subtitle(n,t,e){var s=e.columns.filter((r,i)=>r.showSubtitle==!0);s.forEach((r,i)=>{var a=0;a=e.columns.findIndex((d,h)=>d.data==r.data);var o=0;o=e.columns.findIndex((d,h)=>d.data==r.subtitle);try{var l=t[r.data],u=t[r.subtitle];e.columns[a].showChild&&(l=t[r.xdata.child][r.xdata.data]),e.columns[a].formatFloat&&(l=currencyFormat(l)),e.columns[o].formatFloat&&(u=currencyFormat(u)),e.columns[o].showBoolean&&(t[r.subtitle]==!0?u='<i class="text-success fa fa-check"></i>':u='<i class="text-danger fa fa-times"></i>'),$("td:eq("+a+")",n).html('<span class="pe-2">'+l+`</span>
          <small class="text-muted text-truncate" style="max-width: 24vw;display: block;">`+u+"</small>")}catch{}})},bool(n,t,e){var s=e.columns.filter((r,i)=>r.showBoolean==!0);s.forEach((r,i)=>{var a=0;a=e.columns.findIndex((l,u)=>l.data==r.data);try{var o;t[r.data]==!0?o='<i class="text-success fa fa-check"></i>':o='<i class="text-danger fa fa-times"></i>',$("td:eq("+a+")",n).html(o)}catch{}})},json(n,t,e){var s=e.columns.filter((r,i)=>r.showJson==!0);s.forEach((r,i)=>{var a=0;a=e.columns.findIndex((o,l)=>o.data==r.data);try{$("td:eq("+a+")",n).html(`<div aria-data='' class="jsv`+e.makeid.id+'" id="'+r.data+t.id+'"></div>')}catch{}})},child(n,t,e){var s=e.columns.filter((r,i)=>r.showChild==!0);s.forEach((r,i)=>{var a=0;a=e.columns.findIndex((l,u)=>l.data==r.data&&l.xdata==r.xdata);try{if($("td:eq("+a+")",n).html(t[r.xdata.child][r.xdata.data]),r.xdata.showImg)try{if(console.log("attemp to show img..."),t[r.xdata.child][0]!=null){var o;o=`
              <div style="background-size: cover !important; background-image: url('`+t[r.xdata.child][0][r.xdata.data]+`') !important; 
              height: 80px;width: 80px" class="rounded-circle text-center 
              bg-primary d-flex align-items-center justify-content-center text-white">
              </div>`,$("td:eq("+a+")",n).html(o)}}catch{}r.xdata.formatFloat&&$("td:eq("+a+")",n).html(currencyFormatdtdata[r.xdata.child][r.xdata.data])}catch{}})},float(n,t,e){var s=e.columns.filter((r,i)=>r.formatFloat==!0);s.forEach((r,i)=>{var a=0;a=e.columns.findIndex((o,l)=>o.data==r.data);try{$("td:eq("+a+")",n).html(currencyFormat(t[r.data]))}catch{}})},dataFormatter(n,t){var e=null,s=["formatFloat","showBoolean","formatDateTime","showImg","showChild"],r=-1,i=Object.keys(t);switch(s.forEach((h,y)=>{i.indexOf(h)>0&&(r=y)}),console.log(s[r]),s[r]){case"formatFloat":e=this.currencyFormat(n[t.data]);break;case"showImg":try{console.log("simmg"),e=`
        <div style="background-size: cover !important; background-image: url('`+n[t.data]+`') !important; 
        height: 80px;width: 80px" class="rounded-circle text-center 
        bg-primary d-flex align-items-center justify-content-center text-white">
        </div>`}catch(h){console.log(h)}break;case"showChild":try{if(e=n[t.xdata.child][t.xdata.data],t.xdata.showImg)try{console.log("attemp to show img..."),n[t.xdata.child][0]!=null&&(e=`
                <div style="background-size: cover !important; background-image: url('`+n[t.xdata.child][0][t.xdata.data]+`') !important; 
                height: 80px;width: 80px" class="rounded-circle text-center 
                bg-primary d-flex align-items-center justify-content-center text-white">
                </div>`)}catch{}t.xdata.formatFloat&&(e=currencyFormat(n[t.xdata.child][t.xdata.data]))}catch{}break;case"showBoolean":try{var a;n[t.data]==!0?a='<i class="text-success fa fa-check"></i>':a='<i class="text-danger fa fa-times"></i>',e=a}catch{}break;case"formatDateTime":var o=n[t.data];o=Date.parse(o);var l=new Date(o);l.setTime(l.getTime()+8*60*60*1e3);var u=l.toGMTString().split(",")[1].split(" ").splice(0,4).join(" "),d=l.toLocaleTimeString();e='<span class="text-muted fw-bold">'+u+`</span>

              <small class="fw-bold text-primary">
                  `+d+`          
              </small>
                 `;break;default:e=n[t.data]}return e==null&&(e=n[t.data]),e},formatDate(){$(" .format-int, .format-integer").each((n,t)=>{var e="";$(t).html().split(" ").includes("DR")&&(e="DR"),$(t).html().split(" ").includes("CR")&&(e="CR");var s=$(t).html();if(parseFloat(s)>0){var r='<span class="text-end" >'+e+this.currencyFormat(parseFloat(s)).replace(".00","")+"</span>";$(t).html(r)}else parseFloat(s)==0?$(t).html("0.00"):$(t).html(s)}),$(".format_float, .format-float").each((n,t)=>{var e="";$(t).html().split(" ").includes("DR")&&(e="DR"),$(t).html().split(" ").includes("CR")&&(e="CR"),$(t).html().includes("-")&&(e="-");var s=$(t).html().replace("-","");if(parseFloat(s)>0){var r='<span class="text-end" >'+e+this.currencyFormat(parseFloat(s))+" </span>";$(t).html(r)}else parseFloat(s)==0?$(t).html("0.00"):$(t).html(s)}),$(".format_date").each((n,t)=>{var e=$(t).html();if(Date.parse(e)>0){var s=new Date(e),r;s.getDate().toString().length>1?r=s.getDate():r="0"+s.getDate();var i;(s.getMonth()+1).toString().length>1?i=s.getMonth()+1:i="0"+(s.getMonth()+1),$(t).html("<b>"+r+"-"+i+"-"+s.getFullYear()+"</b>")}else $(t).html(e)}),$(".format_datetime").each((n,t)=>{var e;$(t).attr("aria-offset")!=null&&parseInt($(t).attr("aria-offset"));var s=$(t).html();s=Date.parse($(t).html().replace(" ",""));var r=new Date(s);r.setTime(r.getTime()+8*60*60*1e3);try{e=r.toGMTString().split(",")[1].split(" ").splice(1,3).join(" ")}catch(a){console.log(a)}var i=r.toLocaleTimeString();$(t).html(""+e+" "+i)}),$(".is_posted").each((n,t)=>{var e=$(t).html();e=="true"&&$(t).html(`
                <i class="text-success fa fa-check"></i>
                `),e=="false"&&$(t).html(`
                <i class="text-danger fa fa-exclamation-circle"></i>
                `)})},currencyFormat(n){return n==null?"0.00":n.toFixed(2).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")},capitalize(n){return n.replace(/^\w/,t=>t.toUpperCase())}},F={user:{},ranks:[],restoreUser(){this.ranks=m.api("get_ranks",{}),this.user=JSON.parse(localStorage.getItem("user")),this.user!=null&&($("[aria-label='login']").addClass("d-none"),$("[aria-label='logout']").removeClass("d-none")),$("form#register")&&this.user!=null&&($("input[name='user[sales_person_id]']").val(this.user.id),$("input[name='user[username]']").val(""))},override(n){m.form($(n).closest("form"),"override",t=>{F.user=t,F.save(t),$("[aria-label='login']").addClass("d-none"),$("[aria-label='logout']").removeClass("d-none"),window.location="/home"})},extendUser(){m.api("extend_user",{token:this.user.token},null,n=>{console.log(n),n.status=="ok"&&(F.user=n.res,F.save(n.res))})},save(n){localStorage.setItem("user",JSON.stringify(n))},merchantCheckout(n){$(n).closest("form"),m.chosen_country_id_!=null&&$("input[name='user[country_id]']").val(m.chosen_country_id_.id),m.validateForm("form",()=>{console.info("validating form..."),m.form($(n).closest("form"),"merchant_checkout",t=>{console.info("after redeem form..."),console.log(t),t!=null?(console.log("e user"),console.log(t.user),C.emptyCart_(!0),m.navigateTo(t.payment_url)):(C.emptyCart_(!0),m.navigateTo("/profile"))})})},redeem(n){$(n).closest("form"),m.chosen_country_id_!=null&&$("input[name='user[country_id]']").val(m.chosen_country_id_.id),m.validateForm("form",()=>{console.info("validating form..."),m.form($(n).closest("form"),"redeem",t=>{console.info("after redeem form..."),console.log(t),t!=null?(console.log("e user"),console.log(t.user),C.emptyCart_(),m.navigateTo(t.payment_url)):(C.emptyCart_(),m.navigateTo("/profile"))})})},upgrade(n){$(n).closest("form"),$("form#register")&&(this.user!=null&&$("input[name='user[sales_person_id]']").val(this.user.id),m.chosen_country_id_!=null&&$("input[name='user[country_id]']").val(m.chosen_country_id_.id)),m.validateForm("form",()=>{console.info("validating form..."),m.form($(n).closest("form"),"upgrade",t=>{console.info("after upgrade form..."),console.log(t),t!=null?t.billplz_code!=null?(C.emptyCart_(),window.location=t.payment_url):($("input[name='user[instalment]']").val()==null&&m.notify("Please relogin to update rank."),C.emptyCart_(),C.components.userProfile(),m.navigateTo(t.payment_url)):(C.emptyCart_(),m.navigateTo("/profile"))})})},linkRegister(n){$("form#register")&&(this.user!=null&&$("input[name='user[sales_person_id]']").val(this.user.id),$("input[name='user[share_code]']").val(pageParams.share_code),m.chosen_country_id_!=null&&(console.log(m.chosen_country_id_),$("input[name='user[country_id]']").val(m.chosen_country_id_.id))),m.validateForm("form",()=>{console.log("validating form..."),m.form($(n).closest("form"),"link_register",t=>{console.log("after register form..."),console.log(t),t!=null?(C.emptyCart_(),F.user=t,F.save(t),$("[aria-label='login']").addClass("d-none"),$("[aria-label='logout']").removeClass("d-none"),m.navigateTo("/home")):(C.emptyCart_(),m.navigateTo("/login"))})})},register(n){$("form#register")&&(this.user!=null&&$("input[name='user[sales_person_id]']").val(this.user.id),m.chosen_country_id_!=null&&(console.log(m.chosen_country_id_),$("input[name='user[country_id]']").val(m.chosen_country_id_.id))),m.validateForm("form",()=>{console.log("validating form..."),m.form($(n).closest("form"),"register",t=>{console.log("after register form..."),console.log(t),t!=null?(C.emptyCart_(),window.stockistTarget=null,t.billplz_code!=null?window.location=t.payment_url:m.navigateTo(t.payment_url)):(C.emptyCart_(),m.navigateTo("/register"))})})},logout(){console.log("logging out..."),localStorage.removeItem("user"),$("[aria-label='login']").removeClass("d-none"),$("[aria-label='logout']").addClass("d-none"),m.notify("Log out!"),document.cookie="_commerce_front_key=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",setTimeout(()=>{location="/login"},1e3)},updateUser(n){F.user=n,F.save(n)},login(n){$(n).closest("form"),m.form($(n).closest("form"),"login",t=>{F.user=t,F.save(t),$("[aria-label='login']").addClass("d-none"),$("[aria-label='logout']").removeClass("d-none"),m.navigateTo("/home")})}};window.memberApp=F;class Kr{constructor(t){var e={moduleName:"User",link:"users",tableSelector:"#users",data:{},allData:[],buttons:[],tableButtons:[],table:null,columns:[],customCols:null,aliasName:null,onDrawFn:null,makeid:{},xcard:null},s=Object.keys(e);s.forEach((a,o)=>{this[a]=e[a]}),s.forEach((a,o)=>{t[a]!=null&&(this[a]=t[a])}),this.data;var r=this;function i(a){$(a.tableSelector).closest(".dataTables_wrapper").find(".grid_view .xc").each((o,l)=>{var u=l.data;if(console.log("xcard.."),a.xcard!=null){var d=a.xcard(u);$(l).prepend(d)}else{var h=[];a.columns.forEach((g,w)=>{var v=`
              <div class="d-flex flex-column pb-2" role="grid_data" aria-label="`+g.label+`">
                <label class="fw-light font-sm text-secondary">`+g.label+`</label>
                <div>`+this.dataFormatter(u,g)+`</div>
              </div>`;h.push(v)});var y=document.createElement("div");y.className=" card p-2",y.innerHTML=h.join(""),$(l).prepend(y)}})}this.load=function(a,o){a!=null?(this.tableSelector="#"+a,this.makeid={id:a,dom:o},m.Page.createTable(a,o)):m.Page.createTable(this.makeid.id,this.makeid.dom),m.populateTable(this),this.table.on("draw",()=>{var l=`
          <li>
            <a class="dropdown-item" href="javascript:void(0);" onclick="toggleView('`+this.tableSelector+`')">
              <i class="me-3 fa fa-th-large"></i>Grid View
            </a>
          </li>
        `,u=`
          <div class="d-flex align-items-center">
            <div class="btn btn-sm btn-outline-primary me-3" href="javascript:void(0);" data-href="" data-module="add_new" data-ref="">
              <i class="me-3 fa fa-plus"></i>New
            </div>
            <div class="dropdown morphing scale-left ">
              <a href="#" class="more-icon dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                <i class="fa fa-ellipsis-h"></i>
              </a>
              <ul class="dropdown-menu dropdown-animation dropdown-menu-end shadow border-0">
                ${l}
              </ul>
            </div>
          </div>
        `;$(this.tableSelector+"_wrapper .dataTables_filter").before(u),m.populateGridView(r),i(r)})},this.dataFormatter=function(a,o){const l=a[o.data];if(!l)return"-";switch(o.type){case"date":return new Date(l).toLocaleDateString();case"datetime":return new Date(l).toLocaleString();case"currency":return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(l);case"boolean":return l?"Yes":"No";case"image":return`<img src="${l}" alt="" style="max-width: 50px; max-height: 50px;">`;default:return l}},this.refresh=function(){this.table&&this.table.ajax.reload()},this.addRow=function(a){this.allData.push(a),this.table&&this.table.row.add(a).draw()},this.updateRow=function(a,o){this.allData[a]=o,this.table&&this.table.row(a).data(o).draw()},this.deleteRow=function(a){this.allData.splice(a,1),this.table&&this.table.row(a).remove().draw()}}}const md="6.15.0";function gd(n,t,e){const s=t.split("|").map(i=>i.trim());for(let i=0;i<s.length;i++)switch(t){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof n===t)return}const r=new Error(`invalid value for type ${t}`);throw r.code="INVALID_ARGUMENT",r.argument=`value.${e}`,r.value=n,r}async function Rt(n){const t=Object.keys(n);return(await Promise.all(t.map(s=>Promise.resolve(n[s])))).reduce((s,r,i)=>(s[t[i]]=r,s),{})}function V(n,t,e){for(let s in t){let r=t[s];const i=e?e[s]:null;i&&gd(r,i,s),Object.defineProperty(n,s,{enumerable:!0,value:r,writable:!1})}}function Ls(n,t){if(n==null)return"null";if(t==null&&(t=new Set),typeof n=="object"){if(t.has(n))return"[Circular]";t.add(n)}if(Array.isArray(n))return"[ "+n.map(e=>Ls(e,t)).join(", ")+" ]";if(n instanceof Uint8Array){const e="0123456789abcdef";let s="0x";for(let r=0;r<n.length;r++)s+=e[n[r]>>4],s+=e[n[r]&15];return s}if(typeof n=="object"&&typeof n.toJSON=="function")return Ls(n.toJSON(),t);switch(typeof n){case"boolean":case"number":case"symbol":return n.toString();case"bigint":return BigInt(n).toString();case"string":return JSON.stringify(n);case"object":{const e=Object.keys(n);return e.sort(),"{ "+e.map(s=>`${Ls(s,t)}: ${Ls(n[s],t)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function Ct(n,t){return n&&n.code===t}function Lo(n){return Ct(n,"CALL_EXCEPTION")}function dt(n,t,e){let s=n;{const i=[];if(e){if("message"in e||"code"in e||"name"in e)throw new Error(`value will overwrite populated values: ${Ls(e)}`);for(const a in e){if(a==="shortMessage")continue;const o=e[a];i.push(a+"="+Ls(o))}}i.push(`code=${t}`),i.push(`version=${md}`),i.length&&(n+=" ("+i.join(", ")+")")}let r;switch(t){case"INVALID_ARGUMENT":r=new TypeError(n);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":r=new RangeError(n);break;default:r=new Error(n)}return V(r,{code:t}),e&&Object.assign(r,e),r.shortMessage==null&&V(r,{shortMessage:s}),r}function N(n,t,e,s){if(!n)throw dt(t,e,s)}function x(n,t,e,s){N(n,t,"INVALID_ARGUMENT",{argument:e,value:s})}function Ac(n,t,e){e==null&&(e=""),e&&(e=": "+e),N(n>=t,"missing argument"+e,"MISSING_ARGUMENT",{count:n,expectedCount:t}),N(n<=t,"too many arguments"+e,"UNEXPECTED_ARGUMENT",{count:n,expectedCount:t})}["NFD","NFC","NFKD","NFKC"].reduce((n,t)=>{try{if("test".normalize(t)!=="test")throw new Error("bad");if(t==="NFD"&&"é".normalize("NFD")!=="é")throw new Error("broken");n.push(t)}catch{}return n},[]);function Ei(n,t,e){if(e==null&&(e=""),n!==t){let s=e,r="new";e&&(s+=".",r+=" "+e),N(!1,`private constructor; use ${s}from* methods`,"UNSUPPORTED_OPERATION",{operation:r})}}function xc(n,t,e){if(n instanceof Uint8Array)return e?new Uint8Array(n):n;if(typeof n=="string"&&n.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const s=new Uint8Array((n.length-2)/2);let r=2;for(let i=0;i<s.length;i++)s[i]=parseInt(n.substring(r,r+2),16),r+=2;return s}x(!1,"invalid BytesLike value",t||"value",n)}function q(n,t){return xc(n,t,!1)}function Ot(n,t){return xc(n,t,!0)}function lt(n,t){return!(typeof n!="string"||!n.match(/^0x[0-9A-Fa-f]*$/)||typeof t=="number"&&n.length!==2+2*t||t===!0&&n.length%2!==0)}function Do(n){return lt(n,!0)||n instanceof Uint8Array}const ll="0123456789abcdef";function U(n){const t=q(n);let e="0x";for(let s=0;s<t.length;s++){const r=t[s];e+=ll[(r&240)>>4]+ll[r&15]}return e}function pt(n){return"0x"+n.map(t=>U(t).substring(2)).join("")}function Gs(n){return lt(n,!0)?(n.length-2)/2:q(n).length}function ht(n,t,e){const s=q(n);return e!=null&&e>s.length&&N(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:s,length:s.length,offset:e}),U(s.slice(t??0,e??s.length))}function kc(n,t,e){const s=q(n);N(t>=s.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(s),length:t,offset:t+1});const r=new Uint8Array(t);return r.fill(0),e?r.set(s,t-s.length):r.set(s,0),U(r)}function en(n,t){return kc(n,t,!0)}function yd(n,t){return kc(n,t,!1)}const ya=BigInt(0),be=BigInt(1),Ds=9007199254740991;function Zi(n,t){const e=ba(n,"value"),s=BigInt(K(t,"width"));if(N(e>>s===ya,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:n}),e>>s-be){const r=(be<<s)-be;return-((~e&r)+be)}return e}function _c(n,t){let e=H(n,"value");const s=BigInt(K(t,"width")),r=be<<s-be;if(e<ya){e=-e,N(e<=r,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:n});const i=(be<<s)-be;return(~e&i)+be}else N(e<r,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:n});return e}function Jn(n,t){const e=ba(n,"value"),s=BigInt(K(t,"bits"));return e&(be<<s)-be}function H(n,t){switch(typeof n){case"bigint":return n;case"number":return x(Number.isInteger(n),"underflow",t||"value",n),x(n>=-Ds&&n<=Ds,"overflow",t||"value",n),BigInt(n);case"string":try{if(n==="")throw new Error("empty string");return n[0]==="-"&&n[1]!=="-"?-BigInt(n.substring(1)):BigInt(n)}catch(e){x(!1,`invalid BigNumberish string: ${e.message}`,t||"value",n)}}x(!1,"invalid BigNumberish value",t||"value",n)}function ba(n,t){const e=H(n,t);return N(e>=ya,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:n}),e}const cl="0123456789abcdef";function wa(n){if(n instanceof Uint8Array){let t="0x0";for(const e of n)t+=cl[e>>4],t+=cl[e&15];return BigInt(t)}return H(n)}function K(n,t){switch(typeof n){case"bigint":return x(n>=-Ds&&n<=Ds,"overflow",t||"value",n),Number(n);case"number":return x(Number.isInteger(n),"underflow",t||"value",n),x(n>=-Ds&&n<=Ds,"overflow",t||"value",n),n;case"string":try{if(n==="")throw new Error("empty string");return K(BigInt(n),t)}catch(e){x(!1,`invalid numeric string: ${e.message}`,t||"value",n)}}x(!1,"invalid numeric value",t||"value",n)}function bd(n){return K(wa(n))}function Sn(n,t){let s=ba(n,"value").toString(16);if(t==null)s.length%2&&(s="0"+s);else{const r=K(t,"width");for(N(r*2>=s.length,`value exceeds width (${r} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:n});s.length<r*2;)s="0"+s}return"0x"+s}function bt(n){const t=ba(n,"value");if(t===ya)return new Uint8Array([]);let e=t.toString(16);e.length%2&&(e="0"+e);const s=new Uint8Array(e.length/2);for(let r=0;r<s.length;r++){const i=r*2;s[r]=parseInt(e.substring(i,i+2),16)}return s}function ye(n){let t=U(Do(n)?n:bt(n)).substring(2);for(;t.startsWith("0");)t=t.substring(1);return t===""&&(t="0"),"0x"+t}const ul="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const dl=BigInt(58);function wd(n){const t=q(n);let e=wa(t),s="";for(;e;)s=ul[Number(e%dl)]+s,e/=dl;for(let r=0;r<t.length&&!t[r];r++)s=ul[0]+s;return s}function vd(n){n=atob(n);const t=new Uint8Array(n.length);for(let e=0;e<n.length;e++)t[e]=n.charCodeAt(e);return q(t)}function Ad(n){const t=q(n);let e="";for(let s=0;s<t.length;s++)e+=String.fromCharCode(t[s]);return btoa(e)}var Js;class Ec{constructor(t,e,s){_(this,"filter");_(this,"emitter");I(this,Js);b(this,Js,e),V(this,{emitter:t,filter:s})}async removeListener(){f(this,Js)!=null&&await this.emitter.off(this.filter,f(this,Js))}}Js=new WeakMap;function xd(n,t,e,s,r){x(!1,`invalid codepoint at offset ${t}; ${n}`,"bytes",e)}function Cc(n,t,e,s,r){if(n==="BAD_PREFIX"||n==="UNEXPECTED_CONTINUE"){let i=0;for(let a=t+1;a<e.length&&e[a]>>6===2;a++)i++;return i}return n==="OVERRUN"?e.length-t-1:0}function kd(n,t,e,s,r){return n==="OVERLONG"?(x(typeof r=="number","invalid bad code point for replacement","badCodepoint",r),s.push(r),0):(s.push(65533),Cc(n,t,e))}const _d=Object.freeze({error:xd,ignore:Cc,replace:kd});function Ed(n,t){t==null&&(t=_d.error);const e=q(n,"bytes"),s=[];let r=0;for(;r<e.length;){const i=e[r++];if(!(i>>7)){s.push(i);continue}let a=null,o=null;if((i&224)===192)a=1,o=127;else if((i&240)===224)a=2,o=2047;else if((i&248)===240)a=3,o=65535;else{(i&192)===128?r+=t("UNEXPECTED_CONTINUE",r-1,e,s):r+=t("BAD_PREFIX",r-1,e,s);continue}if(r-1+a>=e.length){r+=t("OVERRUN",r-1,e,s);continue}let l=i&(1<<8-a-1)-1;for(let u=0;u<a;u++){let d=e[r];if((d&192)!=128){r+=t("MISSING_CONTINUE",r,e,s),l=null;break}l=l<<6|d&63,r++}if(l!==null){if(l>1114111){r+=t("OUT_OF_RANGE",r-1-a,e,s,l);continue}if(l>=55296&&l<=57343){r+=t("UTF16_SURROGATE",r-1-a,e,s,l);continue}if(l<=o){r+=t("OVERLONG",r-1-a,e,s,l);continue}s.push(l)}}return s}function Xe(n,t){x(typeof n=="string","invalid string value","str",n);let e=[];for(let s=0;s<n.length;s++){const r=n.charCodeAt(s);if(r<128)e.push(r);else if(r<2048)e.push(r>>6|192),e.push(r&63|128);else if((r&64512)==55296){s++;const i=n.charCodeAt(s);x(s<n.length&&(i&64512)===56320,"invalid surrogate pair","str",n);const a=65536+((r&1023)<<10)+(i&1023);e.push(a>>18|240),e.push(a>>12&63|128),e.push(a>>6&63|128),e.push(a&63|128)}else e.push(r>>12|224),e.push(r>>6&63|128),e.push(r&63|128)}return new Uint8Array(e)}function Cd(n){return n.map(t=>t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10&1023)+55296,(t&1023)+56320))).join("")}function Yi(n,t){return Cd(Ed(n,t))}function Pc(n){async function t(e,s){N(s==null||!s.cancelled,"request cancelled before sending","CANCELLED");const r=e.url.split(":")[0].toLowerCase();N(r==="http"||r==="https",`unsupported protocol ${r}`,"UNSUPPORTED_OPERATION",{info:{protocol:r},operation:"request"}),N(r==="https"||!e.credentials||e.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let i=null;const a=new AbortController,o=setTimeout(()=>{i=dt("request timeout","TIMEOUT"),a.abort()},e.timeout);s&&s.addListener(()=>{i=dt("request cancelled","CANCELLED"),a.abort()});const l=Object.assign({},n,{method:e.method,headers:new Headers(Array.from(e)),body:e.body||void 0,signal:a.signal});let u;try{u=await fetch(e.url,l)}catch(g){throw clearTimeout(o),i||g}clearTimeout(o);const d={};u.headers.forEach((g,w)=>{d[w.toLowerCase()]=g});const h=await u.arrayBuffer(),y=h==null?null:new Uint8Array(h);return{statusCode:u.status,statusMessage:u.statusText,headers:d,body:y}}return t}const Pd=12,Id=250;let fl=Pc();const Td=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),Nd=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let Ra=!1;async function Ic(n,t){try{const e=n.match(Td);if(!e)throw new Error("invalid data");return new Bn(200,"OK",{"content-type":e[1]||"text/plain"},e[2]?vd(e[3]):Sd(e[3]))}catch{return new Bn(599,"BAD REQUEST (invalid data: URI)",{},null,new $n(n))}}function Tc(n){async function t(e,s){try{const r=e.match(Nd);if(!r)throw new Error("invalid link");return new $n(`${n}${r[2]}`)}catch{return new Bn(599,"BAD REQUEST (invalid IPFS URI)",{},null,new $n(e))}}return t}const Bi={data:Ic,ipfs:Tc("https://gateway.ipfs.io/ipfs/")},Nc=new WeakMap;var Yn,pn;class Bd{constructor(t){I(this,Yn);I(this,pn);b(this,Yn,[]),b(this,pn,!1),Nc.set(t,()=>{if(!f(this,pn)){b(this,pn,!0);for(const e of f(this,Yn))setTimeout(()=>{e()},0);b(this,Yn,[])}})}addListener(t){N(!f(this,pn),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),f(this,Yn).push(t)}get cancelled(){return f(this,pn)}checkSignal(){N(!this.cancelled,"cancelled","CANCELLED",{})}}Yn=new WeakMap,pn=new WeakMap;function Si(n){if(n==null)throw new Error("missing signal; should not happen");return n.checkSignal(),n}var Ks,qs,de,Me,Zs,Ys,At,qt,He,Wn,Xn,ts,ke,fe,mn,es,qr;const ua=class ua{constructor(t){I(this,es);I(this,Ks);I(this,qs);I(this,de);I(this,Me);I(this,Zs);I(this,Ys);I(this,At);I(this,qt);I(this,He);I(this,Wn);I(this,Xn);I(this,ts);I(this,ke);I(this,fe);I(this,mn);b(this,Ys,String(t)),b(this,Ks,!1),b(this,qs,!0),b(this,de,{}),b(this,Me,""),b(this,Zs,3e5),b(this,fe,{slotInterval:Id,maxAttempts:Pd}),b(this,mn,null)}get url(){return f(this,Ys)}set url(t){b(this,Ys,String(t))}get body(){return f(this,At)==null?null:new Uint8Array(f(this,At))}set body(t){if(t==null)b(this,At,void 0),b(this,qt,void 0);else if(typeof t=="string")b(this,At,Xe(t)),b(this,qt,"text/plain");else if(t instanceof Uint8Array)b(this,At,t),b(this,qt,"application/octet-stream");else if(typeof t=="object")b(this,At,Xe(JSON.stringify(t))),b(this,qt,"application/json");else throw new Error("invalid body")}hasBody(){return f(this,At)!=null}get method(){return f(this,Me)?f(this,Me):this.hasBody()?"POST":"GET"}set method(t){t==null&&(t=""),b(this,Me,String(t).toUpperCase())}get headers(){const t=Object.assign({},f(this,de));return f(this,He)&&(t.authorization=`Basic ${Ad(Xe(f(this,He)))}`),this.allowGzip&&(t["accept-encoding"]="gzip"),t["content-type"]==null&&f(this,qt)&&(t["content-type"]=f(this,qt)),this.body&&(t["content-length"]=String(this.body.length)),t}getHeader(t){return this.headers[t.toLowerCase()]}setHeader(t,e){f(this,de)[String(t).toLowerCase()]=String(e)}clearHeaders(){b(this,de,{})}[Symbol.iterator](){const t=this.headers,e=Object.keys(t);let s=0;return{next:()=>{if(s<e.length){const r=e[s++];return{value:[r,t[r]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return f(this,He)||null}setCredentials(t,e){x(!t.match(/:/),"invalid basic authentication username","username","[REDACTED]"),b(this,He,`${t}:${e}`)}get allowGzip(){return f(this,qs)}set allowGzip(t){b(this,qs,!!t)}get allowInsecureAuthentication(){return!!f(this,Ks)}set allowInsecureAuthentication(t){b(this,Ks,!!t)}get timeout(){return f(this,Zs)}set timeout(t){x(t>=0,"timeout must be non-zero","timeout",t),b(this,Zs,t)}get preflightFunc(){return f(this,Wn)||null}set preflightFunc(t){b(this,Wn,t)}get processFunc(){return f(this,Xn)||null}set processFunc(t){b(this,Xn,t)}get retryFunc(){return f(this,ts)||null}set retryFunc(t){b(this,ts,t)}get getUrlFunc(){return f(this,mn)||fl}set getUrlFunc(t){b(this,mn,t)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${f(this,At)?U(f(this,At)):"null"}>`}setThrottleParams(t){t.slotInterval!=null&&(f(this,fe).slotInterval=t.slotInterval),t.maxAttempts!=null&&(f(this,fe).maxAttempts=t.maxAttempts)}send(){return N(f(this,ke)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),b(this,ke,new Bd(this)),S(this,es,qr).call(this,0,hl()+this.timeout,0,this,new Bn(0,"",{},null,this))}cancel(){N(f(this,ke)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const t=Nc.get(this);if(!t)throw new Error("missing signal; should not happen");t()}redirect(t){const e=this.url.split(":")[0].toLowerCase(),s=t.split(":")[0].toLowerCase();N(this.method==="GET"&&(e!=="https"||s!=="http")&&t.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(t)})`});const r=new ua(t);return r.method="GET",r.allowGzip=this.allowGzip,r.timeout=this.timeout,b(r,de,Object.assign({},f(this,de))),f(this,At)&&b(r,At,new Uint8Array(f(this,At))),b(r,qt,f(this,qt)),r}clone(){const t=new ua(this.url);return b(t,Me,f(this,Me)),f(this,At)&&b(t,At,f(this,At)),b(t,qt,f(this,qt)),b(t,de,Object.assign({},f(this,de))),b(t,He,f(this,He)),this.allowGzip&&(t.allowGzip=!0),t.timeout=this.timeout,this.allowInsecureAuthentication&&(t.allowInsecureAuthentication=!0),b(t,Wn,f(this,Wn)),b(t,Xn,f(this,Xn)),b(t,ts,f(this,ts)),b(t,fe,Object.assign({},f(this,fe))),b(t,mn,f(this,mn)),t}static lockConfig(){Ra=!0}static getGateway(t){return Bi[t.toLowerCase()]||null}static registerGateway(t,e){if(t=t.toLowerCase(),t==="http"||t==="https")throw new Error(`cannot intercept ${t}; use registerGetUrl`);if(Ra)throw new Error("gateways locked");Bi[t]=e}static registerGetUrl(t){if(Ra)throw new Error("gateways locked");fl=t}static createGetUrlFunc(t){return Pc(t)}static createDataGateway(){return Ic}static createIpfsGatewayFunc(t){return Tc(t)}};Ks=new WeakMap,qs=new WeakMap,de=new WeakMap,Me=new WeakMap,Zs=new WeakMap,Ys=new WeakMap,At=new WeakMap,qt=new WeakMap,He=new WeakMap,Wn=new WeakMap,Xn=new WeakMap,ts=new WeakMap,ke=new WeakMap,fe=new WeakMap,mn=new WeakMap,es=new WeakSet,qr=async function(t,e,s,r,i){var d,h,y;if(t>=f(this,fe).maxAttempts)return i.makeServerError("exceeded maximum retry limit");N(hl()<=e,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:r}),s>0&&await $d(s);let a=this.clone();const o=(a.url.split(":")[0]||"").toLowerCase();if(o in Bi){const g=await Bi[o](a.url,Si(f(r,ke)));if(g instanceof Bn){let w=g;if(this.processFunc){Si(f(r,ke));try{w=await this.processFunc(a,w)}catch(v){(v.throttle==null||typeof v.stall!="number")&&w.makeServerError("error in post-processing function",v).assertOk()}}return w}a=g}this.preflightFunc&&(a=await this.preflightFunc(a));const l=await this.getUrlFunc(a,Si(f(r,ke)));let u=new Bn(l.statusCode,l.statusMessage,l.headers,l.body,r);if(u.statusCode===301||u.statusCode===302){try{const g=u.headers.location||"";return S(d=a.redirect(g),es,qr).call(d,t+1,e,0,r,u)}catch{}return u}else if(u.statusCode===429&&(this.retryFunc==null||await this.retryFunc(a,u,t))){const g=u.headers["retry-after"];let w=f(this,fe).slotInterval*Math.trunc(Math.random()*Math.pow(2,t));return typeof g=="string"&&g.match(/^[1-9][0-9]*$/)&&(w=parseInt(g)),S(h=a.clone(),es,qr).call(h,t+1,e,w,r,u)}if(this.processFunc){Si(f(r,ke));try{u=await this.processFunc(a,u)}catch(g){(g.throttle==null||typeof g.stall!="number")&&u.makeServerError("error in post-processing function",g).assertOk();let w=f(this,fe).slotInterval*Math.trunc(Math.random()*Math.pow(2,t));return g.stall>=0&&(w=g.stall),S(y=a.clone(),es,qr).call(y,t+1,e,w,r,u)}}return u};let $n=ua;var hi,pi,mi,Zt,Ws,ns;const el=class el{constructor(t,e,s,r,i){I(this,hi);I(this,pi);I(this,mi);I(this,Zt);I(this,Ws);I(this,ns);b(this,hi,t),b(this,pi,e),b(this,mi,Object.keys(s).reduce((a,o)=>(a[o.toLowerCase()]=String(s[o]),a),{})),b(this,Zt,r==null?null:new Uint8Array(r)),b(this,Ws,i||null),b(this,ns,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${f(this,Zt)?U(f(this,Zt)):"null"}>`}get statusCode(){return f(this,hi)}get statusMessage(){return f(this,pi)}get headers(){return Object.assign({},f(this,mi))}get body(){return f(this,Zt)==null?null:new Uint8Array(f(this,Zt))}get bodyText(){try{return f(this,Zt)==null?"":Yi(f(this,Zt))}catch{N(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{N(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const t=this.headers,e=Object.keys(t);let s=0;return{next:()=>{if(s<e.length){const r=e[s++];return{value:[r,t[r]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(t,e){let s;t?s=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${t})`:(t=`${this.statusCode} ${this.statusMessage}`,s=`CLIENT ESCALATED SERVER ERROR (${t})`);const r=new el(599,s,this.headers,this.body,f(this,Ws)||void 0);return b(r,ns,{message:t,error:e}),r}throwThrottleError(t,e){e==null?e=-1:x(Number.isInteger(e)&&e>=0,"invalid stall timeout","stall",e);const s=new Error(t||"throttling requests");throw V(s,{stall:e,throttle:!0}),s}getHeader(t){return this.headers[t.toLowerCase()]}hasBody(){return f(this,Zt)!=null}get request(){return f(this,Ws)}ok(){return f(this,ns).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:t,error:e}=f(this,ns);t===""&&(t=`server response ${this.statusCode} ${this.statusMessage}`);let s=null;this.request&&(s=this.request.url);let r=null;try{f(this,Zt)&&(r=Yi(f(this,Zt)))}catch{}N(!1,t,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:e,info:{requestUrl:s,responseBody:r,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};hi=new WeakMap,pi=new WeakMap,mi=new WeakMap,Zt=new WeakMap,Ws=new WeakMap,ns=new WeakMap;let Bn=el;function hl(){return new Date().getTime()}function Sd(n){return Xe(n.replace(/%([0-9a-f][0-9a-f])/gi,(t,e)=>String.fromCharCode(parseInt(e,16))))}function $d(n){return new Promise(t=>setTimeout(t,n))}const Rd=BigInt(-1),le=BigInt(0),Us=BigInt(1),Od=BigInt(5),Ns={};let Qs="0000";for(;Qs.length<80;)Qs+=Qs;function Un(n){let t=Qs;for(;t.length<n;)t+=t;return BigInt("1"+t.substring(0,n))}function zr(n,t,e){const s=BigInt(t.width);if(t.signed){const r=Us<<s-Us;N(e==null||n>=-r&&n<r,"overflow","NUMERIC_FAULT",{operation:e,fault:"overflow",value:n}),n>le?n=Zi(Jn(n,s),s):n=-Zi(Jn(-n,s),s)}else{const r=Us<<s;N(e==null||n>=0&&n<r,"overflow","NUMERIC_FAULT",{operation:e,fault:"overflow",value:n}),n=(n%r+r)%r&r-Us}return n}function Oa(n){typeof n=="number"&&(n=`fixed128x${n}`);let t=!0,e=128,s=18;if(typeof n=="string"){if(n!=="fixed")if(n==="ufixed")t=!1;else{const i=n.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);x(i,"invalid fixed format","format",n),t=i[1]!=="u",e=parseInt(i[2]),s=parseInt(i[3])}}else if(n){const i=n,a=(o,l,u)=>i[o]==null?u:(x(typeof i[o]===l,"invalid fixed format ("+o+" not "+l+")","format."+o,i[o]),i[o]);t=a("signed","boolean",t),e=a("width","number",e),s=a("decimals","number",s)}x(e%8===0,"invalid FixedNumber width (not byte aligned)","format.width",e),x(s<=80,"invalid FixedNumber decimals (too large)","format.decimals",s);const r=(t?"":"u")+"fixed"+String(e)+"x"+String(s);return{signed:t,width:e,decimals:s,name:r}}function Ld(n,t){let e="";n<le&&(e="-",n*=Rd);let s=n.toString();if(t===0)return e+s;for(;s.length<=t;)s=Qs+s;const r=s.length-t;for(s=s.substring(0,r)+"."+s.substring(r);s[0]==="0"&&s[1]!==".";)s=s.substring(1);for(;s[s.length-1]==="0"&&s[s.length-2]!==".";)s=s.substring(0,s.length-1);return e+s}var he,rt,St,nt,Mn,Le,Xa,to,eo,no;const hn=class hn{constructor(t,e,s){I(this,nt);_(this,"format");I(this,he);I(this,rt);I(this,St);_(this,"_value");Ei(t,Ns,"FixedNumber"),b(this,rt,e),b(this,he,s);const r=Ld(e,s.decimals);V(this,{format:s.name,_value:r}),b(this,St,Un(s.decimals))}get signed(){return f(this,he).signed}get width(){return f(this,he).width}get decimals(){return f(this,he).decimals}get value(){return f(this,rt)}addUnsafe(t){return S(this,nt,Xa).call(this,t)}add(t){return S(this,nt,Xa).call(this,t,"add")}subUnsafe(t){return S(this,nt,to).call(this,t)}sub(t){return S(this,nt,to).call(this,t,"sub")}mulUnsafe(t){return S(this,nt,eo).call(this,t)}mul(t){return S(this,nt,eo).call(this,t,"mul")}mulSignal(t){S(this,nt,Mn).call(this,t);const e=f(this,rt)*f(t,rt);return N(e%f(this,St)===le,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),S(this,nt,Le).call(this,e/f(this,St),"mulSignal")}divUnsafe(t){return S(this,nt,no).call(this,t)}div(t){return S(this,nt,no).call(this,t,"div")}divSignal(t){N(f(t,rt)!==le,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),S(this,nt,Mn).call(this,t);const e=f(this,rt)*f(this,St);return N(e%f(t,rt)===le,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),S(this,nt,Le).call(this,e/f(t,rt),"divSignal")}cmp(t){let e=this.value,s=t.value;const r=this.decimals-t.decimals;return r>0?s*=Un(r):r<0&&(e*=Un(-r)),e<s?-1:e>s?1:0}eq(t){return this.cmp(t)===0}lt(t){return this.cmp(t)<0}lte(t){return this.cmp(t)<=0}gt(t){return this.cmp(t)>0}gte(t){return this.cmp(t)>=0}floor(){let t=f(this,rt);return f(this,rt)<le&&(t-=f(this,St)-Us),t=f(this,rt)/f(this,St)*f(this,St),S(this,nt,Le).call(this,t,"floor")}ceiling(){let t=f(this,rt);return f(this,rt)>le&&(t+=f(this,St)-Us),t=f(this,rt)/f(this,St)*f(this,St),S(this,nt,Le).call(this,t,"ceiling")}round(t){if(t==null&&(t=0),t>=this.decimals)return this;const e=this.decimals-t,s=Od*Un(e-1);let r=this.value+s;const i=Un(e);return r=r/i*i,zr(r,f(this,he),"round"),new hn(Ns,r,f(this,he))}isZero(){return f(this,rt)===le}isNegative(){return f(this,rt)<le}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(t){return hn.fromString(this.toString(),t)}static fromValue(t,e,s){const r=e==null?0:K(e),i=Oa(s);let a=H(t,"value");const o=r-i.decimals;if(o>0){const l=Un(o);N(a%l===le,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:t}),a/=l}else o<0&&(a*=Un(-o));return zr(a,i,"fromValue"),new hn(Ns,a,i)}static fromString(t,e){const s=t.match(/^(-?)([0-9]*)\.?([0-9]*)$/);x(s&&s[2].length+s[3].length>0,"invalid FixedNumber string value","value",t);const r=Oa(e);let i=s[2]||"0",a=s[3]||"";for(;a.length<r.decimals;)a+=Qs;N(a.substring(r.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:t}),a=a.substring(0,r.decimals);const o=BigInt(s[1]+i+a);return zr(o,r,"fromString"),new hn(Ns,o,r)}static fromBytes(t,e){let s=wa(q(t,"value"));const r=Oa(e);return r.signed&&(s=Zi(s,r.width)),zr(s,r,"fromBytes"),new hn(Ns,s,r)}};he=new WeakMap,rt=new WeakMap,St=new WeakMap,nt=new WeakSet,Mn=function(t){x(this.format===t.format,"incompatible format; use fixedNumber.toFormat","other",t)},Le=function(t,e){return t=zr(t,f(this,he),e),new hn(Ns,t,f(this,he))},Xa=function(t,e){return S(this,nt,Mn).call(this,t),S(this,nt,Le).call(this,f(this,rt)+f(t,rt),e)},to=function(t,e){return S(this,nt,Mn).call(this,t),S(this,nt,Le).call(this,f(this,rt)-f(t,rt),e)},eo=function(t,e){return S(this,nt,Mn).call(this,t),S(this,nt,Le).call(this,f(this,rt)*f(t,rt)/f(this,St),e)},no=function(t,e){return N(f(t,rt)!==le,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),S(this,nt,Mn).call(this,t),S(this,nt,Le).call(this,f(this,rt)*f(this,St)/f(t,rt),e)};let Wa=hn;function Dd(n){let t=n.toString(16);for(;t.length<2;)t="0"+t;return"0x"+t}function pl(n,t,e){let s=0;for(let r=0;r<e;r++)s=s*256+n[t+r];return s}function ml(n,t,e,s){const r=[];for(;e<t+1+s;){const i=Bc(n,e);r.push(i.result),e+=i.consumed,N(e<=t+1+s,"child data too short","BUFFER_OVERRUN",{buffer:n,length:s,offset:t})}return{consumed:1+s,result:r}}function Bc(n,t){N(n.length!==0,"data too short","BUFFER_OVERRUN",{buffer:n,length:0,offset:1});const e=s=>{N(s<=n.length,"data short segment too short","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:s})};if(n[t]>=248){const s=n[t]-247;e(t+1+s);const r=pl(n,t+1,s);return e(t+1+s+r),ml(n,t,t+1+s,s+r)}else if(n[t]>=192){const s=n[t]-192;return e(t+1+s),ml(n,t,t+1,s)}else if(n[t]>=184){const s=n[t]-183;e(t+1+s);const r=pl(n,t+1,s);e(t+1+s+r);const i=U(n.slice(t+1+s,t+1+s+r));return{consumed:1+s+r,result:i}}else if(n[t]>=128){const s=n[t]-128;e(t+1+s);const r=U(n.slice(t+1,t+1+s));return{consumed:1+s,result:r}}return{consumed:1,result:Dd(n[t])}}function Ci(n){const t=q(n,"data"),e=Bc(t,0);return x(e.consumed===t.length,"unexpected junk after rlp payload","data",n),e.result}function gl(n){const t=[];for(;n;)t.unshift(n&255),n>>=8;return t}function Sc(n){if(Array.isArray(n)){let s=[];if(n.forEach(function(i){s=s.concat(Sc(i))}),s.length<=55)return s.unshift(192+s.length),s;const r=gl(s.length);return r.unshift(247+r.length),r.concat(s)}const t=Array.prototype.slice.call(q(n,"object"));if(t.length===1&&t[0]<=127)return t;if(t.length<=55)return t.unshift(128+t.length),t;const e=gl(t.length);return e.unshift(183+e.length),e.concat(t)}const yl="0123456789abcdef";function Rn(n){let t="0x";for(const e of Sc(n))t+=yl[e>>4],t+=yl[e&15];return t}const Ud=["wei","kwei","mwei","gwei","szabo","finney","ether"];function Fd(n,t){x(typeof n=="string","value must be a string","value",n);let e=18;if(typeof t=="string"){const s=Ud.indexOf(t);x(s>=0,"invalid unit","unit",t),e=3*s}else t!=null&&(e=K(t,"unit"));return Wa.fromString(n,{decimals:e,width:512}).value}const Lt=32,so=new Uint8Array(Lt),Md=["then"],$i={},$c=new WeakMap;function Gn(n){return $c.get(n)}function bl(n,t){$c.set(n,t)}function jr(n,t){const e=new Error(`deferred error during ABI decoding triggered accessing ${n}`);throw e.error=t,e}function ro(n,t,e){return n.indexOf(null)>=0?t.map((s,r)=>s instanceof $r?ro(Gn(s),s,e):s):n.reduce((s,r,i)=>{let a=t.getValue(r);return r in s||(e&&a instanceof $r&&(a=ro(Gn(a),a,e)),s[r]=a),s},{})}var Xs;const Fs=class Fs extends Array{constructor(...e){const s=e[0];let r=e[1],i=(e[2]||[]).slice(),a=!0;s!==$i&&(r=e,i=[],a=!1);super(r.length);I(this,Xs);r.forEach((u,d)=>{this[d]=u});const o=i.reduce((u,d)=>(typeof d=="string"&&u.set(d,(u.get(d)||0)+1),u),new Map);if(bl(this,Object.freeze(r.map((u,d)=>{const h=i[d];return h!=null&&o.get(h)===1?h:null}))),b(this,Xs,[]),f(this,Xs)==null&&f(this,Xs),!a)return;Object.freeze(this);const l=new Proxy(this,{get:(u,d,h)=>{if(typeof d=="string"){if(d.match(/^[0-9]+$/)){const g=K(d,"%index");if(g<0||g>=this.length)throw new RangeError("out of result range");const w=u[g];return w instanceof Error&&jr(`index ${g}`,w),w}if(Md.indexOf(d)>=0)return Reflect.get(u,d,h);const y=u[d];if(y instanceof Function)return function(...g){return y.apply(this===h?u:this,g)};if(!(d in u))return u.getValue.apply(this===h?u:this,[d])}return Reflect.get(u,d,h)}});return bl(l,Gn(this)),l}toArray(e){const s=[];return this.forEach((r,i)=>{r instanceof Error&&jr(`index ${i}`,r),e&&r instanceof Fs&&(r=r.toArray(e)),s.push(r)}),s}toObject(e){const s=Gn(this);return s.reduce((r,i,a)=>(N(i!=null,`value at index ${a} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),ro(s,this,e)),{})}slice(e,s){e==null&&(e=0),e<0&&(e+=this.length,e<0&&(e=0)),s==null&&(s=this.length),s<0&&(s+=this.length,s<0&&(s=0)),s>this.length&&(s=this.length);const r=Gn(this),i=[],a=[];for(let o=e;o<s;o++)i.push(this[o]),a.push(r[o]);return new Fs($i,i,a)}filter(e,s){const r=Gn(this),i=[],a=[];for(let o=0;o<this.length;o++){const l=this[o];l instanceof Error&&jr(`index ${o}`,l),e.call(s,l,o,this)&&(i.push(l),a.push(r[o]))}return new Fs($i,i,a)}map(e,s){const r=[];for(let i=0;i<this.length;i++){const a=this[i];a instanceof Error&&jr(`index ${i}`,a),r.push(e.call(s,a,i,this))}return r}getValue(e){const s=Gn(this).indexOf(e);if(s===-1)return;const r=this[s];return r instanceof Error&&jr(`property ${JSON.stringify(e)}`,r.error),r}static fromItems(e,s){return new Fs($i,e,s)}};Xs=new WeakMap;let $r=Fs;function wl(n){let t=bt(n);return N(t.length<=Lt,"value out-of-bounds","BUFFER_OVERRUN",{buffer:t,length:Lt,offset:t.length}),t.length!==Lt&&(t=Ot(pt([so.slice(t.length%Lt),t]))),t}class sn{constructor(t,e,s,r){_(this,"name");_(this,"type");_(this,"localName");_(this,"dynamic");V(this,{name:t,type:e,localName:s,dynamic:r},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(t,e){x(!1,t,this.localName,e)}}var Ge,ss,tr,Mi;class io{constructor(){I(this,tr);I(this,Ge);I(this,ss);b(this,Ge,[]),b(this,ss,0)}get data(){return pt(f(this,Ge))}get length(){return f(this,ss)}appendWriter(t){return S(this,tr,Mi).call(this,Ot(t.data))}writeBytes(t){let e=Ot(t);const s=e.length%Lt;return s&&(e=Ot(pt([e,so.slice(s)]))),S(this,tr,Mi).call(this,e)}writeValue(t){return S(this,tr,Mi).call(this,wl(t))}writeUpdatableValue(){const t=f(this,Ge).length;return f(this,Ge).push(so),b(this,ss,f(this,ss)+Lt),e=>{f(this,Ge)[t]=wl(e)}}}Ge=new WeakMap,ss=new WeakMap,tr=new WeakSet,Mi=function(t){return f(this,Ge).push(t),b(this,ss,f(this,ss)+t.length),t.length};var Ft,Yt,rs,is,gn,ks,oo,Rc;const nl=class nl{constructor(t,e,s){I(this,ks);_(this,"allowLoose");I(this,Ft);I(this,Yt);I(this,rs);I(this,is);I(this,gn);V(this,{allowLoose:!!e}),b(this,Ft,Ot(t)),b(this,rs,0),b(this,is,null),b(this,gn,s??1024),b(this,Yt,0)}get data(){return U(f(this,Ft))}get dataLength(){return f(this,Ft).length}get consumed(){return f(this,Yt)}get bytes(){return new Uint8Array(f(this,Ft))}subReader(t){const e=new nl(f(this,Ft).slice(f(this,Yt)+t),this.allowLoose,f(this,gn));return b(e,is,this),e}readBytes(t,e){let s=S(this,ks,Rc).call(this,0,t,!!e);return S(this,ks,oo).call(this,t),b(this,Yt,f(this,Yt)+s.length),s.slice(0,t)}readValue(){return wa(this.readBytes(Lt))}readIndex(){return bd(this.readBytes(Lt))}};Ft=new WeakMap,Yt=new WeakMap,rs=new WeakMap,is=new WeakMap,gn=new WeakMap,ks=new WeakSet,oo=function(t){var e;if(f(this,is))return S(e=f(this,is),ks,oo).call(e,t);b(this,rs,f(this,rs)+t),N(f(this,gn)<1||f(this,rs)<=f(this,gn)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${f(this,gn)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:Ot(f(this,Ft)),offset:f(this,Yt),length:t,info:{bytesRead:f(this,rs),dataLength:this.dataLength}})},Rc=function(t,e,s){let r=Math.ceil(e/Lt)*Lt;return f(this,Yt)+r>f(this,Ft).length&&(this.allowLoose&&s&&f(this,Yt)+e<=f(this,Ft).length?r=e:N(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:Ot(f(this,Ft)),length:f(this,Ft).length,offset:f(this,Yt)+r})),f(this,Ft).slice(f(this,Yt),f(this,Yt)+r)};let ao=nl;function Wi(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function Uo(n,...t){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(n.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${n.length}`)}function Hd(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Wi(n.outputLen),Wi(n.blockLen)}function Rr(n,t=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(t&&n.finished)throw new Error("Hash#digest() has already been called")}function Oc(n,t){Uo(n);const e=t.outputLen;if(n.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}const La=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Lc=n=>n instanceof Uint8Array,Gd=n=>new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4)),Da=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),Ae=(n,t)=>n<<32-t|n>>>t,Qd=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Qd)throw new Error("Non little-endian hardware is not supported");function Vd(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function va(n){if(typeof n=="string"&&(n=Vd(n)),!Lc(n))throw new Error(`expected Uint8Array, got ${typeof n}`);return n}function zd(...n){const t=new Uint8Array(n.reduce((s,r)=>s+r.length,0));let e=0;return n.forEach(s=>{if(!Lc(s))throw new Error("Uint8Array expected");t.set(s,e),e+=s.length}),t}class Fo{clone(){return this._cloneInto()}}function Mo(n){const t=s=>n().update(va(s)).digest(),e=n();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>n(),t}function jd(n=32){if(La&&typeof La.getRandomValues=="function")return La.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}class Dc extends Fo{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,Hd(t);const s=va(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(s.length>r?t.create().update(s).digest():s);for(let a=0;a<i.length;a++)i[a]^=54;this.iHash.update(i),this.oHash=t.create();for(let a=0;a<i.length;a++)i[a]^=106;this.oHash.update(i),i.fill(0)}update(t){return Rr(this),this.iHash.update(t),this}digestInto(t){Rr(this),Uo(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:s,finished:r,destroyed:i,blockLen:a,outputLen:o}=this;return t=t,t.finished=r,t.destroyed=i,t.blockLen=a,t.outputLen=o,t.oHash=e._cloneInto(t.oHash),t.iHash=s._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Uc=(n,t,e)=>new Dc(n,t).update(e).digest();Uc.create=(n,t)=>new Dc(n,t);function Jd(n,t,e,s){if(typeof n.setBigUint64=="function")return n.setBigUint64(t,e,s);const r=BigInt(32),i=BigInt(4294967295),a=Number(e>>r&i),o=Number(e&i),l=s?4:0,u=s?0:4;n.setUint32(t+l,a,s),n.setUint32(t+u,o,s)}class Fc extends Fo{constructor(t,e,s,r){super(),this.blockLen=t,this.outputLen=e,this.padOffset=s,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Da(this.buffer)}update(t){Rr(this);const{view:e,buffer:s,blockLen:r}=this;t=va(t);const i=t.length;for(let a=0;a<i;){const o=Math.min(r-this.pos,i-a);if(o===r){const l=Da(t);for(;r<=i-a;a+=r)this.process(l,a);continue}s.set(t.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===r&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Rr(this),Oc(t,this),this.finished=!0;const{buffer:e,view:s,blockLen:r,isLE:i}=this;let{pos:a}=this;e[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>r-a&&(this.process(s,0),a=0);for(let h=a;h<r;h++)e[h]=0;Jd(s,r-8,BigInt(this.length*8),i),this.process(s,0);const o=Da(t),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,d=this.get();if(u>d.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<u;h++)o.setUint32(4*h,d[h],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const s=t.slice(0,e);return this.destroy(),s}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:s,length:r,finished:i,destroyed:a,pos:o}=this;return t.length=r,t.pos=o,t.finished=i,t.destroyed=a,r%e&&t.buffer.set(s),t}}const Kd=(n,t,e)=>n&t^~n&e,qd=(n,t,e)=>n&t^n&e^t&e,Zd=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ln=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),cn=new Uint32Array(64);class Yd extends Fc{constructor(){super(64,32,8,!1),this.A=ln[0]|0,this.B=ln[1]|0,this.C=ln[2]|0,this.D=ln[3]|0,this.E=ln[4]|0,this.F=ln[5]|0,this.G=ln[6]|0,this.H=ln[7]|0}get(){const{A:t,B:e,C:s,D:r,E:i,F:a,G:o,H:l}=this;return[t,e,s,r,i,a,o,l]}set(t,e,s,r,i,a,o,l){this.A=t|0,this.B=e|0,this.C=s|0,this.D=r|0,this.E=i|0,this.F=a|0,this.G=o|0,this.H=l|0}process(t,e){for(let h=0;h<16;h++,e+=4)cn[h]=t.getUint32(e,!1);for(let h=16;h<64;h++){const y=cn[h-15],g=cn[h-2],w=Ae(y,7)^Ae(y,18)^y>>>3,v=Ae(g,17)^Ae(g,19)^g>>>10;cn[h]=v+cn[h-7]+w+cn[h-16]|0}let{A:s,B:r,C:i,D:a,E:o,F:l,G:u,H:d}=this;for(let h=0;h<64;h++){const y=Ae(o,6)^Ae(o,11)^Ae(o,25),g=d+y+Kd(o,l,u)+Zd[h]+cn[h]|0,v=(Ae(s,2)^Ae(s,13)^Ae(s,22))+qd(s,r,i)|0;d=u,u=l,l=o,o=a+g|0,a=i,i=r,r=s,s=g+v|0}s=s+this.A|0,r=r+this.B|0,i=i+this.C|0,a=a+this.D|0,o=o+this.E|0,l=l+this.F|0,u=u+this.G|0,d=d+this.H|0,this.set(s,r,i,a,o,l,u,d)}roundClean(){cn.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Mc=Mo(()=>new Yd),Ri=BigInt(2**32-1),lo=BigInt(32);function Hc(n,t=!1){return t?{h:Number(n&Ri),l:Number(n>>lo&Ri)}:{h:Number(n>>lo&Ri)|0,l:Number(n&Ri)|0}}function Gc(n,t=!1){let e=new Uint32Array(n.length),s=new Uint32Array(n.length);for(let r=0;r<n.length;r++){const{h:i,l:a}=Hc(n[r],t);[e[r],s[r]]=[i,a]}return[e,s]}const Wd=(n,t)=>BigInt(n>>>0)<<lo|BigInt(t>>>0),Xd=(n,t,e)=>n>>>e,tf=(n,t,e)=>n<<32-e|t>>>e,ef=(n,t,e)=>n>>>e|t<<32-e,nf=(n,t,e)=>n<<32-e|t>>>e,sf=(n,t,e)=>n<<64-e|t>>>e-32,rf=(n,t,e)=>n>>>e-32|t<<64-e,af=(n,t)=>t,of=(n,t)=>n,Qc=(n,t,e)=>n<<e|t>>>32-e,Vc=(n,t,e)=>t<<e|n>>>32-e,zc=(n,t,e)=>t<<e-32|n>>>64-e,jc=(n,t,e)=>n<<e-32|t>>>64-e;function lf(n,t,e,s){const r=(t>>>0)+(s>>>0);return{h:n+e+(r/2**32|0)|0,l:r|0}}const cf=(n,t,e)=>(n>>>0)+(t>>>0)+(e>>>0),uf=(n,t,e,s)=>t+e+s+(n/2**32|0)|0,df=(n,t,e,s)=>(n>>>0)+(t>>>0)+(e>>>0)+(s>>>0),ff=(n,t,e,s,r)=>t+e+s+r+(n/2**32|0)|0,hf=(n,t,e,s,r)=>(n>>>0)+(t>>>0)+(e>>>0)+(s>>>0)+(r>>>0),pf=(n,t,e,s,r,i)=>t+e+s+r+i+(n/2**32|0)|0,J={fromBig:Hc,split:Gc,toBig:Wd,shrSH:Xd,shrSL:tf,rotrSH:ef,rotrSL:nf,rotrBH:sf,rotrBL:rf,rotr32H:af,rotr32L:of,rotlSH:Qc,rotlSL:Vc,rotlBH:zc,rotlBL:jc,add:lf,add3L:cf,add3H:uf,add4L:df,add4H:ff,add5H:pf,add5L:hf},[mf,gf]=J.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),un=new Uint32Array(80),dn=new Uint32Array(80);class yf extends Fc{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:s,Bl:r,Ch:i,Cl:a,Dh:o,Dl:l,Eh:u,El:d,Fh:h,Fl:y,Gh:g,Gl:w,Hh:v,Hl:A}=this;return[t,e,s,r,i,a,o,l,u,d,h,y,g,w,v,A]}set(t,e,s,r,i,a,o,l,u,d,h,y,g,w,v,A){this.Ah=t|0,this.Al=e|0,this.Bh=s|0,this.Bl=r|0,this.Ch=i|0,this.Cl=a|0,this.Dh=o|0,this.Dl=l|0,this.Eh=u|0,this.El=d|0,this.Fh=h|0,this.Fl=y|0,this.Gh=g|0,this.Gl=w|0,this.Hh=v|0,this.Hl=A|0}process(t,e){for(let P=0;P<16;P++,e+=4)un[P]=t.getUint32(e),dn[P]=t.getUint32(e+=4);for(let P=16;P<80;P++){const O=un[P-15]|0,R=dn[P-15]|0,T=J.rotrSH(O,R,1)^J.rotrSH(O,R,8)^J.shrSH(O,R,7),B=J.rotrSL(O,R,1)^J.rotrSL(O,R,8)^J.shrSL(O,R,7),L=un[P-2]|0,Q=dn[P-2]|0,j=J.rotrSH(L,Q,19)^J.rotrBH(L,Q,61)^J.shrSH(L,Q,6),z=J.rotrSL(L,Q,19)^J.rotrBL(L,Q,61)^J.shrSL(L,Q,6),W=J.add4L(B,z,dn[P-7],dn[P-16]),at=J.add4H(W,T,j,un[P-7],un[P-16]);un[P]=at|0,dn[P]=W|0}let{Ah:s,Al:r,Bh:i,Bl:a,Ch:o,Cl:l,Dh:u,Dl:d,Eh:h,El:y,Fh:g,Fl:w,Gh:v,Gl:A,Hh:k,Hl:E}=this;for(let P=0;P<80;P++){const O=J.rotrSH(h,y,14)^J.rotrSH(h,y,18)^J.rotrBH(h,y,41),R=J.rotrSL(h,y,14)^J.rotrSL(h,y,18)^J.rotrBL(h,y,41),T=h&g^~h&v,B=y&w^~y&A,L=J.add5L(E,R,B,gf[P],dn[P]),Q=J.add5H(L,k,O,T,mf[P],un[P]),j=L|0,z=J.rotrSH(s,r,28)^J.rotrBH(s,r,34)^J.rotrBH(s,r,39),W=J.rotrSL(s,r,28)^J.rotrBL(s,r,34)^J.rotrBL(s,r,39),at=s&i^s&o^i&o,wt=r&a^r&l^a&l;k=v|0,E=A|0,v=g|0,A=w|0,g=h|0,w=y|0,{h,l:y}=J.add(u|0,d|0,Q|0,j|0),u=o|0,d=l|0,o=i|0,l=a|0,i=s|0,a=r|0;const D=J.add3L(j,W,wt);s=J.add3H(D,Q,z,at),r=D|0}({h:s,l:r}=J.add(this.Ah|0,this.Al|0,s|0,r|0)),{h:i,l:a}=J.add(this.Bh|0,this.Bl|0,i|0,a|0),{h:o,l}=J.add(this.Ch|0,this.Cl|0,o|0,l|0),{h:u,l:d}=J.add(this.Dh|0,this.Dl|0,u|0,d|0),{h,l:y}=J.add(this.Eh|0,this.El|0,h|0,y|0),{h:g,l:w}=J.add(this.Fh|0,this.Fl|0,g|0,w|0),{h:v,l:A}=J.add(this.Gh|0,this.Gl|0,v|0,A|0),{h:k,l:E}=J.add(this.Hh|0,this.Hl|0,k|0,E|0),this.set(s,r,i,a,o,l,u,d,h,y,g,w,v,A,k,E)}roundClean(){un.fill(0),dn.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const bf=Mo(()=>new yf);function wf(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const vl=wf();vl.crypto||vl.msCrypto;function vf(n){switch(n){case"sha256":return Mc.create();case"sha512":return bf.create()}x(!1,"invalid hashing algorithm name","algorithm",n)}const[Jc,Kc,qc]=[[],[],[]],Af=BigInt(0),Jr=BigInt(1),xf=BigInt(2),kf=BigInt(7),_f=BigInt(256),Ef=BigInt(113);for(let n=0,t=Jr,e=1,s=0;n<24;n++){[e,s]=[s,(2*e+3*s)%5],Jc.push(2*(5*s+e)),Kc.push((n+1)*(n+2)/2%64);let r=Af;for(let i=0;i<7;i++)t=(t<<Jr^(t>>kf)*Ef)%_f,t&xf&&(r^=Jr<<(Jr<<BigInt(i))-Jr);qc.push(r)}const[Cf,Pf]=Gc(qc,!0),Al=(n,t,e)=>e>32?zc(n,t,e):Qc(n,t,e),xl=(n,t,e)=>e>32?jc(n,t,e):Vc(n,t,e);function If(n,t=24){const e=new Uint32Array(10);for(let s=24-t;s<24;s++){for(let a=0;a<10;a++)e[a]=n[a]^n[a+10]^n[a+20]^n[a+30]^n[a+40];for(let a=0;a<10;a+=2){const o=(a+8)%10,l=(a+2)%10,u=e[l],d=e[l+1],h=Al(u,d,1)^e[o],y=xl(u,d,1)^e[o+1];for(let g=0;g<50;g+=10)n[a+g]^=h,n[a+g+1]^=y}let r=n[2],i=n[3];for(let a=0;a<24;a++){const o=Kc[a],l=Al(r,i,o),u=xl(r,i,o),d=Jc[a];r=n[d],i=n[d+1],n[d]=l,n[d+1]=u}for(let a=0;a<50;a+=10){for(let o=0;o<10;o++)e[o]=n[a+o];for(let o=0;o<10;o++)n[a+o]^=~e[(o+2)%10]&e[(o+4)%10]}n[0]^=Cf[s],n[1]^=Pf[s]}e.fill(0)}class Ho extends Fo{constructor(t,e,s,r=!1,i=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=s,this.enableXOF=r,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Wi(s),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Gd(this.state)}keccak(){If(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){Rr(this);const{blockLen:e,state:s}=this;t=va(t);const r=t.length;for(let i=0;i<r;){const a=Math.min(e-this.pos,r-i);for(let o=0;o<a;o++)s[this.pos++]^=t[i++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:s,blockLen:r}=this;t[s]^=e,e&128&&s===r-1&&this.keccak(),t[r-1]^=128,this.keccak()}writeInto(t){Rr(this,!1),Uo(t),this.finish();const e=this.state,{blockLen:s}=this;for(let r=0,i=t.length;r<i;){this.posOut>=s&&this.keccak();const a=Math.min(s-this.posOut,i-r);t.set(e.subarray(this.posOut,this.posOut+a),r),this.posOut+=a,r+=a}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Wi(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Oc(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:e,suffix:s,outputLen:r,rounds:i,enableXOF:a}=this;return t||(t=new Ho(e,s,r,a,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=s,t.outputLen=r,t.enableXOF=a,t.destroyed=this.destroyed,t}}const Tf=(n,t,e)=>Mo(()=>new Ho(t,n,e)),Nf=Tf(1,136,256/8);let Zc=!1;const Yc=function(n){return Nf(n)};let Wc=Yc;function yt(n){const t=q(n,"data");return U(Wc(t))}yt._=Yc;yt.lock=function(){Zc=!0};yt.register=function(n){if(Zc)throw new TypeError("keccak256 is locked");Wc=n};Object.freeze(yt);const Xc=function(n){return vf("sha256").update(n).digest()};let tu=Xc,eu=!1;function Hr(n){const t=q(n,"data");return U(tu(t))}Hr._=Xc;Hr.lock=function(){eu=!0};Hr.register=function(n){if(eu)throw new Error("sha256 is locked");tu=n};Object.freeze(Hr);Object.freeze(Hr);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const nu=BigInt(0),Aa=BigInt(1),Bf=BigInt(2),xa=n=>n instanceof Uint8Array,Sf=Array.from({length:256},(n,t)=>t.toString(16).padStart(2,"0"));function Or(n){if(!xa(n))throw new Error("Uint8Array expected");let t="";for(let e=0;e<n.length;e++)t+=Sf[n[e]];return t}function su(n){const t=n.toString(16);return t.length&1?`0${t}`:t}function Go(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return BigInt(n===""?"0":`0x${n}`)}function Lr(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const t=n.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const e=new Uint8Array(t/2);for(let s=0;s<e.length;s++){const r=s*2,i=n.slice(r,r+2),a=Number.parseInt(i,16);if(Number.isNaN(a)||a<0)throw new Error("Invalid byte sequence");e[s]=a}return e}function ys(n){return Go(Or(n))}function Qo(n){if(!xa(n))throw new Error("Uint8Array expected");return Go(Or(Uint8Array.from(n).reverse()))}function Dr(n,t){return Lr(n.toString(16).padStart(t*2,"0"))}function Vo(n,t){return Dr(n,t).reverse()}function $f(n){return Lr(su(n))}function ue(n,t,e){let s;if(typeof t=="string")try{s=Lr(t)}catch(i){throw new Error(`${n} must be valid hex string, got "${t}". Cause: ${i}`)}else if(xa(t))s=Uint8Array.from(t);else throw new Error(`${n} must be hex string or Uint8Array`);const r=s.length;if(typeof e=="number"&&r!==e)throw new Error(`${n} expected ${e} bytes, got ${r}`);return s}function ni(...n){const t=new Uint8Array(n.reduce((s,r)=>s+r.length,0));let e=0;return n.forEach(s=>{if(!xa(s))throw new Error("Uint8Array expected");t.set(s,e),e+=s.length}),t}function Rf(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;e++)if(n[e]!==t[e])return!1;return!0}function Of(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function Lf(n){let t;for(t=0;n>nu;n>>=Aa,t+=1);return t}function Df(n,t){return n>>BigInt(t)&Aa}const Uf=(n,t,e)=>n|(e?Aa:nu)<<BigInt(t),zo=n=>(Bf<<BigInt(n-1))-Aa,Ua=n=>new Uint8Array(n),kl=n=>Uint8Array.from(n);function ru(n,t,e){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");let s=Ua(n),r=Ua(n),i=0;const a=()=>{s.fill(1),r.fill(0),i=0},o=(...h)=>e(r,s,...h),l=(h=Ua())=>{r=o(kl([0]),h),s=o(),h.length!==0&&(r=o(kl([1]),h),s=o())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const y=[];for(;h<t;){s=o();const g=s.slice();y.push(g),h+=s.length}return ni(...y)};return(h,y)=>{a(),l(h);let g;for(;!(g=y(u()));)l();return a(),g}}const Ff={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||n instanceof Uint8Array,isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,t)=>t.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function Pi(n,t,e={}){const s=(r,i,a)=>{const o=Ff[i];if(typeof o!="function")throw new Error(`Invalid validator "${i}", expected function`);const l=n[r];if(!(a&&l===void 0)&&!o(l,n))throw new Error(`Invalid param ${String(r)}=${l} (${typeof l}), expected ${i}`)};for(const[r,i]of Object.entries(t))s(r,i,!1);for(const[r,i]of Object.entries(e))s(r,i,!0);return n}const Mf=Object.freeze(Object.defineProperty({__proto__:null,bitGet:Df,bitLen:Lf,bitMask:zo,bitSet:Uf,bytesToHex:Or,bytesToNumberBE:ys,bytesToNumberLE:Qo,concatBytes:ni,createHmacDrbg:ru,ensureBytes:ue,equalBytes:Rf,hexToBytes:Lr,hexToNumber:Go,numberToBytesBE:Dr,numberToBytesLE:Vo,numberToHexUnpadded:su,numberToVarBytesBE:$f,utf8ToBytes:Of,validateObject:Pi},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const kt=BigInt(0),gt=BigInt(1),Qn=BigInt(2),Hf=BigInt(3),co=BigInt(4),_l=BigInt(5),El=BigInt(8);BigInt(9);BigInt(16);function Ht(n,t){const e=n%t;return e>=kt?e:t+e}function Gf(n,t,e){if(e<=kt||t<kt)throw new Error("Expected power/modulo > 0");if(e===gt)return kt;let s=gt;for(;t>kt;)t&gt&&(s=s*n%e),n=n*n%e,t>>=gt;return s}function Xt(n,t,e){let s=n;for(;t-- >kt;)s*=s,s%=e;return s}function uo(n,t){if(n===kt||t<=kt)throw new Error(`invert: expected positive integers, got n=${n} mod=${t}`);let e=Ht(n,t),s=t,r=kt,i=gt;for(;e!==kt;){const o=s/e,l=s%e,u=r-i*o;s=e,e=l,r=i,i=u}if(s!==gt)throw new Error("invert: does not exist");return Ht(r,t)}function Qf(n){const t=(n-gt)/Qn;let e,s,r;for(e=n-gt,s=0;e%Qn===kt;e/=Qn,s++);for(r=Qn;r<n&&Gf(r,t,n)!==n-gt;r++);if(s===1){const a=(n+gt)/co;return function(l,u){const d=l.pow(u,a);if(!l.eql(l.sqr(d),u))throw new Error("Cannot find square root");return d}}const i=(e+gt)/Qn;return function(o,l){if(o.pow(l,t)===o.neg(o.ONE))throw new Error("Cannot find square root");let u=s,d=o.pow(o.mul(o.ONE,r),e),h=o.pow(l,i),y=o.pow(l,e);for(;!o.eql(y,o.ONE);){if(o.eql(y,o.ZERO))return o.ZERO;let g=1;for(let v=o.sqr(y);g<u&&!o.eql(v,o.ONE);g++)v=o.sqr(v);const w=o.pow(d,gt<<BigInt(u-g-1));d=o.sqr(w),h=o.mul(h,w),y=o.mul(y,d),u=g}return h}}function Vf(n){if(n%co===Hf){const t=(n+gt)/co;return function(s,r){const i=s.pow(r,t);if(!s.eql(s.sqr(i),r))throw new Error("Cannot find square root");return i}}if(n%El===_l){const t=(n-_l)/El;return function(s,r){const i=s.mul(r,Qn),a=s.pow(i,t),o=s.mul(r,a),l=s.mul(s.mul(o,Qn),a),u=s.mul(o,s.sub(l,s.ONE));if(!s.eql(s.sqr(u),r))throw new Error("Cannot find square root");return u}}return Qf(n)}const zf=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function jf(n){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},e=zf.reduce((s,r)=>(s[r]="function",s),t);return Pi(n,e)}function Jf(n,t,e){if(e<kt)throw new Error("Expected power > 0");if(e===kt)return n.ONE;if(e===gt)return t;let s=n.ONE,r=t;for(;e>kt;)e&gt&&(s=n.mul(s,r)),r=n.sqr(r),e>>=gt;return s}function Kf(n,t){const e=new Array(t.length),s=t.reduce((i,a,o)=>n.is0(a)?i:(e[o]=i,n.mul(i,a)),n.ONE),r=n.inv(s);return t.reduceRight((i,a,o)=>n.is0(a)?i:(e[o]=n.mul(i,e[o]),n.mul(i,a)),r),e}function iu(n,t){const e=t!==void 0?t:n.toString(2).length,s=Math.ceil(e/8);return{nBitLength:e,nByteLength:s}}function qf(n,t,e=!1,s={}){if(n<=kt)throw new Error(`Expected Field ORDER > 0, got ${n}`);const{nBitLength:r,nByteLength:i}=iu(n,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const a=Vf(n),o=Object.freeze({ORDER:n,BITS:r,BYTES:i,MASK:zo(r),ZERO:kt,ONE:gt,create:l=>Ht(l,n),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return kt<=l&&l<n},is0:l=>l===kt,isOdd:l=>(l&gt)===gt,neg:l=>Ht(-l,n),eql:(l,u)=>l===u,sqr:l=>Ht(l*l,n),add:(l,u)=>Ht(l+u,n),sub:(l,u)=>Ht(l-u,n),mul:(l,u)=>Ht(l*u,n),pow:(l,u)=>Jf(o,l,u),div:(l,u)=>Ht(l*uo(u,n),n),sqrN:l=>l*l,addN:(l,u)=>l+u,subN:(l,u)=>l-u,mulN:(l,u)=>l*u,inv:l=>uo(l,n),sqrt:s.sqrt||(l=>a(o,l)),invertBatch:l=>Kf(o,l),cmov:(l,u,d)=>d?u:l,toBytes:l=>e?Vo(l,i):Dr(l,i),fromBytes:l=>{if(l.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${l.length}`);return e?Qo(l):ys(l)}});return Object.freeze(o)}function au(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const t=n.toString(2).length;return Math.ceil(t/8)}function ou(n){const t=au(n);return t+Math.ceil(t/2)}function Zf(n,t,e=!1){const s=n.length,r=au(t),i=ou(t);if(s<16||s<i||s>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${s}`);const a=e?ys(n):Qo(n),o=Ht(a,t-gt)+gt;return e?Vo(o,r):Dr(o,r)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Yf=BigInt(0),Fa=BigInt(1);function Wf(n,t){const e=(r,i)=>{const a=i.negate();return r?a:i},s=r=>{const i=Math.ceil(t/r)+1,a=2**(r-1);return{windows:i,windowSize:a}};return{constTimeNegate:e,unsafeLadder(r,i){let a=n.ZERO,o=r;for(;i>Yf;)i&Fa&&(a=a.add(o)),o=o.double(),i>>=Fa;return a},precomputeWindow(r,i){const{windows:a,windowSize:o}=s(i),l=[];let u=r,d=u;for(let h=0;h<a;h++){d=u,l.push(d);for(let y=1;y<o;y++)d=d.add(u),l.push(d);u=d.double()}return l},wNAF(r,i,a){const{windows:o,windowSize:l}=s(r);let u=n.ZERO,d=n.BASE;const h=BigInt(2**r-1),y=2**r,g=BigInt(r);for(let w=0;w<o;w++){const v=w*l;let A=Number(a&h);a>>=g,A>l&&(A-=y,a+=Fa);const k=v,E=v+Math.abs(A)-1,P=w%2!==0,O=A<0;A===0?d=d.add(e(P,i[k])):u=u.add(e(O,i[E]))}return{p:u,f:d}},wNAFCached(r,i,a,o){const l=r._WINDOW_SIZE||1;let u=i.get(r);return u||(u=this.precomputeWindow(r,l),l!==1&&i.set(r,o(u))),this.wNAF(l,u,a)}}}function lu(n){return jf(n.Fp),Pi(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...iu(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Xf(n){const t=lu(n);Pi(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:e,Fp:s,a:r}=t;if(e){if(!s.eql(r,s.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof e!="object"||typeof e.beta!="bigint"||typeof e.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:th,hexToBytes:eh}=Mf,Kn={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(n){const{Err:t}=Kn;if(n.length<2||n[0]!==2)throw new t("Invalid signature integer tag");const e=n[1],s=n.subarray(2,e+2);if(!e||s.length!==e)throw new t("Invalid signature integer: wrong length");if(s[0]&128)throw new t("Invalid signature integer: negative");if(s[0]===0&&!(s[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:th(s),l:n.subarray(e+2)}},toSig(n){const{Err:t}=Kn,e=typeof n=="string"?eh(n):n;if(!(e instanceof Uint8Array))throw new Error("ui8a expected");let s=e.length;if(s<2||e[0]!=48)throw new t("Invalid signature tag");if(e[1]!==s-2)throw new t("Invalid signature: incorrect length");const{d:r,l:i}=Kn._parseInt(e.subarray(2)),{d:a,l:o}=Kn._parseInt(i);if(o.length)throw new t("Invalid signature: left bytes after parsing");return{r,s:a}},hexFromSig(n){const t=u=>Number.parseInt(u[0],16)&8?"00"+u:u,e=u=>{const d=u.toString(16);return d.length&1?`0${d}`:d},s=t(e(n.s)),r=t(e(n.r)),i=s.length/2,a=r.length/2,o=e(i),l=e(a);return`30${e(a+i+4)}02${l}${r}02${o}${s}`}},Ye=BigInt(0),ae=BigInt(1);BigInt(2);const Cl=BigInt(3);BigInt(4);function nh(n){const t=Xf(n),{Fp:e}=t,s=t.toBytes||((w,v,A)=>{const k=v.toAffine();return ni(Uint8Array.from([4]),e.toBytes(k.x),e.toBytes(k.y))}),r=t.fromBytes||(w=>{const v=w.subarray(1),A=e.fromBytes(v.subarray(0,e.BYTES)),k=e.fromBytes(v.subarray(e.BYTES,2*e.BYTES));return{x:A,y:k}});function i(w){const{a:v,b:A}=t,k=e.sqr(w),E=e.mul(k,w);return e.add(e.add(E,e.mul(w,v)),A)}if(!e.eql(e.sqr(t.Gy),i(t.Gx)))throw new Error("bad generator point: equation left != right");function a(w){return typeof w=="bigint"&&Ye<w&&w<t.n}function o(w){if(!a(w))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(w){const{allowedPrivateKeyLengths:v,nByteLength:A,wrapPrivateKey:k,n:E}=t;if(v&&typeof w!="bigint"){if(w instanceof Uint8Array&&(w=Or(w)),typeof w!="string"||!v.includes(w.length))throw new Error("Invalid key");w=w.padStart(A*2,"0")}let P;try{P=typeof w=="bigint"?w:ys(ue("private key",w,A))}catch{throw new Error(`private key must be ${A} bytes, hex or bigint, not ${typeof w}`)}return k&&(P=Ht(P,E)),o(P),P}const u=new Map;function d(w){if(!(w instanceof h))throw new Error("ProjectivePoint expected")}class h{constructor(v,A,k){if(this.px=v,this.py=A,this.pz=k,v==null||!e.isValid(v))throw new Error("x required");if(A==null||!e.isValid(A))throw new Error("y required");if(k==null||!e.isValid(k))throw new Error("z required")}static fromAffine(v){const{x:A,y:k}=v||{};if(!v||!e.isValid(A)||!e.isValid(k))throw new Error("invalid affine point");if(v instanceof h)throw new Error("projective point not allowed");const E=P=>e.eql(P,e.ZERO);return E(A)&&E(k)?h.ZERO:new h(A,k,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(v){const A=e.invertBatch(v.map(k=>k.pz));return v.map((k,E)=>k.toAffine(A[E])).map(h.fromAffine)}static fromHex(v){const A=h.fromAffine(r(ue("pointHex",v)));return A.assertValidity(),A}static fromPrivateKey(v){return h.BASE.multiply(l(v))}_setWindowSize(v){this._WINDOW_SIZE=v,u.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!e.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:v,y:A}=this.toAffine();if(!e.isValid(v)||!e.isValid(A))throw new Error("bad point: x or y not FE");const k=e.sqr(A),E=i(v);if(!e.eql(k,E))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:v}=this.toAffine();if(e.isOdd)return!e.isOdd(v);throw new Error("Field doesn't support isOdd")}equals(v){d(v);const{px:A,py:k,pz:E}=this,{px:P,py:O,pz:R}=v,T=e.eql(e.mul(A,R),e.mul(P,E)),B=e.eql(e.mul(k,R),e.mul(O,E));return T&&B}negate(){return new h(this.px,e.neg(this.py),this.pz)}double(){const{a:v,b:A}=t,k=e.mul(A,Cl),{px:E,py:P,pz:O}=this;let R=e.ZERO,T=e.ZERO,B=e.ZERO,L=e.mul(E,E),Q=e.mul(P,P),j=e.mul(O,O),z=e.mul(E,P);return z=e.add(z,z),B=e.mul(E,O),B=e.add(B,B),R=e.mul(v,B),T=e.mul(k,j),T=e.add(R,T),R=e.sub(Q,T),T=e.add(Q,T),T=e.mul(R,T),R=e.mul(z,R),B=e.mul(k,B),j=e.mul(v,j),z=e.sub(L,j),z=e.mul(v,z),z=e.add(z,B),B=e.add(L,L),L=e.add(B,L),L=e.add(L,j),L=e.mul(L,z),T=e.add(T,L),j=e.mul(P,O),j=e.add(j,j),L=e.mul(j,z),R=e.sub(R,L),B=e.mul(j,Q),B=e.add(B,B),B=e.add(B,B),new h(R,T,B)}add(v){d(v);const{px:A,py:k,pz:E}=this,{px:P,py:O,pz:R}=v;let T=e.ZERO,B=e.ZERO,L=e.ZERO;const Q=t.a,j=e.mul(t.b,Cl);let z=e.mul(A,P),W=e.mul(k,O),at=e.mul(E,R),wt=e.add(A,k),D=e.add(P,O);wt=e.mul(wt,D),D=e.add(z,W),wt=e.sub(wt,D),D=e.add(A,E);let G=e.add(P,R);return D=e.mul(D,G),G=e.add(z,at),D=e.sub(D,G),G=e.add(k,E),T=e.add(O,R),G=e.mul(G,T),T=e.add(W,at),G=e.sub(G,T),L=e.mul(Q,D),T=e.mul(j,at),L=e.add(T,L),T=e.sub(W,L),L=e.add(W,L),B=e.mul(T,L),W=e.add(z,z),W=e.add(W,z),at=e.mul(Q,at),D=e.mul(j,D),W=e.add(W,at),at=e.sub(z,at),at=e.mul(Q,at),D=e.add(D,at),z=e.mul(W,D),B=e.add(B,z),z=e.mul(G,D),T=e.mul(wt,T),T=e.sub(T,z),z=e.mul(wt,W),L=e.mul(G,L),L=e.add(L,z),new h(T,B,L)}subtract(v){return this.add(v.negate())}is0(){return this.equals(h.ZERO)}wNAF(v){return g.wNAFCached(this,u,v,A=>{const k=e.invertBatch(A.map(E=>E.pz));return A.map((E,P)=>E.toAffine(k[P])).map(h.fromAffine)})}multiplyUnsafe(v){const A=h.ZERO;if(v===Ye)return A;if(o(v),v===ae)return this;const{endo:k}=t;if(!k)return g.unsafeLadder(this,v);let{k1neg:E,k1:P,k2neg:O,k2:R}=k.splitScalar(v),T=A,B=A,L=this;for(;P>Ye||R>Ye;)P&ae&&(T=T.add(L)),R&ae&&(B=B.add(L)),L=L.double(),P>>=ae,R>>=ae;return E&&(T=T.negate()),O&&(B=B.negate()),B=new h(e.mul(B.px,k.beta),B.py,B.pz),T.add(B)}multiply(v){o(v);let A=v,k,E;const{endo:P}=t;if(P){const{k1neg:O,k1:R,k2neg:T,k2:B}=P.splitScalar(A);let{p:L,f:Q}=this.wNAF(R),{p:j,f:z}=this.wNAF(B);L=g.constTimeNegate(O,L),j=g.constTimeNegate(T,j),j=new h(e.mul(j.px,P.beta),j.py,j.pz),k=L.add(j),E=Q.add(z)}else{const{p:O,f:R}=this.wNAF(A);k=O,E=R}return h.normalizeZ([k,E])[0]}multiplyAndAddUnsafe(v,A,k){const E=h.BASE,P=(R,T)=>T===Ye||T===ae||!R.equals(E)?R.multiplyUnsafe(T):R.multiply(T),O=P(this,A).add(P(v,k));return O.is0()?void 0:O}toAffine(v){const{px:A,py:k,pz:E}=this,P=this.is0();v==null&&(v=P?e.ONE:e.inv(E));const O=e.mul(A,v),R=e.mul(k,v),T=e.mul(E,v);if(P)return{x:e.ZERO,y:e.ZERO};if(!e.eql(T,e.ONE))throw new Error("invZ was invalid");return{x:O,y:R}}isTorsionFree(){const{h:v,isTorsionFree:A}=t;if(v===ae)return!0;if(A)return A(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:v,clearCofactor:A}=t;return v===ae?this:A?A(h,this):this.multiplyUnsafe(t.h)}toRawBytes(v=!0){return this.assertValidity(),s(h,this,v)}toHex(v=!0){return Or(this.toRawBytes(v))}}h.BASE=new h(t.Gx,t.Gy,e.ONE),h.ZERO=new h(e.ZERO,e.ONE,e.ZERO);const y=t.nBitLength,g=Wf(h,t.endo?Math.ceil(y/2):y);return{CURVE:t,ProjectivePoint:h,normPrivateKeyToScalar:l,weierstrassEquation:i,isWithinCurveOrder:a}}function sh(n){const t=lu(n);return Pi(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function rh(n){const t=sh(n),{Fp:e,n:s}=t,r=e.BYTES+1,i=2*e.BYTES+1;function a(D){return Ye<D&&D<e.ORDER}function o(D){return Ht(D,s)}function l(D){return uo(D,s)}const{ProjectivePoint:u,normPrivateKeyToScalar:d,weierstrassEquation:h,isWithinCurveOrder:y}=nh({...t,toBytes(D,G,Y){const ct=G.toAffine(),ot=e.toBytes(ct.x),vt=ni;return Y?vt(Uint8Array.from([G.hasEvenY()?2:3]),ot):vt(Uint8Array.from([4]),ot,e.toBytes(ct.y))},fromBytes(D){const G=D.length,Y=D[0],ct=D.subarray(1);if(G===r&&(Y===2||Y===3)){const ot=ys(ct);if(!a(ot))throw new Error("Point is not on curve");const vt=h(ot);let zt=e.sqrt(vt);const jt=(zt&ae)===ae;return(Y&1)===1!==jt&&(zt=e.neg(zt)),{x:ot,y:zt}}else if(G===i&&Y===4){const ot=e.fromBytes(ct.subarray(0,e.BYTES)),vt=e.fromBytes(ct.subarray(e.BYTES,2*e.BYTES));return{x:ot,y:vt}}else throw new Error(`Point of length ${G} was invalid. Expected ${r} compressed bytes or ${i} uncompressed bytes`)}}),g=D=>Or(Dr(D,t.nByteLength));function w(D){const G=s>>ae;return D>G}function v(D){return w(D)?o(-D):D}const A=(D,G,Y)=>ys(D.slice(G,Y));class k{constructor(G,Y,ct){this.r=G,this.s=Y,this.recovery=ct,this.assertValidity()}static fromCompact(G){const Y=t.nByteLength;return G=ue("compactSignature",G,Y*2),new k(A(G,0,Y),A(G,Y,2*Y))}static fromDER(G){const{r:Y,s:ct}=Kn.toSig(ue("DER",G));return new k(Y,ct)}assertValidity(){if(!y(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!y(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(G){return new k(this.r,this.s,G)}recoverPublicKey(G){const{r:Y,s:ct,recovery:ot}=this,vt=B(ue("msgHash",G));if(ot==null||![0,1,2,3].includes(ot))throw new Error("recovery id invalid");const zt=ot===2||ot===3?Y+t.n:Y;if(zt>=e.ORDER)throw new Error("recovery id 2 or 3 invalid");const jt=ot&1?"03":"02",rn=u.fromHex(jt+g(zt)),an=l(zt),Cs=o(-vt*an),Qr=o(ct*an),on=u.BASE.multiplyAndAddUnsafe(rn,Cs,Qr);if(!on)throw new Error("point at infinify");return on.assertValidity(),on}hasHighS(){return w(this.s)}normalizeS(){return this.hasHighS()?new k(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return Lr(this.toDERHex())}toDERHex(){return Kn.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Lr(this.toCompactHex())}toCompactHex(){return g(this.r)+g(this.s)}}const E={isValidPrivateKey(D){try{return d(D),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const D=ou(t.n);return Zf(t.randomBytes(D),t.n)},precompute(D=8,G=u.BASE){return G._setWindowSize(D),G.multiply(BigInt(3)),G}};function P(D,G=!0){return u.fromPrivateKey(D).toRawBytes(G)}function O(D){const G=D instanceof Uint8Array,Y=typeof D=="string",ct=(G||Y)&&D.length;return G?ct===r||ct===i:Y?ct===2*r||ct===2*i:D instanceof u}function R(D,G,Y=!0){if(O(D))throw new Error("first arg must be private key");if(!O(G))throw new Error("second arg must be public key");return u.fromHex(G).multiply(d(D)).toRawBytes(Y)}const T=t.bits2int||function(D){const G=ys(D),Y=D.length*8-t.nBitLength;return Y>0?G>>BigInt(Y):G},B=t.bits2int_modN||function(D){return o(T(D))},L=zo(t.nBitLength);function Q(D){if(typeof D!="bigint")throw new Error("bigint expected");if(!(Ye<=D&&D<L))throw new Error(`bigint expected < 2^${t.nBitLength}`);return Dr(D,t.nByteLength)}function j(D,G,Y=z){if(["recovered","canonical"].some(Dn=>Dn in Y))throw new Error("sign() legacy options not supported");const{hash:ct,randomBytes:ot}=t;let{lowS:vt,prehash:zt,extraEntropy:jt}=Y;vt==null&&(vt=!0),D=ue("msgHash",D),zt&&(D=ue("prehashed msgHash",ct(D)));const rn=B(D),an=d(G),Cs=[Q(an),Q(rn)];if(jt!=null){const Dn=jt===!0?ot(e.BYTES):jt;Cs.push(ue("extraEntropy",Dn))}const Qr=ni(...Cs),on=rn;function Sa(Dn){const Ps=T(Dn);if(!y(Ps))return;const rl=l(Ps),Is=u.BASE.multiply(Ps).toAffine(),oe=o(Is.x);if(oe===Ye)return;const Ts=o(rl*o(on+oe*an));if(Ts===Ye)return;let il=(Is.x===oe?0:2)|Number(Is.y&ae),al=Ts;return vt&&w(Ts)&&(al=v(Ts),il^=1),new k(oe,al,il)}return{seed:Qr,k2sig:Sa}}const z={lowS:t.lowS,prehash:!1},W={lowS:t.lowS,prehash:!1};function at(D,G,Y=z){const{seed:ct,k2sig:ot}=j(D,G,Y),vt=t;return ru(vt.hash.outputLen,vt.nByteLength,vt.hmac)(ct,ot)}u.BASE._setWindowSize(8);function wt(D,G,Y,ct=W){var Is;const ot=D;if(G=ue("msgHash",G),Y=ue("publicKey",Y),"strict"in ct)throw new Error("options.strict was renamed to lowS");const{lowS:vt,prehash:zt}=ct;let jt,rn;try{if(typeof ot=="string"||ot instanceof Uint8Array)try{jt=k.fromDER(ot)}catch(oe){if(!(oe instanceof Kn.Err))throw oe;jt=k.fromCompact(ot)}else if(typeof ot=="object"&&typeof ot.r=="bigint"&&typeof ot.s=="bigint"){const{r:oe,s:Ts}=ot;jt=new k(oe,Ts)}else throw new Error("PARSE");rn=u.fromHex(Y)}catch(oe){if(oe.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(vt&&jt.hasHighS())return!1;zt&&(G=t.hash(G));const{r:an,s:Cs}=jt,Qr=B(G),on=l(Cs),Sa=o(Qr*on),Dn=o(an*on),Ps=(Is=u.BASE.multiplyAndAddUnsafe(rn,Sa,Dn))==null?void 0:Is.toAffine();return Ps?o(Ps.x)===an:!1}return{CURVE:t,getPublicKey:P,getSharedSecret:R,sign:at,verify:wt,ProjectivePoint:u,Signature:k,utils:E}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ih(n){return{hash:n,hmac:(t,...e)=>Uc(n,t,zd(...e)),randomBytes:jd}}function ah(n,t){const e=s=>rh({...n,...ih(s)});return Object.freeze({...e(t),create:e})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const cu=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Pl=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),oh=BigInt(1),fo=BigInt(2),Il=(n,t)=>(n+t/fo)/t;function lh(n){const t=cu,e=BigInt(3),s=BigInt(6),r=BigInt(11),i=BigInt(22),a=BigInt(23),o=BigInt(44),l=BigInt(88),u=n*n*n%t,d=u*u*n%t,h=Xt(d,e,t)*d%t,y=Xt(h,e,t)*d%t,g=Xt(y,fo,t)*u%t,w=Xt(g,r,t)*g%t,v=Xt(w,i,t)*w%t,A=Xt(v,o,t)*v%t,k=Xt(A,l,t)*A%t,E=Xt(k,o,t)*v%t,P=Xt(E,e,t)*d%t,O=Xt(P,a,t)*w%t,R=Xt(O,s,t)*u%t,T=Xt(R,fo,t);if(!ho.eql(ho.sqr(T),n))throw new Error("Cannot find square root");return T}const ho=qf(cu,void 0,void 0,{sqrt:lh}),fn=ah({a:BigInt(0),b:BigInt(7),Fp:ho,n:Pl,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const t=Pl,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),s=-oh*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),r=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=e,a=BigInt("0x100000000000000000000000000000000"),o=Il(i*n,t),l=Il(-s*n,t);let u=Ht(n-o*e-l*r,t),d=Ht(-o*s-l*i,t);const h=u>a,y=d>a;if(h&&(u=t-u),y&&(d=t-d),u>a||d>a)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:h,k1:u,k2neg:y,k2:d}}}},Mc);BigInt(0);fn.ProjectivePoint;const si="0x0000000000000000000000000000000000000000",Tl="0x0000000000000000000000000000000000000000000000000000000000000000",Nl=BigInt(0),Bl=BigInt(1),Sl=BigInt(2),$l=BigInt(27),Rl=BigInt(28),Oi=BigInt(35),Bs={};function Ol(n){return en(bt(n),32)}var er,_e,nr,as;const ce=class ce{constructor(t,e,s,r){I(this,er);I(this,_e);I(this,nr);I(this,as);Ei(t,Bs,"Signature"),b(this,er,e),b(this,_e,s),b(this,nr,r),b(this,as,null)}get r(){return f(this,er)}set r(t){x(Gs(t)===32,"invalid r","value",t),b(this,er,U(t))}get s(){return x(parseInt(f(this,_e).substring(0,3))<8,"non-canonical s; use ._s","s",f(this,_e)),f(this,_e)}set s(t){x(Gs(t)===32,"invalid s","value",t),b(this,_e,U(t))}get _s(){return f(this,_e)}isValid(){return parseInt(f(this,_e).substring(0,3))<8}get v(){return f(this,nr)}set v(t){const e=K(t,"value");x(e===27||e===28,"invalid v","v",t),b(this,nr,e)}get networkV(){return f(this,as)}get legacyChainId(){const t=this.networkV;return t==null?null:ce.getChainId(t)}get yParity(){return this.v===27?0:1}get yParityAndS(){const t=q(this.s);return this.yParity&&(t[0]|=128),U(t)}get compactSerialized(){return pt([this.r,this.yParityAndS])}get serialized(){return pt([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const t=new ce(Bs,this.r,this._s,this.v);return this.networkV&&b(t,as,this.networkV),t}toJSON(){const t=this.networkV;return{_type:"signature",networkV:t!=null?t.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(t){const e=H(t,"v");return e==$l||e==Rl?Nl:(x(e>=Oi,"invalid EIP-155 v","v",t),(e-Oi)/Sl)}static getChainIdV(t,e){return H(t)*Sl+BigInt(35+e-27)}static getNormalizedV(t){const e=H(t);return e===Nl||e===$l?27:e===Bl||e===Rl?28:(x(e>=Oi,"invalid v","v",t),e&Bl?27:28)}static from(t){function e(u,d){x(u,d,"signature",t)}if(t==null)return new ce(Bs,Tl,Tl,27);if(typeof t=="string"){const u=q(t,"signature");if(u.length===64){const d=U(u.slice(0,32)),h=u.slice(32,64),y=h[0]&128?28:27;return h[0]&=127,new ce(Bs,d,U(h),y)}if(u.length===65){const d=U(u.slice(0,32)),h=U(u.slice(32,64)),y=ce.getNormalizedV(u[64]);return new ce(Bs,d,h,y)}e(!1,"invalid raw signature length")}if(t instanceof ce)return t.clone();const s=t.r;e(s!=null,"missing r");const r=Ol(s),i=function(u,d){if(u!=null)return Ol(u);if(d!=null){e(lt(d,32),"invalid yParityAndS");const h=q(d);return h[0]&=127,U(h)}e(!1,"missing s")}(t.s,t.yParityAndS),{networkV:a,v:o}=function(u,d,h){if(u!=null){const y=H(u);return{networkV:y>=Oi?y:void 0,v:ce.getNormalizedV(y)}}if(d!=null)return e(lt(d,32),"invalid yParityAndS"),{v:q(d)[0]&128?28:27};if(h!=null){switch(K(h,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}e(!1,"invalid yParity")}e(!1,"missing v")}(t.v,t.yParityAndS,t.yParity),l=new ce(Bs,r,i,o);return a&&b(l,as,a),e(t.yParity==null||K(t.yParity,"sig.yParity")===l.yParity,"yParity mismatch"),e(t.yParityAndS==null||t.yParityAndS===l.yParityAndS,"yParityAndS mismatch"),l}};er=new WeakMap,_e=new WeakMap,nr=new WeakMap,as=new WeakMap;let Qt=ce;var Qe;const Vn=class Vn{constructor(t){I(this,Qe);x(Gs(t)===32,"invalid private key","privateKey","[REDACTED]"),b(this,Qe,U(t))}get privateKey(){return f(this,Qe)}get publicKey(){return Vn.computePublicKey(f(this,Qe))}get compressedPublicKey(){return Vn.computePublicKey(f(this,Qe),!0)}sign(t){x(Gs(t)===32,"invalid digest length","digest",t);const e=fn.sign(Ot(t),Ot(f(this,Qe)),{lowS:!0});return Qt.from({r:Sn(e.r,32),s:Sn(e.s,32),v:e.recovery?28:27})}computeSharedSecret(t){const e=Vn.computePublicKey(t);return U(fn.getSharedSecret(Ot(f(this,Qe)),q(e),!1))}static computePublicKey(t,e){let s=q(t,"key");if(s.length===32){const i=fn.getPublicKey(s,!!e);return U(i)}if(s.length===64){const i=new Uint8Array(65);i[0]=4,i.set(s,1),s=i}const r=fn.ProjectivePoint.fromHex(s);return U(r.toRawBytes(e))}static recoverPublicKey(t,e){x(Gs(t)===32,"invalid digest length","digest",t);const s=Qt.from(e);let r=fn.Signature.fromCompact(Ot(pt([s.r,s.s])));r=r.addRecoveryBit(s.yParity);const i=r.recoverPublicKey(Ot(t));return x(i!=null,"invalid signature for digest","signature",e),"0x"+i.toHex(!1)}static addPoints(t,e,s){const r=fn.ProjectivePoint.fromHex(Vn.computePublicKey(t).substring(2)),i=fn.ProjectivePoint.fromHex(Vn.computePublicKey(e).substring(2));return"0x"+r.add(i).toHex(!!s)}};Qe=new WeakMap;let ri=Vn;const ch=BigInt(0),uh=BigInt(36);function Ll(n){n=n.toLowerCase();const t=n.substring(2).split(""),e=new Uint8Array(40);for(let r=0;r<40;r++)e[r]=t[r].charCodeAt(0);const s=q(yt(e));for(let r=0;r<40;r+=2)s[r>>1]>>4>=8&&(t[r]=t[r].toUpperCase()),(s[r>>1]&15)>=8&&(t[r+1]=t[r+1].toUpperCase());return"0x"+t.join("")}const jo={};for(let n=0;n<10;n++)jo[String(n)]=String(n);for(let n=0;n<26;n++)jo[String.fromCharCode(65+n)]=String(10+n);const Dl=15;function dh(n){n=n.toUpperCase(),n=n.substring(4)+n.substring(0,2)+"00";let t=n.split("").map(s=>jo[s]).join("");for(;t.length>=Dl;){let s=t.substring(0,Dl);t=parseInt(s,10)%97+t.substring(s.length)}let e=String(98-parseInt(t,10)%97);for(;e.length<2;)e="0"+e;return e}const fh=function(){const n={};for(let t=0;t<36;t++){const e="0123456789abcdefghijklmnopqrstuvwxyz"[t];n[e]=BigInt(t)}return n}();function hh(n){n=n.toLowerCase();let t=ch;for(let e=0;e<n.length;e++)t=t*uh+fh[n[e]];return t}function st(n){if(x(typeof n=="string","invalid address","address",n),n.match(/^(0x)?[0-9a-fA-F]{40}$/)){n.startsWith("0x")||(n="0x"+n);const t=Ll(n);return x(!n.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||t===n,"bad address checksum","address",n),t}if(n.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){x(n.substring(2,4)===dh(n),"bad icap checksum","address",n);let t=hh(n.substring(4)).toString(16);for(;t.length<40;)t="0"+t;return Ll("0x"+t)}x(!1,"invalid address","address",n)}function ph(n){const t=st(n.from);let s=H(n.nonce,"tx.nonce").toString(16);return s==="0"?s="0x":s.length%2?s="0x0"+s:s="0x"+s,st(ht(yt(Rn([t,s])),12))}function uu(n){return n&&typeof n.getAddress=="function"}async function Ma(n,t){const e=await t;return(e==null||e==="0x0000000000000000000000000000000000000000")&&(N(typeof n!="string","unconfigured name","UNCONFIGURED_NAME",{value:n}),x(!1,"invalid AddressLike value; did not resolve to a value address","target",n)),st(e)}function Dt(n,t){if(typeof n=="string")return n.match(/^0x[0-9a-f]{40}$/i)?st(n):(N(t!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),Ma(n,t.resolveName(n)));if(uu(n))return Ma(n,n.getAddress());if(n&&typeof n.then=="function")return Ma(n,n);x(!1,"unsupported addressable value","target",n)}const De={};function M(n,t){let e=!1;return t<0&&(e=!0,t*=-1),new Bt(De,`${e?"":"u"}int${t}`,n,{signed:e,width:t})}function et(n,t){return new Bt(De,`bytes${t||""}`,n,{size:t})}const Ul=Symbol.for("_ethers_typed");var os;const Ue=class Ue{constructor(t,e,s,r){_(this,"type");_(this,"value");I(this,os);_(this,"_typedSymbol");r==null&&(r=null),Ei(De,t,"Typed"),V(this,{_typedSymbol:Ul,type:e,value:s}),b(this,os,r),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(t=>t.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return f(this,os)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return f(this,os)===!0?-1:f(this,os)===!1?this.value.length:null}static from(t,e){return new Ue(De,t,e)}static uint8(t){return M(t,8)}static uint16(t){return M(t,16)}static uint24(t){return M(t,24)}static uint32(t){return M(t,32)}static uint40(t){return M(t,40)}static uint48(t){return M(t,48)}static uint56(t){return M(t,56)}static uint64(t){return M(t,64)}static uint72(t){return M(t,72)}static uint80(t){return M(t,80)}static uint88(t){return M(t,88)}static uint96(t){return M(t,96)}static uint104(t){return M(t,104)}static uint112(t){return M(t,112)}static uint120(t){return M(t,120)}static uint128(t){return M(t,128)}static uint136(t){return M(t,136)}static uint144(t){return M(t,144)}static uint152(t){return M(t,152)}static uint160(t){return M(t,160)}static uint168(t){return M(t,168)}static uint176(t){return M(t,176)}static uint184(t){return M(t,184)}static uint192(t){return M(t,192)}static uint200(t){return M(t,200)}static uint208(t){return M(t,208)}static uint216(t){return M(t,216)}static uint224(t){return M(t,224)}static uint232(t){return M(t,232)}static uint240(t){return M(t,240)}static uint248(t){return M(t,248)}static uint256(t){return M(t,256)}static uint(t){return M(t,256)}static int8(t){return M(t,-8)}static int16(t){return M(t,-16)}static int24(t){return M(t,-24)}static int32(t){return M(t,-32)}static int40(t){return M(t,-40)}static int48(t){return M(t,-48)}static int56(t){return M(t,-56)}static int64(t){return M(t,-64)}static int72(t){return M(t,-72)}static int80(t){return M(t,-80)}static int88(t){return M(t,-88)}static int96(t){return M(t,-96)}static int104(t){return M(t,-104)}static int112(t){return M(t,-112)}static int120(t){return M(t,-120)}static int128(t){return M(t,-128)}static int136(t){return M(t,-136)}static int144(t){return M(t,-144)}static int152(t){return M(t,-152)}static int160(t){return M(t,-160)}static int168(t){return M(t,-168)}static int176(t){return M(t,-176)}static int184(t){return M(t,-184)}static int192(t){return M(t,-192)}static int200(t){return M(t,-200)}static int208(t){return M(t,-208)}static int216(t){return M(t,-216)}static int224(t){return M(t,-224)}static int232(t){return M(t,-232)}static int240(t){return M(t,-240)}static int248(t){return M(t,-248)}static int256(t){return M(t,-256)}static int(t){return M(t,-256)}static bytes1(t){return et(t,1)}static bytes2(t){return et(t,2)}static bytes3(t){return et(t,3)}static bytes4(t){return et(t,4)}static bytes5(t){return et(t,5)}static bytes6(t){return et(t,6)}static bytes7(t){return et(t,7)}static bytes8(t){return et(t,8)}static bytes9(t){return et(t,9)}static bytes10(t){return et(t,10)}static bytes11(t){return et(t,11)}static bytes12(t){return et(t,12)}static bytes13(t){return et(t,13)}static bytes14(t){return et(t,14)}static bytes15(t){return et(t,15)}static bytes16(t){return et(t,16)}static bytes17(t){return et(t,17)}static bytes18(t){return et(t,18)}static bytes19(t){return et(t,19)}static bytes20(t){return et(t,20)}static bytes21(t){return et(t,21)}static bytes22(t){return et(t,22)}static bytes23(t){return et(t,23)}static bytes24(t){return et(t,24)}static bytes25(t){return et(t,25)}static bytes26(t){return et(t,26)}static bytes27(t){return et(t,27)}static bytes28(t){return et(t,28)}static bytes29(t){return et(t,29)}static bytes30(t){return et(t,30)}static bytes31(t){return et(t,31)}static bytes32(t){return et(t,32)}static address(t){return new Ue(De,"address",t)}static bool(t){return new Ue(De,"bool",!!t)}static bytes(t){return new Ue(De,"bytes",t)}static string(t){return new Ue(De,"string",t)}static array(t,e){throw new Error("not implemented yet")}static tuple(t,e){throw new Error("not implemented yet")}static overrides(t){return new Ue(De,"overrides",Object.assign({},t))}static isTyped(t){return t&&typeof t=="object"&&"_typedSymbol"in t&&t._typedSymbol===Ul}static dereference(t,e){if(Ue.isTyped(t)){if(t.type!==e)throw new Error(`invalid type: expecetd ${e}, got ${t.type}`);return t.value}return t}};os=new WeakMap;let Bt=Ue;class mh extends sn{constructor(t){super("address","address",t,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(t,e){let s=Bt.dereference(e,"string");try{s=st(s)}catch(r){return this._throwError(r.message,e)}return t.writeValue(s)}decode(t){return st(Sn(t.readValue(),20))}}class gh extends sn{constructor(e){super(e.name,e.type,"_",e.dynamic);_(this,"coder");this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,s){return this.coder.encode(e,s)}decode(e){return this.coder.decode(e)}}function du(n,t,e){let s=[];if(Array.isArray(e))s=e;else if(e&&typeof e=="object"){let l={};s=t.map(u=>{const d=u.localName;return N(d,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:u},value:e}),N(!l[d],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:u},value:e}),l[d]=!0,e[d]})}else x(!1,"invalid tuple value","tuple",e);x(t.length===s.length,"types/value length mismatch","tuple",e);let r=new io,i=new io,a=[];t.forEach((l,u)=>{let d=s[u];if(l.dynamic){let h=i.length;l.encode(i,d);let y=r.writeUpdatableValue();a.push(g=>{y(g+h)})}else l.encode(r,d)}),a.forEach(l=>{l(r.length)});let o=n.appendWriter(r);return o+=n.appendWriter(i),o}function fu(n,t){let e=[],s=[],r=n.subReader(0);return t.forEach(i=>{let a=null;if(i.dynamic){let o=n.readIndex(),l=r.subReader(o);try{a=i.decode(l)}catch(u){if(Ct(u,"BUFFER_OVERRUN"))throw u;a=u,a.baseType=i.name,a.name=i.localName,a.type=i.type}}else try{a=i.decode(n)}catch(o){if(Ct(o,"BUFFER_OVERRUN"))throw o;a=o,a.baseType=i.name,a.name=i.localName,a.type=i.type}if(a==null)throw new Error("investigate");e.push(a),s.push(i.localName||null)}),$r.fromItems(e,s)}class yh extends sn{constructor(e,s,r){const i=e.type+"["+(s>=0?s:"")+"]",a=s===-1||e.dynamic;super("array",i,r,a);_(this,"coder");_(this,"length");V(this,{coder:e,length:s})}defaultValue(){const e=this.coder.defaultValue(),s=[];for(let r=0;r<this.length;r++)s.push(e);return s}encode(e,s){const r=Bt.dereference(s,"array");Array.isArray(r)||this._throwError("expected array value",r);let i=this.length;i===-1&&(i=r.length,e.writeValue(r.length)),Ac(r.length,i,"coder array"+(this.localName?" "+this.localName:""));let a=[];for(let o=0;o<r.length;o++)a.push(this.coder);return du(e,a,r)}decode(e){let s=this.length;s===-1&&(s=e.readIndex(),N(s*Lt<=e.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:e.bytes,offset:s*Lt,length:e.dataLength}));let r=[];for(let i=0;i<s;i++)r.push(new gh(this.coder));return fu(e,r)}}class bh extends sn{constructor(t){super("bool","bool",t,!1)}defaultValue(){return!1}encode(t,e){const s=Bt.dereference(e,"bool");return t.writeValue(s?1:0)}decode(t){return!!t.readValue()}}class hu extends sn{constructor(t,e){super(t,t,e,!0)}defaultValue(){return"0x"}encode(t,e){e=Ot(e);let s=t.writeValue(e.length);return s+=t.writeBytes(e),s}decode(t){return t.readBytes(t.readIndex(),!0)}}class wh extends hu{constructor(t){super("bytes",t)}decode(t){return U(super.decode(t))}}class vh extends sn{constructor(e,s){let r="bytes"+String(e);super(r,r,s,!1);_(this,"size");V(this,{size:e},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,s){let r=Ot(Bt.dereference(s,this.type));return r.length!==this.size&&this._throwError("incorrect data length",s),e.writeBytes(r)}decode(e){return U(e.readBytes(this.size))}}const Ah=new Uint8Array([]);class xh extends sn{constructor(t){super("null","",t,!1)}defaultValue(){return null}encode(t,e){return e!=null&&this._throwError("not null",e),t.writeBytes(Ah)}decode(t){return t.readBytes(0),null}}const kh=BigInt(0),_h=BigInt(1),Eh=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class Ch extends sn{constructor(e,s,r){const i=(s?"int":"uint")+e*8;super(i,i,r,!1);_(this,"size");_(this,"signed");V(this,{size:e,signed:s},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(e,s){let r=H(Bt.dereference(s,this.type)),i=Jn(Eh,Lt*8);if(this.signed){let a=Jn(i,this.size*8-1);(r>a||r<-(a+_h))&&this._throwError("value out-of-bounds",s),r=_c(r,8*Lt)}else(r<kh||r>Jn(i,this.size*8))&&this._throwError("value out-of-bounds",s);return e.writeValue(r)}decode(e){let s=Jn(e.readValue(),this.size*8);return this.signed&&(s=Zi(s,this.size*8)),s}}class Ph extends hu{constructor(t){super("string",t)}defaultValue(){return""}encode(t,e){return super.encode(t,Xe(Bt.dereference(e,"string")))}decode(t){return Yi(super.decode(t))}}class Li extends sn{constructor(e,s){let r=!1;const i=[];e.forEach(o=>{o.dynamic&&(r=!0),i.push(o.type)});const a="tuple("+i.join(",")+")";super("tuple",a,s,r);_(this,"coders");V(this,{coders:Object.freeze(e.slice())})}defaultValue(){const e=[];this.coders.forEach(r=>{e.push(r.defaultValue())});const s=this.coders.reduce((r,i)=>{const a=i.localName;return a&&(r[a]||(r[a]=0),r[a]++),r},{});return this.coders.forEach((r,i)=>{let a=r.localName;!a||s[a]!==1||(a==="length"&&(a="_length"),e[a]==null&&(e[a]=e[i]))}),Object.freeze(e)}encode(e,s){const r=Bt.dereference(s,"tuple");return du(e,this.coders,r)}decode(e){return fu(e,this.coders)}}function Ha(n,t){return{address:st(n),storageKeys:t.map((e,s)=>(x(lt(e,32),"invalid slot",`storageKeys[${s}]`,e),e.toLowerCase()))}}function _s(n){if(Array.isArray(n))return n.map((e,s)=>Array.isArray(e)?(x(e.length===2,"invalid slot set",`value[${s}]`,e),Ha(e[0],e[1])):(x(e!=null&&typeof e=="object","invalid address-slot set","value",n),Ha(e.address,e.storageKeys)));x(n!=null&&typeof n=="object","invalid access list","value",n);const t=Object.keys(n).map(e=>{const s=n[e].reduce((r,i)=>(r[i]=!0,r),{});return Ha(e,Object.keys(s).sort())});return t.sort((e,s)=>e.address.localeCompare(s.address)),t}function pu(n){return{address:st(n.address),nonce:H(n.nonce!=null?n.nonce:0),chainId:H(n.chainId!=null?n.chainId:0),signature:Qt.from(n.signature)}}function Ih(n){let t;return typeof n=="string"?t=ri.computePublicKey(n,!1):t=n.publicKey,st(yt("0x"+t.substring(4)).substring(26))}function Th(n,t){return Ih(ri.recoverPublicKey(n,t))}const xt=BigInt(0),Nh=BigInt(2),Bh=BigInt(27),Sh=BigInt(28),$h=BigInt(35),Rh=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Ga=4096*32;function Oh(n){return{blobToKzgCommitment:s=>{if("computeBlobProof"in n){if("blobToKzgCommitment"in n&&typeof n.blobToKzgCommitment=="function")return q(n.blobToKzgCommitment(U(s)))}else if("blobToKzgCommitment"in n&&typeof n.blobToKzgCommitment=="function")return q(n.blobToKzgCommitment(s));if("blobToKZGCommitment"in n&&typeof n.blobToKZGCommitment=="function")return q(n.blobToKZGCommitment(U(s)));x(!1,"unsupported KZG library","kzg",n)},computeBlobKzgProof:(s,r)=>{if("computeBlobProof"in n&&typeof n.computeBlobProof=="function")return q(n.computeBlobProof(U(s),U(r)));if("computeBlobKzgProof"in n&&typeof n.computeBlobKzgProof=="function")return n.computeBlobKzgProof(s,r);if("computeBlobKZGProof"in n&&typeof n.computeBlobKZGProof=="function")return q(n.computeBlobKZGProof(U(s),U(r)));x(!1,"unsupported KZG library","kzg",n)}}}function Fl(n,t){let e=n.toString(16);for(;e.length<2;)e="0"+e;return e+=Hr(t).substring(4),"0x"+e}function Gr(n){return n==="0x"?null:st(n)}function ka(n,t){try{return _s(n)}catch(e){x(!1,e.message,t,n)}}function Lh(n,t){try{if(!Array.isArray(n))throw new Error("authorizationList: invalid array");const e=[];for(let s=0;s<n.length;s++){const r=n[s];if(!Array.isArray(r))throw new Error(`authorization[${s}]: invalid array`);if(r.length!==6)throw new Error(`authorization[${s}]: wrong length`);if(!r[1])throw new Error(`authorization[${s}]: null address`);e.push({address:Gr(r[1]),nonce:it(r[2],"nonce"),chainId:it(r[0],"chainId"),signature:Qt.from({yParity:Es(r[3],"yParity"),r:en(r[4],32),s:en(r[5],32)})})}return e}catch(e){x(!1,e.message,t,n)}}function Es(n,t){return n==="0x"?0:K(n,t)}function it(n,t){if(n==="0x")return xt;const e=H(n,t);return x(e<=Rh,"value exceeds uint size",t,e),e}function tt(n,t){const e=H(n,"value"),s=bt(e);return x(s.length<=32,"value too large",`tx.${t}`,e),s}function _a(n){return _s(n).map(t=>[t.address,t.storageKeys])}function Dh(n){return n.map(t=>[tt(t.chainId,"chainId"),t.address,tt(t.nonce,"nonce"),tt(t.signature.yParity,"yParity"),bt(t.signature.r),bt(t.signature.s)])}function Uh(n,t){x(Array.isArray(n),`invalid ${t}`,"value",n);for(let e=0;e<n.length;e++)x(lt(n[e],32),"invalid ${ param } hash",`value[${e}]`,n[e]);return n}function Fh(n){const t=Ci(n);x(Array.isArray(t)&&(t.length===9||t.length===6),"invalid field count for legacy transaction","data",n);const e={type:0,nonce:Es(t[0],"nonce"),gasPrice:it(t[1],"gasPrice"),gasLimit:it(t[2],"gasLimit"),to:Gr(t[3]),value:it(t[4],"value"),data:U(t[5]),chainId:xt};if(t.length===6)return e;const s=it(t[6],"v"),r=it(t[7],"r"),i=it(t[8],"s");if(r===xt&&i===xt)e.chainId=s;else{let a=(s-$h)/Nh;a<xt&&(a=xt),e.chainId=a,x(a!==xt||s===Bh||s===Sh,"non-canonical legacy v","v",t[6]),e.signature=Qt.from({r:en(t[7],32),s:en(t[8],32),v:s})}return e}function Mh(n,t){const e=[tt(n.nonce,"nonce"),tt(n.gasPrice||0,"gasPrice"),tt(n.gasLimit,"gasLimit"),n.to||"0x",tt(n.value,"value"),n.data];let s=xt;if(n.chainId!=xt)s=H(n.chainId,"tx.chainId"),x(!t||t.networkV==null||t.legacyChainId===s,"tx.chainId/sig.v mismatch","sig",t);else if(n.signature){const i=n.signature.legacyChainId;i!=null&&(s=i)}if(!t)return s!==xt&&(e.push(bt(s)),e.push("0x"),e.push("0x")),Rn(e);let r=BigInt(27+t.yParity);return s!==xt?r=Qt.getChainIdV(s,t.v):BigInt(t.v)!==r&&x(!1,"tx.chainId/sig.v mismatch","sig",t),e.push(bt(r)),e.push(bt(t.r)),e.push(bt(t.s)),Rn(e)}function Ea(n,t){let e;try{if(e=Es(t[0],"yParity"),e!==0&&e!==1)throw new Error("bad yParity")}catch{x(!1,"invalid yParity","yParity",t[0])}const s=en(t[1],32),r=en(t[2],32),i=Qt.from({r:s,s:r,yParity:e});n.signature=i}function Hh(n){const t=Ci(q(n).slice(1));x(Array.isArray(t)&&(t.length===9||t.length===12),"invalid field count for transaction type: 2","data",U(n));const e={type:2,chainId:it(t[0],"chainId"),nonce:Es(t[1],"nonce"),maxPriorityFeePerGas:it(t[2],"maxPriorityFeePerGas"),maxFeePerGas:it(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:it(t[4],"gasLimit"),to:Gr(t[5]),value:it(t[6],"value"),data:U(t[7]),accessList:ka(t[8],"accessList")};return t.length===9||Ea(e,t.slice(9)),e}function Gh(n,t){const e=[tt(n.chainId,"chainId"),tt(n.nonce,"nonce"),tt(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),tt(n.maxFeePerGas||0,"maxFeePerGas"),tt(n.gasLimit,"gasLimit"),n.to||"0x",tt(n.value,"value"),n.data,_a(n.accessList||[])];return t&&(e.push(tt(t.yParity,"yParity")),e.push(bt(t.r)),e.push(bt(t.s))),pt(["0x02",Rn(e)])}function Qh(n){const t=Ci(q(n).slice(1));x(Array.isArray(t)&&(t.length===8||t.length===11),"invalid field count for transaction type: 1","data",U(n));const e={type:1,chainId:it(t[0],"chainId"),nonce:Es(t[1],"nonce"),gasPrice:it(t[2],"gasPrice"),gasLimit:it(t[3],"gasLimit"),to:Gr(t[4]),value:it(t[5],"value"),data:U(t[6]),accessList:ka(t[7],"accessList")};return t.length===8||Ea(e,t.slice(8)),e}function Vh(n,t){const e=[tt(n.chainId,"chainId"),tt(n.nonce,"nonce"),tt(n.gasPrice||0,"gasPrice"),tt(n.gasLimit,"gasLimit"),n.to||"0x",tt(n.value,"value"),n.data,_a(n.accessList||[])];return t&&(e.push(tt(t.yParity,"recoveryParam")),e.push(bt(t.r)),e.push(bt(t.s))),pt(["0x01",Rn(e)])}function zh(n){let t=Ci(q(n).slice(1)),e="3",s=null;if(t.length===4&&Array.isArray(t[0])){e="3 (network format)";const i=t[1],a=t[2],o=t[3];x(Array.isArray(i),"invalid network format: blobs not an array","fields[1]",i),x(Array.isArray(a),"invalid network format: commitments not an array","fields[2]",a),x(Array.isArray(o),"invalid network format: proofs not an array","fields[3]",o),x(i.length===a.length,"invalid network format: blobs/commitments length mismatch","fields",t),x(i.length===o.length,"invalid network format: blobs/proofs length mismatch","fields",t),s=[];for(let l=0;l<t[1].length;l++)s.push({data:i[l],commitment:a[l],proof:o[l]});t=t[0]}x(Array.isArray(t)&&(t.length===11||t.length===14),`invalid field count for transaction type: ${e}`,"data",U(n));const r={type:3,chainId:it(t[0],"chainId"),nonce:Es(t[1],"nonce"),maxPriorityFeePerGas:it(t[2],"maxPriorityFeePerGas"),maxFeePerGas:it(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:it(t[4],"gasLimit"),to:Gr(t[5]),value:it(t[6],"value"),data:U(t[7]),accessList:ka(t[8],"accessList"),maxFeePerBlobGas:it(t[9],"maxFeePerBlobGas"),blobVersionedHashes:t[10]};s&&(r.blobs=s),x(r.to!=null,`invalid address for transaction type: ${e}`,"data",n),x(Array.isArray(r.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",n);for(let i=0;i<r.blobVersionedHashes.length;i++)x(lt(r.blobVersionedHashes[i],32),`invalid blobVersionedHash at index ${i}: must be length 32`,"data",n);return t.length===11||Ea(r,t.slice(11)),r}function jh(n,t,e){const s=[tt(n.chainId,"chainId"),tt(n.nonce,"nonce"),tt(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),tt(n.maxFeePerGas||0,"maxFeePerGas"),tt(n.gasLimit,"gasLimit"),n.to||si,tt(n.value,"value"),n.data,_a(n.accessList||[]),tt(n.maxFeePerBlobGas||0,"maxFeePerBlobGas"),Uh(n.blobVersionedHashes||[],"blobVersionedHashes")];return t&&(s.push(tt(t.yParity,"yParity")),s.push(bt(t.r)),s.push(bt(t.s)),e)?pt(["0x03",Rn([s,e.map(r=>r.data),e.map(r=>r.commitment),e.map(r=>r.proof)])]):pt(["0x03",Rn(s)])}function Jh(n){const t=Ci(q(n).slice(1));x(Array.isArray(t)&&(t.length===10||t.length===13),"invalid field count for transaction type: 4","data",U(n));const e={type:4,chainId:it(t[0],"chainId"),nonce:Es(t[1],"nonce"),maxPriorityFeePerGas:it(t[2],"maxPriorityFeePerGas"),maxFeePerGas:it(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:it(t[4],"gasLimit"),to:Gr(t[5]),value:it(t[6],"value"),data:U(t[7]),accessList:ka(t[8],"accessList"),authorizationList:Lh(t[9],"authorizationList")};return t.length===10||Ea(e,t.slice(10)),e}function Kh(n,t){const e=[tt(n.chainId,"chainId"),tt(n.nonce,"nonce"),tt(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),tt(n.maxFeePerGas||0,"maxFeePerGas"),tt(n.gasLimit,"gasLimit"),n.to||"0x",tt(n.value,"value"),n.data,_a(n.accessList||[]),Dh(n.authorizationList||[])];return t&&(e.push(tt(t.yParity,"yParity")),e.push(bt(t.r)),e.push(bt(t.s))),pt(["0x04",Rn(e)])}var pe,sr,rr,ir,ar,or,lr,cr,ur,dr,fr,hr,ls,yn,Ee,bn,pr,mr,Hi;const xe=class xe{constructor(){I(this,mr);I(this,pe);I(this,sr);I(this,rr);I(this,ir);I(this,ar);I(this,or);I(this,lr);I(this,cr);I(this,ur);I(this,dr);I(this,fr);I(this,hr);I(this,ls);I(this,yn);I(this,Ee);I(this,bn);I(this,pr);b(this,pe,null),b(this,sr,null),b(this,ir,0),b(this,ar,xt),b(this,or,null),b(this,lr,null),b(this,cr,null),b(this,rr,"0x"),b(this,ur,xt),b(this,dr,xt),b(this,fr,null),b(this,hr,null),b(this,ls,null),b(this,yn,null),b(this,Ee,null),b(this,bn,null),b(this,pr,null)}get type(){return f(this,pe)}set type(t){switch(t){case null:b(this,pe,null);break;case 0:case"legacy":b(this,pe,0);break;case 1:case"berlin":case"eip-2930":b(this,pe,1);break;case 2:case"london":case"eip-1559":b(this,pe,2);break;case 3:case"cancun":case"eip-4844":b(this,pe,3);break;case 4:case"pectra":case"eip-7702":b(this,pe,4);break;default:x(!1,"unsupported transaction type","type",t)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const t=f(this,sr);return t==null&&this.type===3?si:t}set to(t){b(this,sr,t==null?null:st(t))}get nonce(){return f(this,ir)}set nonce(t){b(this,ir,K(t,"value"))}get gasLimit(){return f(this,ar)}set gasLimit(t){b(this,ar,H(t))}get gasPrice(){const t=f(this,or);return t==null&&(this.type===0||this.type===1)?xt:t}set gasPrice(t){b(this,or,t==null?null:H(t,"gasPrice"))}get maxPriorityFeePerGas(){const t=f(this,lr);return t??(this.type===2||this.type===3?xt:null)}set maxPriorityFeePerGas(t){b(this,lr,t==null?null:H(t,"maxPriorityFeePerGas"))}get maxFeePerGas(){const t=f(this,cr);return t??(this.type===2||this.type===3?xt:null)}set maxFeePerGas(t){b(this,cr,t==null?null:H(t,"maxFeePerGas"))}get data(){return f(this,rr)}set data(t){b(this,rr,U(t))}get value(){return f(this,ur)}set value(t){b(this,ur,H(t,"value"))}get chainId(){return f(this,dr)}set chainId(t){b(this,dr,H(t))}get signature(){return f(this,fr)||null}set signature(t){b(this,fr,t==null?null:Qt.from(t))}get accessList(){const t=f(this,hr)||null;return t??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(t){b(this,hr,t==null?null:_s(t))}get authorizationList(){const t=f(this,pr)||null;return t==null&&this.type===4?[]:t}set authorizationList(t){b(this,pr,t==null?null:t.map(e=>pu(e)))}get maxFeePerBlobGas(){const t=f(this,ls);return t==null&&this.type===3?xt:t}set maxFeePerBlobGas(t){b(this,ls,t==null?null:H(t,"maxFeePerBlobGas"))}get blobVersionedHashes(){let t=f(this,yn);return t==null&&this.type===3?[]:t}set blobVersionedHashes(t){if(t!=null){x(Array.isArray(t),"blobVersionedHashes must be an Array","value",t),t=t.slice();for(let e=0;e<t.length;e++)x(lt(t[e],32),"invalid blobVersionedHash",`value[${e}]`,t[e])}b(this,yn,t)}get blobs(){return f(this,bn)==null?null:f(this,bn).map(t=>Object.assign({},t))}set blobs(t){if(t==null){b(this,bn,null);return}const e=[],s=[];for(let r=0;r<t.length;r++){const i=t[r];if(Do(i)){N(f(this,Ee),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let a=q(i);if(x(a.length<=Ga,"blob is too large",`blobs[${r}]`,i),a.length!==Ga){const u=new Uint8Array(Ga);u.set(a),a=u}const o=f(this,Ee).blobToKzgCommitment(a),l=U(f(this,Ee).computeBlobKzgProof(a,o));e.push({data:U(a),commitment:U(o),proof:l}),s.push(Fl(1,o))}else{const a=U(i.commitment);e.push({data:U(i.data),commitment:a,proof:U(i.proof)}),s.push(Fl(1,a))}}b(this,bn,e),b(this,yn,s)}get kzg(){return f(this,Ee)}set kzg(t){t==null?b(this,Ee,null):b(this,Ee,Oh(t))}get hash(){return this.signature==null?null:yt(S(this,mr,Hi).call(this,!0,!1))}get unsignedHash(){return yt(this.unsignedSerialized)}get from(){return this.signature==null?null:Th(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:ri.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return S(this,mr,Hi).call(this,!0,!0)}get unsignedSerialized(){return S(this,mr,Hi).call(this,!1,!1)}inferType(){const t=this.inferTypes();return t.indexOf(2)>=0?2:t.pop()}inferTypes(){const t=this.gasPrice!=null,e=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,s=this.accessList!=null,r=f(this,ls)!=null||f(this,yn);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&N(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),N(!e||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),N(this.type!==0||!s,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):this.authorizationList&&this.authorizationList.length?i.push(4):e?i.push(2):t?(i.push(1),s||i.push(0)):s?(i.push(1),i.push(2)):(r&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return xe.from(this)}toJSON(){const t=e=>e==null?null:e.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:t(this.gasLimit),gasPrice:t(this.gasPrice),maxPriorityFeePerGas:t(this.maxPriorityFeePerGas),maxFeePerGas:t(this.maxFeePerGas),value:t(this.value),chainId:t(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(t){if(t==null)return new xe;if(typeof t=="string"){const s=q(t);if(s[0]>=127)return xe.from(Fh(s));switch(s[0]){case 1:return xe.from(Qh(s));case 2:return xe.from(Hh(s));case 3:return xe.from(zh(s));case 4:return xe.from(Jh(s))}N(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const e=new xe;return t.type!=null&&(e.type=t.type),t.to!=null&&(e.to=t.to),t.nonce!=null&&(e.nonce=t.nonce),t.gasLimit!=null&&(e.gasLimit=t.gasLimit),t.gasPrice!=null&&(e.gasPrice=t.gasPrice),t.maxPriorityFeePerGas!=null&&(e.maxPriorityFeePerGas=t.maxPriorityFeePerGas),t.maxFeePerGas!=null&&(e.maxFeePerGas=t.maxFeePerGas),t.maxFeePerBlobGas!=null&&(e.maxFeePerBlobGas=t.maxFeePerBlobGas),t.data!=null&&(e.data=t.data),t.value!=null&&(e.value=t.value),t.chainId!=null&&(e.chainId=t.chainId),t.signature!=null&&(e.signature=Qt.from(t.signature)),t.accessList!=null&&(e.accessList=t.accessList),t.authorizationList!=null&&(e.authorizationList=t.authorizationList),t.blobVersionedHashes!=null&&(e.blobVersionedHashes=t.blobVersionedHashes),t.kzg!=null&&(e.kzg=t.kzg),t.blobs!=null&&(e.blobs=t.blobs),t.hash!=null&&(x(e.isSigned(),"unsigned transaction cannot define '.hash'","tx",t),x(e.hash===t.hash,"hash mismatch","tx",t)),t.from!=null&&(x(e.isSigned(),"unsigned transaction cannot define '.from'","tx",t),x(e.from.toLowerCase()===(t.from||"").toLowerCase(),"from mismatch","tx",t)),e}};pe=new WeakMap,sr=new WeakMap,rr=new WeakMap,ir=new WeakMap,ar=new WeakMap,or=new WeakMap,lr=new WeakMap,cr=new WeakMap,ur=new WeakMap,dr=new WeakMap,fr=new WeakMap,hr=new WeakMap,ls=new WeakMap,yn=new WeakMap,Ee=new WeakMap,bn=new WeakMap,pr=new WeakMap,mr=new WeakSet,Hi=function(t,e){N(!t||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const s=t?this.signature:null;switch(this.inferType()){case 0:return Mh(this,s);case 1:return Vh(this,s);case 2:return Gh(this,s);case 3:return jh(this,s,e?this.blobs:null);case 4:return Kh(this,s)}N(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let Xi=xe;function ws(n){return yt(Xe(n))}var qh="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";const Ml=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),Hl=4;function Zh(n){let t=0;function e(){return n[t++]<<8|n[t++]}let s=e(),r=1,i=[0,1];for(let R=1;R<s;R++)i.push(r+=e());let a=e(),o=t;t+=a;let l=0,u=0;function d(){return l==0&&(u=u<<8|n[t++],l=8),u>>--l&1}const h=31,y=2**h,g=y>>>1,w=g>>1,v=y-1;let A=0;for(let R=0;R<h;R++)A=A<<1|d();let k=[],E=0,P=y;for(;;){let R=Math.floor(((A-E+1)*r-1)/P),T=0,B=s;for(;B-T>1;){let j=T+B>>>1;R<i[j]?B=j:T=j}if(T==0)break;k.push(T);let L=E+Math.floor(P*i[T]/r),Q=E+Math.floor(P*i[T+1]/r)-1;for(;!((L^Q)&g);)A=A<<1&v|d(),L=L<<1&v,Q=Q<<1&v|1;for(;L&~Q&w;)A=A&g|A<<1&v>>>1|d(),L=L<<1^g,Q=(Q^g)<<1|g|1;E=L,P=1+Q-L}let O=s-4;return k.map(R=>{switch(R-O){case 3:return O+65792+(n[o++]<<16|n[o++]<<8|n[o++]);case 2:return O+256+(n[o++]<<8|n[o++]);case 1:return O+n[o++];default:return R-1}})}function Yh(n){let t=0;return()=>n[t++]}function mu(n){return Yh(Zh(Wh(n)))}function Wh(n){let t=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((r,i)=>t[r.charCodeAt(0)]=i);let e=n.length,s=new Uint8Array(6*e>>3);for(let r=0,i=0,a=0,o=0;r<e;r++)o=o<<6|t[n.charCodeAt(r)],a+=6,a>=8&&(s[i++]=o>>(a-=8));return s}function Xh(n){return n&1?~n>>1:n>>1}function tp(n,t){let e=Array(n);for(let s=0,r=0;s<n;s++)e[s]=r+=Xh(t());return e}function ii(n,t=0){let e=[];for(;;){let s=n(),r=n();if(!r)break;t+=s;for(let i=0;i<r;i++)e.push(t+i);t+=r+1}return e}function gu(n){return ai(()=>{let t=ii(n);if(t.length)return t})}function yu(n){let t=[];for(;;){let e=n();if(e==0)break;t.push(ep(e,n))}for(;;){let e=n()-1;if(e<0)break;t.push(np(e,n))}return t.flat()}function ai(n){let t=[];for(;;){let e=n(t.length);if(!e)break;t.push(e)}return t}function bu(n,t,e){let s=Array(n).fill().map(()=>[]);for(let r=0;r<t;r++)tp(n,e).forEach((i,a)=>s[a].push(i));return s}function ep(n,t){let e=1+t(),s=t(),r=ai(t);return bu(r.length,1+n,t).flatMap((a,o)=>{let[l,...u]=a;return Array(r[o]).fill().map((d,h)=>{let y=h*s;return[l+h*e,u.map(g=>g+y)]})})}function np(n,t){let e=1+t();return bu(e,1+n,t).map(r=>[r[0],r.slice(1)])}function sp(n){let t=[],e=ii(n);return r(s([]),[]),t;function s(i){let a=n(),o=ai(()=>{let l=ii(n).map(u=>e[u]);if(l.length)return s(l)});return{S:a,B:o,Q:i}}function r({S:i,B:a},o,l){if(!(i&4&&l===o[o.length-1])){i&2&&(l=o[o.length-1]),i&1&&t.push(o);for(let u of a)for(let d of u.Q)r(u,[...o,d],l)}}}function rp(n){return n.toString(16).toUpperCase().padStart(2,"0")}function wu(n){return`{${rp(n)}}`}function ip(n){let t=[];for(let e=0,s=n.length;e<s;){let r=n.codePointAt(e);e+=r<65536?1:2,t.push(r)}return t}function Ur(n){let e=n.length;if(e<4096)return String.fromCodePoint(...n);let s=[];for(let r=0;r<e;)s.push(String.fromCodePoint(...n.slice(r,r+=4096)));return s.join("")}function ap(n,t){let e=n.length,s=e-t.length;for(let r=0;s==0&&r<e;r++)s=n[r]-t[r];return s}var op="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";const oi=44032,ta=4352,ea=4449,na=4519,vu=19,Au=21,Fr=28,sa=Au*Fr,lp=vu*sa,cp=oi+lp,up=ta+vu,dp=ea+Au,fp=na+Fr;function Zr(n){return n>>24&255}function xu(n){return n&16777215}let po,Gl,mo,Gi;function hp(){let n=mu(op);po=new Map(gu(n).flatMap((t,e)=>t.map(s=>[s,e+1<<24]))),Gl=new Set(ii(n)),mo=new Map,Gi=new Map;for(let[t,e]of yu(n)){if(!Gl.has(t)&&e.length==2){let[s,r]=e,i=Gi.get(s);i||(i=new Map,Gi.set(s,i)),i.set(r,t)}mo.set(t,e.reverse())}}function ku(n){return n>=oi&&n<cp}function pp(n,t){if(n>=ta&&n<up&&t>=ea&&t<dp)return oi+(n-ta)*sa+(t-ea)*Fr;if(ku(n)&&t>na&&t<fp&&(n-oi)%Fr==0)return n+(t-na);{let e=Gi.get(n);return e&&(e=e.get(t),e)?e:-1}}function _u(n){po||hp();let t=[],e=[],s=!1;function r(i){let a=po.get(i);a&&(s=!0,i|=a),t.push(i)}for(let i of n)for(;;){if(i<128)t.push(i);else if(ku(i)){let a=i-oi,o=a/sa|0,l=a%sa/Fr|0,u=a%Fr;r(ta+o),r(ea+l),u>0&&r(na+u)}else{let a=mo.get(i);a?e.push(...a):r(i)}if(!e.length)break;i=e.pop()}if(s&&t.length>1){let i=Zr(t[0]);for(let a=1;a<t.length;a++){let o=Zr(t[a]);if(o==0||i<=o){i=o;continue}let l=a-1;for(;;){let u=t[l+1];if(t[l+1]=t[l],t[l]=u,!l||(i=Zr(t[--l]),i<=o))break}i=Zr(t[a])}}return t}function mp(n){let t=[],e=[],s=-1,r=0;for(let i of n){let a=Zr(i),o=xu(i);if(s==-1)a==0?s=o:t.push(o);else if(r>0&&r>=a)a==0?(t.push(s,...e),e.length=0,s=o):e.push(o),r=a;else{let l=pp(s,o);l>=0?s=l:r==0&&a==0?(t.push(s),s=o):(e.push(o),r=a)}}return s>=0&&t.push(s,...e),t}function Eu(n){return _u(n).map(xu)}function gp(n){return mp(_u(n))}const Ql=45,Cu=".",Pu=65039,Iu=1,ra=n=>Array.from(n);function li(n,t){return n.P.has(t)||n.Q.has(t)}class yp extends Array{get is_emoji(){return!0}}let go,Tu,qn,yo,Nu,Vs,Qa,$s,Hn,Vl,bo;function Jo(){if(go)return;let n=mu(qh);const t=()=>ii(n),e=()=>new Set(t()),s=(d,h)=>h.forEach(y=>d.add(y));go=new Map(yu(n)),Tu=e(),qn=t(),yo=new Set(t().map(d=>qn[d])),qn=new Set(qn),Nu=e(),e();let r=gu(n),i=n();const a=()=>{let d=new Set;return t().forEach(h=>s(d,r[h])),s(d,t()),d};Vs=ai(d=>{let h=ai(n).map(y=>y+96);if(h.length){let y=d>=i;h[0]-=32,h=Ur(h),y&&(h=`Restricted[${h}]`);let g=a(),w=a(),v=!n();return{N:h,P:g,Q:w,M:v,R:y}}}),Qa=e(),$s=new Map;let o=t().concat(ra(Qa)).sort((d,h)=>d-h);o.forEach((d,h)=>{let y=n(),g=o[h]=y?o[h-y]:{V:[],M:new Map};g.V.push(d),Qa.has(d)||$s.set(d,g)});for(let{V:d,M:h}of new Set($s.values())){let y=[];for(let w of d){let v=Vs.filter(k=>li(k,w)),A=y.find(({G:k})=>v.some(E=>k.has(E)));A||(A={G:new Set,V:[]},y.push(A)),A.V.push(w),s(A.G,v)}let g=y.flatMap(w=>ra(w.G));for(let{G:w,V:v}of y){let A=new Set(g.filter(k=>!w.has(k)));for(let k of v)h.set(k,A)}}Hn=new Set;let l=new Set;const u=d=>Hn.has(d)?l.add(d):Hn.add(d);for(let d of Vs){for(let h of d.P)u(h);for(let h of d.Q)u(h)}for(let d of Hn)!$s.has(d)&&!l.has(d)&&$s.set(d,Iu);s(Hn,Eu(Hn)),Vl=sp(n).map(d=>yp.from(d)).sort(ap),bo=new Map;for(let d of Vl){let h=[bo];for(let y of d){let g=h.map(w=>{let v=w.get(y);return v||(v=new Map,w.set(y,v)),v});y===Pu?h.push(...g):h=g}for(let y of h)y.V=d}}function Ko(n){return(Bu(n)?"":`${qo(Ca([n]))} `)+wu(n)}function qo(n){return`"${n}"‎`}function bp(n){if(n.length>=4&&n[2]==Ql&&n[3]==Ql)throw new Error(`invalid label extension: "${Ur(n.slice(0,4))}"`)}function wp(n){for(let e=n.lastIndexOf(95);e>0;)if(n[--e]!==95)throw new Error("underscore allowed only at start")}function vp(n){let t=n[0],e=Ml.get(t);if(e)throw ti(`leading ${e}`);let s=n.length,r=-1;for(let i=1;i<s;i++){t=n[i];let a=Ml.get(t);if(a){if(r==i)throw ti(`${e} + ${a}`);r=i+1,e=a}}if(r==s)throw ti(`trailing ${e}`)}function Ca(n,t=1/0,e=wu){let s=[];Ap(n[0])&&s.push("◌"),n.length>t&&(t>>=1,n=[...n.slice(0,t),8230,...n.slice(-t)]);let r=0,i=n.length;for(let a=0;a<i;a++){let o=n[a];Bu(o)&&(s.push(Ur(n.slice(r,a))),s.push(e(o)),r=a+1)}return s.push(Ur(n.slice(r,i))),s.join("")}function Ap(n){return Jo(),qn.has(n)}function Bu(n){return Jo(),Nu.has(n)}function xp(n){return Cp(kp(n,gp,Tp))}function kp(n,t,e){if(!n)return[];Jo();let s=0;return n.split(Cu).map(r=>{let i=ip(r),a={input:i,offset:s};s+=i.length+1;try{let o=a.tokens=Ip(i,t,e),l=o.length,u;if(!l)throw new Error("empty label");let d=a.output=o.flat();if(wp(d),!(a.emoji=l>1||o[0].is_emoji)&&d.every(y=>y<128))bp(d),u="ASCII";else{let y=o.flatMap(g=>g.is_emoji?[]:g);if(!y.length)u="Emoji";else{if(qn.has(d[0]))throw ti("leading combining mark");for(let v=1;v<l;v++){let A=o[v];if(!A.is_emoji&&qn.has(A[0]))throw ti(`emoji + combining mark: "${Ur(o[v-1])} + ${Ca([A[0]])}"`)}vp(d);let g=ra(new Set(y)),[w]=Ep(g);Pp(w,y),_p(w,g),u=w.N}}a.type=u}catch(o){a.error=o}return a})}function _p(n,t){let e,s=[];for(let r of t){let i=$s.get(r);if(i===Iu)return;if(i){let a=i.M.get(r);if(e=e?e.filter(o=>a.has(o)):ra(a),!e.length)return}else s.push(r)}if(e){for(let r of e)if(s.every(i=>li(r,i)))throw new Error(`whole-script confusable: ${n.N}/${r.N}`)}}function Ep(n){let t=Vs;for(let e of n){let s=t.filter(r=>li(r,e));if(!s.length)throw Vs.some(r=>li(r,e))?$u(t[0],e):Su(e);if(t=s,s.length==1)break}return t}function Cp(n){return n.map(({input:t,error:e,output:s})=>{if(e){let r=e.message;throw new Error(n.length==1?r:`Invalid label ${qo(Ca(t,63))}: ${r}`)}return Ur(s)}).join(Cu)}function Su(n){return new Error(`disallowed character: ${Ko(n)}`)}function $u(n,t){let e=Ko(t),s=Vs.find(r=>r.P.has(t));return s&&(e=`${s.N} ${e}`),new Error(`illegal mixture: ${n.N} + ${e}`)}function ti(n){return new Error(`illegal placement: ${n}`)}function Pp(n,t){for(let e of t)if(!li(n,e))throw $u(n,e);if(n.M){let e=Eu(t);for(let s=1,r=e.length;s<r;s++)if(yo.has(e[s])){let i=s+1;for(let a;i<r&&yo.has(a=e[i]);i++)for(let o=s;o<i;o++)if(e[o]==a)throw new Error(`duplicate non-spacing marks: ${Ko(a)}`);if(i-s>Hl)throw new Error(`excessive non-spacing marks: ${qo(Ca(e.slice(s-1,i)))} (${i-s}/${Hl})`);s=i}}}function Ip(n,t,e){let s=[],r=[];for(n=n.slice().reverse();n.length;){let i=Np(n);if(i)r.length&&(s.push(t(r)),r=[]),s.push(e(i));else{let a=n.pop();if(Hn.has(a))r.push(a);else{let o=go.get(a);if(o)r.push(...o);else if(!Tu.has(a))throw Su(a)}}}return r.length&&s.push(t(r)),s}function Tp(n){return n.filter(t=>t!=Pu)}function Np(n,t){let e=bo,s,r=n.length;for(;r&&(e=e.get(n[--r]),!!e);){let{V:i}=e;i&&(s=i,n.length=r)}return s}const Ru=new Uint8Array(32);Ru.fill(0);function zl(n){return x(n.length!==0,"invalid ENS name; empty component","comp",n),n}function Ou(n){const t=Xe(Bp(n)),e=[];if(n.length===0)return e;let s=0;for(let r=0;r<t.length;r++)t[r]===46&&(e.push(zl(t.slice(s,r))),s=r+1);return x(s<t.length,"invalid ENS name; empty component","name",n),e.push(zl(t.slice(s))),e}function Bp(n){try{if(n.length===0)throw new Error("empty label");return xp(n)}catch(t){x(!1,`invalid ENS name (${t.message})`,"name",n)}}function wo(n){x(typeof n=="string","invalid ENS name; not a string","name",n),x(n.length,"invalid ENS name (empty label)","name",n);let t=Ru;const e=Ou(n);for(;e.length;)t=yt(pt([t,yt(e.pop())]));return U(t)}function Sp(n,t){const e=t;return x(e<=255,"DNS encoded label cannot exceed 255","length",e),U(pt(Ou(n).map(s=>{x(s.length<=e,`label ${JSON.stringify(n)} exceeds ${e} bytes`,"name",n);const r=new Uint8Array(s.length+1);return r.set(s,1),r[0]=r.length-1,r})))+"00"}const Lu=new Uint8Array(32);Lu.fill(0);const $p=BigInt(-1),Du=BigInt(0),Uu=BigInt(1),Rp=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Op(n){const t=q(n),e=t.length%32;return e?pt([t,Lu.slice(e)]):U(t)}const Lp=Sn(Uu,32),Dp=Sn(Du,32),jl={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Va=["name","version","chainId","verifyingContract","salt"];function Jl(n){return function(t){return x(typeof t=="string",`invalid domain value for ${JSON.stringify(n)}`,`domain.${n}`,t),t}}const Up={name:Jl("name"),version:Jl("version"),chainId:function(n){const t=H(n,"domain.chainId");return x(t>=0,"invalid chain ID","domain.chainId",n),Number.isSafeInteger(t)?Number(t):ye(t)},verifyingContract:function(n){try{return st(n).toLowerCase()}catch{}x(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",n)},salt:function(n){const t=q(n,"domain.salt");return x(t.length===32,'invalid domain value "salt"',"domain.salt",n),U(t)}};function za(n){{const t=n.match(/^(u?)int(\d+)$/);if(t){const e=t[1]==="",s=parseInt(t[2]);x(s%8===0&&s!==0&&s<=256&&t[2]===String(s),"invalid numeric width","type",n);const r=Jn(Rp,e?s-1:s),i=e?(r+Uu)*$p:Du;return function(a){const o=H(a,"value");return x(o>=i&&o<=r,`value out-of-bounds for ${n}`,"value",o),Sn(e?_c(o,256):o,32)}}}{const t=n.match(/^bytes(\d+)$/);if(t){const e=parseInt(t[1]);return x(e!==0&&e<=32&&t[1]===String(e),"invalid bytes width","type",n),function(s){const r=q(s);return x(r.length===e,`invalid length for ${n}`,"value",s),Op(s)}}}switch(n){case"address":return function(t){return en(st(t),32)};case"bool":return function(t){return t?Lp:Dp};case"bytes":return function(t){return yt(t)};case"string":return function(t){return ws(t)}}return null}function Kl(n,t){return`${n}(${t.map(({name:e,type:s})=>s+" "+e).join(",")})`}function Di(n){const t=n.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return t?{base:t[1],index:t[2]+t[4],array:{base:t[1],prefix:t[1]+t[2],count:t[5]?parseInt(t[5]):-1}}:{base:n}}var gi,Ve,gr,da,Fu;const te=class te{constructor(t){I(this,da);_(this,"primaryType");I(this,gi);I(this,Ve);I(this,gr);b(this,Ve,new Map),b(this,gr,new Map);const e=new Map,s=new Map,r=new Map,i={};Object.keys(t).forEach(l=>{i[l]=t[l].map(({name:u,type:d})=>{let{base:h,index:y}=Di(d);return h==="int"&&!t.int&&(h="int256"),h==="uint"&&!t.uint&&(h="uint256"),{name:u,type:h+(y||"")}}),e.set(l,new Set),s.set(l,[]),r.set(l,new Set)}),b(this,gi,JSON.stringify(i));for(const l in i){const u=new Set;for(const d of i[l]){x(!u.has(d.name),`duplicate variable name ${JSON.stringify(d.name)} in ${JSON.stringify(l)}`,"types",t),u.add(d.name);const h=Di(d.type).base;x(h!==l,`circular type reference to ${JSON.stringify(h)}`,"types",t),!za(h)&&(x(s.has(h),`unknown type ${JSON.stringify(h)}`,"types",t),s.get(h).push(l),e.get(l).add(h))}}const a=Array.from(s.keys()).filter(l=>s.get(l).length===0);x(a.length!==0,"missing primary type","types",t),x(a.length===1,`ambiguous primary types or unused types: ${a.map(l=>JSON.stringify(l)).join(", ")}`,"types",t),V(this,{primaryType:a[0]});function o(l,u){x(!u.has(l),`circular type reference to ${JSON.stringify(l)}`,"types",t),u.add(l);for(const d of e.get(l))if(s.has(d)){o(d,u);for(const h of u)r.get(h).add(d)}u.delete(l)}o(this.primaryType,new Set);for(const[l,u]of r){const d=Array.from(u);d.sort(),f(this,Ve).set(l,Kl(l,i[l])+d.map(h=>Kl(h,i[h])).join(""))}}get types(){return JSON.parse(f(this,gi))}getEncoder(t){let e=f(this,gr).get(t);return e||(e=S(this,da,Fu).call(this,t),f(this,gr).set(t,e)),e}encodeType(t){const e=f(this,Ve).get(t);return x(e,`unknown type: ${JSON.stringify(t)}`,"name",t),e}encodeData(t,e){return this.getEncoder(t)(e)}hashStruct(t,e){return yt(this.encodeData(t,e))}encode(t){return this.encodeData(this.primaryType,t)}hash(t){return this.hashStruct(this.primaryType,t)}_visit(t,e,s){if(za(t))return s(t,e);const r=Di(t).array;if(r)return x(r.count===-1||r.count===e.length,`array length mismatch; expected length ${r.count}`,"value",e),e.map(a=>this._visit(r.prefix,a,s));const i=this.types[t];if(i)return i.reduce((a,{name:o,type:l})=>(a[o]=this._visit(l,e[o],s),a),{});x(!1,`unknown type: ${t}`,"type",t)}visit(t,e){return this._visit(this.primaryType,t,e)}static from(t){return new te(t)}static getPrimaryType(t){return te.from(t).primaryType}static hashStruct(t,e,s){return te.from(e).hashStruct(t,s)}static hashDomain(t){const e=[];for(const s in t){if(t[s]==null)continue;const r=jl[s];x(r,`invalid typed-data domain key: ${JSON.stringify(s)}`,"domain",t),e.push({name:s,type:r})}return e.sort((s,r)=>Va.indexOf(s.name)-Va.indexOf(r.name)),te.hashStruct("EIP712Domain",{EIP712Domain:e},t)}static encode(t,e,s){return pt(["0x1901",te.hashDomain(t),te.from(e).hash(s)])}static hash(t,e,s){return yt(te.encode(t,e,s))}static async resolveNames(t,e,s,r){t=Object.assign({},t);for(const o in t)t[o]==null&&delete t[o];const i={};t.verifyingContract&&!lt(t.verifyingContract,20)&&(i[t.verifyingContract]="0x");const a=te.from(e);a.visit(s,(o,l)=>(o==="address"&&!lt(l,20)&&(i[l]="0x"),l));for(const o in i)i[o]=await r(o);return t.verifyingContract&&i[t.verifyingContract]&&(t.verifyingContract=i[t.verifyingContract]),s=a.visit(s,(o,l)=>o==="address"&&i[l]?i[l]:l),{domain:t,value:s}}static getPayload(t,e,s){te.hashDomain(t);const r={},i=[];Va.forEach(l=>{const u=t[l];u!=null&&(r[l]=Up[l](u),i.push({name:l,type:jl[l]}))});const a=te.from(e);e=a.types;const o=Object.assign({},e);return x(o.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",e),o.EIP712Domain=i,a.encode(s),{types:o,domain:r,primaryType:a.primaryType,message:a.visit(s,(l,u)=>{if(l.match(/^bytes(\d*)/))return U(q(u));if(l.match(/^u?int/))return H(u).toString();switch(l){case"address":return u.toLowerCase();case"bool":return!!u;case"string":return x(typeof u=="string","invalid string","value",u),u}x(!1,"unsupported type","type",l)})}}};gi=new WeakMap,Ve=new WeakMap,gr=new WeakMap,da=new WeakSet,Fu=function(t){{const r=za(t);if(r)return r}const e=Di(t).array;if(e){const r=e.prefix,i=this.getEncoder(r);return a=>{x(e.count===-1||e.count===a.length,`array length mismatch; expected length ${e.count}`,"value",a);let o=a.map(i);return f(this,Ve).has(r)&&(o=o.map(yt)),yt(pt(o))}}const s=this.types[t];if(s){const r=ws(f(this,Ve).get(t));return i=>{const a=s.map(({name:o,type:l})=>{const u=this.getEncoder(l)(i[o]);return f(this,Ve).has(l)?yt(u):u});return a.unshift(r),pt(a)}}x(!1,`unknown type: ${t}`,"type",t)};let ia=te;function Ut(n){const t=new Set;return n.forEach(e=>t.add(e)),Object.freeze(t)}const Fp="external public payable override",Mp=Ut(Fp.split(" ")),Mu="constant external internal payable private public pure view override",Hp=Ut(Mu.split(" ")),Hu="constructor error event fallback function receive struct",Gu=Ut(Hu.split(" ")),Qu="calldata memory storage payable indexed",Gp=Ut(Qu.split(" ")),Qp="tuple returns",Vp=[Hu,Qu,Qp,Mu].join(" "),zp=Ut(Vp.split(" ")),jp={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},Jp=new RegExp("^(\\s*)"),Kp=new RegExp("^([0-9]+)"),qp=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),Vu=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),zu=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var _t,me,yi,vo;const fa=class fa{constructor(t){I(this,yi);I(this,_t);I(this,me);b(this,_t,0),b(this,me,t.slice())}get offset(){return f(this,_t)}get length(){return f(this,me).length-f(this,_t)}clone(){return new fa(f(this,me))}reset(){b(this,_t,0)}popKeyword(t){const e=this.peek();if(e.type!=="KEYWORD"||!t.has(e.text))throw new Error(`expected keyword ${e.text}`);return this.pop().text}popType(t){if(this.peek().type!==t){const e=this.peek();throw new Error(`expected ${t}; got ${e.type} ${JSON.stringify(e.text)}`)}return this.pop().text}popParen(){const t=this.peek();if(t.type!=="OPEN_PAREN")throw new Error("bad start");const e=S(this,yi,vo).call(this,f(this,_t)+1,t.match+1);return b(this,_t,t.match+1),e}popParams(){const t=this.peek();if(t.type!=="OPEN_PAREN")throw new Error("bad start");const e=[];for(;f(this,_t)<t.match-1;){const s=this.peek().linkNext;e.push(S(this,yi,vo).call(this,f(this,_t)+1,s)),b(this,_t,s)}return b(this,_t,t.match+1),e}peek(){if(f(this,_t)>=f(this,me).length)throw new Error("out-of-bounds");return f(this,me)[f(this,_t)]}peekKeyword(t){const e=this.peekType("KEYWORD");return e!=null&&t.has(e)?e:null}peekType(t){if(this.length===0)return null;const e=this.peek();return e.type===t?e.text:null}pop(){const t=this.peek();return Vr(this,_t)._++,t}toString(){const t=[];for(let e=f(this,_t);e<f(this,me).length;e++){const s=f(this,me)[e];t.push(`${s.type}:${s.text}`)}return`<TokenString ${t.join(" ")}>`}};_t=new WeakMap,me=new WeakMap,yi=new WeakSet,vo=function(t=0,e=0){return new fa(f(this,me).slice(t,e).map(s=>Object.freeze(Object.assign({},s,{match:s.match-t,linkBack:s.linkBack-t,linkNext:s.linkNext-t}))))};let we=fa;function Ln(n){const t=[],e=a=>{const o=i<n.length?JSON.stringify(n[i]):"$EOI";throw new Error(`invalid token ${o} at ${i}: ${a}`)};let s=[],r=[],i=0;for(;i<n.length;){let a=n.substring(i),o=a.match(Jp);o&&(i+=o[1].length,a=n.substring(i));const l={depth:s.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};t.push(l);let u=jp[a[0]]||"";if(u){if(l.type=u,l.text=a[0],i++,u==="OPEN_PAREN")s.push(t.length-1),r.push(t.length-1);else if(u=="CLOSE_PAREN")s.length===0&&e("no matching open bracket"),l.match=s.pop(),t[l.match].match=t.length-1,l.depth--,l.linkBack=r.pop(),t[l.linkBack].linkNext=t.length-1;else if(u==="COMMA")l.linkBack=r.pop(),t[l.linkBack].linkNext=t.length-1,r.push(t.length-1);else if(u==="OPEN_BRACKET")l.type="BRACKET";else if(u==="CLOSE_BRACKET"){let d=t.pop().text;if(t.length>0&&t[t.length-1].type==="NUMBER"){const h=t.pop().text;d=h+d,t[t.length-1].value=K(h)}if(t.length===0||t[t.length-1].type!=="BRACKET")throw new Error("missing opening bracket");t[t.length-1].text+=d}continue}if(o=a.match(qp),o){if(l.text=o[1],i+=l.text.length,zp.has(l.text)){l.type="KEYWORD";continue}if(l.text.match(zu)){l.type="TYPE";continue}l.type="ID";continue}if(o=a.match(Kp),o){l.text=o[1],l.type="NUMBER",i+=l.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(a[0])} at position ${i}`)}return new we(t.map(a=>Object.freeze(a)))}function ql(n,t){let e=[];for(const s in t.keys())n.has(s)&&e.push(s);if(e.length>1)throw new Error(`conflicting types: ${e.join(", ")}`)}function Pa(n,t){if(t.peekKeyword(Gu)){const e=t.pop().text;if(e!==n)throw new Error(`expected ${n}, got ${e}`)}return t.popType("ID")}function nn(n,t){const e=new Set;for(;;){const s=n.peekType("KEYWORD");if(s==null||t&&!t.has(s))break;if(n.pop(),e.has(s))throw new Error(`duplicate keywords: ${JSON.stringify(s)}`);e.add(s)}return Object.freeze(e)}function ju(n){let t=nn(n,Hp);return ql(t,Ut("constant payable nonpayable".split(" "))),ql(t,Ut("pure view payable nonpayable".split(" "))),t.has("view")?"view":t.has("pure")?"pure":t.has("payable")?"payable":t.has("nonpayable")?"nonpayable":t.has("constant")?"view":"nonpayable"}function tn(n,t){return n.popParams().map(e=>Pt.from(e,t))}function Ju(n){if(n.peekType("AT")){if(n.pop(),n.peekType("NUMBER"))return H(n.pop().text);throw new Error("invalid gas")}return null}function vs(n){if(n.length)throw new Error(`unexpected tokens at offset ${n.offset}: ${n.toString()}`)}const Zp=new RegExp(/^(.*)\[([0-9]*)\]$/);function Zl(n){const t=n.match(zu);if(x(t,"invalid type","type",n),n==="uint")return"uint256";if(n==="int")return"int256";if(t[2]){const e=parseInt(t[2]);x(e!==0&&e<=32,"invalid bytes length","type",n)}else if(t[3]){const e=parseInt(t[3]);x(e!==0&&e<=256&&e%8===0,"invalid numeric width","type",n)}return n}const ft={},Vt=Symbol.for("_ethers_internal"),Yl="_ParamTypeInternal",Wl="_ErrorInternal",Xl="_EventInternal",tc="_ConstructorInternal",ec="_FallbackInternal",nc="_FunctionInternal",sc="_StructInternal";var yr,Qi;const ee=class ee{constructor(t,e,s,r,i,a,o,l){I(this,yr);_(this,"name");_(this,"type");_(this,"baseType");_(this,"indexed");_(this,"components");_(this,"arrayLength");_(this,"arrayChildren");if(Ei(t,ft,"ParamType"),Object.defineProperty(this,Vt,{value:Yl}),a&&(a=Object.freeze(a.slice())),r==="array"){if(o==null||l==null)throw new Error("")}else if(o!=null||l!=null)throw new Error("");if(r==="tuple"){if(a==null)throw new Error("")}else if(a!=null)throw new Error("");V(this,{name:e,type:s,baseType:r,indexed:i,components:a,arrayLength:o,arrayChildren:l})}format(t){if(t==null&&(t="sighash"),t==="json"){const s=this.name||"";if(this.isArray()){const i=JSON.parse(this.arrayChildren.format("json"));return i.name=s,i.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(i)}const r={type:this.baseType==="tuple"?"tuple":this.type,name:s};return typeof this.indexed=="boolean"&&(r.indexed=this.indexed),this.isTuple()&&(r.components=this.components.map(i=>JSON.parse(i.format(t)))),JSON.stringify(r)}let e="";return this.isArray()?(e+=this.arrayChildren.format(t),e+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?e+="("+this.components.map(s=>s.format(t)).join(t==="full"?", ":",")+")":e+=this.type,t!=="sighash"&&(this.indexed===!0&&(e+=" indexed"),t==="full"&&this.name&&(e+=" "+this.name)),e}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(t,e){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(this.arrayLength!==-1&&t.length!==this.arrayLength)throw new Error("array is wrong length");const s=this;return t.map(r=>s.arrayChildren.walk(r,e))}if(this.isTuple()){if(!Array.isArray(t))throw new Error("invalid tuple value");if(t.length!==this.components.length)throw new Error("array is wrong length");const s=this;return t.map((r,i)=>s.components[i].walk(r,e))}return e(this.type,t)}async walkAsync(t,e){const s=[],r=[t];return S(this,yr,Qi).call(this,s,t,e,i=>{r[0]=i}),s.length&&await Promise.all(s),r[0]}static from(t,e){if(ee.isParamType(t))return t;if(typeof t=="string")try{return ee.from(Ln(t),e)}catch{x(!1,"invalid param type","obj",t)}else if(t instanceof we){let o="",l="",u=null;nn(t,Ut(["tuple"])).has("tuple")||t.peekType("OPEN_PAREN")?(l="tuple",u=t.popParams().map(v=>ee.from(v)),o=`tuple(${u.map(v=>v.format()).join(",")})`):(o=Zl(t.popType("TYPE")),l=o);let d=null,h=null;for(;t.length&&t.peekType("BRACKET");){const v=t.pop();d=new ee(ft,"",o,l,null,u,h,d),h=v.value,o+=v.text,l="array",u=null}let y=null;if(nn(t,Gp).has("indexed")){if(!e)throw new Error("");y=!0}const w=t.peekType("ID")?t.pop().text:"";if(t.length)throw new Error("leftover tokens");return new ee(ft,w,o,l,y,u,h,d)}const s=t.name;x(!s||typeof s=="string"&&s.match(Vu),"invalid name","obj.name",s);let r=t.indexed;r!=null&&(x(e,"parameter cannot be indexed","obj.indexed",t.indexed),r=!!r);let i=t.type,a=i.match(Zp);if(a){const o=parseInt(a[2]||"-1"),l=ee.from({type:a[1],components:t.components});return new ee(ft,s||"",i,"array",r,null,o,l)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const o=t.components!=null?t.components.map(u=>ee.from(u)):null;return new ee(ft,s||"",i,"tuple",r,o,null,null)}return i=Zl(t.type),new ee(ft,s||"",i,i,r,null,null,null)}static isParamType(t){return t&&t[Vt]===Yl}};yr=new WeakSet,Qi=function(t,e,s,r){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const a=this.arrayChildren,o=e.slice();o.forEach((l,u)=>{var d;S(d=a,yr,Qi).call(d,t,l,s,h=>{o[u]=h})}),r(o);return}if(this.isTuple()){const a=this.components;let o;if(Array.isArray(e))o=e.slice();else{if(e==null||typeof e!="object")throw new Error("invalid tuple value");o=a.map(l=>{if(!l.name)throw new Error("cannot use object value with unnamed components");if(!(l.name in e))throw new Error(`missing value for component ${l.name}`);return e[l.name]})}if(o.length!==this.components.length)throw new Error("array is wrong length");o.forEach((l,u)=>{var d;S(d=a[u],yr,Qi).call(d,t,l,s,h=>{o[u]=h})}),r(o);return}const i=s(this.type,e);i.then?t.push(async function(){r(await i)}()):r(i)};let Pt=ee;class As{constructor(t,e,s){_(this,"type");_(this,"inputs");Ei(t,ft,"Fragment"),s=Object.freeze(s.slice()),V(this,{type:e,inputs:s})}static from(t){if(typeof t=="string"){try{As.from(JSON.parse(t))}catch{}return As.from(Ln(t))}if(t instanceof we)switch(t.peekKeyword(Gu)){case"constructor":return We.from(t);case"error":return Gt.from(t);case"event":return Se.from(t);case"fallback":case"receive":return Fe.from(t);case"function":return $e.from(t);case"struct":return bs.from(t)}else if(typeof t=="object"){switch(t.type){case"constructor":return We.from(t);case"error":return Gt.from(t);case"event":return Se.from(t);case"fallback":case"receive":return Fe.from(t);case"function":return $e.from(t);case"struct":return bs.from(t)}N(!1,`unsupported type: ${t.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}x(!1,"unsupported frgament object","obj",t)}static isConstructor(t){return We.isFragment(t)}static isError(t){return Gt.isFragment(t)}static isEvent(t){return Se.isFragment(t)}static isFunction(t){return $e.isFragment(t)}static isStruct(t){return bs.isFragment(t)}}class Ia extends As{constructor(e,s,r,i){super(e,s,i);_(this,"name");x(typeof r=="string"&&r.match(Vu),"invalid identifier","name",r),i=Object.freeze(i.slice()),V(this,{name:r})}}function ci(n,t){return"("+t.map(e=>e.format(n)).join(n==="full"?", ":",")+")"}class Gt extends Ia{constructor(t,e,s){super(t,"error",e,s),Object.defineProperty(this,Vt,{value:Wl})}get selector(){return ws(this.format("sighash")).substring(0,10)}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(s=>JSON.parse(s.format(t)))});const e=[];return t!=="sighash"&&e.push("error"),e.push(this.name+ci(t,this.inputs)),e.join(" ")}static from(t){if(Gt.isFragment(t))return t;if(typeof t=="string")return Gt.from(Ln(t));if(t instanceof we){const e=Pa("error",t),s=tn(t);return vs(t),new Gt(ft,e,s)}return new Gt(ft,t.name,t.inputs?t.inputs.map(Pt.from):[])}static isFragment(t){return t&&t[Vt]===Wl}}class Se extends Ia{constructor(e,s,r,i){super(e,"event",s,r);_(this,"anonymous");Object.defineProperty(this,Vt,{value:Xl}),V(this,{anonymous:i})}get topicHash(){return ws(this.format("sighash"))}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const s=[];return e!=="sighash"&&s.push("event"),s.push(this.name+ci(e,this.inputs)),e!=="sighash"&&this.anonymous&&s.push("anonymous"),s.join(" ")}static getTopicHash(e,s){return s=(s||[]).map(i=>Pt.from(i)),new Se(ft,e,s,!1).topicHash}static from(e){if(Se.isFragment(e))return e;if(typeof e=="string")try{return Se.from(Ln(e))}catch{x(!1,"invalid event fragment","obj",e)}else if(e instanceof we){const s=Pa("event",e),r=tn(e,!0),i=!!nn(e,Ut(["anonymous"])).has("anonymous");return vs(e),new Se(ft,s,r,i)}return new Se(ft,e.name,e.inputs?e.inputs.map(s=>Pt.from(s,!0)):[],!!e.anonymous)}static isFragment(e){return e&&e[Vt]===Xl}}class We extends As{constructor(e,s,r,i,a){super(e,s,r);_(this,"payable");_(this,"gas");Object.defineProperty(this,Vt,{value:tc}),V(this,{payable:i,gas:a})}format(e){if(N(e!=null&&e!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),e==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const s=[`constructor${ci(e,this.inputs)}`];return this.payable&&s.push("payable"),this.gas!=null&&s.push(`@${this.gas.toString()}`),s.join(" ")}static from(e){if(We.isFragment(e))return e;if(typeof e=="string")try{return We.from(Ln(e))}catch{x(!1,"invalid constuctor fragment","obj",e)}else if(e instanceof we){nn(e,Ut(["constructor"]));const s=tn(e),r=!!nn(e,Mp).has("payable"),i=Ju(e);return vs(e),new We(ft,"constructor",s,r,i)}return new We(ft,"constructor",e.inputs?e.inputs.map(Pt.from):[],!!e.payable,e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[Vt]===tc}}class Fe extends As{constructor(e,s,r){super(e,"fallback",s);_(this,"payable");Object.defineProperty(this,Vt,{value:ec}),V(this,{payable:r})}format(e){const s=this.inputs.length===0?"receive":"fallback";if(e==="json"){const r=this.payable?"payable":"nonpayable";return JSON.stringify({type:s,stateMutability:r})}return`${s}()${this.payable?" payable":""}`}static from(e){if(Fe.isFragment(e))return e;if(typeof e=="string")try{return Fe.from(Ln(e))}catch{x(!1,"invalid fallback fragment","obj",e)}else if(e instanceof we){const s=e.toString(),r=e.peekKeyword(Ut(["fallback","receive"]));if(x(r,"type must be fallback or receive","obj",s),e.popKeyword(Ut(["fallback","receive"]))==="receive"){const l=tn(e);return x(l.length===0,"receive cannot have arguments","obj.inputs",l),nn(e,Ut(["payable"])),vs(e),new Fe(ft,[],!0)}let a=tn(e);a.length?x(a.length===1&&a[0].type==="bytes","invalid fallback inputs","obj.inputs",a.map(l=>l.format("minimal")).join(", ")):a=[Pt.from("bytes")];const o=ju(e);if(x(o==="nonpayable"||o==="payable","fallback cannot be constants","obj.stateMutability",o),nn(e,Ut(["returns"])).has("returns")){const l=tn(e);x(l.length===1&&l[0].type==="bytes","invalid fallback outputs","obj.outputs",l.map(u=>u.format("minimal")).join(", "))}return vs(e),new Fe(ft,a,o==="payable")}if(e.type==="receive")return new Fe(ft,[],!0);if(e.type==="fallback"){const s=[Pt.from("bytes")],r=e.stateMutability==="payable";return new Fe(ft,s,r)}x(!1,"invalid fallback description","obj",e)}static isFragment(e){return e&&e[Vt]===ec}}class $e extends Ia{constructor(e,s,r,i,a,o){super(e,"function",s,i);_(this,"constant");_(this,"outputs");_(this,"stateMutability");_(this,"payable");_(this,"gas");Object.defineProperty(this,Vt,{value:nc}),a=Object.freeze(a.slice()),V(this,{constant:r==="view"||r==="pure",gas:o,outputs:a,payable:r==="payable",stateMutability:r})}get selector(){return ws(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(r=>JSON.parse(r.format(e))),outputs:this.outputs.map(r=>JSON.parse(r.format(e)))});const s=[];return e!=="sighash"&&s.push("function"),s.push(this.name+ci(e,this.inputs)),e!=="sighash"&&(this.stateMutability!=="nonpayable"&&s.push(this.stateMutability),this.outputs&&this.outputs.length&&(s.push("returns"),s.push(ci(e,this.outputs))),this.gas!=null&&s.push(`@${this.gas.toString()}`)),s.join(" ")}static getSelector(e,s){return s=(s||[]).map(i=>Pt.from(i)),new $e(ft,e,"view",s,[],null).selector}static from(e){if($e.isFragment(e))return e;if(typeof e=="string")try{return $e.from(Ln(e))}catch{x(!1,"invalid function fragment","obj",e)}else if(e instanceof we){const r=Pa("function",e),i=tn(e),a=ju(e);let o=[];nn(e,Ut(["returns"])).has("returns")&&(o=tn(e));const l=Ju(e);return vs(e),new $e(ft,r,a,i,o,l)}let s=e.stateMutability;return s==null&&(s="payable",typeof e.constant=="boolean"?(s="view",e.constant||(s="payable",typeof e.payable=="boolean"&&!e.payable&&(s="nonpayable"))):typeof e.payable=="boolean"&&!e.payable&&(s="nonpayable")),new $e(ft,e.name,s,e.inputs?e.inputs.map(Pt.from):[],e.outputs?e.outputs.map(Pt.from):[],e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[Vt]===nc}}class bs extends Ia{constructor(t,e,s){super(t,"struct",e,s),Object.defineProperty(this,Vt,{value:sc})}format(){throw new Error("@TODO")}static from(t){if(typeof t=="string")try{return bs.from(Ln(t))}catch{x(!1,"invalid struct fragment","obj",t)}else if(t instanceof we){const e=Pa("struct",t),s=tn(t);return vs(t),new bs(ft,e,s)}return new bs(ft,t.name,t.inputs?t.inputs.map(Pt.from):[])}static isFragment(t){return t&&t[Vt]===sc}}const ve=new Map;ve.set(0,"GENERIC_PANIC");ve.set(1,"ASSERT_FALSE");ve.set(17,"OVERFLOW");ve.set(18,"DIVIDE_BY_ZERO");ve.set(33,"ENUM_RANGE_ERROR");ve.set(34,"BAD_STORAGE_DATA");ve.set(49,"STACK_UNDERFLOW");ve.set(50,"ARRAY_RANGE_ERROR");ve.set(65,"OUT_OF_MEMORY");ve.set(81,"UNINITIALIZED_FUNCTION_CALL");const Yp=new RegExp(/^bytes([0-9]*)$/),Wp=new RegExp(/^(u?int)([0-9]*)$/);let ja=null,rc=1024;function Xp(n,t,e,s){let r="missing revert data",i=null;const a=null;let o=null;if(e){r="execution reverted";const u=q(e);if(e=U(e),u.length===0)r+=" (no data present; likely require(false) occurred",i="require(false)";else if(u.length%32!==4)r+=" (could not decode reason; invalid data length)";else if(U(u.slice(0,4))==="0x08c379a0")try{i=s.decode(["string"],u.slice(4))[0],o={signature:"Error(string)",name:"Error",args:[i]},r+=`: ${JSON.stringify(i)}`}catch{r+=" (could not decode reason; invalid string data)"}else if(U(u.slice(0,4))==="0x4e487b71")try{const d=Number(s.decode(["uint256"],u.slice(4))[0]);o={signature:"Panic(uint256)",name:"Panic",args:[d]},i=`Panic due to ${ve.get(d)||"UNKNOWN"}(${d})`,r+=`: ${i}`}catch{r+=" (could not decode panic code)"}else r+=" (unknown custom error)"}const l={to:t.to?st(t.to):null,data:t.data||"0x"};return t.from&&(l.from=st(t.from)),dt(r,"CALL_EXCEPTION",{action:n,data:e,reason:i,transaction:l,invocation:a,revert:o})}var wn,Rs;const ha=class ha{constructor(){I(this,wn)}getDefaultValue(t){const e=t.map(r=>S(this,wn,Rs).call(this,Pt.from(r)));return new Li(e,"_").defaultValue()}encode(t,e){Ac(e.length,t.length,"types/values length mismatch");const s=t.map(a=>S(this,wn,Rs).call(this,Pt.from(a))),r=new Li(s,"_"),i=new io;return r.encode(i,e),i.data}decode(t,e,s){const r=t.map(a=>S(this,wn,Rs).call(this,Pt.from(a)));return new Li(r,"_").decode(new ao(e,s,rc))}static _setDefaultMaxInflation(t){x(typeof t=="number"&&Number.isInteger(t),"invalid defaultMaxInflation factor","value",t),rc=t}static defaultAbiCoder(){return ja==null&&(ja=new ha),ja}static getBuiltinCallException(t,e,s){return Xp(t,e,s,ha.defaultAbiCoder())}};wn=new WeakSet,Rs=function(t){if(t.isArray())return new yh(S(this,wn,Rs).call(this,t.arrayChildren),t.arrayLength,t.name);if(t.isTuple())return new Li(t.components.map(s=>S(this,wn,Rs).call(this,s)),t.name);switch(t.baseType){case"address":return new mh(t.name);case"bool":return new bh(t.name);case"string":return new Ph(t.name);case"bytes":return new wh(t.name);case"":return new xh(t.name)}let e=t.type.match(Wp);if(e){let s=parseInt(e[2]||"256");return x(s!==0&&s<=256&&s%8===0,"invalid "+e[1]+" bit length","param",t),new Ch(s/8,e[1]==="int",t.name)}if(e=t.type.match(Yp),e){let s=parseInt(e[1]);return x(s!==0&&s<=32,"invalid bytes length","param",t),new vh(s,t.name)}x(!1,"invalid type","type",t.type)};let ui=ha;class tm{constructor(t,e,s){_(this,"fragment");_(this,"name");_(this,"signature");_(this,"topic");_(this,"args");const r=t.name,i=t.format();V(this,{fragment:t,name:r,signature:i,topic:e,args:s})}}class em{constructor(t,e,s,r){_(this,"fragment");_(this,"name");_(this,"args");_(this,"signature");_(this,"selector");_(this,"value");const i=t.name,a=t.format();V(this,{fragment:t,name:i,args:s,signature:a,selector:e,value:r})}}class nm{constructor(t,e,s){_(this,"fragment");_(this,"name");_(this,"args");_(this,"signature");_(this,"selector");const r=t.name,i=t.format();V(this,{fragment:t,name:r,args:s,signature:i,selector:e})}}class ic{constructor(t){_(this,"hash");_(this,"_isIndexed");V(this,{hash:t,_isIndexed:!0})}static isIndexed(t){return!!(t&&t._isIndexed)}}const ac={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},oc={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:n=>`reverted with reason string ${JSON.stringify(n)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:n=>{let t="unknown panic code";return n>=0&&n<=255&&ac[n.toString()]&&(t=ac[n.toString()]),`reverted with panic code 0x${n.toString(16)} (${t})`}}};var Ce,Pe,Ie,It,Oe,Vi,zi;const zn=class zn{constructor(t){I(this,Oe);_(this,"fragments");_(this,"deploy");_(this,"fallback");_(this,"receive");I(this,Ce);I(this,Pe);I(this,Ie);I(this,It);let e=[];typeof t=="string"?e=JSON.parse(t):e=t,b(this,Ie,new Map),b(this,Ce,new Map),b(this,Pe,new Map);const s=[];for(const a of e)try{s.push(As.from(a))}catch(o){console.log(`[Warning] Invalid Fragment ${JSON.stringify(a)}:`,o.message)}V(this,{fragments:Object.freeze(s)});let r=null,i=!1;b(this,It,this.getAbiCoder()),this.fragments.forEach((a,o)=>{let l;switch(a.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}V(this,{deploy:a});return;case"fallback":a.inputs.length===0?i=!0:(x(!r||a.payable!==r.payable,"conflicting fallback fragments",`fragments[${o}]`,a),r=a,i=r.payable);return;case"function":l=f(this,Ie);break;case"event":l=f(this,Pe);break;case"error":l=f(this,Ce);break;default:return}const u=a.format();l.has(u)||l.set(u,a)}),this.deploy||V(this,{deploy:We.from("constructor()")}),V(this,{fallback:r,receive:i})}format(t){const e=t?"minimal":"full";return this.fragments.map(r=>r.format(e))}formatJson(){const t=this.fragments.map(e=>e.format("json"));return JSON.stringify(t.map(e=>JSON.parse(e)))}getAbiCoder(){return ui.defaultAbiCoder()}getFunctionName(t){const e=S(this,Oe,Vi).call(this,t,null,!1);return x(e,"no matching function","key",t),e.name}hasFunction(t){return!!S(this,Oe,Vi).call(this,t,null,!1)}getFunction(t,e){return S(this,Oe,Vi).call(this,t,e||null,!0)}forEachFunction(t){const e=Array.from(f(this,Ie).keys());e.sort((s,r)=>s.localeCompare(r));for(let s=0;s<e.length;s++){const r=e[s];t(f(this,Ie).get(r),s)}}getEventName(t){const e=S(this,Oe,zi).call(this,t,null,!1);return x(e,"no matching event","key",t),e.name}hasEvent(t){return!!S(this,Oe,zi).call(this,t,null,!1)}getEvent(t,e){return S(this,Oe,zi).call(this,t,e||null,!0)}forEachEvent(t){const e=Array.from(f(this,Pe).keys());e.sort((s,r)=>s.localeCompare(r));for(let s=0;s<e.length;s++){const r=e[s];t(f(this,Pe).get(r),s)}}getError(t,e){if(lt(t)){const r=t.toLowerCase();if(oc[r])return Gt.from(oc[r].signature);for(const i of f(this,Ce).values())if(r===i.selector)return i;return null}if(t.indexOf("(")===-1){const r=[];for(const[i,a]of f(this,Ce))i.split("(")[0]===t&&r.push(a);if(r.length===0)return t==="Error"?Gt.from("error Error(string)"):t==="Panic"?Gt.from("error Panic(uint256)"):null;if(r.length>1){const i=r.map(a=>JSON.stringify(a.format())).join(", ");x(!1,`ambiguous error description (i.e. ${i})`,"name",t)}return r[0]}if(t=Gt.from(t).format(),t==="Error(string)")return Gt.from("error Error(string)");if(t==="Panic(uint256)")return Gt.from("error Panic(uint256)");const s=f(this,Ce).get(t);return s||null}forEachError(t){const e=Array.from(f(this,Ce).keys());e.sort((s,r)=>s.localeCompare(r));for(let s=0;s<e.length;s++){const r=e[s];t(f(this,Ce).get(r),s)}}_decodeParams(t,e){return f(this,It).decode(t,e)}_encodeParams(t,e){return f(this,It).encode(t,e)}encodeDeploy(t){return this._encodeParams(this.deploy.inputs,t||[])}decodeErrorResult(t,e){if(typeof t=="string"){const s=this.getError(t);x(s,"unknown error","fragment",t),t=s}return x(ht(e,0,4)===t.selector,`data signature does not match error ${t.name}.`,"data",e),this._decodeParams(t.inputs,ht(e,4))}encodeErrorResult(t,e){if(typeof t=="string"){const s=this.getError(t);x(s,"unknown error","fragment",t),t=s}return pt([t.selector,this._encodeParams(t.inputs,e||[])])}decodeFunctionData(t,e){if(typeof t=="string"){const s=this.getFunction(t);x(s,"unknown function","fragment",t),t=s}return x(ht(e,0,4)===t.selector,`data signature does not match function ${t.name}.`,"data",e),this._decodeParams(t.inputs,ht(e,4))}encodeFunctionData(t,e){if(typeof t=="string"){const s=this.getFunction(t);x(s,"unknown function","fragment",t),t=s}return pt([t.selector,this._encodeParams(t.inputs,e||[])])}decodeFunctionResult(t,e){if(typeof t=="string"){const i=this.getFunction(t);x(i,"unknown function","fragment",t),t=i}let s="invalid length for result data";const r=Ot(e);if(r.length%32===0)try{return f(this,It).decode(t.outputs,r)}catch{s="could not decode result data"}N(!1,s,"BAD_DATA",{value:U(r),info:{method:t.name,signature:t.format()}})}makeError(t,e){const s=q(t,"data"),r=ui.getBuiltinCallException("call",e,s);if(r.message.startsWith("execution reverted (unknown custom error)")){const o=U(s.slice(0,4)),l=this.getError(o);if(l)try{const u=f(this,It).decode(l.inputs,s.slice(4));r.revert={name:l.name,signature:l.format(),args:u},r.reason=r.revert.signature,r.message=`execution reverted: ${r.reason}`}catch{r.message="execution reverted (coult not decode custom error)"}}const a=this.parseTransaction(e);return a&&(r.invocation={method:a.name,signature:a.signature,args:a.args}),r}encodeFunctionResult(t,e){if(typeof t=="string"){const s=this.getFunction(t);x(s,"unknown function","fragment",t),t=s}return U(f(this,It).encode(t.outputs,e||[]))}encodeFilterTopics(t,e){if(typeof t=="string"){const i=this.getEvent(t);x(i,"unknown event","eventFragment",t),t=i}N(e.length<=t.inputs.length,`too many arguments for ${t.format()}`,"UNEXPECTED_ARGUMENT",{count:e.length,expectedCount:t.inputs.length});const s=[];t.anonymous||s.push(t.topicHash);const r=(i,a)=>i.type==="string"?ws(a):i.type==="bytes"?yt(U(a)):(i.type==="bool"&&typeof a=="boolean"?a=a?"0x01":"0x00":i.type.match(/^u?int/)?a=Sn(a):i.type.match(/^bytes/)?a=yd(a,32):i.type==="address"&&f(this,It).encode(["address"],[a]),en(U(a),32));for(e.forEach((i,a)=>{const o=t.inputs[a];if(!o.indexed){x(i==null,"cannot filter non-indexed parameters; must be null","contract."+o.name,i);return}i==null?s.push(null):o.baseType==="array"||o.baseType==="tuple"?x(!1,"filtering with tuples or arrays not supported","contract."+o.name,i):Array.isArray(i)?s.push(i.map(l=>r(o,l))):s.push(r(o,i))});s.length&&s[s.length-1]===null;)s.pop();return s}encodeEventLog(t,e){if(typeof t=="string"){const a=this.getEvent(t);x(a,"unknown event","eventFragment",t),t=a}const s=[],r=[],i=[];return t.anonymous||s.push(t.topicHash),x(e.length===t.inputs.length,"event arguments/values mismatch","values",e),t.inputs.forEach((a,o)=>{const l=e[o];if(a.indexed)if(a.type==="string")s.push(ws(l));else if(a.type==="bytes")s.push(yt(l));else{if(a.baseType==="tuple"||a.baseType==="array")throw new Error("not implemented");s.push(f(this,It).encode([a.type],[l]))}else r.push(a),i.push(l)}),{data:f(this,It).encode(r,i),topics:s}}decodeEventLog(t,e,s){if(typeof t=="string"){const g=this.getEvent(t);x(g,"unknown event","eventFragment",t),t=g}if(s!=null&&!t.anonymous){const g=t.topicHash;x(lt(s[0],32)&&s[0].toLowerCase()===g,"fragment/topic mismatch","topics[0]",s[0]),s=s.slice(1)}const r=[],i=[],a=[];t.inputs.forEach((g,w)=>{g.indexed?g.type==="string"||g.type==="bytes"||g.baseType==="tuple"||g.baseType==="array"?(r.push(Pt.from({type:"bytes32",name:g.name})),a.push(!0)):(r.push(g),a.push(!1)):(i.push(g),a.push(!1))});const o=s!=null?f(this,It).decode(r,pt(s)):null,l=f(this,It).decode(i,e,!0),u=[],d=[];let h=0,y=0;return t.inputs.forEach((g,w)=>{let v=null;if(g.indexed)if(o==null)v=new ic(null);else if(a[w])v=new ic(o[y++]);else try{v=o[y++]}catch(A){v=A}else try{v=l[h++]}catch(A){v=A}u.push(v),d.push(g.name||null)}),$r.fromItems(u,d)}parseTransaction(t){const e=q(t.data,"tx.data"),s=H(t.value!=null?t.value:0,"tx.value"),r=this.getFunction(U(e.slice(0,4)));if(!r)return null;const i=f(this,It).decode(r.inputs,e.slice(4));return new em(r,r.selector,i,s)}parseCallResult(t){throw new Error("@TODO")}parseLog(t){const e=this.getEvent(t.topics[0]);return!e||e.anonymous?null:new tm(e,e.topicHash,this.decodeEventLog(e,t.data,t.topics))}parseError(t){const e=U(t),s=this.getError(ht(e,0,4));if(!s)return null;const r=f(this,It).decode(s.inputs,ht(e,4));return new nm(s,s.selector,r)}static from(t){return t instanceof zn?t:typeof t=="string"?new zn(JSON.parse(t)):typeof t.formatJson=="function"?new zn(t.formatJson()):typeof t.format=="function"?new zn(t.format("json")):new zn(t)}};Ce=new WeakMap,Pe=new WeakMap,Ie=new WeakMap,It=new WeakMap,Oe=new WeakSet,Vi=function(t,e,s){if(lt(t)){const i=t.toLowerCase();for(const a of f(this,Ie).values())if(i===a.selector)return a;return null}if(t.indexOf("(")===-1){const i=[];for(const[a,o]of f(this,Ie))a.split("(")[0]===t&&i.push(o);if(e){const a=e.length>0?e[e.length-1]:null;let o=e.length,l=!0;Bt.isTyped(a)&&a.type==="overrides"&&(l=!1,o--);for(let u=i.length-1;u>=0;u--){const d=i[u].inputs.length;d!==o&&(!l||d!==o-1)&&i.splice(u,1)}for(let u=i.length-1;u>=0;u--){const d=i[u].inputs;for(let h=0;h<e.length;h++)if(Bt.isTyped(e[h])){if(h>=d.length){if(e[h].type==="overrides")continue;i.splice(u,1);break}if(e[h].type!==d[h].baseType){i.splice(u,1);break}}}}if(i.length===1&&e&&e.length!==i[0].inputs.length){const a=e[e.length-1];(a==null||Array.isArray(a)||typeof a!="object")&&i.splice(0,1)}if(i.length===0)return null;if(i.length>1&&s){const a=i.map(o=>JSON.stringify(o.format())).join(", ");x(!1,`ambiguous function description (i.e. matches ${a})`,"key",t)}return i[0]}const r=f(this,Ie).get($e.from(t).format());return r||null},zi=function(t,e,s){if(lt(t)){const i=t.toLowerCase();for(const a of f(this,Pe).values())if(i===a.topicHash)return a;return null}if(t.indexOf("(")===-1){const i=[];for(const[a,o]of f(this,Pe))a.split("(")[0]===t&&i.push(o);if(e){for(let a=i.length-1;a>=0;a--)i[a].inputs.length<e.length&&i.splice(a,1);for(let a=i.length-1;a>=0;a--){const o=i[a].inputs;for(let l=0;l<e.length;l++)if(Bt.isTyped(e[l])&&e[l].type!==o[l].baseType){i.splice(a,1);break}}}if(i.length===0)return null;if(i.length>1&&s){const a=i.map(o=>JSON.stringify(o.format())).join(", ");x(!1,`ambiguous event description (i.e. matches ${a})`,"key",t)}return i[0]}const r=f(this,Pe).get(Se.from(t).format());return r||null};let Ao=zn;const Ku=BigInt(0);function zs(n){return n??null}function mt(n){return n==null?null:n.toString()}class lc{constructor(t,e,s){_(this,"gasPrice");_(this,"maxFeePerGas");_(this,"maxPriorityFeePerGas");V(this,{gasPrice:zs(t),maxFeePerGas:zs(e),maxPriorityFeePerGas:zs(s)})}toJSON(){const{gasPrice:t,maxFeePerGas:e,maxPriorityFeePerGas:s}=this;return{_type:"FeeData",gasPrice:mt(t),maxFeePerGas:mt(e),maxPriorityFeePerGas:mt(s)}}}function aa(n){const t={};n.to&&(t.to=n.to),n.from&&(t.from=n.from),n.data&&(t.data=U(n.data));const e="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const r of e)!(r in n)||n[r]==null||(t[r]=H(n[r],`request.${r}`));const s="type,nonce".split(/,/);for(const r of s)!(r in n)||n[r]==null||(t[r]=K(n[r],`request.${r}`));return n.accessList&&(t.accessList=_s(n.accessList)),n.authorizationList&&(t.authorizationList=n.authorizationList.slice()),"blockTag"in n&&(t.blockTag=n.blockTag),"enableCcipRead"in n&&(t.enableCcipRead=!!n.enableCcipRead),"customData"in n&&(t.customData=n.customData),"blobVersionedHashes"in n&&n.blobVersionedHashes&&(t.blobVersionedHashes=n.blobVersionedHashes.slice()),"kzg"in n&&(t.kzg=n.kzg),"blobs"in n&&n.blobs&&(t.blobs=n.blobs.map(r=>Do(r)?U(r):Object.assign({},r))),t}var ze;class sm{constructor(t,e){_(this,"provider");_(this,"number");_(this,"hash");_(this,"timestamp");_(this,"parentHash");_(this,"parentBeaconBlockRoot");_(this,"nonce");_(this,"difficulty");_(this,"gasLimit");_(this,"gasUsed");_(this,"stateRoot");_(this,"receiptsRoot");_(this,"blobGasUsed");_(this,"excessBlobGas");_(this,"miner");_(this,"prevRandao");_(this,"extraData");_(this,"baseFeePerGas");I(this,ze);b(this,ze,t.transactions.map(s=>typeof s!="string"?new di(s,e):s)),V(this,{provider:e,hash:zs(t.hash),number:t.number,timestamp:t.timestamp,parentHash:t.parentHash,parentBeaconBlockRoot:t.parentBeaconBlockRoot,nonce:t.nonce,difficulty:t.difficulty,gasLimit:t.gasLimit,gasUsed:t.gasUsed,blobGasUsed:t.blobGasUsed,excessBlobGas:t.excessBlobGas,miner:t.miner,prevRandao:zs(t.prevRandao),extraData:t.extraData,baseFeePerGas:zs(t.baseFeePerGas),stateRoot:t.stateRoot,receiptsRoot:t.receiptsRoot})}get transactions(){return f(this,ze).map(t=>typeof t=="string"?t:t.hash)}get prefetchedTransactions(){const t=f(this,ze).slice();return t.length===0?[]:(N(typeof t[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),t)}toJSON(){const{baseFeePerGas:t,difficulty:e,extraData:s,gasLimit:r,gasUsed:i,hash:a,miner:o,prevRandao:l,nonce:u,number:d,parentHash:h,parentBeaconBlockRoot:y,stateRoot:g,receiptsRoot:w,timestamp:v,transactions:A}=this;return{_type:"Block",baseFeePerGas:mt(t),difficulty:mt(e),extraData:s,gasLimit:mt(r),gasUsed:mt(i),blobGasUsed:mt(this.blobGasUsed),excessBlobGas:mt(this.excessBlobGas),hash:a,miner:o,prevRandao:l,nonce:u,number:d,parentHash:h,timestamp:v,parentBeaconBlockRoot:y,stateRoot:g,receiptsRoot:w,transactions:A}}[Symbol.iterator](){let t=0;const e=this.transactions;return{next:()=>t<this.length?{value:e[t++],done:!1}:{value:void 0,done:!0}}}get length(){return f(this,ze).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(t){let e;if(typeof t=="number")e=f(this,ze)[t];else{const s=t.toLowerCase();for(const r of f(this,ze))if(typeof r=="string"){if(r!==s)continue;e=r;break}else{if(r.hash!==s)continue;e=r;break}}if(e==null)throw new Error("no such tx");return typeof e=="string"?await this.provider.getTransaction(e):e}getPrefetchedTransaction(t){const e=this.prefetchedTransactions;if(typeof t=="number")return e[t];t=t.toLowerCase();for(const s of e)if(s.hash===t)return s;x(!1,"no matching transaction","indexOrHash",t)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return rm(this)}}ze=new WeakMap;class Ii{constructor(t,e){_(this,"provider");_(this,"transactionHash");_(this,"blockHash");_(this,"blockNumber");_(this,"removed");_(this,"address");_(this,"data");_(this,"topics");_(this,"index");_(this,"transactionIndex");this.provider=e;const s=Object.freeze(t.topics.slice());V(this,{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,removed:t.removed,address:t.address,data:t.data,topics:s,index:t.index,transactionIndex:t.transactionIndex})}toJSON(){const{address:t,blockHash:e,blockNumber:s,data:r,index:i,removed:a,topics:o,transactionHash:l,transactionIndex:u}=this;return{_type:"log",address:t,blockHash:e,blockNumber:s,data:r,index:i,removed:a,topics:o,transactionHash:l,transactionIndex:u}}async getBlock(){const t=await this.provider.getBlock(this.blockHash);return N(!!t,"failed to find transaction","UNKNOWN_ERROR",{}),t}async getTransaction(){const t=await this.provider.getTransaction(this.transactionHash);return N(!!t,"failed to find transaction","UNKNOWN_ERROR",{}),t}async getTransactionReceipt(){const t=await this.provider.getTransactionReceipt(this.transactionHash);return N(!!t,"failed to find transaction receipt","UNKNOWN_ERROR",{}),t}removedEvent(){return im(this)}}var bi;class qu{constructor(t,e){_(this,"provider");_(this,"to");_(this,"from");_(this,"contractAddress");_(this,"hash");_(this,"index");_(this,"blockHash");_(this,"blockNumber");_(this,"logsBloom");_(this,"gasUsed");_(this,"blobGasUsed");_(this,"cumulativeGasUsed");_(this,"gasPrice");_(this,"blobGasPrice");_(this,"type");_(this,"status");_(this,"root");I(this,bi);b(this,bi,Object.freeze(t.logs.map(r=>new Ii(r,e))));let s=Ku;t.effectiveGasPrice!=null?s=t.effectiveGasPrice:t.gasPrice!=null&&(s=t.gasPrice),V(this,{provider:e,to:t.to,from:t.from,contractAddress:t.contractAddress,hash:t.hash,index:t.index,blockHash:t.blockHash,blockNumber:t.blockNumber,logsBloom:t.logsBloom,gasUsed:t.gasUsed,cumulativeGasUsed:t.cumulativeGasUsed,blobGasUsed:t.blobGasUsed,gasPrice:s,blobGasPrice:t.blobGasPrice,type:t.type,status:t.status,root:t.root})}get logs(){return f(this,bi)}toJSON(){const{to:t,from:e,contractAddress:s,hash:r,index:i,blockHash:a,blockNumber:o,logsBloom:l,logs:u,status:d,root:h}=this;return{_type:"TransactionReceipt",blockHash:a,blockNumber:o,contractAddress:s,cumulativeGasUsed:mt(this.cumulativeGasUsed),from:e,gasPrice:mt(this.gasPrice),blobGasUsed:mt(this.blobGasUsed),blobGasPrice:mt(this.blobGasPrice),gasUsed:mt(this.gasUsed),hash:r,index:i,logs:u,logsBloom:l,root:h,status:d,to:t}}get length(){return this.logs.length}[Symbol.iterator](){let t=0;return{next:()=>t<this.length?{value:this.logs[t++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const t=await this.provider.getBlock(this.blockHash);if(t==null)throw new Error("TODO");return t}async getTransaction(){const t=await this.provider.getTransaction(this.hash);if(t==null)throw new Error("TODO");return t}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return Yu(this)}reorderedEvent(t){return N(!t||t.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),Zu(this,t)}}bi=new WeakMap;var vn;const sl=class sl{constructor(t,e){_(this,"provider");_(this,"blockNumber");_(this,"blockHash");_(this,"index");_(this,"hash");_(this,"type");_(this,"to");_(this,"from");_(this,"nonce");_(this,"gasLimit");_(this,"gasPrice");_(this,"maxPriorityFeePerGas");_(this,"maxFeePerGas");_(this,"maxFeePerBlobGas");_(this,"data");_(this,"value");_(this,"chainId");_(this,"signature");_(this,"accessList");_(this,"blobVersionedHashes");_(this,"authorizationList");I(this,vn);this.provider=e,this.blockNumber=t.blockNumber!=null?t.blockNumber:null,this.blockHash=t.blockHash!=null?t.blockHash:null,this.hash=t.hash,this.index=t.index,this.type=t.type,this.from=t.from,this.to=t.to||null,this.gasLimit=t.gasLimit,this.nonce=t.nonce,this.data=t.data,this.value=t.value,this.gasPrice=t.gasPrice,this.maxPriorityFeePerGas=t.maxPriorityFeePerGas!=null?t.maxPriorityFeePerGas:null,this.maxFeePerGas=t.maxFeePerGas!=null?t.maxFeePerGas:null,this.maxFeePerBlobGas=t.maxFeePerBlobGas!=null?t.maxFeePerBlobGas:null,this.chainId=t.chainId,this.signature=t.signature,this.accessList=t.accessList!=null?t.accessList:null,this.blobVersionedHashes=t.blobVersionedHashes!=null?t.blobVersionedHashes:null,this.authorizationList=t.authorizationList!=null?t.authorizationList:null,b(this,vn,-1)}toJSON(){const{blockNumber:t,blockHash:e,index:s,hash:r,type:i,to:a,from:o,nonce:l,data:u,signature:d,accessList:h,blobVersionedHashes:y}=this;return{_type:"TransactionResponse",accessList:h,blockNumber:t,blockHash:e,blobVersionedHashes:y,chainId:mt(this.chainId),data:u,from:o,gasLimit:mt(this.gasLimit),gasPrice:mt(this.gasPrice),hash:r,maxFeePerGas:mt(this.maxFeePerGas),maxPriorityFeePerGas:mt(this.maxPriorityFeePerGas),maxFeePerBlobGas:mt(this.maxFeePerBlobGas),nonce:l,signature:d,to:a,index:s,type:i,value:mt(this.value)}}async getBlock(){let t=this.blockNumber;if(t==null){const s=await this.getTransaction();s&&(t=s.blockNumber)}if(t==null)return null;const e=this.provider.getBlock(t);if(e==null)throw new Error("TODO");return e}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:e,blockNumber:s}=await Rt({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return e==null||e.blockNumber==null?0:s-e.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(t,e){const s=t??1,r=e??0;let i=f(this,vn),a=-1,o=i===-1;const l=async()=>{if(o)return null;const{blockNumber:y,nonce:g}=await Rt({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(g<this.nonce){i=y;return}if(o)return null;const w=await this.getTransaction();if(!(w&&w.blockNumber!=null))for(a===-1&&(a=i-3,a<f(this,vn)&&(a=f(this,vn)));a<=y;){if(o)return null;const v=await this.provider.getBlock(a,!0);if(v==null)return;for(const A of v)if(A===this.hash)return;for(let A=0;A<v.length;A++){const k=await v.getTransaction(A);if(k.from===this.from&&k.nonce===this.nonce){if(o)return null;const E=await this.provider.getTransactionReceipt(k.hash);if(E==null||y-E.blockNumber+1<s)return;let P="replaced";k.data===this.data&&k.to===this.to&&k.value===this.value?P="repriced":k.data==="0x"&&k.from===k.to&&k.value===Ku&&(P="cancelled"),N(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:P==="replaced"||P==="cancelled",reason:P,replacement:k.replaceableTransaction(i),hash:k.hash,receipt:E})}}a++}},u=y=>{if(y==null||y.status!==0)return y;N(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:y.to,from:y.from,data:""},receipt:y})},d=await this.provider.getTransactionReceipt(this.hash);if(s===0)return u(d);if(d){if(s===1||await d.confirmations()>=s)return u(d)}else if(await l(),s===0)return null;return await new Promise((y,g)=>{const w=[],v=()=>{w.forEach(k=>k())};if(w.push(()=>{o=!0}),r>0){const k=setTimeout(()=>{v(),g(dt("wait for transaction timeout","TIMEOUT"))},r);w.push(()=>{clearTimeout(k)})}const A=async k=>{if(await k.confirmations()>=s){v();try{y(u(k))}catch(E){g(E)}}};if(w.push(()=>{this.provider.off(this.hash,A)}),this.provider.on(this.hash,A),i>=0){const k=async()=>{try{await l()}catch(E){if(Ct(E,"TRANSACTION_REPLACED")){v(),g(E);return}}o||this.provider.once("block",k)};w.push(()=>{this.provider.off("block",k)}),this.provider.once("block",k)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return N(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Yu(this)}reorderedEvent(t){return N(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),N(!t||t.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Zu(this,t)}replaceableTransaction(t){x(Number.isInteger(t)&&t>=0,"invalid startBlock","startBlock",t);const e=new sl(this,this.provider);return b(e,vn,t),e}};vn=new WeakMap;let di=sl;function rm(n){return{orphan:"drop-block",hash:n.hash,number:n.number}}function Zu(n,t){return{orphan:"reorder-transaction",tx:n,other:t}}function Yu(n){return{orphan:"drop-transaction",tx:n}}function im(n){return{orphan:"drop-log",log:{transactionHash:n.transactionHash,blockHash:n.blockHash,blockNumber:n.blockNumber,address:n.address,data:n.data,topics:Object.freeze(n.topics.slice()),index:n.index}}}class Zo extends Ii{constructor(e,s,r){super(e,e.provider);_(this,"interface");_(this,"fragment");_(this,"args");const i=s.decodeEventLog(r,e.data,e.topics);V(this,{args:i,fragment:r,interface:s})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class Wu extends Ii{constructor(e,s){super(e,e.provider);_(this,"error");V(this,{error:s})}}var br;class am extends qu{constructor(e,s,r){super(r,s);I(this,br);b(this,br,e)}get logs(){return super.logs.map(e=>{const s=e.topics.length?f(this,br).getEvent(e.topics[0]):null;if(s)try{return new Zo(e,f(this,br),s)}catch(r){return new Wu(e,r)}return e})}}br=new WeakMap;var wi;class Yo extends di{constructor(e,s,r){super(r,s);I(this,wi);b(this,wi,e)}async wait(e,s){const r=await super.wait(e,s);return r==null?null:new am(f(this,wi),this.provider,r)}}wi=new WeakMap;class Xu extends Ec{constructor(e,s,r,i){super(e,s,r);_(this,"log");V(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class om extends Xu{constructor(t,e,s,r,i){super(t,e,s,new Zo(i,t.interface,r));const a=t.interface.decodeEventLog(r,this.log.data,this.log.topics);V(this,{args:a,fragment:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const cc=BigInt(0);function td(n){return n&&typeof n.call=="function"}function ed(n){return n&&typeof n.estimateGas=="function"}function Ta(n){return n&&typeof n.resolveName=="function"}function nd(n){return n&&typeof n.sendTransaction=="function"}function sd(n){if(n!=null){if(Ta(n))return n;if(n.provider)return n.provider}}var vi;class lm{constructor(t,e,s){I(this,vi);_(this,"fragment");if(V(this,{fragment:e}),e.inputs.length<s.length)throw new Error("too many arguments");const r=xs(t.runner,"resolveName"),i=Ta(r)?r:null;b(this,vi,async function(){const a=await Promise.all(e.inputs.map((o,l)=>s[l]==null?null:o.walkAsync(s[l],(d,h)=>d==="address"?Array.isArray(h)?Promise.all(h.map(y=>Dt(y,i))):Dt(h,i):h)));return t.interface.encodeFilterTopics(e,a)}())}getTopicFilter(){return f(this,vi)}}vi=new WeakMap;function xs(n,t){return n==null?null:typeof n[t]=="function"?n:n.provider&&typeof n.provider[t]=="function"?n.provider:null}function Zn(n){return n==null?null:n.provider||null}async function rd(n,t){const e=Bt.dereference(n,"overrides");x(typeof e=="object","invalid overrides parameter","overrides",n);const s=aa(e);return x(s.to==null||(t||[]).indexOf("to")>=0,"cannot override to","overrides.to",s.to),x(s.data==null||(t||[]).indexOf("data")>=0,"cannot override data","overrides.data",s.data),s.from&&(s.from=s.from),s}async function cm(n,t,e){const s=xs(n,"resolveName"),r=Ta(s)?s:null;return await Promise.all(t.map((i,a)=>i.walkAsync(e[a],(o,l)=>(l=Bt.dereference(l,o),o==="address"?Dt(l,r):l))))}function um(n){const t=async function(a){const o=await rd(a,["data"]);o.to=await n.getAddress(),o.from&&(o.from=await Dt(o.from,sd(n.runner)));const l=n.interface,u=H(o.value||cc,"overrides.value")===cc,d=(o.data||"0x")==="0x";l.fallback&&!l.fallback.payable&&l.receive&&!d&&!u&&x(!1,"cannot send data to receive or send value to non-payable fallback","overrides",a),x(l.fallback||d,"cannot send data to receive-only contract","overrides.data",o.data);const h=l.receive||l.fallback&&l.fallback.payable;return x(h||u,"cannot send value to non-payable fallback","overrides.value",o.value),x(l.fallback||d,"cannot send data to receive-only contract","overrides.data",o.data),o},e=async function(a){const o=xs(n.runner,"call");N(td(o),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const l=await t(a);try{return await o.call(l)}catch(u){throw Lo(u)&&u.data?n.interface.makeError(u.data,l):u}},s=async function(a){const o=n.runner;N(nd(o),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const l=await o.sendTransaction(await t(a)),u=Zn(n.runner);return new Yo(n.interface,u,l)},r=async function(a){const o=xs(n.runner,"estimateGas");return N(ed(o),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await o.estimateGas(await t(a))},i=async a=>await s(a);return V(i,{_contract:n,estimateGas:r,populateTransaction:t,send:s,staticCall:e}),i}function dm(n,t){const e=function(...u){const d=n.interface.getFunction(t,u);return N(d,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:u}}),d},s=async function(...u){const d=e(...u);let h={};if(d.inputs.length+1===u.length&&(h=await rd(u.pop()),h.from&&(h.from=await Dt(h.from,sd(n.runner)))),d.inputs.length!==u.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const y=await cm(n.runner,d.inputs,u);return Object.assign({},h,await Rt({to:n.getAddress(),data:n.interface.encodeFunctionData(d,y)}))},r=async function(...u){const d=await o(...u);return d.length===1?d[0]:d},i=async function(...u){const d=n.runner;N(nd(d),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const h=await d.sendTransaction(await s(...u)),y=Zn(n.runner);return new Yo(n.interface,y,h)},a=async function(...u){const d=xs(n.runner,"estimateGas");return N(ed(d),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await d.estimateGas(await s(...u))},o=async function(...u){const d=xs(n.runner,"call");N(td(d),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const h=await s(...u);let y="0x";try{y=await d.call(h)}catch(w){throw Lo(w)&&w.data?n.interface.makeError(w.data,h):w}const g=e(...u);return n.interface.decodeFunctionResult(g,y)},l=async(...u)=>e(...u).constant?await r(...u):await i(...u);return V(l,{name:n.interface.getFunctionName(t),_contract:n,_key:t,getFragment:e,estimateGas:a,populateTransaction:s,send:i,staticCall:r,staticCallResult:o}),Object.defineProperty(l,"fragment",{configurable:!1,enumerable:!0,get:()=>{const u=n.interface.getFunction(t);return N(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),u}}),l}function fm(n,t){const e=function(...r){const i=n.interface.getEvent(t,r);return N(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:r}}),i},s=function(...r){return new lm(n,e(...r),r)};return V(s,{name:n.interface.getEventName(t),_contract:n,_key:t,getFragment:e}),Object.defineProperty(s,"fragment",{configurable:!1,enumerable:!0,get:()=>{const r=n.interface.getEvent(t);return N(r,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),r}}),s}const oa=Symbol.for("_ethersInternal_contract"),id=new WeakMap;function hm(n,t){id.set(n[oa],t)}function Kt(n){return id.get(n[oa])}function pm(n){return n&&typeof n=="object"&&"getTopicFilter"in n&&typeof n.getTopicFilter=="function"&&n.fragment}async function Wo(n,t){let e,s=null;if(Array.isArray(t)){const i=function(a){if(lt(a,32))return a;const o=n.interface.getEvent(a);return x(o,"unknown fragment","name",a),o.topicHash};e=t.map(a=>a==null?null:Array.isArray(a)?a.map(i):i(a))}else t==="*"?e=[null]:typeof t=="string"?lt(t,32)?e=[t]:(s=n.interface.getEvent(t),x(s,"unknown fragment","event",t),e=[s.topicHash]):pm(t)?e=await t.getTopicFilter():"fragment"in t?(s=t.fragment,e=[s.topicHash]):x(!1,"unknown event name","event",t);e=e.map(i=>{if(i==null)return null;if(Array.isArray(i)){const a=Array.from(new Set(i.map(o=>o.toLowerCase())).values());return a.length===1?a[0]:(a.sort(),a)}return i.toLowerCase()});const r=e.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:s,tag:r,topics:e}}async function Yr(n,t){const{subs:e}=Kt(n);return e.get((await Wo(n,t)).tag)||null}async function uc(n,t,e){const s=Zn(n.runner);N(s,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:t});const{fragment:r,tag:i,topics:a}=await Wo(n,e),{addr:o,subs:l}=Kt(n);let u=l.get(i);if(!u){const h={address:o||n,topics:a},y=A=>{let k=r;if(k==null)try{k=n.interface.getEvent(A.topics[0])}catch{}if(k){const E=k,P=r?n.interface.decodeEventLog(r,A.data,A.topics):[];ko(n,e,P,O=>new om(n,O,e,E,A))}else ko(n,e,[],E=>new Xu(n,E,e,A))};let g=[];u={tag:i,listeners:[],start:()=>{g.length||g.push(s.on(h,y))},stop:async()=>{if(g.length==0)return;let A=g;g=[],await Promise.all(A),s.off(h,y)}},l.set(i,u)}return u}let xo=Promise.resolve();async function mm(n,t,e,s){await xo;const r=await Yr(n,t);if(!r)return!1;const i=r.listeners.length;return r.listeners=r.listeners.filter(({listener:a,once:o})=>{const l=Array.from(e);s&&l.push(s(o?null:a));try{a.call(n,...l)}catch{}return!o}),r.listeners.length===0&&(r.stop(),Kt(n).subs.delete(r.tag)),i>0}async function ko(n,t,e,s){try{await xo}catch{}const r=mm(n,t,e,s);return xo=r,await r}const Ui=["then"];var vc;vc=oa;const ei=class ei{constructor(t,e,s,r){_(this,"target");_(this,"interface");_(this,"runner");_(this,"filters");_(this,vc);_(this,"fallback");x(typeof t=="string"||uu(t),"invalid value for Contract target","target",t),s==null&&(s=null);const i=Ao.from(e);V(this,{target:t,runner:s,interface:i}),Object.defineProperty(this,oa,{value:{}});let a,o=null,l=null;if(r){const h=Zn(s);l=new Yo(this.interface,h,r)}let u=new Map;if(typeof t=="string")if(lt(t))o=t,a=Promise.resolve(t);else{const h=xs(s,"resolveName");if(!Ta(h))throw dt("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});a=h.resolveName(t).then(y=>{if(y==null)throw dt("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:t});return Kt(this).addr=y,y})}else a=t.getAddress().then(h=>{if(h==null)throw new Error("TODO");return Kt(this).addr=h,h});hm(this,{addrPromise:a,addr:o,deployTx:l,subs:u});const d=new Proxy({},{get:(h,y,g)=>{if(typeof y=="symbol"||Ui.indexOf(y)>=0)return Reflect.get(h,y,g);try{return this.getEvent(y)}catch(w){if(!Ct(w,"INVALID_ARGUMENT")||w.argument!=="key")throw w}},has:(h,y)=>Ui.indexOf(y)>=0?Reflect.has(h,y):Reflect.has(h,y)||this.interface.hasEvent(String(y))});return V(this,{filters:d}),V(this,{fallback:i.receive||i.fallback?um(this):null}),new Proxy(this,{get:(h,y,g)=>{if(typeof y=="symbol"||y in h||Ui.indexOf(y)>=0)return Reflect.get(h,y,g);try{return h.getFunction(y)}catch(w){if(!Ct(w,"INVALID_ARGUMENT")||w.argument!=="key")throw w}},has:(h,y)=>typeof y=="symbol"||y in h||Ui.indexOf(y)>=0?Reflect.has(h,y):h.interface.hasFunction(y)})}connect(t){return new ei(this.target,this.interface,t)}attach(t){return new ei(t,this.interface,this.runner)}async getAddress(){return await Kt(this).addrPromise}async getDeployedCode(){const t=Zn(this.runner);N(t,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const e=await t.getCode(await this.getAddress());return e==="0x"?null:e}async waitForDeployment(){const t=this.deploymentTransaction();if(t)return await t.wait(),this;if(await this.getDeployedCode()!=null)return this;const s=Zn(this.runner);return N(s!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((r,i)=>{const a=async()=>{try{if(await this.getDeployedCode()!=null)return r(this);s.once("block",a)}catch(o){i(o)}};a()})}deploymentTransaction(){return Kt(this).deployTx}getFunction(t){return typeof t!="string"&&(t=t.format()),dm(this,t)}getEvent(t){return typeof t!="string"&&(t=t.format()),fm(this,t)}async queryTransaction(t){throw new Error("@TODO")}async queryFilter(t,e,s){e==null&&(e=0),s==null&&(s="latest");const{addr:r,addrPromise:i}=Kt(this),a=r||await i,{fragment:o,topics:l}=await Wo(this,t),u={address:a,topics:l,fromBlock:e,toBlock:s},d=Zn(this.runner);return N(d,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await d.getLogs(u)).map(h=>{let y=o;if(y==null)try{y=this.interface.getEvent(h.topics[0])}catch{}if(y)try{return new Zo(h,this.interface,y)}catch(g){return new Wu(h,g)}return new Ii(h,d)})}async on(t,e){const s=await uc(this,"on",t);return s.listeners.push({listener:e,once:!1}),s.start(),this}async once(t,e){const s=await uc(this,"once",t);return s.listeners.push({listener:e,once:!0}),s.start(),this}async emit(t,...e){return await ko(this,t,e,null)}async listenerCount(t){if(t){const r=await Yr(this,t);return r?r.listeners.length:0}const{subs:e}=Kt(this);let s=0;for(const{listeners:r}of e.values())s+=r.length;return s}async listeners(t){if(t){const r=await Yr(this,t);return r?r.listeners.map(({listener:i})=>i):[]}const{subs:e}=Kt(this);let s=[];for(const{listeners:r}of e.values())s=s.concat(r.map(({listener:i})=>i));return s}async off(t,e){const s=await Yr(this,t);if(!s)return this;if(e){const r=s.listeners.map(({listener:i})=>i).indexOf(e);r>=0&&s.listeners.splice(r,1)}return(e==null||s.listeners.length===0)&&(s.stop(),Kt(this).subs.delete(s.tag)),this}async removeAllListeners(t){if(t){const e=await Yr(this,t);if(!e)return this;e.stop(),Kt(this).subs.delete(e.tag)}else{const{subs:e}=Kt(this);for(const{tag:s,stop:r}of e.values())r(),e.delete(s)}return this}async addListener(t,e){return await this.on(t,e)}async removeListener(t,e){return await this.off(t,e)}static buildClass(t){class e extends ei{constructor(r,i=null){super(r,t,i)}}return e}static from(t,e,s){return s==null&&(s=null),new this(t,e,s)}};let _o=ei;function gm(){return _o}class js extends gm(){}function Ja(n){return n.match(/^ipfs:\/\/ipfs\//i)?n=n.substring(12):n.match(/^ipfs:\/\//i)?n=n.substring(7):x(!1,"unsupported IPFS format","link",n),`https://gateway.ipfs.io/ipfs/${n}`}class ym{constructor(t){_(this,"name");V(this,{name:t})}connect(t){return this}supportsCoinType(t){return!1}async encodeAddress(t,e){throw new Error("unsupported coin")}async decodeAddress(t,e){throw new Error("unsupported coin")}}const ad=new RegExp("^(ipfs)://(.*)$","i"),dc=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),ad,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var An,cs,xn,Os,pa,od;const Ms=class Ms{constructor(t,e,s){I(this,xn);_(this,"provider");_(this,"address");_(this,"name");I(this,An);I(this,cs);V(this,{provider:t,address:e,name:s}),b(this,An,null),b(this,cs,new js(e,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],t))}async supportsWildcard(){return f(this,An)==null&&b(this,An,(async()=>{try{return await f(this,cs).supportsInterface("0x9061b923")}catch(t){if(Ct(t,"CALL_EXCEPTION"))return!1;throw b(this,An,null),t}})()),await f(this,An)}async getAddress(t){if(t==null&&(t=60),t===60)try{const i=await S(this,xn,Os).call(this,"addr(bytes32)");return i==null||i===si?null:i}catch(i){if(Ct(i,"CALL_EXCEPTION"))return null;throw i}if(t>=0&&t<2147483648){let i=t+2147483648;const a=await S(this,xn,Os).call(this,"addr(bytes32,uint)",[i]);if(lt(a,20))return st(a)}let e=null;for(const i of this.provider.plugins)if(i instanceof ym&&i.supportsCoinType(t)){e=i;break}if(e==null)return null;const s=await S(this,xn,Os).call(this,"addr(bytes32,uint)",[t]);if(s==null||s==="0x")return null;const r=await e.decodeAddress(t,s);if(r!=null)return r;N(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${t})`,info:{coinType:t,data:s}})}async getText(t){const e=await S(this,xn,Os).call(this,"text(bytes32,string)",[t]);return e==null||e==="0x"?null:e}async getContentHash(){const t=await S(this,xn,Os).call(this,"contenthash(bytes32)");if(t==null||t==="0x")return null;const e=t.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(e){const r=e[1]==="e3010170"?"ipfs":"ipns",i=parseInt(e[4],16);if(e[5].length===i*2)return`${r}://${wd("0x"+e[2])}`}const s=t.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(s&&s[1].length===64)return`bzz://${s[1]}`;N(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:t}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const t=[{type:"name",value:this.name}];try{const e=await this.getText("avatar");if(e==null)return t.push({type:"!avatar",value:""}),{url:null,linkage:t};t.push({type:"avatar",value:e});for(let s=0;s<dc.length;s++){const r=e.match(dc[s]);if(r==null)continue;const i=r[1].toLowerCase();switch(i){case"https":case"data":return t.push({type:"url",value:e}),{linkage:t,url:e};case"ipfs":{const a=Ja(e);return t.push({type:"ipfs",value:e}),t.push({type:"url",value:a}),{linkage:t,url:a}}case"erc721":case"erc1155":{const a=i==="erc721"?"tokenURI(uint256)":"uri(uint256)";t.push({type:i,value:e});const o=await this.getAddress();if(o==null)return t.push({type:"!owner",value:""}),{url:null,linkage:t};const l=(r[2]||"").split("/");if(l.length!==2)return t.push({type:`!${i}caip`,value:r[2]||""}),{url:null,linkage:t};const u=l[1],d=new js(l[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(i==="erc721"){const v=await d.ownerOf(u);if(o!==v)return t.push({type:"!owner",value:v}),{url:null,linkage:t};t.push({type:"owner",value:v})}else if(i==="erc1155"){const v=await d.balanceOf(o,u);if(!v)return t.push({type:"!balance",value:"0"}),{url:null,linkage:t};t.push({type:"balance",value:v.toString()})}let h=await d[a](u);if(h==null||h==="0x")return t.push({type:"!metadata-url",value:""}),{url:null,linkage:t};t.push({type:"metadata-url-base",value:h}),i==="erc1155"&&(h=h.replace("{id}",Sn(u,32).substring(2)),t.push({type:"metadata-url-expanded",value:h})),h.match(/^ipfs:/i)&&(h=Ja(h)),t.push({type:"metadata-url",value:h});let y={};const g=await new $n(h).send();g.assertOk();try{y=g.bodyJson}catch{try{t.push({type:"!metadata",value:g.bodyText})}catch{const k=g.body;return k&&t.push({type:"!metadata",value:U(k)}),{url:null,linkage:t}}return{url:null,linkage:t}}if(!y)return t.push({type:"!metadata",value:""}),{url:null,linkage:t};t.push({type:"metadata",value:JSON.stringify(y)});let w=y.image;if(typeof w!="string")return t.push({type:"!imageUrl",value:""}),{url:null,linkage:t};if(!w.match(/^(https:\/\/|data:)/i)){if(w.match(ad)==null)return t.push({type:"!imageUrl-ipfs",value:w}),{url:null,linkage:t};t.push({type:"imageUrl-ipfs",value:w}),w=Ja(w)}return t.push({type:"url",value:w}),{linkage:t,url:w}}}}}catch{}return{linkage:t,url:null}}static async getEnsAddress(t){const e=await t.getNetwork(),s=e.getPlugin("org.ethers.plugins.network.Ens");return N(s,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:e}}),s.address}static async fromName(t,e){var r;let s=e;for(;;){if(s===""||s==="."||e!=="eth"&&s==="eth")return null;const i=await S(r=Ms,pa,od).call(r,t,s);if(i!=null){const a=new Ms(t,i,e);return s!==e&&!await a.supportsWildcard()?null:a}s=s.split(".").slice(1).join(".")}}};An=new WeakMap,cs=new WeakMap,xn=new WeakSet,Os=async function(t,e){e=(e||[]).slice();const s=f(this,cs).interface;e.unshift(wo(this.name));let r=null;await this.supportsWildcard()&&(r=s.getFunction(t),N(r,"missing fragment","UNKNOWN_ERROR",{info:{funcName:t}}),e=[Sp(this.name,255),s.encodeFunctionData(r,e)],t="resolve(bytes,bytes)"),e.push({enableCcipRead:!0});try{const i=await f(this,cs)[t](...e);return r?s.decodeFunctionResult(r,i)[0]:i}catch(i){if(!Ct(i,"CALL_EXCEPTION"))throw i}return null},pa=new WeakSet,od=async function(t,e){const s=await Ms.getEnsAddress(t);try{const i=await new js(s,["function resolver(bytes32) view returns (address)"],t).resolver(wo(e),{enableCcipRead:!0});return i===si?null:i}catch(r){throw r}return null},I(Ms,pa);let la=Ms;const fc=BigInt(0);function X(n,t){return function(e){return e==null?t:n(e)}}function fi(n,t){return e=>{if(t&&e==null)return null;if(!Array.isArray(e))throw new Error("not an array");return e.map(s=>n(s))}}function Ti(n,t){return e=>{const s={};for(const r in n){let i=r;if(t&&r in t&&!(i in e)){for(const a of t[r])if(a in e){i=a;break}}try{const a=n[r](e[i]);a!==void 0&&(s[r]=a)}catch(a){const o=a instanceof Error?a.message:"not-an-error";N(!1,`invalid value for value.${r} (${o})`,"BAD_DATA",{value:e})}}return s}}function bm(n){switch(n){case!0:case"true":return!0;case!1:case"false":return!1}x(!1,`invalid boolean; ${JSON.stringify(n)}`,"value",n)}function Mr(n){return x(lt(n,!0),"invalid data","value",n),n}function Et(n){return x(lt(n,32),"invalid hash","value",n),n}const wm=Ti({address:st,blockHash:Et,blockNumber:K,data:Mr,index:K,removed:X(bm,!1),topics:fi(Et),transactionHash:Et,transactionIndex:K},{index:["logIndex"]});function vm(n){return wm(n)}const Am=Ti({hash:X(Et),parentHash:Et,parentBeaconBlockRoot:X(Et,null),number:K,timestamp:K,nonce:X(Mr),difficulty:H,gasLimit:H,gasUsed:H,stateRoot:X(Et,null),receiptsRoot:X(Et,null),blobGasUsed:X(H,null),excessBlobGas:X(H,null),miner:X(st),prevRandao:X(Et,null),extraData:Mr,baseFeePerGas:X(H)},{prevRandao:["mixHash"]});function xm(n){const t=Am(n);return t.transactions=n.transactions.map(e=>typeof e=="string"?e:ld(e)),t}const km=Ti({transactionIndex:K,blockNumber:K,transactionHash:Et,address:st,topics:fi(Et),data:Mr,index:K,blockHash:Et},{index:["logIndex"]});function _m(n){return km(n)}const Em=Ti({to:X(st,null),from:X(st,null),contractAddress:X(st,null),index:K,root:X(U),gasUsed:H,blobGasUsed:X(H,null),logsBloom:X(Mr),blockHash:Et,hash:Et,logs:fi(_m),blockNumber:K,cumulativeGasUsed:H,effectiveGasPrice:X(H),blobGasPrice:X(H,null),status:X(K),type:X(K,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function Cm(n){return Em(n)}function ld(n){n.to&&H(n.to)===fc&&(n.to="0x0000000000000000000000000000000000000000");const t=Ti({hash:Et,index:X(K,void 0),type:e=>e==="0x"||e==null?0:K(e),accessList:X(_s,null),blobVersionedHashes:X(fi(Et,!0),null),authorizationList:X(fi(e=>{let s;if(e.signature)s=e.signature;else{let r=e.yParity;r==="0x1b"?r=0:r==="0x1c"&&(r=1),s=Object.assign({},e,{yParity:r})}return{address:st(e.address),chainId:H(e.chainId),nonce:H(e.nonce),signature:Qt.from(s)}},!1),null),blockHash:X(Et,null),blockNumber:X(K,null),transactionIndex:X(K,null),from:st,gasPrice:X(H),maxPriorityFeePerGas:X(H),maxFeePerGas:X(H),maxFeePerBlobGas:X(H,null),gasLimit:H,to:X(st,null),value:H,nonce:K,data:Mr,creates:X(st,null),chainId:X(H,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(n);if(t.to==null&&t.creates==null&&(t.creates=ph(t)),(n.type===1||n.type===2)&&n.accessList==null&&(t.accessList=[]),n.signature?t.signature=Qt.from(n.signature):t.signature=Qt.from(n),t.chainId==null){const e=t.signature.legacyChainId;e!=null&&(t.chainId=e)}return t.blockHash&&H(t.blockHash)===fc&&(t.blockHash=null),t}const Pm="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class Ni{constructor(t){_(this,"name");V(this,{name:t})}clone(){return new Ni(this.name)}}class Na extends Ni{constructor(e,s){e==null&&(e=0);super(`org.ethers.network.plugins.GasCost#${e||0}`);_(this,"effectiveBlock");_(this,"txBase");_(this,"txCreate");_(this,"txDataZero");_(this,"txDataNonzero");_(this,"txAccessListStorageKey");_(this,"txAccessListAddress");const r={effectiveBlock:e};function i(a,o){let l=(s||{})[a];l==null&&(l=o),x(typeof l=="number",`invalud value for ${a}`,"costs",s),r[a]=l}i("txBase",21e3),i("txCreate",32e3),i("txDataZero",4),i("txDataNonzero",16),i("txAccessListStorageKey",1900),i("txAccessListAddress",2400),V(this,r)}clone(){return new Na(this.effectiveBlock,this)}}class Ba extends Ni{constructor(e,s){super("org.ethers.plugins.network.Ens");_(this,"address");_(this,"targetNetwork");V(this,{address:e||Pm,targetNetwork:s??1})}clone(){return new Ba(this.address,this.targetNetwork)}}var Ai,xi;class Im extends Ni{constructor(e,s){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");I(this,Ai);I(this,xi);b(this,Ai,e),b(this,xi,s)}get url(){return f(this,Ai)}get processFunc(){return f(this,xi)}clone(){return this}}Ai=new WeakMap,xi=new WeakMap;const Ka=new Map;var wr,vr,kn;const Hs=class Hs{constructor(t,e){I(this,wr);I(this,vr);I(this,kn);b(this,wr,t),b(this,vr,H(e)),b(this,kn,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return f(this,wr)}set name(t){b(this,wr,t)}get chainId(){return f(this,vr)}set chainId(t){b(this,vr,H(t,"chainId"))}matches(t){if(t==null)return!1;if(typeof t=="string"){try{return this.chainId===H(t)}catch{}return this.name===t}if(typeof t=="number"||typeof t=="bigint"){try{return this.chainId===H(t)}catch{}return!1}if(typeof t=="object"){if(t.chainId!=null){try{return this.chainId===H(t.chainId)}catch{}return!1}return t.name!=null?this.name===t.name:!1}return!1}get plugins(){return Array.from(f(this,kn).values())}attachPlugin(t){if(f(this,kn).get(t.name))throw new Error(`cannot replace existing plugin: ${t.name} `);return f(this,kn).set(t.name,t.clone()),this}getPlugin(t){return f(this,kn).get(t)||null}getPlugins(t){return this.plugins.filter(e=>e.name.split("#")[0]===t)}clone(){const t=new Hs(this.name,this.chainId);return this.plugins.forEach(e=>{t.attachPlugin(e.clone())}),t}computeIntrinsicGas(t){const e=this.getPlugin("org.ethers.plugins.network.GasCost")||new Na;let s=e.txBase;if(t.to==null&&(s+=e.txCreate),t.data)for(let r=2;r<t.data.length;r+=2)t.data.substring(r,r+2)==="00"?s+=e.txDataZero:s+=e.txDataNonzero;if(t.accessList){const r=_s(t.accessList);for(const i in r)s+=e.txAccessListAddress+e.txAccessListStorageKey*r[i].storageKeys.length}return s}static from(t){if(Tm(),t==null)return Hs.from("mainnet");if(typeof t=="number"&&(t=BigInt(t)),typeof t=="string"||typeof t=="bigint"){const e=Ka.get(t);if(e)return e();if(typeof t=="bigint")return new Hs("unknown",t);x(!1,"unknown network","network",t)}if(typeof t.clone=="function")return t.clone();if(typeof t=="object"){x(typeof t.name=="string"&&typeof t.chainId=="number","invalid network object name or chainId","network",t);const e=new Hs(t.name,t.chainId);return(t.ensAddress||t.ensNetwork!=null)&&e.attachPlugin(new Ba(t.ensAddress,t.ensNetwork)),e}x(!1,"invalid network","network",t)}static register(t,e){typeof t=="number"&&(t=BigInt(t));const s=Ka.get(t);s&&x(!1,`conflicting network for ${JSON.stringify(s.name)}`,"nameOrChainId",t),Ka.set(t,e)}};wr=new WeakMap,vr=new WeakMap,kn=new WeakMap;let Re=Hs;function hc(n,t){const e=String(n);if(!e.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${n}`);const s=e.split(".");if(s.length===1&&s.push(""),s.length!==2)throw new Error(`invalid gwei value: ${n}`);for(;s[1].length<t;)s[1]+="0";if(s[1].length>9){let r=BigInt(s[1].substring(0,9));s[1].substring(9).match(/^0+$/)||r++,s[1]=r.toString()}return BigInt(s[0]+s[1])}function pc(n){return new Im(n,async(t,e,s)=>{s.setHeader("User-Agent","ethers");let r;try{const[i,a]=await Promise.all([s.send(),t()]);r=i;const o=r.bodyJson.standard;return{gasPrice:a.gasPrice,maxFeePerGas:hc(o.maxFee,9),maxPriorityFeePerGas:hc(o.maxPriorityFee,9)}}catch(i){N(!1,`error encountered with polygon gas station (${JSON.stringify(s.url)})`,"SERVER_ERROR",{request:s,response:r,error:i})}})}let mc=!1;function Tm(){if(mc)return;mc=!0;function n(t,e,s){const r=function(){const i=new Re(t,e);return s.ensNetwork!=null&&i.attachPlugin(new Ba(null,s.ensNetwork)),i.attachPlugin(new Na),(s.plugins||[]).forEach(a=>{i.attachPlugin(a)}),i};Re.register(t,r),Re.register(e,r),s.altNames&&s.altNames.forEach(i=>{Re.register(i,r)})}n("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),n("ropsten",3,{ensNetwork:3}),n("rinkeby",4,{ensNetwork:4}),n("goerli",5,{ensNetwork:5}),n("kovan",42,{ensNetwork:42}),n("sepolia",11155111,{ensNetwork:11155111}),n("holesky",17e3,{ensNetwork:17e3}),n("classic",61,{}),n("classicKotti",6,{}),n("arbitrum",42161,{ensNetwork:1}),n("arbitrum-goerli",421613,{}),n("arbitrum-sepolia",421614,{}),n("base",8453,{ensNetwork:1}),n("base-goerli",84531,{}),n("base-sepolia",84532,{}),n("bnb",56,{ensNetwork:1}),n("bnbt",97,{}),n("linea",59144,{ensNetwork:1}),n("linea-goerli",59140,{}),n("linea-sepolia",59141,{}),n("matic",137,{ensNetwork:1,plugins:[pc("https://gasstation.polygon.technology/v2")]}),n("matic-amoy",80002,{}),n("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[pc("https://gasstation-testnet.polygon.technology/v2")]}),n("optimism",10,{ensNetwork:1,plugins:[]}),n("optimism-goerli",420,{}),n("optimism-sepolia",11155420,{}),n("xdai",100,{ensNetwork:1})}function Eo(n){return JSON.parse(JSON.stringify(n))}var je,ne,_n,Te,Ar,ji;class Nm{constructor(t){I(this,Ar);I(this,je);I(this,ne);I(this,_n);I(this,Te);b(this,je,t),b(this,ne,null),b(this,_n,4e3),b(this,Te,-2)}get pollingInterval(){return f(this,_n)}set pollingInterval(t){b(this,_n,t)}start(){f(this,ne)||(b(this,ne,f(this,je)._setTimeout(S(this,Ar,ji).bind(this),f(this,_n))),S(this,Ar,ji).call(this))}stop(){f(this,ne)&&(f(this,je)._clearTimeout(f(this,ne)),b(this,ne,null))}pause(t){this.stop(),t&&b(this,Te,-2)}resume(){this.start()}}je=new WeakMap,ne=new WeakMap,_n=new WeakMap,Te=new WeakMap,Ar=new WeakSet,ji=async function(){try{const t=await f(this,je).getBlockNumber();if(f(this,Te)===-2){b(this,Te,t);return}if(t!==f(this,Te)){for(let e=f(this,Te)+1;e<=t;e++){if(f(this,ne)==null)return;await f(this,je).emit("block",e)}b(this,Te,t)}}catch{}f(this,ne)!=null&&b(this,ne,f(this,je)._setTimeout(S(this,Ar,ji).bind(this),f(this,_n)))};var us,ds,En;class Xo{constructor(t){I(this,us);I(this,ds);I(this,En);b(this,us,t),b(this,En,!1),b(this,ds,e=>{this._poll(e,f(this,us))})}async _poll(t,e){throw new Error("sub-classes must override this")}start(){f(this,En)||(b(this,En,!0),f(this,ds).call(this,-2),f(this,us).on("block",f(this,ds)))}stop(){f(this,En)&&(b(this,En,!1),f(this,us).off("block",f(this,ds)))}pause(t){this.stop()}resume(){this.start()}}us=new WeakMap,ds=new WeakMap,En=new WeakMap;var xr,Je;class Bm extends Xo{constructor(e,s){super(e);I(this,xr);I(this,Je);b(this,xr,s),b(this,Je,-2)}pause(e){e&&b(this,Je,-2),super.pause(e)}async _poll(e,s){const r=await s.getBlock(f(this,xr));r!=null&&(f(this,Je)===-2?b(this,Je,r.number):r.number>f(this,Je)&&(s.emit(f(this,xr),r.number),b(this,Je,r.number)))}}xr=new WeakMap,Je=new WeakMap;var ma;class Sm extends Xo{constructor(e,s){super(e);I(this,ma);b(this,ma,Eo(s))}async _poll(e,s){throw new Error("@TODO")}}ma=new WeakMap;var kr;class $m extends Xo{constructor(e,s){super(e);I(this,kr);b(this,kr,s)}async _poll(e,s){const r=await s.getTransactionReceipt(f(this,kr));r&&s.emit(f(this,kr),r)}}kr=new WeakMap;var Ke,_r,Er,Cn,se,ga,cd;class tl{constructor(t,e){I(this,ga);I(this,Ke);I(this,_r);I(this,Er);I(this,Cn);I(this,se);b(this,Ke,t),b(this,_r,Eo(e)),b(this,Er,S(this,ga,cd).bind(this)),b(this,Cn,!1),b(this,se,-2)}start(){f(this,Cn)||(b(this,Cn,!0),f(this,se)===-2&&f(this,Ke).getBlockNumber().then(t=>{b(this,se,t)}),f(this,Ke).on("block",f(this,Er)))}stop(){f(this,Cn)&&(b(this,Cn,!1),f(this,Ke).off("block",f(this,Er)))}pause(t){this.stop(),t&&b(this,se,-2)}resume(){this.start()}}Ke=new WeakMap,_r=new WeakMap,Er=new WeakMap,Cn=new WeakMap,se=new WeakMap,ga=new WeakSet,cd=async function(t){if(f(this,se)===-2)return;const e=Eo(f(this,_r));e.fromBlock=f(this,se)+1,e.toBlock=t;const s=await f(this,Ke).getLogs(e);if(s.length===0){f(this,se)<t-60&&b(this,se,t-60);return}for(const r of s)f(this,Ke).emit(f(this,_r),r),b(this,se,r.blockNumber)};const Rm=BigInt(2),Om=10;function Fi(n){return n&&typeof n.then=="function"}function Ji(n,t){return n+":"+JSON.stringify(t,(e,s)=>{if(s==null)return"null";if(typeof s=="bigint")return`bigint:${s.toString()}`;if(typeof s=="string")return s.toLowerCase();if(typeof s=="object"&&!Array.isArray(s)){const r=Object.keys(s);return r.sort(),r.reduce((i,a)=>(i[a]=s[a],i),{})}return s})}class ud{constructor(t){_(this,"name");V(this,{name:t})}start(){}stop(){}pause(t){}resume(){}}function Lm(n){return JSON.parse(JSON.stringify(n))}function Co(n){return n=Array.from(new Set(n).values()),n.sort(),n}async function qa(n,t){if(n==null)throw new Error("invalid event");if(Array.isArray(n)&&(n={topics:n}),typeof n=="string")switch(n){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:n,tag:n}}if(lt(n,32)){const e=n.toLowerCase();return{type:"transaction",tag:Ji("tx",{hash:e}),hash:e}}if(n.orphan){const e=n;return{type:"orphan",tag:Ji("orphan",e),filter:Lm(e)}}if(n.address||n.topics){const e=n,s={topics:(e.topics||[]).map(r=>r==null?null:Array.isArray(r)?Co(r.map(i=>i.toLowerCase())):r.toLowerCase())};if(e.address){const r=[],i=[],a=o=>{lt(o)?r.push(o):i.push((async()=>{r.push(await Dt(o,t))})())};Array.isArray(e.address)?e.address.forEach(a):a(e.address),i.length&&await Promise.all(i),s.address=Co(r.map(o=>o.toLowerCase()))}return{filter:s,tag:Ji("event",s),type:"event"}}x(!1,"unknown ProviderEvent","event",n)}function Za(){return new Date().getTime()}const Dm={cacheTimeout:250,pollingInterval:4e3};var Tt,Pn,Nt,Cr,Wt,fs,In,qe,ki,re,Pr,Ir,Z,Jt,Po,Io,Wr,To,Xr,Ki;class Um{constructor(t,e){I(this,Z);I(this,Tt);I(this,Pn);I(this,Nt);I(this,Cr);I(this,Wt);I(this,fs);I(this,In);I(this,qe);I(this,ki);I(this,re);I(this,Pr);I(this,Ir);if(b(this,Ir,Object.assign({},Dm,e||{})),t==="any")b(this,fs,!0),b(this,Wt,null);else if(t){const s=Re.from(t);b(this,fs,!1),b(this,Wt,Promise.resolve(s)),setTimeout(()=>{this.emit("network",s,null)},0)}else b(this,fs,!1),b(this,Wt,null);b(this,qe,-1),b(this,In,new Map),b(this,Tt,new Map),b(this,Pn,new Map),b(this,Nt,null),b(this,Cr,!1),b(this,ki,1),b(this,re,new Map),b(this,Pr,!1)}get pollingInterval(){return f(this,Ir).pollingInterval}get provider(){return this}get plugins(){return Array.from(f(this,Pn).values())}attachPlugin(t){if(f(this,Pn).get(t.name))throw new Error(`cannot replace existing plugin: ${t.name} `);return f(this,Pn).set(t.name,t.connect(this)),this}getPlugin(t){return f(this,Pn).get(t)||null}get disableCcipRead(){return f(this,Pr)}set disableCcipRead(t){b(this,Pr,!!t)}async ccipReadFetch(t,e,s){if(this.disableCcipRead||s.length===0||t.to==null)return null;const r=t.to.toLowerCase(),i=e.toLowerCase(),a=[];for(let o=0;o<s.length;o++){const l=s[o],u=l.replace("{sender}",r).replace("{data}",i),d=new $n(u);l.indexOf("{data}")===-1&&(d.body={data:i,sender:r}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:d,index:o,urls:s});let h="unknown error",y;try{y=await d.send()}catch(g){a.push(g.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:d,result:{error:g}});continue}try{const g=y.bodyJson;if(g.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:d,result:g}),g.data;g.message&&(h=g.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:d,result:g})}catch{}N(y.statusCode<400||y.statusCode>=500,`response not found during CCIP fetch: ${h}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:t,info:{url:l,errorMessage:h}}),a.push(h)}N(!1,`error encountered during CCIP fetch: ${a.map(o=>JSON.stringify(o)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:t,info:{urls:s,errorMessages:a}})}_wrapBlock(t,e){return new sm(xm(t),this)}_wrapLog(t,e){return new Ii(vm(t),this)}_wrapTransactionReceipt(t,e){return new qu(Cm(t),this)}_wrapTransactionResponse(t,e){return new di(ld(t),this)}_detectNetwork(){N(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(t){N(!1,`unsupported method: ${t.method}`,"UNSUPPORTED_OPERATION",{operation:t.method,info:t})}async getBlockNumber(){const t=K(await S(this,Z,Jt).call(this,{method:"getBlockNumber"}),"%response");return f(this,qe)>=0&&b(this,qe,t),t}_getAddress(t){return Dt(t,this)}_getBlockTag(t){if(t==null)return"latest";switch(t){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return t}if(lt(t))return lt(t,32)?t:ye(t);if(typeof t=="bigint"&&(t=K(t,"blockTag")),typeof t=="number")return t>=0?ye(t):f(this,qe)>=0?ye(f(this,qe)+t):this.getBlockNumber().then(e=>ye(e+t));x(!1,"invalid blockTag","blockTag",t)}_getFilter(t){const e=(t.topics||[]).map(l=>l==null?null:Array.isArray(l)?Co(l.map(u=>u.toLowerCase())):l.toLowerCase()),s="blockHash"in t?t.blockHash:void 0,r=(l,u,d)=>{let h;switch(l.length){case 0:break;case 1:h=l[0];break;default:l.sort(),h=l}if(s&&(u!=null||d!=null))throw new Error("invalid filter");const y={};return h&&(y.address=h),e.length&&(y.topics=e),u&&(y.fromBlock=u),d&&(y.toBlock=d),s&&(y.blockHash=s),y};let i=[];if(t.address)if(Array.isArray(t.address))for(const l of t.address)i.push(this._getAddress(l));else i.push(this._getAddress(t.address));let a;"fromBlock"in t&&(a=this._getBlockTag(t.fromBlock));let o;return"toBlock"in t&&(o=this._getBlockTag(t.toBlock)),i.filter(l=>typeof l!="string").length||a!=null&&typeof a!="string"||o!=null&&typeof o!="string"?Promise.all([Promise.all(i),a,o]).then(l=>r(l[0],l[1],l[2])):r(i,a,o)}_getTransactionRequest(t){const e=aa(t),s=[];if(["to","from"].forEach(r=>{if(e[r]==null)return;const i=Dt(e[r],this);Fi(i)?s.push(async function(){e[r]=await i}()):e[r]=i}),e.blockTag!=null){const r=this._getBlockTag(e.blockTag);Fi(r)?s.push(async function(){e.blockTag=await r}()):e.blockTag=r}return s.length?async function(){return await Promise.all(s),e}():e}async getNetwork(){if(f(this,Wt)==null){const r=(async()=>{try{const i=await this._detectNetwork();return this.emit("network",i,null),i}catch(i){throw f(this,Wt)===r&&b(this,Wt,null),i}})();return b(this,Wt,r),(await r).clone()}const t=f(this,Wt),[e,s]=await Promise.all([t,this._detectNetwork()]);return e.chainId!==s.chainId&&(f(this,fs)?(this.emit("network",s,e),f(this,Wt)===t&&b(this,Wt,Promise.resolve(s))):N(!1,`network changed: ${e.chainId} => ${s.chainId} `,"NETWORK_ERROR",{event:"changed"})),e.clone()}async getFeeData(){const t=await this.getNetwork(),e=async()=>{const{_block:r,gasPrice:i,priorityFee:a}=await Rt({_block:S(this,Z,To).call(this,"latest",!1),gasPrice:(async()=>{try{const d=await S(this,Z,Jt).call(this,{method:"getGasPrice"});return H(d,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const d=await S(this,Z,Jt).call(this,{method:"getPriorityFee"});return H(d,"%response")}catch{}return null})()});let o=null,l=null;const u=this._wrapBlock(r,t);return u&&u.baseFeePerGas&&(l=a??BigInt("1000000000"),o=u.baseFeePerGas*Rm+l),new lc(i,o,l)},s=t.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(s){const r=new $n(s.url),i=await s.processFunc(e,this,r);return new lc(i.gasPrice,i.maxFeePerGas,i.maxPriorityFeePerGas)}return await e()}async estimateGas(t){let e=this._getTransactionRequest(t);return Fi(e)&&(e=await e),H(await S(this,Z,Jt).call(this,{method:"estimateGas",transaction:e}),"%response")}async call(t){const{tx:e,blockTag:s}=await Rt({tx:this._getTransactionRequest(t),blockTag:this._getBlockTag(t.blockTag)});return await S(this,Z,Io).call(this,S(this,Z,Po).call(this,e,s,t.enableCcipRead?0:-1))}async getBalance(t,e){return H(await S(this,Z,Wr).call(this,{method:"getBalance"},t,e),"%response")}async getTransactionCount(t,e){return K(await S(this,Z,Wr).call(this,{method:"getTransactionCount"},t,e),"%response")}async getCode(t,e){return U(await S(this,Z,Wr).call(this,{method:"getCode"},t,e))}async getStorage(t,e,s){const r=H(e,"position");return U(await S(this,Z,Wr).call(this,{method:"getStorage",position:r},t,s))}async broadcastTransaction(t){const{blockNumber:e,hash:s,network:r}=await Rt({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:t}),network:this.getNetwork()}),i=Xi.from(t);if(i.hash!==s)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,r).replaceableTransaction(e)}async getBlock(t,e){const{network:s,params:r}=await Rt({network:this.getNetwork(),params:S(this,Z,To).call(this,t,!!e)});return r==null?null:this._wrapBlock(r,s)}async getTransaction(t){const{network:e,params:s}=await Rt({network:this.getNetwork(),params:S(this,Z,Jt).call(this,{method:"getTransaction",hash:t})});return s==null?null:this._wrapTransactionResponse(s,e)}async getTransactionReceipt(t){const{network:e,params:s}=await Rt({network:this.getNetwork(),params:S(this,Z,Jt).call(this,{method:"getTransactionReceipt",hash:t})});if(s==null)return null;if(s.gasPrice==null&&s.effectiveGasPrice==null){const r=await S(this,Z,Jt).call(this,{method:"getTransaction",hash:t});if(r==null)throw new Error("report this; could not find tx or effectiveGasPrice");s.effectiveGasPrice=r.gasPrice}return this._wrapTransactionReceipt(s,e)}async getTransactionResult(t){const{result:e}=await Rt({network:this.getNetwork(),result:S(this,Z,Jt).call(this,{method:"getTransactionResult",hash:t})});return e==null?null:U(e)}async getLogs(t){let e=this._getFilter(t);Fi(e)&&(e=await e);const{network:s,params:r}=await Rt({network:this.getNetwork(),params:S(this,Z,Jt).call(this,{method:"getLogs",filter:e})});return r.map(i=>this._wrapLog(i,s))}_getProvider(t){N(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(t){return await la.fromName(this,t)}async getAvatar(t){const e=await this.getResolver(t);return e?await e.getAvatar():null}async resolveName(t){const e=await this.getResolver(t);return e?await e.getAddress():null}async lookupAddress(t){t=st(t);const e=wo(t.substring(2).toLowerCase()+".addr.reverse");try{const s=await la.getEnsAddress(this),i=await new js(s,["function resolver(bytes32) view returns (address)"],this).resolver(e);if(i==null||i===si)return null;const o=await new js(i,["function name(bytes32) view returns (string)"],this).name(e);return await this.resolveName(o)!==t?null:o}catch(s){if(Ct(s,"BAD_DATA")&&s.value==="0x"||Ct(s,"CALL_EXCEPTION"))return null;throw s}return null}async waitForTransaction(t,e,s){const r=e??1;return r===0?this.getTransactionReceipt(t):new Promise(async(i,a)=>{let o=null;const l=async u=>{try{const d=await this.getTransactionReceipt(t);if(d!=null&&u-d.blockNumber+1>=r){i(d),o&&(clearTimeout(o),o=null);return}}catch(d){console.log("EEE",d)}this.once("block",l)};s!=null&&(o=setTimeout(()=>{o!=null&&(o=null,this.off("block",l),a(dt("timeout","TIMEOUT",{reason:"timeout"})))},s)),l(await this.getBlockNumber())})}async waitForBlock(t){N(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(t){const e=f(this,re).get(t);e&&(e.timer&&clearTimeout(e.timer),f(this,re).delete(t))}_setTimeout(t,e){e==null&&(e=0);const s=Vr(this,ki)._++,r=()=>{f(this,re).delete(s),t()};if(this.paused)f(this,re).set(s,{timer:null,func:r,time:e});else{const i=setTimeout(r,e);f(this,re).set(s,{timer:i,func:r,time:Za()})}return s}_forEachSubscriber(t){for(const e of f(this,Tt).values())t(e.subscriber)}_getSubscriber(t){switch(t.type){case"debug":case"error":case"network":return new ud(t.type);case"block":{const e=new Nm(this);return e.pollingInterval=this.pollingInterval,e}case"safe":case"finalized":return new Bm(this,t.type);case"event":return new tl(this,t.filter);case"transaction":return new $m(this,t.hash);case"orphan":return new Sm(this,t.filter)}throw new Error(`unsupported event: ${t.type}`)}_recoverSubscriber(t,e){for(const s of f(this,Tt).values())if(s.subscriber===t){s.started&&s.subscriber.stop(),s.subscriber=e,s.started&&e.start(),f(this,Nt)!=null&&e.pause(f(this,Nt));break}}async on(t,e){const s=await S(this,Z,Ki).call(this,t);return s.listeners.push({listener:e,once:!1}),s.started||(s.subscriber.start(),s.started=!0,f(this,Nt)!=null&&s.subscriber.pause(f(this,Nt))),this}async once(t,e){const s=await S(this,Z,Ki).call(this,t);return s.listeners.push({listener:e,once:!0}),s.started||(s.subscriber.start(),s.started=!0,f(this,Nt)!=null&&s.subscriber.pause(f(this,Nt))),this}async emit(t,...e){const s=await S(this,Z,Xr).call(this,t,e);if(!s||s.listeners.length===0)return!1;const r=s.listeners.length;return s.listeners=s.listeners.filter(({listener:i,once:a})=>{const o=new Ec(this,a?null:i,t);try{i.call(this,...e,o)}catch{}return!a}),s.listeners.length===0&&(s.started&&s.subscriber.stop(),f(this,Tt).delete(s.tag)),r>0}async listenerCount(t){if(t){const s=await S(this,Z,Xr).call(this,t);return s?s.listeners.length:0}let e=0;for(const{listeners:s}of f(this,Tt).values())e+=s.length;return e}async listeners(t){if(t){const s=await S(this,Z,Xr).call(this,t);return s?s.listeners.map(({listener:r})=>r):[]}let e=[];for(const{listeners:s}of f(this,Tt).values())e=e.concat(s.map(({listener:r})=>r));return e}async off(t,e){const s=await S(this,Z,Xr).call(this,t);if(!s)return this;if(e){const r=s.listeners.map(({listener:i})=>i).indexOf(e);r>=0&&s.listeners.splice(r,1)}return(!e||s.listeners.length===0)&&(s.started&&s.subscriber.stop(),f(this,Tt).delete(s.tag)),this}async removeAllListeners(t){if(t){const{tag:e,started:s,subscriber:r}=await S(this,Z,Ki).call(this,t);s&&r.stop(),f(this,Tt).delete(e)}else for(const[e,{started:s,subscriber:r}]of f(this,Tt))s&&r.stop(),f(this,Tt).delete(e);return this}async addListener(t,e){return await this.on(t,e)}async removeListener(t,e){return this.off(t,e)}get destroyed(){return f(this,Cr)}destroy(){this.removeAllListeners();for(const t of f(this,re).keys())this._clearTimeout(t);b(this,Cr,!0)}get paused(){return f(this,Nt)!=null}set paused(t){!!t!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(t){if(b(this,qe,-1),f(this,Nt)!=null){if(f(this,Nt)==!!t)return;N(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(e=>e.pause(t)),b(this,Nt,!!t);for(const e of f(this,re).values())e.timer&&clearTimeout(e.timer),e.time=Za()-e.time}resume(){if(f(this,Nt)!=null){this._forEachSubscriber(t=>t.resume()),b(this,Nt,null);for(const t of f(this,re).values()){let e=t.time;e<0&&(e=0),t.time=Za(),setTimeout(t.func,e)}}}}Tt=new WeakMap,Pn=new WeakMap,Nt=new WeakMap,Cr=new WeakMap,Wt=new WeakMap,fs=new WeakMap,In=new WeakMap,qe=new WeakMap,ki=new WeakMap,re=new WeakMap,Pr=new WeakMap,Ir=new WeakMap,Z=new WeakSet,Jt=async function(t){const e=f(this,Ir).cacheTimeout;if(e<0)return await this._perform(t);const s=Ji(t.method,t);let r=f(this,In).get(s);return r||(r=this._perform(t),f(this,In).set(s,r),setTimeout(()=>{f(this,In).get(s)===r&&f(this,In).delete(s)},e)),await r},Po=async function(t,e,s){N(s<Om,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},t,{blockTag:e,enableCcipRead:!0})});const r=aa(t);try{return U(await this._perform({method:"call",transaction:r,blockTag:e}))}catch(i){if(!this.disableCcipRead&&Lo(i)&&i.data&&s>=0&&e==="latest"&&r.to!=null&&ht(i.data,0,4)==="0x556f1830"){const a=i.data,o=await Dt(r.to,this);let l;try{l=Qm(ht(i.data,4))}catch(h){N(!1,h.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:r,info:{data:a}})}N(l.sender.toLowerCase()===o.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:a,reason:"OffchainLookup",transaction:r,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:l.errorArgs}});const u=await this.ccipReadFetch(r,l.calldata,l.urls);N(u!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:r,info:{data:i.data,errorArgs:l.errorArgs}});const d={to:o,data:pt([l.selector,Gm([u,l.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:d});try{const h=await S(this,Z,Po).call(this,d,e,s+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},d),result:h}),h}catch(h){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},d),error:h}),h}}throw i}},Io=async function(t){const{value:e}=await Rt({network:this.getNetwork(),value:t});return e},Wr=async function(t,e,s){let r=this._getAddress(e),i=this._getBlockTag(s);return(typeof r!="string"||typeof i!="string")&&([r,i]=await Promise.all([r,i])),await S(this,Z,Io).call(this,S(this,Z,Jt).call(this,Object.assign(t,{address:r,blockTag:i})))},To=async function(t,e){if(lt(t,32))return await S(this,Z,Jt).call(this,{method:"getBlock",blockHash:t,includeTransactions:e});let s=this._getBlockTag(t);return typeof s!="string"&&(s=await s),await S(this,Z,Jt).call(this,{method:"getBlock",blockTag:s,includeTransactions:e})},Xr=async function(t,e){let s=await qa(t,this);return s.type==="event"&&e&&e.length>0&&e[0].removed===!0&&(s=await qa({orphan:"drop-log",log:e[0]},this)),f(this,Tt).get(s.tag)||null},Ki=async function(t){const e=await qa(t,this),s=e.tag;let r=f(this,Tt).get(s);return r||(r={subscriber:this._getSubscriber(e),tag:s,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},f(this,Tt).set(s,r)),r};function Fm(n,t){try{const e=No(n,t);if(e)return Yi(e)}catch{}return null}function No(n,t){if(n==="0x")return null;try{const e=K(ht(n,t,t+32)),s=K(ht(n,e,e+32));return ht(n,e+32,e+32+s)}catch{}return null}function gc(n){const t=bt(n);if(t.length>32)throw new Error("internal; should not happen");const e=new Uint8Array(32);return e.set(t,32-t.length),e}function Mm(n){if(n.length%32===0)return n;const t=new Uint8Array(Math.ceil(n.length/32)*32);return t.set(n),t}const Hm=new Uint8Array([]);function Gm(n){const t=[];let e=0;for(let s=0;s<n.length;s++)t.push(Hm),e+=32;for(let s=0;s<n.length;s++){const r=q(n[s]);t[s]=gc(e),t.push(gc(r.length)),t.push(Mm(r)),e+=32+Math.ceil(r.length/32)*32}return pt(t)}const yc="0x0000000000000000000000000000000000000000000000000000000000000000";function Qm(n){const t={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};N(Gs(n)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const e=ht(n,0,32);N(ht(e,0,12)===ht(yc,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),t.sender=ht(e,12);try{const s=[],r=K(ht(n,32,64)),i=K(ht(n,r,r+32)),a=ht(n,r+32);for(let o=0;o<i;o++){const l=Fm(a,o*32);if(l==null)throw new Error("abort");s.push(l)}t.urls=s}catch{N(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const s=No(n,64);if(s==null)throw new Error("abort");t.calldata=s}catch{N(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}N(ht(n,100,128)===ht(yc,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),t.selector=ht(n,96,100);try{const s=No(n,128);if(s==null)throw new Error("abort");t.extraData=s}catch{N(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return t.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(s=>t[s]),t}function Fn(n,t){if(n.provider)return n.provider;N(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:t})}async function bc(n,t){let e=aa(t);if(e.to!=null&&(e.to=Dt(e.to,n)),e.from!=null){const s=e.from;e.from=Promise.all([n.getAddress(),Dt(s,n)]).then(([r,i])=>(x(r.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),r))}else e.from=n.getAddress();return await Rt(e)}class Vm{constructor(t){_(this,"provider");V(this,{provider:t||null})}async getNonce(t){return Fn(this,"getTransactionCount").getTransactionCount(await this.getAddress(),t)}async populateCall(t){return await bc(this,t)}async populateTransaction(t){const e=Fn(this,"populateTransaction"),s=await bc(this,t);s.nonce==null&&(s.nonce=await this.getNonce("pending")),s.gasLimit==null&&(s.gasLimit=await this.estimateGas(s));const r=await this.provider.getNetwork();if(s.chainId!=null){const a=H(s.chainId);x(a===r.chainId,"transaction chainId mismatch","tx.chainId",t.chainId)}else s.chainId=r.chainId;const i=s.maxFeePerGas!=null||s.maxPriorityFeePerGas!=null;if(s.gasPrice!=null&&(s.type===2||i)?x(!1,"eip-1559 transaction do not support gasPrice","tx",t):(s.type===0||s.type===1)&&i&&x(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",t),(s.type===2||s.type==null)&&s.maxFeePerGas!=null&&s.maxPriorityFeePerGas!=null)s.type=2;else if(s.type===0||s.type===1){const a=await e.getFeeData();N(a.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),s.gasPrice==null&&(s.gasPrice=a.gasPrice)}else{const a=await e.getFeeData();if(s.type==null)if(a.maxFeePerGas!=null&&a.maxPriorityFeePerGas!=null)if(s.authorizationList&&s.authorizationList.length?s.type=4:s.type=2,s.gasPrice!=null){const o=s.gasPrice;delete s.gasPrice,s.maxFeePerGas=o,s.maxPriorityFeePerGas=o}else s.maxFeePerGas==null&&(s.maxFeePerGas=a.maxFeePerGas),s.maxPriorityFeePerGas==null&&(s.maxPriorityFeePerGas=a.maxPriorityFeePerGas);else a.gasPrice!=null?(N(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),s.gasPrice==null&&(s.gasPrice=a.gasPrice),s.type=0):N(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(s.type===2||s.type===3||s.type===4)&&(s.maxFeePerGas==null&&(s.maxFeePerGas=a.maxFeePerGas),s.maxPriorityFeePerGas==null&&(s.maxPriorityFeePerGas=a.maxPriorityFeePerGas))}return await Rt(s)}async populateAuthorization(t){const e=Object.assign({},t);return e.chainId==null&&(e.chainId=(await Fn(this,"getNetwork").getNetwork()).chainId),e.nonce==null&&(e.nonce=await this.getNonce()),e}async estimateGas(t){return Fn(this,"estimateGas").estimateGas(await this.populateCall(t))}async call(t){return Fn(this,"call").call(await this.populateCall(t))}async resolveName(t){return await Fn(this,"resolveName").resolveName(t)}async sendTransaction(t){const e=Fn(this,"sendTransaction"),s=await this.populateTransaction(t);delete s.from;const r=Xi.from(s);return await e.broadcastTransaction(await this.signTransaction(r))}authorize(t){N(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function zm(n){return JSON.parse(JSON.stringify(n))}var $t,Ne,hs,Tn,ps,Tr,On,Bo,So;class dd{constructor(t){I(this,On);I(this,$t);I(this,Ne);I(this,hs);I(this,Tn);I(this,ps);I(this,Tr);b(this,$t,t),b(this,Ne,null),b(this,hs,S(this,On,Bo).bind(this)),b(this,Tn,!1),b(this,ps,null),b(this,Tr,!1)}_subscribe(t){throw new Error("subclasses must override this")}_emitResults(t,e){throw new Error("subclasses must override this")}_recover(t){throw new Error("subclasses must override this")}start(){f(this,Tn)||(b(this,Tn,!0),S(this,On,Bo).call(this,-2))}stop(){f(this,Tn)&&(b(this,Tn,!1),b(this,Tr,!0),S(this,On,So).call(this),f(this,$t).off("block",f(this,hs)))}pause(t){t&&S(this,On,So).call(this),f(this,$t).off("block",f(this,hs))}resume(){this.start()}}$t=new WeakMap,Ne=new WeakMap,hs=new WeakMap,Tn=new WeakMap,ps=new WeakMap,Tr=new WeakMap,On=new WeakSet,Bo=async function(t){try{f(this,Ne)==null&&b(this,Ne,this._subscribe(f(this,$t)));let e=null;try{e=await f(this,Ne)}catch(i){if(!Ct(i,"UNSUPPORTED_OPERATION")||i.operation!=="eth_newFilter")throw i}if(e==null){b(this,Ne,null),f(this,$t)._recoverSubscriber(this,this._recover(f(this,$t)));return}const s=await f(this,$t).getNetwork();if(f(this,ps)||b(this,ps,s),f(this,ps).chainId!==s.chainId)throw new Error("chaid changed");if(f(this,Tr))return;const r=await f(this,$t).send("eth_getFilterChanges",[e]);await this._emitResults(f(this,$t),r)}catch(e){console.log("@TODO",e)}f(this,$t).once("block",f(this,hs))},So=function(){const t=f(this,Ne);t&&(b(this,Ne,null),t.then(e=>{f(this,$t).destroyed||f(this,$t).send("eth_uninstallFilter",[e])}))};var ms;class jm extends dd{constructor(e,s){super(e);I(this,ms);b(this,ms,zm(s))}_recover(e){return new tl(e,f(this,ms))}async _subscribe(e){return await e.send("eth_newFilter",[f(this,ms)])}async _emitResults(e,s){for(const r of s)e.emit(f(this,ms),e._wrapLog(r,e._network))}}ms=new WeakMap;class Jm extends dd{async _subscribe(t){return await t.send("eth_newPendingTransactionFilter",[])}async _emitResults(t,e){for(const s of e)t.emit("pending",s)}}const Km="bigint,boolean,function,number,string,symbol".split(/,/g);function qi(n){if(n==null||Km.indexOf(typeof n)>=0||typeof n.getAddress=="function")return n;if(Array.isArray(n))return n.map(qi);if(typeof n=="object")return Object.keys(n).reduce((t,e)=>(t[e]=n[e],t),{});throw new Error(`should not happen: ${n} (${typeof n})`)}function qm(n){return new Promise(t=>{setTimeout(t,n)})}function Ss(n){return n&&n.toLowerCase()}function wc(n){return n&&typeof n.pollingInterval=="number"}const fd={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class Ya extends Vm{constructor(e,s){super(e);_(this,"address");s=st(s),V(this,{address:s})}connect(e){N(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(e){return await this.populateCall(e)}async sendUncheckedTransaction(e){const s=qi(e),r=[];if(s.from){const a=s.from;r.push((async()=>{const o=await Dt(a,this.provider);x(o!=null&&o.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),s.from=o})())}else s.from=this.address;if(s.gasLimit==null&&r.push((async()=>{s.gasLimit=await this.provider.estimateGas({...s,from:this.address})})()),s.to!=null){const a=s.to;r.push((async()=>{s.to=await Dt(a,this.provider)})())}r.length&&await Promise.all(r);const i=this.provider.getRpcTransaction(s);return this.provider.send("eth_sendTransaction",[i])}async sendTransaction(e){const s=await this.provider.getBlockNumber(),r=await this.sendUncheckedTransaction(e);return await new Promise((i,a)=>{const o=[1e3,100];let l=0;const u=async()=>{try{const d=await this.provider.getTransaction(r);if(d!=null){i(d.replaceableTransaction(s));return}}catch(d){if(Ct(d,"CANCELLED")||Ct(d,"BAD_DATA")||Ct(d,"NETWORK_ERROR")||Ct(d,"UNSUPPORTED_OPERATION")){d.info==null&&(d.info={}),d.info.sendTransactionHash=r,a(d);return}if(Ct(d,"INVALID_ARGUMENT")&&(l++,d.info==null&&(d.info={}),d.info.sendTransactionHash=r,l>10)){a(d);return}this.provider.emit("error",dt("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:d}))}this.provider._setTimeout(()=>{u()},o.pop()||4e3)};u()})}async signTransaction(e){const s=qi(e);if(s.from){const i=await Dt(s.from,this.provider);x(i!=null&&i.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),s.from=i}else s.from=this.address;const r=this.provider.getRpcTransaction(s);return await this.provider.send("eth_signTransaction",[r])}async signMessage(e){const s=typeof e=="string"?Xe(e):e;return await this.provider.send("personal_sign",[U(s),this.address.toLowerCase()])}async signTypedData(e,s,r){const i=qi(r),a=await ia.resolveNames(e,s,i,async o=>{const l=await Dt(o);return x(l!=null,"TypedData does not support null address","value",o),l});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(ia.getPayload(a.domain,s,a.value))])}async unlock(e){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),e,null])}async _legacySignMessage(e){const s=typeof e=="string"?Xe(e):e;return await this.provider.send("eth_sign",[this.address.toLowerCase(),U(s)])}}var gs,Nr,Ze,Be,ge,ie,Mt,_i,$o;class Zm extends Um{constructor(e,s){super(e,s);I(this,_i);I(this,gs);I(this,Nr);I(this,Ze);I(this,Be);I(this,ge);I(this,ie);I(this,Mt);b(this,Nr,1),b(this,gs,Object.assign({},fd,s||{})),b(this,Ze,[]),b(this,Be,null),b(this,ie,null),b(this,Mt,null);{let i=null;const a=new Promise(o=>{i=o});b(this,ge,{promise:a,resolve:i})}const r=this._getOption("staticNetwork");typeof r=="boolean"?(x(!r||e!=="any","staticNetwork cannot be used on special network 'any'","options",s),r&&e!=null&&b(this,ie,Re.from(e))):r&&(x(e==null||r.matches(e),"staticNetwork MUST match network object","options",s),b(this,ie,r))}_getOption(e){return f(this,gs)[e]}get _network(){return N(f(this,ie),"network is not available yet","NETWORK_ERROR"),f(this,ie)}async _perform(e){if(e.method==="call"||e.method==="estimateGas"){let r=e.transaction;if(r&&r.type!=null&&H(r.type)&&r.maxFeePerGas==null&&r.maxPriorityFeePerGas==null){const i=await this.getFeeData();i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null&&(e=Object.assign({},e,{transaction:Object.assign({},r,{type:void 0})}))}}const s=this.getRpcRequest(e);return s!=null?await this.send(s.method,s.args):super._perform(e)}async _detectNetwork(){const e=this._getOption("staticNetwork");if(e)if(e===!0){if(f(this,ie))return f(this,ie)}else return e;return f(this,Mt)?await f(this,Mt):this.ready?(b(this,Mt,(async()=>{try{const s=Re.from(H(await this.send("eth_chainId",[])));return b(this,Mt,null),s}catch(s){throw b(this,Mt,null),s}})()),await f(this,Mt)):(b(this,Mt,(async()=>{const s={id:Vr(this,Nr)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:s});let r;try{r=(await this._send(s))[0],b(this,Mt,null)}catch(i){throw b(this,Mt,null),this.emit("debug",{action:"receiveRpcError",error:i}),i}if(this.emit("debug",{action:"receiveRpcResult",result:r}),"result"in r)return Re.from(H(r.result));throw this.getRpcError(s,r)})()),await f(this,Mt))}_start(){f(this,ge)==null||f(this,ge).resolve==null||(f(this,ge).resolve(),b(this,ge,null),(async()=>{for(;f(this,ie)==null&&!this.destroyed;)try{b(this,ie,await this._detectNetwork())}catch(e){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",dt("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:e}})),await qm(1e3)}S(this,_i,$o).call(this)})())}async _waitUntilReady(){if(f(this,ge)!=null)return await f(this,ge).promise}_getSubscriber(e){return e.type==="pending"?new Jm(this):e.type==="event"?this._getOption("polling")?new tl(this,e.filter):new jm(this,e.filter):e.type==="orphan"&&e.filter.orphan==="drop-log"?new ud("orphan"):super._getSubscriber(e)}get ready(){return f(this,ge)==null}getRpcTransaction(e){const s={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(r=>{if(e[r]==null)return;let i=r;r==="gasLimit"&&(i="gas"),s[i]=ye(H(e[r],`tx.${r}`))}),["from","to","data"].forEach(r=>{e[r]!=null&&(s[r]=U(e[r]))}),e.accessList&&(s.accessList=_s(e.accessList)),e.blobVersionedHashes&&(s.blobVersionedHashes=e.blobVersionedHashes.map(r=>r.toLowerCase())),e.authorizationList&&(s.authorizationList=e.authorizationList.map(r=>{const i=pu(r);return{address:i.address,nonce:ye(i.nonce),chainId:ye(i.chainId),yParity:ye(i.signature.yParity),r:ye(i.signature.r),s:ye(i.signature.s)}})),s}getRpcRequest(e){switch(e.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[Ss(e.address),e.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[Ss(e.address),e.blockTag]};case"getCode":return{method:"eth_getCode",args:[Ss(e.address),e.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[Ss(e.address),"0x"+e.position.toString(16),e.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[e.signedTransaction]};case"getBlock":if("blockTag"in e)return{method:"eth_getBlockByNumber",args:[e.blockTag,!!e.includeTransactions]};if("blockHash"in e)return{method:"eth_getBlockByHash",args:[e.blockHash,!!e.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[e.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[e.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(e.transaction),e.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(e.transaction)]};case"getLogs":return e.filter&&e.filter.address!=null&&(Array.isArray(e.filter.address)?e.filter.address=e.filter.address.map(Ss):e.filter.address=Ss(e.filter.address)),{method:"eth_getLogs",args:[e.filter]}}return null}getRpcError(e,s){const{method:r}=e,{error:i}=s;if(r==="eth_estimateGas"&&i.message){const l=i.message;if(!l.match(/revert/i)&&l.match(/insufficient funds/i))return dt("insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.params[0],info:{payload:e,error:i}});if(l.match(/nonce/i)&&l.match(/too low/i))return dt("nonce has already been used","NONCE_EXPIRED",{transaction:e.params[0],info:{payload:e,error:i}})}if(r==="eth_call"||r==="eth_estimateGas"){const l=Ro(i),u=ui.getBuiltinCallException(r==="eth_call"?"call":"estimateGas",e.params[0],l?l.data:null);return u.info={error:i,payload:e},u}const a=JSON.stringify(Wm(i));if(typeof i.message=="string"&&i.message.match(/user denied|ethers-user-denied/i))return dt("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[r]||"unknown",reason:"rejected",info:{payload:e,error:i}});if(r==="eth_sendRawTransaction"||r==="eth_sendTransaction"){const l=e.params[0];if(a.match(/insufficient funds|base fee exceeds gas limit/i))return dt("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:l,info:{error:i}});if(a.match(/nonce/i)&&a.match(/too low/i))return dt("nonce has already been used","NONCE_EXPIRED",{transaction:l,info:{error:i}});if(a.match(/replacement transaction/i)&&a.match(/underpriced/i))return dt("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:l,info:{error:i}});if(a.match(/only replay-protected/i))return dt("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:r,info:{transaction:l,info:{error:i}}})}let o=!!a.match(/the method .* does not exist/i);return o||i&&i.details&&i.details.startsWith("Unauthorized method:")&&(o=!0),o?dt("unsupported operation","UNSUPPORTED_OPERATION",{operation:e.method,info:{error:i,payload:e}}):dt("could not coalesce error","UNKNOWN_ERROR",{error:i,payload:e})}send(e,s){if(this.destroyed)return Promise.reject(dt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e}));const r=Vr(this,Nr)._++,i=new Promise((a,o)=>{f(this,Ze).push({resolve:a,reject:o,payload:{method:e,params:s,id:r,jsonrpc:"2.0"}})});return S(this,_i,$o).call(this),i}async getSigner(e){e==null&&(e=0);const s=this.send("eth_accounts",[]);if(typeof e=="number"){const i=await s;if(e>=i.length)throw new Error("no such account");return new Ya(this,i[e])}const{accounts:r}=await Rt({network:this.getNetwork(),accounts:s});e=st(e);for(const i of r)if(st(i)===e)return new Ya(this,e);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(s=>new Ya(this,s))}destroy(){f(this,Be)&&(clearTimeout(f(this,Be)),b(this,Be,null));for(const{payload:e,reject:s}of f(this,Ze))s(dt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e.method}));b(this,Ze,[]),super.destroy()}}gs=new WeakMap,Nr=new WeakMap,Ze=new WeakMap,Be=new WeakMap,ge=new WeakMap,ie=new WeakMap,Mt=new WeakMap,_i=new WeakSet,$o=function(){if(f(this,Be))return;const e=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");b(this,Be,setTimeout(()=>{b(this,Be,null);const s=f(this,Ze);for(b(this,Ze,[]);s.length;){const r=[s.shift()];for(;s.length&&r.length!==f(this,gs).batchMaxCount;)if(r.push(s.shift()),JSON.stringify(r.map(a=>a.payload)).length>f(this,gs).batchMaxSize){s.unshift(r.pop());break}(async()=>{const i=r.length===1?r[0].payload:r.map(a=>a.payload);this.emit("debug",{action:"sendRpcPayload",payload:i});try{const a=await this._send(i);this.emit("debug",{action:"receiveRpcResult",result:a});for(const{resolve:o,reject:l,payload:u}of r){if(this.destroyed){l(dt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:u.method}));continue}const d=a.filter(h=>h.id===u.id)[0];if(d==null){const h=dt("missing response for request","BAD_DATA",{value:a,info:{payload:u}});this.emit("error",h),l(h);continue}if("error"in d){l(this.getRpcError(u,d));continue}o(d.result)}}catch(a){this.emit("debug",{action:"receiveRpcError",error:a});for(const{reject:o}of r)o(a)}})()}},e))};var Nn;class Ym extends Zm{constructor(e,s){super(e,s);I(this,Nn);let r=this._getOption("pollingInterval");r==null&&(r=fd.pollingInterval),b(this,Nn,r)}_getSubscriber(e){const s=super._getSubscriber(e);return wc(s)&&(s.pollingInterval=f(this,Nn)),s}get pollingInterval(){return f(this,Nn)}set pollingInterval(e){if(!Number.isInteger(e)||e<0)throw new Error("invalid interval");b(this,Nn,e),this._forEachSubscriber(s=>{wc(s)&&(s.pollingInterval=f(this,Nn))})}}Nn=new WeakMap;function Ro(n){if(n==null)return null;if(typeof n.message=="string"&&n.message.match(/revert/i)&&lt(n.data))return{message:n.message,data:n.data};if(typeof n=="object"){for(const t in n){const e=Ro(n[t]);if(e)return e}return null}if(typeof n=="string")try{return Ro(JSON.parse(n))}catch{}return null}function Oo(n,t){if(n!=null){if(typeof n.message=="string"&&t.push(n.message),typeof n=="object")for(const e in n)Oo(n[e],t);if(typeof n=="string")try{return Oo(JSON.parse(n),t)}catch{}}}function Wm(n){const t=[];return Oo(n,t),t}var Br,Sr;const jn=class jn extends Ym{constructor(e,s,r){const i=Object.assign({},r??{},{batchMaxCount:1});x(e&&e.request,"invalid EIP-1193 provider","ethereum",e);super(s,i);I(this,Br);I(this,Sr);b(this,Sr,null),r&&r.providerInfo&&b(this,Sr,r.providerInfo),b(this,Br,async(a,o)=>{const l={method:a,params:o};this.emit("debug",{action:"sendEip1193Request",payload:l});try{const u=await e.request(l);return this.emit("debug",{action:"receiveEip1193Result",result:u}),u}catch(u){const d=new Error(u.message);throw d.code=u.code,d.data=u.data,d.payload=l,this.emit("debug",{action:"receiveEip1193Error",error:d}),d}})}get providerInfo(){return f(this,Sr)}async send(e,s){return await this._start(),await super.send(e,s)}async _send(e){x(!Array.isArray(e),"EIP-1193 does not support batch request","payload",e);try{const s=await f(this,Br).call(this,e.method,e.params||[]);return[{id:e.id,result:s}]}catch(s){return[{id:e.id,error:{code:s.code,data:s.data,message:s.message}}]}}getRpcError(e,s){switch(s=JSON.parse(JSON.stringify(s)),s.error.code||-1){case 4001:s.error.message=`ethers-user-denied: ${s.error.message}`;break;case 4200:s.error.message=`ethers-unsupported: ${s.error.message}`;break}return super.getRpcError(e,s)}async hasSigner(e){e==null&&(e=0);const s=await this.send("eth_accounts",[]);return typeof e=="number"?s.length>e:(e=e.toLowerCase(),s.filter(r=>r.toLowerCase()===e).length!==0)}async getSigner(e){if(e==null&&(e=0),!await this.hasSigner(e))try{await f(this,Br).call(this,"eth_requestAccounts",[])}catch(s){const r=s.payload;throw this.getRpcError(r,{id:r.id,error:s})}return await super.getSigner(e)}static async discover(e){if(e==null&&(e={}),e.provider)return new jn(e.provider);const s=e.window?e.window:typeof window<"u"?window:null;if(s==null)return null;const r=e.anyProvider;if(r&&s.ethereum)return new jn(s.ethereum);if(!("addEventListener"in s&&"dispatchEvent"in s&&"removeEventListener"in s))return null;const i=e.timeout?e.timeout:300;return i===0?null:await new Promise((a,o)=>{let l=[];const u=y=>{l.push(y.detail),r&&d()},d=()=>{if(clearTimeout(h),l.length)if(e&&e.filter){const y=e.filter(l.map(g=>Object.assign({},g.info)));if(y==null)a(null);else if(y instanceof jn)a(y);else{let g=null;if(y.uuid&&(g=l.filter(v=>y.uuid===v.info.uuid)[0]),g){const{provider:w,info:v}=g;a(new jn(w,void 0,{providerInfo:v}))}else o(dt("filter returned unknown info","UNSUPPORTED_OPERATION",{value:y}))}}else{const{provider:y,info:g}=l[0];a(new jn(y,void 0,{providerInfo:g}))}else a(null);s.removeEventListener("eip6963:announceProvider",u)},h=setTimeout(()=>{d()},i);s.addEventListener("eip6963:announceProvider",u),s.dispatchEvent(new Event("eip6963:requestProvider"))})}};Br=new WeakMap,Sr=new WeakMap;let ca=jn,C={cart_:[],mcart_:[],region:"MY",selectedInstalment:null,emptyCart_(n){const t=n?"mcart":"cart",e=n?"first_mcart_country_id":"first_cart_country_id";n?this.mcart_=[]:this.cart_=[],localStorage.setItem(t,JSON.stringify([])),localStorage.removeItem(e),C[e]=null},restoreCart(n){const t=n?"mcart":"cart",e=n?"first_mcart_country_id":"first_cart_country_id",s=localStorage.getItem(t);s!=null&&(n?(this.mcart_=JSON.parse(s),C.first_mcart_country_id=localStorage.getItem(e)):(this.cart_=JSON.parse(s),C.first_cart_country_id=localStorage.getItem(e)))},filterItemsByName(n){var e=this.cart_.filter((s,r)=>s.name.includes(n));return console.log(e),e},hasCartItems(n){return(n?this.mcart_:this.cart_).length},addItem_(n,t){console.info(n);const e=t?this.mcart_:this.cart_,s=e.findIndex(i=>i.id===n.id);n.is_instalment&&(n.payInstalment||(instalment_name=n.name,product_instalment_id=n.id,n=n.first_payment_product,n.selectedInstalmentId=product_instalment_id,n.selectedInstalment={id:product_instalment_id,name:instalment_name})),s>=0?e[s].qty+=1:(n.qty=1,e.unshift(n));const r=t?"mcart":"cart";localStorage.setItem(r,JSON.stringify(e))},addItemById_(n,t){const e=t?"mcart":"cart",s=t?this.mcart_:this.cart_,r=s.findIndex(a=>a.id==parseInt(n));if(r>=0){var i=s[r];m.notify("item "+i.name+" added !",{delay:2e3,type:"success",placement:{from:"top",align:"center"}}),i.qty+=1}localStorage.setItem(e,JSON.stringify(s))},minusItem_(n,t){const e=t?"mcart":"cart",s=t?this.mcart_:this.cart_,r=s.findIndex(a=>a.id==parseInt(n));if(r>=0){var i=s[r];m.notify("item "+i.name+" deducted !",{delay:2e3,type:"success",placement:{from:"top",align:"center"}}),i.qty-=1,i.qty==0&&this.removeItem_(n,t)}localStorage.setItem(e,JSON.stringify(s))},removeItem_(n,t){const e=t?"mcart":"cart",s=t?this.mcart_:this.cart_,r=s.findIndex(a=>a.id==parseInt(n));var i=s[r];m.notify("item "+i.name+" removed !",{delay:2e3,type:"warning",placement:{from:"top",align:"center"}}),s.splice(r,1),localStorage.setItem(e,JSON.stringify(s)),C.cart_.length==0&&(C.first_cart_country_id=null)},toastChanges(){$("input[name='user[share_code]']").length>0||m.toast({content:'<div class=""><ul class="">'+$(".ac").html()+"</ul></div>"})},total_(n){n?this.mcart_:this.cart_;var t=this.cart.map((e,s)=>e.price).reduce((e,s)=>e+s);return t},render(){var n=["merchantProducts","merchantproduct","merchantProfile","merchant","recruit","topup","country","light","primaryBuy","secondaryBuy","assetTranches","userProfile","wallet","crypto_wallet","metamask_wallet","crypto_wallet_balance","announcement","products","product","bonusLimit","rewardList","rewardSummary","mcart","cart","cartItems","salesItems","upgradeTarget","upgradeTargetMerchant","sponsorTarget","stockistTarget","choosePayment"];n.forEach((t,e)=>{if($(t).length>0)try{this.components[t]()}catch(s){console.error(s)}})},components:{merchantproduct(){$("merchantproduct").customHtml(`
        <div class="text-center mt-4">
          <div class="spinner-border loading2" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
        </div>
          
      <div class="loading2 d-none" id="mpcontent" />
      `),m.api("get_mproduct",{id:pageParams.id},null,n=>{$("title").html(n.name);function t(){var s=C.mcart_.filter((r,i)=>r.merchant_id==n.merchant_id);s.length>0?(C.addItem_(n,!0),C.components.updateMCart(),m.notify("Added "+n.name,{delay:2e3,type:"success",placement:{from:"top",align:"center"}})):C.mcart_.length==0?(C.addItem_(n,!0),C.components.updateMCart(),m.notify("Added "+n.name,{delay:2e3,type:"success",placement:{from:"top",align:"center"}})):alert("cant add due to different merchants, empty it first.")}$(".spinner-border.loading2").parent().remove(),$(".loading2").removeClass("d-none");var e;if(n.img_url!=null)try{e=n.img_url}catch{e="/images/placeholder.png"}$("#mpcontent").customHtml(`

      <div class="d-flex flex-column justify-content-center align-items-center ">
        <h2 id="ptitle">
        </h2>
            <div  class="d-flex justify-content-center p-4 " 
                style="
                  position: relative; 
                  width: 320px;
                  height: 340px;">
            <div class="rounded py-2" style="
                  height: 340px;
                  width: 88%;
                  filter: blur(4px);
                  position: absolute;
                  background-repeat: no-repeat;
                  background-position: center;
                  background-size: cover;
                  background-image: url('`+e+`');
                  top: 30px;
                  left: 20px;
                  ">
            </div>
            <div class="rounded py-2" style="
                  height: 340px;
                  width:  100%;
                  z-index: 1;
                  background-position: center;
                  background-repeat: no-repeat;
                  background-size: cover; 
                  background-image: url('`+e+`');
                  ">
            </div>
          </div>
        <div style="margin-top: 50px;">`+n.description+`</div>
        <div class="font-sm fw-light text-secondary text-center "><span class="format-float">`+n.retail_price+` </span> RP</div>
        <div class="btn btn-outline-primary mt-4" mproduct-id="`+n.id+`">Add</div>
      </div>

      `),$("#ptitle").html(n.name),$("[mproduct-id='"+n.id+"']")[0].onclick=t})},merchantProducts(){let n;function t(){return phxApp.user==null?"b.is_approved=true|b.country_id="+m.chosen_country_id_.id:"b.is_approved=true|b.country_id="+phxApp.user.country_id}function e(a,o,l,u,d){var h=`
                    <div  class="position-relative m-2 d-flex flex-column gap-2" `+a+`>
                      <div  class="d-flex justify-content-center mb-4 py-4 background-p" 
                            style="
                              cursor: pointer;   
                              position: relative; "
                             >
                        <div class="rounded py-2 background-p" style="
                          
                              width: 80%;
                              filter: blur(4px);
                              position: absolute;
                              background-repeat: no-repeat;
                              background-position: center;
                              background-size: cover;
                              background-image: url('`+o+`');
                              
                              ">
                        </div>
                        <div class="rounded py-2 foreground-p" style="
                             
                              width:  100%;
                              z-index: 1;
                              background-position: center;
                              background-repeat: no-repeat;
                              background-size: cover; 
                              background-image: url('`+o+`');
                              ">
                        </div>
                      </div>
                      <div class="d-flex position-absolute" style="left: 10px; top: 12px;z-index: 10;">
                        <div class="bg-primary badge">`+l.name+`</div>
                      </div>
                      <div class="d-flex flex-column justify-content-center gap-2 mt-4">
                        <div class="font-sm fw-bold text-center">`+u.name+`</div>
                         <div class="d-flex flex-column justify-content-center ">
                            <div class="font-sm fw-light text-secondary text-center "><span class="format-float">`+u.retail_price+`</span> RP</div>
                         </div>
                         `+d+`
                      </div>
                    </div>
                    `;return h}function s(a){var o="v2";return a=="Thailand"&&(o="th"),a=="Vietnam"&&(o="vn"),a=="China"&&(o="cn"),o}var r=[];if(m.countries_.forEach((a,o)=>{r.push(`
                <button type="button" aria-name="`+a.name+'" aria-country="'+a.id+'" class="btn btn-primary ">'+a.name+" "+(a.alias||"")+`</button>
              `)}),m.chosen_country_id_==null&&pageParams.share_code==null&&(m.modal({selector:"#mySubModal",content:`
                    <center>
                      <div class="btn-group-vertical">
                      `+r.join("")+`
                      </div>
                    </center>
                  `,header:"Choose region",autoClose:!1}),$("[aria-country]").unbind(),$("[aria-country]").click(function(){var a=$(this).attr("aria-country"),o=$(this).attr("aria-name");m.chosen_country_id_=a,m.notify("Chosen region: "+o),localStorage.setItem("region",o),setTimeout(()=>{$("#chosen-region").html(o)},1e3),localStorage.region!=null&&(langPrefix=s(o)),translationRes=m.api("translation",{lang:langPrefix}),$("#mySubModal").modal("hide"),C.components.country(),m.navigateTo("/home")})),pageParams.share_code!=null&&m.api("get_share_link_by_code",{code:pageParams.share_code},null,a=>{n=m.countries_.filter((l,u)=>l.id==a.user.country_id)[0],console.info(n),m.chosen_country_id_=a.user.country_id,a.user.country_id;var o=n.name;m.notify("Chosen region: "+n.name),localStorage.setItem("region",n.name),setTimeout(()=>{$("#chosen-region").html(o)},1e3),localStorage.region!=null&&(langPrefix=s(o)),translationRes=m.api("translation",{lang:langPrefix}),C.components.country(),$(".sponsor-name").customHtml("_sponsor: "+a.user.username+" _position: "+a.position),$(".sponsor-bank").html(`

                            <div class="d-flex justify-content-between align-items-center">
                              <span class="fw-bold">Bank Details</span>
                              <span class=" my-4 me-4 d-flex justify-content-end align-items-end gap-1 flex-column">
                                <div>`+a.user.bank_name+`</div>
                                <div>`+a.user.bank_account_holder+`</div>
                                <div>`+a.user.bank_account_no+`</div>
                              </span>
                            </div>

                              `)}),m.chosen_country_id_!=null){let a=function(o){var l=$(o).attr("mproduct-id");m.api("get_mproduct",{id:l},()=>{},u=>{var d=C.mcart_.filter((h,y)=>h.merchant_id==u.merchant_id);if(d.length>0)try{C.addItem_(u,!0),C.components.updateMCart(),C.components.cartItems(),m.notify("Added "+u.name,{delay:2e3,type:"success",placement:{from:"top",align:"center"}})}catch(h){console.error(h)}else C.mcart_.length==0?(C.addItem_(u,!0),C.components.updateMCart(),C.components.cartItems(),m.notify("Added "+u.name,{delay:2e3,type:"success",placement:{from:"top",align:"center"}})):alert("cant add due to different merchants, empty it first.")})};var i=a;$("merchantProducts").each((o,l)=>{$(l).customHtml(`
                  <div class="text-center mt-4">
                    <div class="spinner-border loading" role="status">
                      <span class="visually-hidden">Loading...</span>
                    </div>
                  </div>
                    

                  <div class="row gx-0 d-none loading">
                    <div class="col-12 col-lg-10 offset-lg-1">
                      <div id="mproduct_tab1"></div>
                    </div>
                  </div>
                `).then(()=>{var u=null,d="mproducts",h=new Kr({onDrawFn:()=>{$(".spinner-border.loading").parent().remove(),$(".loading").removeClass("d-none"),setTimeout(()=>{$("[mproduct-id]").each((y,g)=>{g.onclick=()=>{a(g)}}),ut.formatDate()},1200)},xcard:y=>{var g=y,w="",v="/images/placeholder.png",A=`onclick="phxApp.navigateTo('/merchant_products/`+g.id+"/"+g.name+`')"`;if($(l).attr("direct")!=null&&(A="",w='<div class="btn btn-outline-primary mt-4" mproduct-id="'+g.id+'">Add</div>'),g.img_url!=null)try{v=g.img_url}catch{v="/images/placeholder.png"}var k=g.merchant;return e(A,v,k,g,w)},data:{sorts:[[1,"asc"]],additional_join_statements:[{merchant:"merchant"}],additional_search_queries:[t()],preloads:["merchant"],grid_class:"col-4 col-lg-3",dom:`

                                                    <"row px-4"
                                                      <"col-lg-6 col-12"i>
                                                      <"col-12 col-lg-6">
                                                    >
                                                    <"row grid_view ">
                                                    <"list_view d-none"t>
                                                    <"row transform-75 px-4"
                                                      <"col-lg-6 col-12">
                                                      <"col-lg-6 col-12"p>
                                                    >

                                                `},columns:[{label:"id",data:"id"},{label:"Action",data:"id"}],moduleName:"MerchantProduct",link:"MerchantProduct",customCols:u,buttons:[],tableSelector:"#"+d});h.load(d,"#mproduct_tab1")})})}},merchantProfile(){$("merchantProfile").html(`
      <form class="with_mod row" module="Merchant" id="Merchant">
      </form>
      `);var n=m.user.merchant;m.user.merchant==null&&(n={id:"0",user_id:phxApp.user.id});var t=new Kr({columns:[{label:"Action",data:"id"}],moduleName:"MerchantCategory",link:"MerchantCategory",buttons:[],tableSelector:"#bc2c"}),e=m.populateTableData(t,100,()=>{});try{console.info(e.allData)}catch(s){console.error(s)}phxApp.createForm(n,null,[{name:"General",list:["id","user_id","name",{label:"merchant_category_id",alt_name:"Business Category",alt_class:"col-12",selection:t.allData},{alt_name:"Merchant Logo",label:"img_url",upload:!0},{label:"description",binary:!0,alt_class:"col-12"},{label:"commission_perc",alt_name:"Percentage Contribution",selection:[{id:.05,name:"5%"},{id:.1,name:"10%"},{id:.15,name:"15%"},{id:.2,name:"20%"},{id:.22,name:"25%"},{id:.3,name:"30%"},{id:.35,name:"35%"},{id:.4,name:"40%"},{id:.45,name:"45%"},{id:.5,name:"50%"}]}]},{name:"CompanyDetails",list:[{label:"company_address",alt_name:"Address",alt_class:"col-12",binary:!0},{label:"company_email",alt_name:"Email",alt_class:"col-12"},{label:"company_phone",alt_name:"Phone",alt_class:"col-12"},{label:"company_reg_no",alt_name:"Reg No",alt_class:"col-12"},{label:"company_ssm_image_url",alt_name:"SSM Image",alt_class:"col-12",upload:!0}]},{name:"BankDetails",list:[{label:"bank_name",alt_name:"Bank Name",alt_class:"col-12"},{label:"bank_account_holder",alt_name:"Bank Account Holder",alt_class:"col-12"},{label:"bank_account_no",alt_name:"Account Number",alt_class:"col-12"}]}],s=>{console.info(s),F.extendUser(),phxApp.navigateTo("/merchant_profile")})},merchant(){var n=' <div class="btn btn-primary btn-lg merchant-apply mb-4 disabled">Apply</div>';m.user.merchant!=null&&(m.user.merchant.is_approved==!1?n=' <div class="btn btn-primary btn-lg merchant-apply ">Pending Approval</div>':m.navigateTo("/merchant_profile"));function t(){console.log("agree"),$(".merchant-apply ").toggleClass("disabled")}window.agree=t,$("merchant").html(`
        <h2 class="mt-2">Merchant Application</h2> 
        <div class="px-4 m-4">
          Terms and condition
        </div>
        <center class="w-100 d-lg-none d-block">
          <iframe class="my-4" style="width:100%; height: 600px;"  src="https://docs.google.com/document/d/e/2PACX-1vShkzZ2LaszYkpcKw82giaYPqzRhB8odK54rkrJLwc6YMiUNp7HLaHYFTYN0hNPngJvJ_XR36_T8b5Z/pub?embedded=true"></iframe>
        </center>
        
        <center class="w-100 d-lg-block d-none">
          <iframe class="my-4" style="width: 60%; height: 600px;"  src="https://docs.google.com/document/d/e/2PACX-1vShkzZ2LaszYkpcKw82giaYPqzRhB8odK54rkrJLwc6YMiUNp7HLaHYFTYN0hNPngJvJ_XR36_T8b5Z/pub?embedded=true"></iframe>
        </center>
        <center>

        <div class="form-check m-4">
          <input class="form-check-input" onchange="agree()" type="checkbox" value="" id="flexCheckDefault">
          <label class="form-check-label" for="flexCheckDefault">
          I agree to above terms and condition
          </label>
        </div>

        </center>
        <div>
         `+n+`
        </div>

      `),$(".merchant-apply").on("click",()=>{m.post("apply_merchant",{id:m.user.id},null,()=>{m.navigateTo("/merchant_profile")})})},recruit(){$("recruit").each((n,t)=>{console.log(t);var e=$(t).attr("merchant");console.log(e==""),e==""?$(t).customHtml(`

          <div class="">
              <label class="my-2">Position</label>
              <select class="form-control" name="mposition">
                <option>auto</option>
              <option>left</option>
                <option>right</option>
              </select>
              <div class="mt-4 btn btn-primary generate-mlink">Generate</div>
          </div>



          `):$(t).customHtml(`

          <div class="">
              <label class="my-2">Position</label>
              <select class="form-control" name="position">
                <option>auto</option>
                <option>left</option>
                <option>right</option>
              </select>
              <div class="mt-4 btn btn-primary generate-link">Generate</div>
          </div>



          `),$(".generate-mlink").click(()=>{m.api("get_merchant_share_link",{username:m.user.username,position:$("select[name='mposition']").val()},null,s=>{m.modal({autoClose:!1,header:"Share Link",selector:"#mySubModal",content:`

                <label class="my-2">Generated</label>
                <input class="form-control" name="link"></input>
                <div class="mt-4 btn btn-primary copy-link">Copy</div>




              `}),$("input[name='link']").val(s.link),$(".copy-link").click(()=>{try{navigator.clipboard.writeText(s.link),console.log("Content copied to clipboard"),m.notify("Copied!")}catch{m.notify("Cant copy",{type:"danger"})}})})}),$(".generate-link").click(()=>{m.api("get_share_link",{username:m.user.username,position:$("select[name='position']").val()},null,s=>{m.modal({autoClose:!1,header:"Share Link",selector:"#mySubModal",content:`

                <label class="my-2">Generated</label>
                <input class="form-control" name="link"></input>
                <div class="mt-4 btn btn-primary copy-link">Copy</div>




              `}),$("input[name='link']").val(s.link),$(".copy-link").click(()=>{try{navigator.clipboard.writeText(s.link),console.log("Content copied to clipboard"),m.notify("Copied!")}catch{m.notify("Cant copy",{type:"danger"})}})})})})},choosePayment(){var n=phxApp.api("razer_list",{}),t=Object.keys(n),e=[];t.forEach((s,r)=>{var i=[];n[s].forEach((a,o)=>{var l=`

          <div class="py-1 col-6 col-lg-4 use-channel" aria-channel-label='`+a.channel_map.direct.request+`' >
            <img class="w-100 m-2 m-lg-0" src="`+a.logo_url_120x43+`"></img>
          </div>
          `;a.currency.includes("MYR")&&a.status==1&&a.channel_map.direct.request!=""&&i.push(l)}),e.push(`

          <div class="row mt-2 pb-1 border-success border-bottom">
         
          `+i.join("")+`
          </div>


          `)}),$("choosePayment").html(`
        <div class="my-4 d-flex justify-content-between">
          <div  class="btn btn-primary" onclick="$('#myPaymentModal').modal('show')">
            Choose Payment
          </div>
          <div class="" id="chosen-payment">
          </div>
        </div>
        <div class="modal" id="myPaymentModal">
          <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title">Choose Payment</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true"></span>
                </button>
              </div>
              <div class="modal-body">
             

                      <section class="ps-0 p-4 razer-display">
                        <h4>Pay with</h4>
                      `+e.join("")+`
                      </section>
             
              </div>
              <div class="modal-footer">
              </div>
            </div>
          </div>
        </div>
      `),$(".use-channel").click(function(){var s=$(this).attr("aria-channel-label");$(".use-channel").removeClass("border border-primary rounded"),$(this).addClass("border border-primary rounded"),console.info("use channel: "+s),$("input[name='user[payment][channel]']").val(s);var r=$(this).html();$("#chosen-payment").html(r),$("#myPaymentModal").modal("hide")})},metamask_wallet(){$("metamask_wallet").each(async(n,t)=>{$(t).customHtml(`
           
              <div class="my-4 mx-2">
                <div class="fs-5">MetaMask Wallet</div>
                <div id="wallet-info" class="mt-3">
                  <button id="connect-wallet-btn" class="btn btn-primary">Connect MetaMask</button>
                  <div id="wallet-address" class="mt-3 d-none">
                    <label class="form-label">Wallet Address:</label>
                    <div class="input-group">
                      <input type="text" class="form-control" id="address-display" readonly>
                      <button class="btn btn-outline-secondary" id="copy-address" type="button">
                        <i class="bi bi-clipboard"></i> Copy
                      </button>
                    </div>
                  </div>
                  <div id="wallet-error" class="alert alert-danger mt-3 d-none"></div>
                </div>
              </div>
           
          `),$("#connect-wallet-btn").click(async function(){try{if(typeof window.ethereum>"u"){$("#wallet-error").text("MetaMask is not installed. Please install MetaMask extension.").removeClass("d-none");return}$(this).prop("disabled",!0).text("Connecting..."),$("#wallet-error").addClass("d-none");const s=await new ca(window.ethereum).send("eth_requestAccounts",[]);if(s.length>0){const r=s[0];$("#address-display").val(r),$("#wallet-address").removeClass("d-none"),$(this).addClass("d-none"),console.log("Connected wallet address:",r)}}catch(e){console.error("Error connecting to MetaMask:",e),$("#wallet-error").text(`Error: ${e.message}`).removeClass("d-none"),$(this).prop("disabled",!1).text("Connect MetaMask")}}),$("#copy-address").click(function(){const e=$("#address-display").val();navigator.clipboard.writeText(e).then(()=>{const s=$(this).html();$(this).html('<i class="bi bi-check"></i> Copied!'),setTimeout(()=>{$(this).html(s)},2e3)})}),typeof window.ethereum<"u"&&window.ethereum.on("accountsChanged",e=>{e.length>0?($("#address-display").val(e[0]),$("#wallet-address").removeClass("d-none"),$("#connect-wallet-btn").addClass("d-none")):($("#wallet-address").addClass("d-none"),$("#connect-wallet-btn").removeClass("d-none").prop("disabled",!1).text("Connect MetaMask"))})})},crypto_wallet_balance(){let n=[];$("crypto_wallet_balance").each((t,e)=>{$(e).customHtml(`
              <div class="card">
                <div class="card-body d-flex flex-column gap-2">
                  <div class="d-flex justify-content-between align-items-center">
                    <h5 class="card-title m-0">Crypto Wallet</h5>
                    <button class="btn btn-sm btn-outline-primary" id="refresh-cw">Refresh</button>
                  </div>
                  <div id="cw-address" class="text-truncate text-secondary">Loading...</div>
                  <div class="d-flex align-items-end gap-2">
                    <div class="display-6 format-int" id="cw-balance">-</div>
                    <small class="text-muted" id="cw-symbol">tokens</small>
                  </div>
                </div>
              </div>
              <div class="card mt-4">
                <div class="card-body">
                  <div class="d-flex justify-content-between align-items-center mb-2">
                    <h6 class="card-title m-0">Recent Transfers</h6>
                  </div>
                  <div class="table-responsive">
                    <table class="table table-sm align-middle mb-0">
                      <thead>
                        <tr>
                          <th scope="col">Time</th>
                          <th scope="col">From</th>
                          <th scope="col">To</th>
                          <th scope="col" class="text-end">Amount</th>
                          <th scope="col">Tx</th>
                        </tr>
                      </thead>
                      <tbody id="cw-transfers-body">
                        <tr>
                          <td colspan="5" class="text-center text-muted">No transfers</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            `);function s(l,u){if(!l)return"0";var d=typeof u=="number"?u:parseInt(u||"18",10),h=(l+"").replace(/\D/g,"");if(h.length===0)return"0";if(h.length<=d){var y=("0".repeat(d+1)+h).slice(-(d+1)),g=y.slice(0,y.length-d),w=y.slice(-d).replace(/0+$/,"");return w?g+"."+w.slice(0,6):g}var v=h.slice(0,h.length-d),A=h.slice(h.length-d).replace(/0+$/,"");return v=v.replace(/\B(?=(\d{3})+(?!\d))/g,","),A?v+"."+A.slice(0,6):v}function r(l){if(!l)return"-";var u=l+"";return u.length<=10?u:u.slice(0,6)+"…"+u.slice(-4)}function i(l){if(!l)return"-";var u=parseInt(l,10);if(!isFinite(u))return"-";var d=new Date(u*1e3);return d.toLocaleString()}function a(){var l=$("#cw-transfers-body");if(!Array.isArray(n)||n.length===0){l.html('<tr><td colspan="5" class="text-center text-muted">No transfers</td></tr>');return}var u=n.slice(0,20).map(function(d){var h=s(d.value,parseInt(d.tokenDecimal||"18",10)),y=d.tokenSymbol||"",g=i(d.timeStamp),w=r(d.from),v=r(d.to),A=d.hash?'<a href="https://polygonscan.com/tx/'+d.hash+'" target="_blank" rel="noopener">'+r(d.hash)+"</a>":"-";return"<tr><td>"+g+'</td><td class="font-monospace">'+w+'</td><td class="font-monospace">'+v+'</td><td class="text-end">'+h+(y?" "+y:"")+'</td><td class="font-monospace">'+A+"</td></tr>"}).join("");l.html(u)}function o(){var l=m.api("crypto_wallet_balance",{token:m.user&&m.user.token});if(l&&l.status=="error"){$("#cw-address").html(l.reason||"Error"),$("#cw-balance").html("-");return}l&&($("#cw-address").html(l.address),$("#cw-balance").html(l.formatted),$("#cw-symbol").html("tokens"),ut.formatDate(),n=l.transfers||[],a())}o(),$(document).off("click","#refresh-cw").on("click","#refresh-cw",function(){o()})})},crypto_wallet(){$("crypto_wallet").each((n,t)=>{var e=phxApp.api("crypto_wallet",{token:phxApp.user.token}),s=phxApp.api("crypto_assets",{token:phxApp.user.token});function r(d){if(!d)return"";var h=String(d);return h.length<=10?h:h.substring(0,6)+"..."+h.substring(h.length-4)}var i=phxApp.api("crypto_native_balance",{token:phxApp.user.token}),a=i&&!i.status?Number(i.formatted||0).toFixed(6):"0";function o(d){var h={POL:"https://e8b864cf8d55fbd854f43ae53b6c824c.ipfscdn.io/ipfs/Qmd58rKLnBfteouAcmdjQ1HzDvRLSLjMbHjuXRytsKwAkD",USDT:"https://polygonscan.com/token/images/tether_32.png",USDC:"https://polygonscan.com/token/images/centre-usdc_32.png",KTDFI:"https://ipfs.io/ipfs/QmSLo5e3PSBWgF3wysabPzsBjoRLngrFoVNrGwgL3vm2Zn/KTDFI_600x600.png",NETSPH:"https://ipfs.io/ipfs/QmSLo5e3PSBWgF3wysabPzsBjoRLngrFoVNrGwgL3vm2Zn/KTDFI_600x600.png"};return h[d]||h.POL}function l(d){var h=s.assets||[],y=h.filter(function(g){return g&&g.symbol==d})[0];return y&&y.contract}function u(d){if(d==="POL"){$("#cw-network").html('<img src="'+o("POL")+'" style="height:24px;width:24px;"/><span class="ms-2">POL</span><span class="ms-2 text-muted">'+a+' POL</span><svg width="16" height="16" viewBox="0 0 15 15" fill="currentColor" xmlns="http://www.w3.org/2000/svg" style="margin-left:auto;"><path d="M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z" fill-rule="evenodd" clip-rule="evenodd"></path></svg>');return}var h=l(d),y="0.000000";if(h){var g=phxApp.api("crypto_wallet_balance",{token:phxApp.user.token,token_address:h});g&&!g.status&&(y=Number(g.formatted||0).toFixed(6))}$("#cw-network").html('<img src="'+o(d)+'" style="height:24px;width:24px;"/><span class="ms-2">'+d+'</span><span class="ms-2 text-muted">'+y+" "+d+'</span><svg width="16" height="16" viewBox="0 0 15 15" fill="currentColor" xmlns="http://www.w3.org/2000/svg" style="margin-left:auto;"><path d="M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z" fill-rule="evenodd" clip-rule="evenodd"></path></svg>')}$("crypto_wallet").html(`
                <div class="card" style="max-width:400px;margin:0 auto;">
                  <div class="card-body">
                    <div class="d-flex flex-column">
                      <div style="height:8px;"></div>
                      <div class="d-flex align-items-center gap-3" style="padding: 12px 0;">
                        <div style="height:48px; width:48px; position:relative;">
                          <div style="border-radius:100%; height:48px; width:48px; overflow:hidden;">
                            <div style="background-image: radial-gradient(at left bottom, rgb(103,232,249), rgb(14,116,144)); height:64px; width:64px;"></div>
                          </div>
                          <div style="position:absolute; right:-2px; bottom:-2px;">
                            <div style="display:flex; place-items:center; border:1px solid rgb(254,254,32); border-radius:100%; padding:4px; background: rgb(30,29,89);">
                              <svg fill="none" height="12" viewBox="0 0 16 16" width="12" xmlns="http://www.w3.org/2000/svg"><path d="M13.3335 2.6665H2.66683C1.93045 2.6665 1.3335 3.26346 1.3335 3.99984V11.9998C1.3335 12.7362 1.93045 13.3332 2.66683 13.3332H13.3335C14.0699 13.3332 14.6668 12.7362 14.6668 11.9998V3.99984C14.6668 3.26346 14.0699 2.6665 13.3335 2.6665Z" stroke="hsl(0, 100%, 60%)" stroke-linecap="round" stroke-linejoin="round"></path><path d="M14.6668 4.6665L8.68683 8.4665C8.48101 8.59545 8.24304 8.66384 8.00016 8.66384C7.75728 8.66384 7.51931 8.59545 7.3135 8.4665L1.3335 4.6665" stroke="hsl(0, 100%, 60%)" stroke-linecap="round" stroke-linejoin="round"></path></svg>
                            </div>
                          </div>
                        </div>
                        <div class="d-flex flex-column gap-1">
                          <div class="d-flex align-items-center gap-2">
                            <span class="fw-semibold">${r(e.address)}</span>
                            <button class="btn btn-sm btn-outline-secondary" id="cw-copy" title="Copy">
                              <svg width="15" height="15" viewBox="0 0 15 15" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M1 9.50006C1 10.3285 1.67157 11.0001 2.5 11.0001H4L4 10.0001H2.5C2.22386 10.0001 2 9.7762 2 9.50006L2 2.50006C2 2.22392 2.22386 2.00006 2.5 2.00006L9.5 2.00006C9.77614 2.00006 10 2.22392 10 2.50006V4.00002H5.5C4.67158 4.00002 4 4.67159 4 5.50002V12.5C4 13.3284 4.67158 14 5.5 14H12.5C13.3284 14 14 13.3284 14 12.5V5.50002C14 4.67159 13.3284 4.00002 12.5 4.00002H11V2.50006C11 1.67163 10.3284 1.00006 9.5 1.00006H2.5C1.67157 1.00006 1 1.67163 1 2.50006V9.50006ZM5 5.50002C5 5.22388 5.22386 5.00002 5.5 5.00002H12.5C12.7761 5.00002 13 5.22388 13 5.50002V12.5C13 12.7762 12.7761 13 12.5 13H5.5C5.22386 13 5 12.7762 5 12.5V5.50002Z" fill-rule="evenodd" clip-rule="evenodd"></path></svg>
                            </button>
                          </div>
                          <span class="text-muted small">${phxApp.user&&phxApp.user.email?phxApp.user.email:""}</span>
                        </div>
                      </div>

                      <div class="d-flex gap-2" style="padding: 0 8px 8px 8px;">
                        <button class="btn btn-outline-primary flex-fill" id="cw-send">Send</button>
                        <button class="btn btn-outline-primary flex-fill" id="cw-receive">Receive</button>
                      </div>

                      <div class="mb-2" style="padding: 0 8px;">
                        <button class="btn btn-light w-100 d-flex align-items-center" id="cw-network"></button>
                      </div>

                      <div style="padding: 0 8px;">
                        <div class="list-group">
                          <button class="list-group-item list-group-item-action d-flex align-items-center" id="cw-transactions">
                            <span>Transactions</span>
                          </button>
                          <button class="list-group-item list-group-item-action d-flex align-items-center" id="cw-assets">
                            <span>View Assets</span>
                          </button>
                          
                        </div>
                      </div>

                      <div style="height: 12px;"></div>
                      <div style="padding: 0 8px;">
                        <button class="btn btn-outline-danger w-100" id="cw-disconnect">Disconnect Wallet</button>
                      </div>
                    </div>
                  </div>
                </div>
              `),$(document).off("click","#cw-copy").on("click","#cw-copy",function(){phxApp.copyToClipboard(e.address)}),$(document).off("click","#cw-receive").on("click","#cw-receive",function(){phxApp.modal({selector:"#mySubModal",autoClose:!1,header:"Receive",content:`
                        <div class="d-flex flex-column gap-2">
                          <div>Share this address to receive assets:</div>
                          <div class="fw-bold">${e.address}</div>
                          <div class="btn btn-outline-primary" id="cw-copy2">Copy</div>
                        </div>
                      `}),$(document).off("click","#cw-copy2").on("click","#cw-copy2",function(){phxApp.copyToClipboard(e.address)})}),$(document).off("click","#cw-send").on("click","#cw-send",function(){phxApp.modal({selector:"#mySubModal",autoClose:!1,header:"Send",content:`
                        <div class="row g-2">
                          <div class="col-12">
                            <label class="form-label">Asset</label>
                            <select class="form-select" id="send-asset">
                              <option value="NETSPH">NETSPH</option>
                              <option value="USDT">USDT</option>
                            </select>
                          </div>
                          <div class="col-12">
                            <label class="form-label">To Address</label>
                            <input class="form-control" id="send-to" placeholder="0x..." />
                          </div>
                          <div class="col-12">
                            <label class="form-label">Amount</label>
                            <input type="number" step="0.000001" class="form-control" id="send-amt" placeholder="0.0" />
                          </div>
                          <div class="col-12">
                            <button class="btn btn-primary" id="btn-do-send">Send</button>
                          </div>
                          <div class="col-12" id="send-res"></div>
                        </div>
                      `}),$(document).off("click","#btn-do-send").on("click","#btn-do-send",function(){var y;var d=$("#send-asset").val();$("#send-to").val(),$("#send-amt").val();var h=(y=(s.assets||[]).filter(g=>g.symbol==d)[0])==null?void 0:y.contract;if(!h){$("#send-res").html("<div class='text-danger'>Missing contract address</div>");return}$("#send-res").html("<div class='text-muted'>Sending... please confirm with admin implementation.</div>")})}),$(document).off("click","#cw-transactions").on("click","#cw-transactions",function(){function d(k){return k?(k=String(k),k.length>10?k.slice(0,6)+"..."+k.slice(-4):k):"-"}function h(k,E){if(!k)return"0";var P=typeof E=="number"?E:parseInt(E||"18",10),O=(k+"").replace(/\D/g,"");if(O.length===0)return"0";if(O.length<=P){var R=("0".repeat(P+1)+O).slice(-(P+1)),T=R.slice(0,R.length-P),B=R.slice(-P).replace(/0+$/,"");return B?T+"."+B.slice(0,6):T}var L=O.slice(0,O.length-P),Q=O.slice(O.length-P).replace(/0+$/,"");return L=L.replace(/\B(?=(\d{3})+(?!\d))/g,","),Q?L+"."+Q.slice(0,6):L}function y(k){if(!k)return"-";var E=parseInt(k,10);return isFinite(E)?new Date(E*1e3).toLocaleString():"-"}phxApp.modal({selector:"#mySubModal",autoClose:!1,header:"Transactions",content:`
                        <div class="d-flex flex-column" style="max-width:400px;">
                          <div class="mb-2 d-flex align-items-center justify-content-center position-relative">
                            <h6 class="m-0">Transactions</h6>
                          </div>
                          <div class="border-top"></div>
                          <div style="padding: 8px 0; min-height: 250px; max-height: 370px; overflow:auto;" id="tx-list">
                            <div class="d-flex flex-column align-items-center justify-content-center text-muted" style="gap: 8px; min-height: 200px;">
                              <svg width="48" height="48" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0.877075 7.49988C0.877075 3.84219 3.84222 0.877045 7.49991 0.877045C11.1576 0.877045 14.1227 3.84219 14.1227 7.49988C14.1227 11.1575 11.1576 14.1227 7.49991 14.1227C3.84222 14.1227 0.877075 11.1575 0.877075 7.49988ZM7.49991 1.82704C4.36689 1.82704 1.82708 4.36686 1.82708 7.49988C1.82708 10.6329 4.36689 13.1727 7.49991 13.1727C10.6329 13.1727 13.1727 10.6329 13.1727 7.49988C13.1727 4.36686 10.6329 1.82704 7.49991 1.82704ZM9.85358 5.14644C10.0488 5.3417 10.0488 5.65829 9.85358 5.85355L8.20713 7.49999L9.85358 9.14644C10.0488 9.3417 10.0488 9.65829 9.85358 9.85355C9.65832 10.0488 9.34173 10.0488 9.14647 9.85355L7.50002 8.2071L5.85358 9.85355C5.65832 10.0488 5.34173 10.0488 5.14647 9.85355C4.95121 9.65829 4.95121 9.3417 5.14647 9.14644L6.79292 7.49999L5.14647 5.85355C4.95121 5.65829 4.95121 5.3417 5.14647 5.14644C5.34173 4.95118 5.65832 4.95118 5.85358 5.14644L7.50002 6.79289L9.14647 5.14644C9.34173 4.95118 9.65832 4.95118 9.85358 5.14644Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg>
                              <span>No Transactions</span>
                            </div>
                          </div>
                          <div class="border-top"></div>
                          <div class="pt-2">
                            <a href="https://polygonscan.com/address/${e.address}" target="_blank" rel="noopener" class="text-decoration-none">View on Explorer
                              <svg width="16" height="16" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3 2C2.44772 2 2 2.44772 2 3V12C2 12.5523 2.44772 13 3 13H12C12.5523 13 13 12.5523 13 12V8.5C13 8.22386 12.7761 8 12.5 8C12.2239 8 12 8.22386 12 8.5V12H3V3L6.5 3C6.77614 3 7 2.77614 7 2.5C7 2.22386 6.77614 2 6.5 2H3ZM12.8536 2.14645C12.9015 2.19439 12.9377 2.24964 12.9621 2.30861C12.9861 2.36669 12.9996 2.4303 13 2.497L13 2.5V2.50049V5.5C13 5.77614 12.7761 6 12.5 6C12.2239 6 12 5.77614 12 5.5V3.70711L6.85355 8.85355C6.65829 9.04882 6.34171 9.04882 6.14645 8.85355C5.95118 8.65829 5.95118 8.34171 6.14645 8.14645L11.2929 3H9.5C9.22386 3 9 2.77614 9 2.5C9 2.22386 9.22386 2 9.5 2H12.4999H12.5C12.5678 2 12.6324 2.01349 12.6914 2.03794C12.7504 2.06234 12.8056 2.09851 12.8536 2.14645Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg>
                            </a>
                          </div>
                        </div>
                      `});var g=["NETSPH","USDT"],w=[];g.forEach(function(k){var O;var E=(O=(s.assets||[]).filter(function(R){return R.symbol==k})[0])==null?void 0:O.contract;if(E){var P=phxApp.api("crypto_wallet_balance",{token:phxApp.user.token,token_address:E});P&&!P.status&&Array.isArray(P.transfers)&&(w=w.concat(P.transfers))}}),w.sort(function(k,E){return parseInt(E.timeStamp||"0",10)-parseInt(k.timeStamp||"0",10)});var v=$("#tx-list");if(w.length){var A=w.slice(0,50).map(function(k){var E=k.tokenSymbol||"",P=parseInt(k.tokenDecimal||"18",10),O=h(k.value,P),R=d(k.from),T=d(k.to),B=y(k.timeStamp),L=k.hash?"https://polygonscan.com/tx/"+k.hash:"#";return`
                        <div class="d-flex flex-column border rounded p-2 mb-2" style="gap:4px;">
                          <div class="d-flex align-items-center">
                            <span class="text-muted small">${B}</span>
                            <span class="ms-auto fw-semibold">${O} ${E}</span>
                          </div>
                          <div class="d-flex align-items-center small">
                            <span class="font-monospace">${R}</span>
                            <span class="mx-1">→</span>
                            <span class="font-monospace">${T}</span>
                          </div>
                          <div>
                            <a href="${L}" target="_blank" rel="noopener" class="small">View Tx</a>
                          </div>
                        </div>
                      `}).join("");v.html(A)}}),$(document).off("click","#cw-assets").on("click","#cw-assets",function(){function d(A){var k={POL:"https://e8b864cf8d55fbd854f43ae53b6c824c.ipfscdn.io/ipfs/Qmd58rKLnBfteouAcmdjQ1HzDvRLSLjMbHjuXRytsKwAkD",USDT:"https://polygonscan.com/token/images/tether_32.png",USDC:"https://polygonscan.com/token/images/centre-usdc_32.png",KTDFI:"https://ipfs.io/ipfs/QmSLo5e3PSBWgF3wysabPzsBjoRLngrFoVNrGwgL3vm2Zn/KTDFI_600x600.png"};return k[A]||k.POL}function h(A,k){return`
                        <div class="d-flex align-items-center" style="gap:12px; padding:12px;">
                          <div style="display:inline-flex; place-items:center; position:relative; flex-shrink:0;">
                            <img src="${d(A)}" style="height:32px;width:32px;object-fit:contain;"/>
                          </div>
                          <div class="d-flex flex-column" style="gap:6px;">
                            <span class="fw-semibold">${A}</span>
                            <span class="text-muted">${k} ${A}</span>
                          </div>
                        </div>
                      `}phxApp.modal({selector:"#mySubModal",autoClose:!1,header:"View Assets",content:`
                        <div class="d-flex flex-column" style="max-width:400px;">
                          <div class="mb-2 d-flex align-items-center justify-content-center position-relative">
                            <h6 class="m-0">View Assets</h6>
                          </div>
                          <div class="border-top"></div>
                          <div class="d-flex" style="gap:6px; align-items:center; padding:6px; border-radius:12px; width:100%;">
                            <button type="button" class="btn w-100" id="assets-tab-tokens" style="background:#1e1d59; color:#fff; border-radius:8px; padding-block:12px;">Tokens</button>
                          </div>
                          <div style="height:12px;"></div>
                          <div id="assets-scroll" style="max-height:300px; overflow:auto;">
                            <div id="assets-list" class="d-flex flex-column"></div>
                          </div>
                          <div style="height:24px;"></div>
                        </div>
                      `});var y=[],g=phxApp.api("crypto_native_balance",{token:phxApp.user.token}),w=g&&!g.status?Number(g.formatted||0).toFixed(6):"0";y.push(h("POL",w));var v=s.assets||[];v.forEach(function(A){if(!(!A||!A.symbol||!A.contract)){var k=phxApp.api("crypto_wallet_balance",{token:phxApp.user.token,token_address:A.contract});if(k&&!k.status){var E=Number(k.formatted||0).toFixed(6);y.push(h(A.symbol,E))}}}),y.length||y.push('<div class="text-center text-muted py-4">No assets</div>'),$("#assets-list").html(y.join("")),$(document).off("click","#assets-list .d-flex.align-items-center").on("click","#assets-list .d-flex.align-items-center",function(){var A=$(this).find("span.fw-semibold").text()||"";A=A.trim().split(/\s+/)[0],A&&u(A),$("#mySubModal").modal("hide")})}),$(document).off("click","#cw-disconnect").on("click","#cw-disconnect",function(){phxApp.notify("Disconnect not implemented in this environment.",{type:"warning"})}),u("NETSPH")})},async claimFromOwner(n,t){try{if(!window.ethereum)return m.modal({selector:"#mySubModal",autoClose:!1,header:"Install MetaMask",content:`
                <div class="p-2">
                  <p>To claim tokens, please install a Web3 wallet (MetaMask).</p>
                  <a class="btn btn-primary" target="_blank" rel="noopener" href="https://metamask.io/download/">Install MetaMask</a>
                </div>
              `}),{status:"error",reason:"no_provider"};try{window.ethereum.request&&await window.ethereum.request({method:"eth_requestAccounts"})}catch{return m.notify("Wallet connection rejected.",{type:"danger"}),{status:"error",reason:"wallet_rejected"}}const e="0xa17c6fc7d9ecef353ceb3132ddd619037d134125",s=["function transferFrom(address from, address to, uint256 amount) returns (bool)","function allowance(address owner, address spender) view returns (uint256)","function balanceOf(address account) view returns (uint256)","function decimals() view returns (uint8)"],r=new ca(window.ethereum);try{const g=await r.getNetwork();if(g&&g.chainId&&Number(g.chainId)!==137)try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x89"}]})}catch(w){if(w&&w.code===4902)try{await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x89",chainName:"Polygon Mainnet",nativeCurrency:{name:"MATIC",symbol:"MATIC",decimals:18},rpcUrls:["https://polygon-rpc.com/"],blockExplorerUrls:["https://polygonscan.com"]}]})}catch{}}}catch{}const i=await r.getSigner(),a=new js(e,s,i);let o=18;try{o=await a.decimals()}catch{}const l=Fd(t.toString(),Number(o)),u=await i.getAddress(),[d,h]=await Promise.all([a.balanceOf(n),a.allowance(n,u)]);if(d<l)return m.notify("Owner balance is insufficient for this amount.",{type:"danger"}),{status:"error",reason:"insufficient_owner_balance"};if(h<l)return m.modal({selector:"#mySubModal",autoClose:!1,header:"Approval required",content:`
                <div class="p-2">
                  <p>The token owner must approve your address to spend ${t} tokens before claiming.</p>
                  <ol class="mb-2">
                    <li>Ask owner to run approve(your address, amount) in their wallet;</li>
                    <li>Or contact admin to approve on-chain for this token.</li>
                  </ol>
                </div>
              `}),{status:"error",reason:"insufficient_allowance"};const y=await a.transferFrom(n,await i.getAddress(),l);return await y.wait(),{status:"ok",txHash:y.hash}}catch(e){return console.error(e),m.notify("Claim failed. "+(e&&e.message?e.message:""),{type:"danger"}),{status:"error",reason:"tx_failed"}}},topup(){function n(i){var a,o=phxApp.rowData(i);console.log(o),o.payment!=null?o.payment.payment_method=="nowpayments"?(a="",o.is_approved==!1&&(a=`<p>You will be redirected to pay this topup.</p>
            <a target="_blank" href="`+o.payment.payment_url+`" class="btn btn-primary">Pay
            </a>`),phxApp.modal({autoClose:!1,selector:"#mySubModal",header:"NowPayments",content:`

            `+a+`
            <div class="btn btn-primary check">Recheck
            </div>

            `}),$(".check").click(()=>{phxApp.api("check_bill",{id:o.payment.billplz_code})})):phxApp.modal({selector:"#mySubModal",header:"Details",content:`

          <div class="btn btn-primary delete">Delete Request
            </div>


            `}):phxApp.modal({selector:"#mySubModal",header:"Details",content:`

            <p>`+o.remarks+`</p>

            `}),$(".delete").unbind(),$(".delete").click(()=>{phxApp.api("delete_topup_request",{id:o.id},null,l=>{$("#mySubModal").modal("hide"),l.status=="error"?l.reason!=""&&phxApp.notify("Not Deleted! Reason: "+l.reason,{type:"danger"}):(phxApp.notify("Deleted!"),phxApp.navigateTo("/topup_register_point"))})})}$("topup").customHtml(`    
                <div class="card-body ">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                    <h3>Topup Transaction</h3>
                    <div class="btn btn-primary " id="new_topup">
                        <span class="d-flex align-items-center"><i class="fa fa-plus me-1"></i>Topup</span></div>
                    </div>
                    <div class="" id="tab2"></div>
                </div>
                    `),window.selectedBank=i=>{$("input[name='WalletTopup[bank]']").val(i)};var t=[];$("#new_topup").click(()=>{phxApp.modal({selector:"#mySubModal",autoClose:!1,header:"New Register Point Topup",content:`
                        <div class="row ">
                            <form class="col-12 offset-lg-1 col-lg-10 with_mod row p-4" module="WalletTopup" 
                            id="WalletTopup">
                            

                            </form>

                        </div>
                    `}),phxApp.createForm({id:"0",user_id:phxApp.user.id,payment_method:"nowpayments"},null,["id",{label:"amount",alt_name:"Amount (USDT-POLYGON)",alt_class:"col-12"},{label:"remarks",alt_name:"Description",alt_class:"col-12"},{label:"payment-placeholder",alt_name:"Choose Payment",alt_class:"col-12",placeholder:`


              <div id="payment-placeholder">
                <section class="py-4 razer-display">
                  <h3>Choose 1 of these methods</h3>
                `+t.join("")+`
                </section>
                <section class="d-none upload-display">
                  <div class="px-4 pt-4">
                    Kindly deposit to either 1 of these account.
                  </div>
                  <div class="p-4 fs-5">
                    USDT POLYGON<br>
                    
                    <span>
                      <div>  </div>
                      <div style="width: 70vw;text-overflow: ellipsis;overflow: hidden;">0x3675cF9333f00188A99791be2fD612353bC54da8 <div class="btn btn-primary" onclick="phxApp.copyToClipboard('0x3675cF9333f00188A99791be2fD612353bC54da8');selectedBank('PBB')">Copy</div></div>
                    </span><br>
                  </div>
                </section>
                <div class="btn-group" role="group" aria-label="PaymentGroup">
                  <input type="radio" class="btn-check show-upload" name="btnradio" id="btnradio1z" autocomplete="off" >
                  <label class="btn btn-outline-primary" for="btnradio1z">Upload Bank In Slip</label>

                  <input type="radio" class="btn-check show-razer" name="btnradio" id="btnradio2z" autocomplete="off" checked="">
                  <label class="btn btn-outline-primary" for="btnradio2z">NowPayments</label>
       
                </div>

              </div>

          `},{label:"payment_method",selection:[{id:"nowpayments",name:"NowPayments"},{id:"bank in slip",name:"BANK IN SLIP"}],alt_class:"d-none"},{label:"img_url",upload:!0,alt_class:"d-none upload-display"},{label:"bank",data:"bank",hidden:!0},"user_id"],i=>{console.info(i),i.payment_method=="nowpayments"?window.open(i.payment_url,"_blank"):phxApp.navigateTo("/topup_register_point")}),$(document).on("click",".show-upload",()=>{$(".upload-display").removeClass("d-none"),$(".razer-display").addClass("d-none"),$("select[name='WalletTopup[payment_method]']").val("bank in slip")}),$(document).on("click",".show-razer",()=>{$(".upload-display").addClass("d-none"),$(".razer-display").removeClass("d-none"),$("select[name='WalletTopup[payment_method]']").val("nowpayments")})});var e=null,s=phxApp.makeid(4),r=new Kr({onDrawFn:()=>{setTimeout(()=>{phxApp.formatDate()},200)},xcard:i=>{console.log(i);var a=i;a.amount<0;var o='<span class="badge bg-warning">PENDING</span>';a.is_approved&&(o='<span class="badge bg-success">APPROVED</span>');var l=`
       

        <div class="row border-1 border-top py-2">
          <div class="col-6 text-start text-sm">`+o+`</div>
         <div class="col-6 text-end text-sm">Amount (RP)</div>
        </div>
        <div class="row">
          <div class="col-6 text-start text-sm format_datetime">`+a.inserted_at+`</div>
     
         <div class="col-6 text-end "> <span class='format-integer'>`+a.amount+`</span></div>
        </div>

        `;return l},data:{grid_class:"col-12 ",dom:`
       <"row px-4 px-lg-0" 
        <"col-12 col-lg-6 "l>
        <"col-12 col-lg-6 text-lg-end "i>
      >
      <"row grid_view d-block d-lg-none">
      <"list_view d-none d-lg-block"t>
      <"row transform-75 px-4"
          <"col-lg-6 col-12">
          <"col-lg-6 col-12"p>
        >
    `,preloads:["user","payment"],additional_join_statements:[{user:"user"}],additional_search_queries:["a.user_id="+phxApp.user.id]},columns:[{label:"id",data:"id"},{label:"Date",data:"inserted_at",formatDateTime:!0,offset:0},{customized:!0,label:"Approved?",data:"is_approved",xdata:{formatFn:(i,a)=>(i.is_approved?html='<div  ><i class="fa fa-check text-success"></i><span  class="ms-2">Approved</span></div>':html='<div  ><i class="fa fa-hourglass text-warning"></i><span class="ms-2">Pending</span></div>',html)}},{label:"Payment",data:"id",showChild:!0,xdata:{child:"payment",data:"payment_method"}},{label:"Amount",data:"amount",className:"format-float"},{label:"Action",data:"id",className:""}],moduleName:"WalletTopup",link:"WalletTopup",customCols:e,buttons:[{name:"Details",iconName:"fa fa-info",color:"btn-sm btn-outline-warning",onClickFunction:n,fnParams:{}}],tableSelector:"#"+s});r.load(s,"#tab2")},country(){if(localStorage.getItem("region")!=null){var n=m.countries_.filter((e,s)=>e.name==localStorage.getItem("region"))[0];m.chosen_country_id_=n,$("country").customHtml(`


      <li class="nav-item">
        <a class="nav-link choose-region" href="javascript:void(0);" > <i class="fa fa-globe"></i>`+localStorage.getItem("region")+`</a>
      </li>

    `)}else $("country").customHtml(`


      <li class="nav-item">
        <a class="nav-link choose-region" href="javascript:void(0);" > <i class="fa fa-globe"></i> MY</a>
      </li>

    `);var t=[];m.countries_.forEach((e,s)=>{t.push(`
          <button type="button" aria-name="`+e.name+'" aria-country="'+e.id+'" class="btn btn-primary ">'+e.name+`</button>
        `)}),$(".choose-region").click(()=>{C.emptyCart_(),m.modal({selector:"#mySubModal",content:`
        <center>
          <div class="btn-group-vertical">
          `+t.join("")+`
          </div>
        </center>
      `,header:"Choose region",autoClose:!1}),$("[aria-country]").unbind(),$("[aria-country]").click(function(){var e=$(this).attr("aria-country"),s=$(this).attr("aria-name");m.chosen_country_id_=e,m.notify("Chosen region: "+s),localStorage.setItem("region",s),setTimeout(()=>{$("#chosen-region").html(s)},1e3),$("#mySubModal").modal("hide");try{let a=function(o){var l="v2";return o=="Thailand"&&(l="th"),o=="Vietnam"&&(l="vn"),o=="China"&&(l="cn"),l};var i=a,r="v2";localStorage.region!=null&&(r=a(localStorage.region)),translationRes=m.api("translation",{lang:r})}catch(a){console.error("Error fetching translation:",a)}C.components.country(),C.components.products(),$("[name='user[pick_up_point_id]']").length>0&&C.components.cartItems()})})},upgradeTarget(){var n=null,t;$("upgradeTarget").attr("instalment")!=null&&(console.log("ok"),C.emptyCart_()),window.upgradeTarget==null&&(window.upgradeTarget=F.user.username),$("input[name='user[upgrade]']").val(window.upgradeTarget),$("upgradeTarget").customHtml('<span>for: <span id="upgradeTarget">'+window.upgradeTarget+'</span> <a class="ms-4" href="javascript:void(0);" aria-upgrade=true> <i class="fa fa-edit"></i> Change</a> </span>'),$("[aria-upgrade]").click(()=>{m.modal({selector:"#mySubModal",autoClose:!1,content:`
        <div>
          <div class="form-group">
            <label>Username</label>
            <input class="my-2 form-control" type="text" name='upgrade[username]'></input>
              <div class="form-text text-muted pv-info"></div>

            <button class="mt-4 btn btn-outline-primary checkUser">Check</button>
            <button class="mt-4 btn btn-primary disabled selectUser">Select this user</button>
          </div>
        </div>
        `,header:"Change Upgrade User"}),$(".checkUser").click(()=>{m.api("get_accumulated_sales",{show_instalment:!0,parent_id:F.user.id,show_rank:!0,username:$("[name='upgrade[username]']").val()},()=>{window.upgradeTarget=F.user.username,$("input[name='user[upgrade]']").val(window.upgradeTarget),$(".selectUser").addClass("disabled")},e=>{m.notify("User verified!"),$(".selectUser").removeClass("disabled"),$(".pv-info").customHtml("Accumulated sales PV: "+e[0]+" | Rank: "+e[1]),e[2].is_direct_downline?$(".to-upgrade").removeClass("disabled"):(m.notify("User not direct downline!",{type:"warning"}),$("label[for='btnradio3']").click(),$(".to-upgrade").addClass("disabled"),e[4].outstanding_instalments!=null&&e[4].outstanding_instalments.product.can_pay_by_drp&&$(".to-upgrade").removeClass("disabled")),console.info(e[4].outstanding_instalments);try{e[4].outstanding_instalments!=null&&($("input[name='user[shipping][fullname]']").val(e[4].outstanding_instalments.user.fullname),$("input[name='user[shipping][phone]']").val(e[4].outstanding_instalments.user.phone),$("input[name='user[instalment]']").val("Month no: "+e[4].outstanding_instalments.month_no+"/"+e[4].outstanding_instalments.instalment.no_of_months),t=e[4].outstanding_instalments.product,n=e[4].outstanding_instalments.member_instalment_product.product)}catch(s){console.error(s)}})}),$(".selectUser").click(()=>{$("input[name='user[upgrade]']").val($("[name='upgrade[username]']").val()),m.notify("User selected!"),$("#mySubModal").modal("hide"),window.upgradeTarget=$("[name='upgrade[username]']").val(),$("#upgradeTarget").html($("[name='upgrade[username]']").val()),t!=null&&(m.addItem(t.id),n!=null&&m.addItem(n.id)),C.components.cartItems(),console.info("need to check if member is direct sponsor")})})},upgradeTargetMerchant(){var n=null,t;$("upgradeTarget").attr("instalment")!=null&&(console.log("ok"),C.emptyCart_()),window.upgradeTarget==null&&(window.upgradeTarget=F.user.username),$("input[name='user[upgrade]']").val(window.upgradeTarget),$("upgradeTargetMerchant").customHtml('<span>for: <span id="upgradeTarget">'+window.upgradeTarget+'</span> <a class="ms-4" href="javascript:void(0);" aria-upgrade=true> <i class="fa fa-edit"></i> Change</a> </span>'),$("[aria-upgrade]").click(()=>{m.modal({selector:"#mySubModal",autoClose:!1,content:`
        <div>
          <div class="form-group">
            <label>Username</label>
            <input class="my-2 form-control" type="text" name='upgrade[username]'></input>
              <div class="form-text text-muted pv-info"></div>

            <button class="mt-4 btn btn-outline-primary checkUser">Check</button>
            <button class="mt-4 btn btn-primary disabled selectUser">Select this user</button>
          </div>
        </div>
        `,header:"Change Upgrade User"}),$(".checkUser").click(()=>{m.api("get_accumulated_sales_merchant",{show_instalment:!0,parent_id:F.user.id,show_rank:!0,username:$("[name='upgrade[username]']").val()},()=>{window.upgradeTarget=F.user.username,$("input[name='user[upgrade]']").val(window.upgradeTarget),$(".selectUser").addClass("disabled")},e=>{m.notify("User verified!"),$(".selectUser").removeClass("disabled"),$(".pv-info").customHtml("Accumulated sales PV: "+e[0]+" | Rank: "+e[1]),e[2].is_direct_downline?$(".to-upgrade").removeClass("disabled"):(m.notify("User not direct downline!",{type:"warning"}),$("label[for='btnradio3']").click(),$(".to-upgrade").addClass("disabled"),e[4].outstanding_instalments!=null&&e[4].outstanding_instalments.product.can_pay_by_drp&&$(".to-upgrade").removeClass("disabled")),console.info(e[4].outstanding_instalments);try{e[4].outstanding_instalments!=null&&($("input[name='user[shipping][fullname]']").val(e[4].outstanding_instalments.user.fullname),$("input[name='user[shipping][phone]']").val(e[4].outstanding_instalments.user.phone),$("input[name='user[instalment]']").val("Month no: "+e[4].outstanding_instalments.month_no+"/"+e[4].outstanding_instalments.instalment.no_of_months),t=e[4].outstanding_instalments.product,n=e[4].outstanding_instalments.member_instalment_product.product)}catch(s){console.error(s)}})}),$(".selectUser").click(()=>{$("input[name='user[upgrade]']").val($("[name='upgrade[username]']").val()),m.notify("User selected!"),$("#mySubModal").modal("hide"),window.upgradeTarget=$("[name='upgrade[username]']").val(),$("#upgradeTarget").html($("[name='upgrade[username]']").val()),t!=null&&(m.addItem(t.id),n!=null&&m.addItem(n.id)),C.components.cartItems(),console.info("need to check if member is direct sponsor")})})},sponsorTarget(){window.sponsorTarget==null&&(window.sponsorTarget=F.user.username),$("input[name='user[sponsor]']").val(""),$("sponsorTarget").customHtml('<span>for: <span id="sponsorTarget">'+window.sponsorTarget+`</span>
     <a class="ms-4" href="javascript:void(0);" aria-sponsor=true> <i class="fa fa-edit"></i> Change</a> </span>`),$("[aria-sponsor]").click(()=>{m.modal({selector:"#mySubModal",autoClose:!1,content:`
        <div>
          <div class="form-group">
            <label>Username</label>
            <input class="my-2 form-control" value="`+F.user.username+`" type="text" name='sponsor[username]'></input>
            

            <button class="mt-4 btn btn-outline-primary checkUser">Check</button>
            <button class="mt-4 btn btn-primary disabled selectUser">Select this user</button>
          </div>
        </div>
        `,header:"Change Sponsor User"}),$(".checkUser").click(()=>{m.api("get_accumulated_sales",{parent_id:F.user.id,show_rank:!0,username:$("[name='sponsor[username]']").val()},()=>{window.sponsorTarget=F.user.username,$("input[name='user[sponsor]']").val(window.sponsorTarget),$(".selectUser").addClass("disabled")},n=>{$(".selectUser").removeClass("disabled"),$(".pv-info").customHtml("Accumulated sales PV: "+n[0]+" | Rank: "+n[1]),n[2].is_direct_downline?$(".to-upgrade").removeClass("disabled"):($("label[for='btnradio3']").click(),$(".to-upgrade").addClass("disabled")),n[3].is_downline||$("input[name='sponsor[username]']").val()==F.user.username?m.notify("User verified!"):(m.notify("Not downline!",{type:"warning"}),$(".selectUser").addClass("disabled"))})}),$(".selectUser").click(()=>{$("input[name='user[sponsor]']").val($("[name='sponsor[username]']").val()),$("input[name='view[sponsor]']").val($("[name='sponsor[username]']").val()),m.notify("User selected!"),$("#mySubModal").modal("hide"),window.sponsorTarget=$("[name='sponsor[username]']").val(),$("#sponsorTarget").html($("[name='sponsor[username]']").val()),C.components.cartItems(),console.info("need to check if member is direct sponsor")})})},stockistTarget(){window.stockistTarget==null&&(window.stockistTarget=F.user.username),$("input[name='user[stockist_user_id]']").val(""),$("stockistTarget").customHtml('<span>for: <span id="stockistTarget">'+window.stockistTarget+`</span>
     <a class="ms-4" href="javascript:void(0);" aria-stockist=true> <i class="fa fa-edit"></i> Change</a> </span>`),$("[aria-stockist]").click(()=>{m.modal({selector:"#mySubModal",autoClose:!1,content:`
        <div>
          <div class="form-group">
            <label>Username</label>
            <input class="my-2 form-control" value="`+F.user.username+`" type="text" name='sponsor[username]'></input>
            

            <button class="mt-4 btn btn-outline-primary checkUser">Check</button>
            <button class="mt-4 btn btn-primary disabled selectUser">Select this user</button>
          </div>
        </div>
        `,header:"Change Stockist User"}),$(".checkUser").click(()=>{m.api("get_stockist",{parent_id:F.user.id,show_rank:!0,username:$("[name='sponsor[username]']").val()},()=>{window.stockistTarget=F.user.username,$("input[name='user[stockist_user_id]']").val(null),$(".selectUser").addClass("disabled")},n=>{$(".selectUser").removeClass("disabled"),n[1].is_stockist?(window.stockistTargetData=n[2],$("input[name='user[stockist_user_id]']").val(window.stockistTargetData.id),m.notify("User verified!")):(m.notify("Not stockist!",{type:"warning"}),$(".selectUser").addClass("disabled"))})}),$(".selectUser").click(()=>{$("input[name='user[stockist]']").val($("[name='sponsor[username]']").val()),$("input[name='view[stockist]']").val($("[name='sponsor[username]']").val()),m.notify("User selected!"),$("#mySubModal").modal("hide"),window.stockistTarget=$("[name='sponsor[username]']").val(),$("#stockistTarget").html($("[name='sponsor[username]']").val()),C.components.cartItems()})})},salesItems(){var n=m.api("get_sale",{id:pageParams.id});n.status=="pending_payment"&&n.payment!=null,$("title").html("Order ID: "+n.id),window.sale=n;var t,e,s=[],r=0,i=0;r=n.sales_items.map((E,P)=>E.qty*E.item_pv).reduce((E,P)=>E+P,0),i=n.sales_items.map((E,P)=>E.qty*E.item_price).reduce((E,P)=>E+P,0),n.sales_items.map((E,P)=>E.qty).reduce((E,P)=>E+P,0);var a=n.shipping_fee||0,o=this.evalRank(i);try{t=JSON.parse(n.registration_details)}catch(E){console.error(E)}var l=!1;t.scope=="merchant_checkout"&&(r=n.total_point_value,l=!0),n.sales_items.forEach((E,P)=>{var O="/images/placeholder.png";if(E.img_url!=null)try{O=E.img_url}catch{O="/images/placeholder.png"}var R='  <span class="font-sm text-info "><span class="format-integer">'+E.item_pv*E.qty+"</span> PV</span>";l&&(R=""),s.push(`

          <div class="d-flex align-items-center justify-content-between gap-2">
            <div class="d-flex align-items-center justify-content-between gap-2">
              <div class="d-flex justify-content-center align-items-center " style="
                                cursor: pointer;   
                                position: relative; 
                                height: 60px;">
                <div class="rounded py-2" style="
                                height: 50px;
                                width: 72%;
                                filter: blur(4px);
                                position: absolute;
                                background-repeat: no-repeat;
                                background-position: center;
                                background-size: cover;
                                background-image: url('`+O+`');
                                bottom: 6px;
                                left: 16px;
                                ">
                </div>
                <div class="rounded py-2" style="
                                height: 50px;
                                width:  60px;
                                z-index: 1;
                                background-position: center;
                                background-repeat: no-repeat;
                                background-size: cover; 
                                background-image: url('`+O+`');
                                ">
                </div>
              </div>
              <div class="d-flex flex-column">
                <span>`+E.item_name+" <small>(x"+E.qty+`)</small></span>
                <div>`+E.remarks+`</div>
              </div>
            </div>
            <div class="d-flex flex-column flex-lg-row justify-content-between align-items-center">
              <div class="d-flex flex-column align-items-end">
                <span class="font-sm ">RP <span class="format-float">`+(E.item_price*E.qty).toFixed(2)+`</span></span>
              `+R+`
              </div>
             
            </div>
          </div>

        
          `)});var u="Total PV";l&&(u="RP Received");var d=`

             <div class="d-flex justify-content-between align-items-center">
                <span class="fs-4">Subtotal</span>
                <span class=" me-4">RP <span class="format-float">`+i+`</span></span>
              </div>
             <div class="d-flex justify-content-between align-items-center">
                <span class="fs-4">Shipping</span>
                <span class=" me-4">RP <span class="format-float">`+a+`</span></span>
              </div>
              <div class="d-flex justify-content-between align-items-center">
                <span class="fs-5">`+u+`</span>
                <span class="text-info me-4"><span class="format-integer">`+r+` PV</span></span>
              </div>
              <div class="d-flex justify-content-between align-items-center">
                <span class="fw-bold text-secondary">Eligible Rank</span>
                <span class="text-info me-4"><span class="format-integer">`+o+`</span></span>
              </div>

    `;try{e=t.user.shipping,console.log("shippnig..."),console.info(e),payment=n.payment}catch(E){console.error(E)}var h={};if(n.payment!=null){n.payment.payment_url!=null&&(d=`

               <div class="d-flex justify-content-between align-items-center">
                  <span class="fs-4">Subtotal</span>
                  <span class=" ">RP <span class="format-float">`+i+`</span></span>
                </div>
               <div class="d-flex justify-content-between align-items-center">
                  <span class="fs-4">Shipping</span>
                  <span class=" me-4">RP <span class="format-float">`+a+`</span></span>
                </div>
                <div class="d-flex justify-content-between align-items-center">
                  <span class="fs-5">`+u+`</span>
                  <span class="text-info "><span class="format-integer">`+r+` PV</span></span>
                </div>
                <div class="d-flex justify-content-between align-items-center">
                  <span class="fw-bold text-secondary">Eligible Rank</span>
                  <span class="text-info "><span class="format-integer">`+o+`</span></span>
                </div>
                <div class="d-flex justify-content-between align-items-center">
                  <span class="fw-bold text-secondary">Paid with</span>
                  <span class="text-primary "><span class="">`+payment.payment_method.split("_").map((E,P)=>ut.capitalize(E)).join(" ")+`</span></span>
                </div>
                <div class="d-flex justify-content-between align-items-center">
                  <span class="fw-bold text-secondary">Payment Link</span>
                  <span class="text-primary "><a target="_blank" href="`+payment.payment_url+'" class="">'+payment.payment_url+`</a></span>
                </div>

      `);try{if(console.info(n.payment),n.payment.webhook_details!=null){n.payment.webhook_details.split("|").map((E,P)=>{data=E.split(": ");var O=data[0].replace(" ","_");console.log(O),h[O]=parseFloat(data[1])}),console.info(h),drp_amount=0;var y="DRP";l&&(y="Merchant Point"),(h.drp_paid!=null||h.mp_paid!=null)&&(drp_amount=h.drp_paid,l&&(drp_amount=h.mp_paid)),h.pp_paid!=null&&(r=0);var g=r-drp_amount,w=i+a-drp_amount-(h.rp_paid||0),v=` <div class="d-flex justify-content-between align-items-center">
                  <span class="fw-bold text-secondary">Eligible Rank</span>
                  <span class="text-info "><span class="format-integer">`+o+`</span></span>
                </div>`;l&&(v="",g=r,w=i+a),d=`

               <div class="d-flex justify-content-between align-items-center">
                  <span class="fs-5">Subtotal</span>
                  <span class=" ">RP <span class="format-float">`+i+`</span></span>
                </div>
               <div class="d-flex justify-content-between align-items-center">
                  <span class="fs-5">Shipping + Tax</span>
                  <span class=" ">RP <span class="format-float">`+a+`</span></span>
                </div>

                <div class="d-flex justify-content-between align-items-center">
                  <span class="fs-5">`+y+`</span>
                  <span class=" ">- RP <span class="format-float">`+drp_amount+`</span></span>
                </div>

               <div class="d-flex justify-content-between align-items-center">
                  <span class="fs-5">Grand Total </span>
                  <span class=" ">RP <span class="format-float">`+(i+a)+`</span></span>
                </div>

                <div class="d-flex justify-content-between align-items-center">
                  <span class="fs-5">`+u+`</span>
                  <span class="text-info "><span class="format-integer">`+g+` PV</span></span>
                </div>
                <div class="d-flex justify-content-between align-items-center">
                  <span class="fs-4">Grand Total  After Payment</span>
                  <span class=" ">RP <span class="format-float">`+w+` </span></span>
                </div>

               `+v+`
                <div class="d-flex justify-content-between align-items-center">
                  <span class="fw-bold text-secondary">Paid with</span>
                  <span class="text-primary "><span class="">`+payment.payment_method.split("_").map((E,P)=>ut.capitalize(E)).join(" ")+`</span></span>
                        </div>

              `}}catch(E){console.error(E)}}var A="      ";try{e!=null?A=`
        <span class="text-secondary">Deliver To:</span> 
                         <span>`+e.line1+", "+e.line2+`</span>
                         <span>`+e.city+" "+e.postcode+", "+e.state+` </span>

    `:e={phone:null,fullname:null},n.pick_up_point!=null&&(A=`           <span class="text-secondary">Pick Up Point: </span>
                      <span>`+n.pick_up_point.name+` </span>
                    <span>`+n.pick_up_point.address+` </span>

        `)}catch(E){console.error(E)}console.info(A);var k='    <a class="btn btn-primary" href="/pdf?id='+n.id+'" target="_blank">Print</a>';n.payment==null&&n.status=="pending_payment"&&(k='<div class="btn btn-success approve-sale" aria-id="'+n.id+'">Approve</div>'),n.merchant_id!=null&&(k='   <a class="btn btn-primary" href="/pdf?type=merchant&id='+n.id+'" target="_blank">Print</a>  <a class="d-none mdo btn btn-primary" href="/pdf?type=merchant_do&id='+n.id+'" target="_blank">Print DO</a>'),console.info(n),$("salesItems").customHtml(`
      <div class="d-flex align-items-center justify-content-between gap-2">
        <h2>Sales Details</h2><small class="badge bg-primary">`+n.status+`</small>
      </div>
              <div class="d-flex flex-column mb-4 ">
                 <span class="text-secondary">Sold To:</span> 
                 <span>`+(t.user.fullname||m.user.fullname)+", "+(t.user.phone||m.user.phone)+`</span>
                 
              </div>
              <div class="d-flex flex-column mb-4 ">
                 <span class="text-secondary">Recipient:</span> 
                 <span>`+(e.fullname||m.user.fullname)+", "+(e.phone||m.user.phone)+`</span>
                 
              </div>


              <div class="d-flex flex-column mb-4 ">
               
                  `+A+`
              </div>

                 <span class="text-secondary">Items:</span>
              <div class="d-flex flex-column gap-2">`+s.join("")+`
              `+d+`
              </div>
              <div class="my-4">
            `+k+`
              </div>

      `),$(".approve-sale").click(function(){var E=$(this).attr("aria-id");m.modal({selector:"#mySubModal",content:`<div>

          <p>Approve this sale ?</p>

          <div class="btn btn-outline-primary confirm-approve">Approve</div>

          </div>`,header:"Confirmation",autoClose:!1}),$(".confirm-approve").click(()=>{m.api("manual_approve_bank_in",{id:E})},null,()=>{m.navigateTo(location.pathname)})}),ut.formatDate()},evalStates(){$("select[name='user[shipping][state]']").customHtml("<option></option>");var n=m.countries_.filter((e,s)=>e.name=="Malaysia")[0];try{if(n.id==m.chosen_country_id_.id){$("[name='user[pick_up_point_id]']").val()==null?$(".ss1").customHtml(`
                                    <select class="form-select" required id="s1" onchange="window.choosenAddress = null" name="user[shipping][state]">
                                    </select>
                                    <label class="ms-2" for="floatingInput">State</label>
                                `):$(".ss1").customHtml(`
                                        <select class="form-select"  id="s1" onchange="window.choosenAddress = null" name="user[shipping][state]">
                                        </select>
                                        <label class="ms-2" for="floatingInput">State</label>
                                    `);var t=[["jhr","Johor"],["kdh","Kedah"],["ktn","Kelantan"],["mlk","Melaka"],["nsn","Negeri Sembilan"],["phg","Pahang"],["prk","Perak"],["pls","Perlis"],["png","Pulau Pinang"],["sgr","Selangor"],["trg","Terengganu"],["kul","Kuala Lumpur"],["pjy","Putra Jaya"],["srw","Sarawak"],["sbh","Sabah"],["lbn","Labuan"]];t.forEach((e,s)=>{window.selectedState==e[1]?$("select[name='user[shipping][state]']").append(`
                                        <option selected value="`+e[1]+'">'+e[1]+"</option>"):$("select[name='user[shipping][state]']").append(`
                                        <option value="`+e[1]+'">'+e[1]+"</option>")}),$("select[name='user[shipping][state]']").change(()=>{window.selectedState=$("select[name='user[shipping][state]']").val(),C.components.updateCart(),C.components.cartItems()})}else $("[name='user[pick_up_point_id]']").val()==null?$(".ss1").customHtml(`
                                    <input class="form-control" required id="s1" onchange="window.choosenAddress = null" name="user[shipping][state]">
                                    </input>
                                    <label class="ms-2" for="floatingInput">State</label>
                                `):$(".ss1").customHtml(`
                                    <input class="form-control"  id="s1" onchange="window.choosenAddress = null" name="user[shipping][state]">
                                    </input>
                                    <label class="ms-2" for="floatingInput">State</label>
                                `)}catch(e){console.error(e)}},evalShipping(n){var t=C.cart_.map((e,s)=>e.qty*e.base_shipping_fee).reduce((e,s)=>e+s,0);return $("[name='user[pick_up_point_id]']").val()!=""&&(t=0),t},evalShippingLegacy(n){var t=$("cartItems").attr("merchant")=="",e=0,s=m.countries_.filter((i,a)=>i.name=="Malaysia")[0],r=m.countries_.filter((i,a)=>i.name=="Singapore")[0];return s.id==m.chosen_country_id_.id?$("[name='user[pick_up_point_id]']").val()!=""?e=0:["Sabah","Sarawak","Labuan"].includes(window.selectedState)?e=Math.ceil(n/200)*4:t?e=Math.ceil(n/200)*2:n>=100?e=0:e=2:(e=n*.1,r.id==m.chosen_country_id_.id&&(e=n*.05,t&&(e=n*.1))),e},evalShippingAddresses(){try{m.api("list_pick_up_point_by_country",{country_id:m.chosen_country_id_.id},null,n=>{if(m.pick_up_points=n,$("[name='user[pick_up_point_id]']").length>0&&$("[name='user[pick_up_point_id]']").val()!=""){var t=$("[name='user[pick_up_point_id]']").val(),e=m.pick_up_points.filter((r,i)=>r.id==t)[0];try{$("[name='user[shipping][state]']").removeAttr("required"),console.log("attr removed"),$(".self-pickup-form").customHtml(`
                 <div class="d-flex flex-column">
                    <span>`+e.name+`</span>
                    <span class="text-secondary">`+e.address+`</span>
                    <span class="mt-4">
                    </span>
                  </div>

          `)}catch{$(".shipping-form").removeClass("d-none"),$(".self-pickup-form").addClass("d-none"),m.notify("No pick up points in this region",{type:"danger"})}}var s=[];n.forEach((r,i)=>{s.push(`
            <div class="card my-2" style="cursor: pointer;">
              <div class="card-body">
                <div class="d-flex flex-column">
                  <span>`+r.name+`</span>
                  <span class="text-secondary">`+r.address+`</span>
                  <span class="mt-4">
                    <div class="btn btn-primary" aria-address="`+r.id+`">Choose</div>
                  </span>
                </div>
              </div>
            </div>
          `)}),$(".self-pickup").unbind(),$(".self-pickup").click(()=>{window.selectedState=null,$(".shipping-form").addClass("d-none"),$(".self-pickup-form").removeClass("d-none"),m.modal({autoClose:!1,selector:"#mySubModal",content:`
          <div class="d-flex flex-column">
            `+s.join("")+`
          </div>
          `,header:"Pick Up Points"}),$("[aria-address]").click(function(){var r=$(this).attr("aria-address"),i=m.pick_up_points.filter((a,o)=>a.id==r)[0];try{$("[name='user[shipping][state]']").removeAttr("required"),console.log("attr removed"),$(".self-pickup-form").customHtml(`
                 <div class="d-flex flex-column">
                    <span>`+i.name+`</span>
                    <span class="text-secondary">`+i.address+`</span>
                    <span class="mt-4">
                    </span>
                  </div>

          `)}catch{$(".shipping-form").removeClass("d-none"),$(".self-pickup-form").addClass("d-none"),m.notify("No pick up points in this region",{type:"danger"})}$("[name='user[pick_up_point_id]']").val(r),$("#mySubModal").modal("hide"),$("[name='user[shipping][state]']").val(null),C.components.cartItems()})})}),pageParams.share_code!=null||m.api("list_user_sales_addresses_by_username",{username:m.user.username},null,n=>{if(m.addresses=n,n.length>0&&window.choosenAddress!=null){var t=n.filter((s,r)=>s.id==window.choosenAddress)[0];$("[name='user[shipping][phone]']").val(t.phone),$("[name='user[shipping][fullname]']").val(t.fullname),$("[name='user[shipping][line1]']").val(t.line1),$("[name='user[shipping][line2]']").val(t.line2),$("[name='user[shipping][city]']").val(t.city),$("[name='user[shipping][postcode]']").val(t.postcode),setTimeout(()=>{$("[name='user[shipping][state]']").val(t.state)},500)}$(".change-address").unbind();var e=[];n.forEach((s,r)=>{e.push(`
            <div class="card my-2" style="cursor: pointer;">
              <div class="card-body">
                <div class="d-flex flex-column">
                  <span>`+s.fullname+`</span>
                  <span class="text-secondary">`+s.line1+", "+s.line2+`</span>
                  <span class="mt-4">
                    <div class="btn btn-primary" aria-address="`+s.id+`">Choose</div>
                  </span>
                </div>
              </div>
            </div>
          `)}),$(".change-address").click(()=>{$("[name='user[pick_up_point_id]']").val(""),$(".shipping-form").removeClass("d-none"),$(".self-pickup-form").addClass("d-none"),$("[name='user[shipping][state]']").attr("required"),console.log("attr add"),m.modal({autoClose:!1,selector:"#mySubModal",content:`
                                            <div class="d-flex flex-column">
                                                `+e.join("")+`
                                            </div>
                                            `,header:"Change address"}),$("[aria-address]").click(function(){var s=$(this).attr("aria-address");window.choosenAddress=s;var r=m.addresses.filter((i,a)=>i.id==s)[0];$("[name='user[shipping][phone]']").val(r.phone),$("[name='user[shipping][fullname]']").val(r.fullname),$("[name='user[shipping][line1]']").val(r.line1),$("[name='user[shipping][line2]']").val(r.line2),$("[name='user[shipping][city]']").val(r.city),$("[name='user[shipping][postcode]']").val(r.postcode),setTimeout(()=>{$("[name='user[shipping][state]']").val(r.state)},500),$("#mySubModal").modal("hide"),C.components.cartItems()})})})}catch(n){console.error(n)}},cartItems(){var n,t=$("cartItems").attr("merchant")=="";const e=t?C.mcart_:C.cart_;var s,r=!1,i=2,a=[],o=0,l=0;o=e.map((T,B)=>T.qty*T.point_value).reduce((T,B)=>T+B,0),l=e.map((T,B)=>T.qty*T.retail_price).reduce((T,B)=>T+B,0),t&&(o=l),e.map((T,B)=>T.qty).reduce((T,B)=>T+B,0),this.evalShippingAddresses(),this.evalStates(),$("cartItems").attr("upgrade")!=null?(window.upgradeTarget!=null?(n=m.api("get_accumulated_sales",{username:window.upgradeTarget}),l=l,s=this.evalRank(l+n)):(l=l,s=this.evalRank(l+F.user.rank.retail_price)),$(".only-downline").click(()=>{m.notify("Only available for direct recruited downline.")})):s=this.evalRank(l),i=this.evalShipping(l),e.forEach((T,B)=>{var L='<span class="font-sm text-info "><span class="format-integer">'+T.point_value*T.qty+"</span> PV</span>";t&&(L="");var Q="/images/placeholder.png";if(T.img_url!=null)try{Q=T.img_url}catch{Q="/images/placeholder.png"}var j="";if(e==C.cart&&parseInt(localStorage.first_cart_country_id)!=m.chosen_country_id_.id)j="border border-danger",a.push(`

                                    <div class="d-flex align-items-center justify-content-between gap-2 `+j+` rounded p-2 me-3">
                                    
                                        <div class="d-flex align-items-center justify-content-between gap-2">
                                        <div class="d-flex justify-content-center align-items-center " style="
                                                            cursor: pointer;   
                                                            position: relative; 
                                                            height: 60px;">
                                            <div class="rounded py-2" style="
                                                            height: 50px;
                                                            width: 72%;
                                                            filter: blur(4px);
                                                            position: absolute;
                                                            background-repeat: no-repeat;
                                                            background-position: center;
                                                            background-size: cover;
                                                            background-image: url('`+Q+`');
                                                            bottom: 6px;
                                                            left: 16px;
                                                            ">
                                            </div>
                                            <div class="rounded py-2" style="
                                                            height: 50px;
                                                            width:  60px;
                                                            z-index: 1;
                                                            background-position: center;
                                                            background-repeat: no-repeat;
                                                            background-size: cover; 
                                                            background-image: url('`+Q+`');
                                                            ">
                                            </div>
                                        </div>
                                        <span>`+T.name+" <small>(x"+T.qty+`)</small> <br><small> <i class="fa fa-exclamation-triangle text-danger "></i>Product not available for this region</small></span>
                                        </div>
                                        <div class="d-flex flex-column flex-lg-row justify-content-between align-items-center">
                                        
                                        <div class="text-center">
                                            <div class="btn btn-sm" delete-product-id="`+T.id+`"><i class="text-danger fa fa-times"></i></div>
                                        </div>
                                        </div>
                                    </div>

                                    
                                    `);else{T.override_pv&&(r=!0);var z='RP <span class="format-float">'+(T.retail_price*T.qty).toFixed(2);showRP==!1&&(z='MYR <span class="format-float">'+(T.retail_price*T.qty*m.chosen_country_id_.conversion).toFixed(2));var W="",at="";if(T.selectedInstalmentId!=null){var wt=T.selectedInstalment;try{at='<div class="text-sm text-secondary">'+wt.name+"</div>",W='<input type="hidden"  name="user[products]['+B+'][remarks]" value="instalment_product_id:'+T.selectedInstalmentId+'">'}catch(G){console.error(G)}}try{if($("input[name='user[instalment]']").val()!=null){var D=$("input[name='user[instalment]']").val();at=D}}catch(G){console.error(G)}a.push(`

            <div class="d-flex align-items-center justify-content-between gap-2 `+j+` rounded p-2 me-3">
            <input type="hidden"  name="user[products][`+B+'][item_name]" value="'+T.name+`">
            <input type="hidden"  name="user[products][`+B+'][item_price]" value="'+T.retail_price+`">
            <input type="hidden"  name="user[products][`+B+'][item_pv]" value="'+T.point_value+`">
            <input type="hidden"  name="user[products][`+B+'][img_url]" value="'+T.img_url+`">
            <input type="hidden"  name="user[products][`+B+'][qty]" value="'+T.qty+`">
            `+W+`
              <div class="d-flex align-items-center justify-content-between gap-2">
                <div class="d-flex justify-content-center align-items-center " style="
                                  cursor: pointer;   
                                  position: relative; 
                                  height: 60px;">
                  <div class="rounded py-2" style="
                                  height: 50px;
                                 width: 72%;
                                  filter: blur(4px);
                                  position: absolute;
                                  background-repeat: no-repeat;
                                  background-position: center;
                                  background-size: cover;
                                  background-image: url('`+Q+`');
                                  bottom: 6px;
                                  left: 16px;
                                  ">
                  </div>
                  <div class="rounded py-2" style="
                                  height: 50px;
                                  width:  60px;
                                  z-index: 1;
                                  background-position: center;
                                  background-repeat: no-repeat;
                                  background-size: cover; 
                                  background-image: url('`+Q+`');
                                  ">
                  </div>
                </div>
                <div class="d-flex flex-column">
                  <span>`+T.name+" <small>(x"+T.qty+`)</small></span>
                  `+at+`
                </div>
              </div>
              <div class="d-flex flex-column flex-lg-row justify-content-between align-items-center">
                <div class="d-flex flex-column align-items-end">
                  <span class="font-sm ">`+z+`</span></span>
                  `+L+`
                </div>
                <div class="text-center">
                  <div class="btn btn-sm" add-product-id="`+T.id+`"><i class="text-info fa fa-plus"></i></div>
                  <div class="btn btn-sm" minus-product-id="`+T.id+`"><i class="text-danger fa fa-minus"></i></div>
                  <div class="btn btn-sm" delete-product-id="`+T.id+`"><i class="text-danger fa fa-times"></i></div>
                </div>
              </div>
            </div>

          
            `)}});var u=!1;try{$("input[name='user[instalment]']").val()!=null&&(u=!0)}catch(T){console.error(T)}try{$("input[name='user[stockist_user_id]']").val()!=null&&(i=0)}catch(T){console.error(T)}u&&(i=0),console.log("merchant?"),console.log(t),t&&(i=l*.025,i=0);var d="RP",h=l+i,y=i,g=`

                <div class="d-flex justify-content-between align-items-center">
                  <span class="fw-bold text-secondary">Eligible Rank</span>
                  <span class="text-info me-4"><span class="format-integer">`+s+`</span></span>
                </div>

  `,w=`

    Total PV

  `,v='RP <span class="format-float">'+l;t&&(g="",w="RP received"),showRP||(v='MYR <span class="format-float">'+l*m.chosen_country_id_.conversion,y=i*m.chosen_country_id_.conversion,h=(l+i)*m.chosen_country_id_.conversion,d="MYR"),$("cartItems").customHtml(`

                <div class="d-flex flex-column gap-1">`+a.join("")+`
                  <div class="d-flex justify-content-between align-items-center">
                    <span class="fw-bold">Subtotal</span>
                    <span class=" me-4">`+v+`</span></span>
                  </div>
                  <div class="d-flex justify-content-between align-items-center">
                    <span class="fw-bold">Shipping_Tax</span>
                    <span class=" me-4">`+d+' <span class="format-float">'+y+`</span></span>
                  </div>

                  <div class="d-flex justify-content-between align-items-center">
                    <span class="fs-4">Grand Total</span>
                    <span class=" me-4">`+d+' <span class="format-float fs-4">'+h+`</span></span>
                  </div>
                <div class="d-flex justify-content-between align-items-center pv_label d-none">
                  <span class="fs-5">`+w+`</span>
                  <span class="text-info me-4"><span class="format-integer">`+o+` PV</span></span>
                </div>
                `+g+`

              </div>



      `);var A=F.user,k=[];A!=null&&(A.wallets==null?(k=m.api("user_wallet",{token:A.token}),A.wallets=k):k=A.wallets);function E(){k.length==0||$("wallet").each((T,B)=>{var L=k.filter((z,W)=>z.wallet_type=="direct_recruitment");if(t&&(L=k.filter((z,W)=>z.wallet_type=="merchant")),L.length>0){var Q=L[0];if(t)$("#drp_payment").attr("max",l*.2),$("#drp_payment").attr("min",0),$("#drp_payment").attr("step",.01),$("#drp_payment").attr("value",l*.2);else if(r){console.info("here ovier");var j=e.map((z,W)=>z.qty*z.retail_price*z.override_perc).reduce((z,W)=>z+W,0);$("#drp_payment").attr("min",Math.round(j)),$("#drp_payment").attr("value",Math.round(j))}else $("#drp_payment").attr("max",Q.total),$("#drp_payment").attr("min",Math.round(l*.5)),$("#drp_payment").attr("value",Math.round(l*.5))}})}$("input[name='user[payment][method]']").unbind(),$("input[name='user[payment][method]']").on("change",()=>{$("#coupon-detail").addClass("d-none"),$("input[name='user[payment][method]']").each((T,B)=>{$(B)[0].checked==!0&&(["register_point","merchant_point"].includes($(B).val())?($("#coupon-detail").removeClass("d-none"),P()):($("#drp_payment").removeAttr("max"),$("#drp_payment").removeAttr("min"),$("#drp_payment").removeAttr("value"),t?C.components.updateMCart():C.components.updateCart(),C.components.cartItems()))})});function P(){E();var T=0,B=2,L=0,Q=0;if($("#drp_payment").length>0)try{T=parseFloat($("#drp_payment").val())}catch{T=$("#drp_payment").val()}B=C.components.evalShipping(l),u&&(B=0),L=l+B-T,Q=o-T,t&&(B=l*.025,B=0,L=l+B,console.log("w"),Q=l-T+B);var j=`


                  <div class="d-flex justify-content-between align-items-center">
                    <span class="fw-bold">DRP</span>
                    <span class=" me-4">- RP <span class="format-float">`+T+`</span></span>
                  </div>
      `;t&&(j=`


                  <div class="d-flex justify-content-between align-items-center">
                    <span class="fw-bold">MP</span>
                    <span class=" me-4">- RP <span class="format-float">`+T+`</span></span>
                  </div>
        `),$("cartItems").customHtml(`

                <div class="d-flex flex-column gap-1">`+a.join("")+`
                  <div class="d-flex justify-content-between align-items-center">
                    <span class="fw-bold">Subtotal</span>
                    <span class=" me-4">RP <span class="format-float">`+l+`</span></span>
                  </div>
                  <div class="d-flex justify-content-between align-items-center">
                    <span class="fw-bold">Shipping_Tax</span>
                    <span class=" me-4">RP <span class="format-float">`+B+`</span></span>
                  </div>
                  `+j+`
                  <div class="d-flex justify-content-between align-items-center">
                    <span class="fs-4">Grand Total</span>
                    <span class=" me-4">RP <span class="format-float fs-4">`+L+`</span></span>
                  </div>

                  <div class="d-flex justify-content-between align-items-center pv_label d-none">
                    <span class="fs-5">`+w+`</span>
                    <span class="text-info me-4"><span class="format-integer">`+Q+` PV</span></span>
                  </div>
                 `+g+`
                </div>


        `),t&&$("cartItems").customHtml(`

                          <div class="d-flex flex-column gap-1">`+a.join("")+`
                            <div class="d-flex justify-content-between align-items-center">
                              <span class="fw-bold">Subtotal</span>
                              <span class=" me-4">RP <span class="format-float">`+l+`</span></span>
                            </div>
                            <div class="d-flex justify-content-between align-items-center">
                              <span class="fw-bold">Shipping_Tax</span>
                              <span class=" me-4">RP <span class="format-float">`+B+`</span></span>
                            </div>
                            `+j+`
                            <div class="d-flex justify-content-between align-items-center">
                              <span class="fs-4">Grand Total</span>
                              <span class=" me-4">RP <span class="format-float fs-4">`+Q+`</span></span>
                            </div>

                            <div class="d-flex justify-content-between align-items-center pv_label d-none">
                              <span class="fs-5">`+w+`</span>
                              <span class="text-info me-4"><span class="format-integer">`+Q+` PV</span></span>
                            </div>
                           `+g+`
                          </div>


                  `),ut.formatDate(),$("[add-product-id]").each((z,W)=>{var at=$(W).attr("add-product-id");function wt(){C.addItemById_(at,t),t?C.components.updateMCart():C.components.updateCart(),C.components.cartItems(),C.toastChanges()}$(W)[0].onclick=wt}),$("[minus-product-id]").each((z,W)=>{var at=$(W).attr("minus-product-id");function wt(){C.minusItem_(at,t),t?C.components.updateMCart():C.components.updateCart(),C.components.cartItems(),C.toastChanges()}$(W)[0].onclick=wt}),$("[delete-product-id]").each((z,W)=>{var at=$(W).attr("delete-product-id");function wt(){C.removeItem_(at,t),t?C.components.updateMCart():C.components.updateCart(),C.components.cartItems(),C.toastChanges()}$(W)[0].onclick=wt})}function O(T){$("#drp_payment").removeAttr("max"),$("#drp_payment").removeAttr("min"),$("#drp_payment").removeAttr("value"),P()}var R=document.getElementById("drp_payment");R!=null&&(R.removeEventListener("change",O),R.addEventListener("change",O)),$("[add-product-id]").each((T,B)=>{var L=$(B).attr("add-product-id");function Q(){C.addItemById_(L,t),t?C.components.updateMCart():C.components.updateCart(),C.components.cartItems(),C.toastChanges()}$(B)[0].onclick=Q}),$("[minus-product-id]").each((T,B)=>{var L=$(B).attr("minus-product-id");function Q(){C.minusItem_(L,t),t?C.components.updateMCart():C.components.updateCart(),C.components.cartItems(),C.toastChanges()}$(B)[0].onclick=Q}),$("[delete-product-id]").each((T,B)=>{var L=$(B).attr("delete-product-id");function Q(){C.removeItem_(L,t),t?C.components.updateMCart():C.components.updateCart(),C.components.cartItems(),C.toastChanges()}$(B)[0].onclick=Q}),$("input[name='user[payment][method]']").each((T,B)=>{$(B)[0].checked==!0&&(["register_point","merchant_point"].includes($(B).val())?($("#coupon-detail").removeClass("d-none"),P()):($("#drp_payment").removeAttr("max"),$("#drp_payment").removeAttr("min"),$("#drp_payment").removeAttr("value")))}),ut.formatDate()},evalRank(n){var t="n/a",e,s=[];return F.ranks.map((r,i)=>{s.push(r)}),s.sort((r,i)=>i.retail_price-r.retail_price),e=s.filter((r,i)=>r.retail_price<=n)[0],e&&(t=e.name,$("input[name='user[rank_id]']").length>0&&$("input[name='user[rank_id]']").val(e.id)),t},updateCart(){var n,t=0,e=[],s=0;s=C.cart_.map((u,d)=>u.qty*u.retail_price).reduce((u,d)=>u+d,0),t=C.cart_.map((u,d)=>u.qty).reduce((u,d)=>u+d,0),$(".bc").html(t),C.cart_.forEach((u,d)=>{var h='<div class="font-sm">RP <span class="font-sm format-float">'+(u.retail_price*u.qty).toFixed(2)+"</span></div>";showRP||(h='<div class="font-sm">MYR <span class="font-sm format-float">'+(u.retail_price*u.qty*m.chosen_country_id_.conversion).toFixed(2)+"</span></div>"),e.push(`

        <li><a class="dropdown-item" href="javascript:void(0);">
          <div style="width: 240px;" class="d-flex justify-content-between align-items-center">
            <span>`+u.name+" <small>(x"+u.qty+`)</small></span>
            <div class="d-flex align-items-center justify-content-between gap-2">
              `+h+`

              <div class="d-lg-block d-none">
                <div class="btn btn-sm" minus-product-id="`+u.id+`"><i class="text-danger fa fa-minus"></i></div>
                <div class="btn btn-sm" delete-product-id="`+u.id+`"><i class="text-danger fa fa-times"></i></div>
              </div>
              

            </div>
          </div>

        </a></li>

          `)}),e.length==0&&e.push(`

        <li><a class="dropdown-item" href="javascript:void(0);">Empty</a></li>

          `);var r,i=[],a=[];F.ranks.map((u,d)=>{a.push(u)}),a.sort((u,d)=>u.retail_price-d.retail_price),a.map((u,d)=>{i.push(`
        <div class="col ">
          <div class="d-flex flex-column">
            <span>`+u.name+`</span>
            <span class="format-float">`+u.retail_price+`</span>
            
          </div>
        </div>`)}),$("cartItems").attr("upgrade")!=null?(window.upgradeTarget!=null?(n=m.api("get_accumulated_sales",{username:window.upgradeTarget}),s=s,console.log(s),r=this.evalRank(s+n)):(s=s,console.log(s),r=this.evalRank(s+F.user.rank.retail_price)),$(".only-downline").click(()=>{m.notify("Only available for direct recruited downline.")})):(s=s,console.log(s),r=this.evalRank(s));var o=F.ranks.sort((u,d)=>u.retail_price-d.retail_price).findIndex(u=>u.name===r);console.log(o);var l=(o+1)*25;$(".ac").each((u,d)=>{var h=e.join("")+`
              <li id="divider">
                <hr class="dropdown-divider">
              </li>
             <li>                  

             <a class="dropdown-item navi" href="/upgrade">
                  <div class="d-flex flex-column">
                    <div class="d-flex justify-content-between align-items-center">
                      <span>Checkout</span>
                      <span class="format-float">`+s+`</span>
                    </div>
                 

                    <div class="d-flex justify-content-between align-items-center">
                      <small>Eligible</small>
                      <small class="text-info">`+r+`</small>
                    </div>

                    <div class="progress my-2" style="height: 4px;">
                      <div class="progress-bar bg-success" role="progressbar" style="width: `+l+'%;" aria-valuenow="'+l+`" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                    <div class="row text-sm">
                      `+i.join("")+`
                    </div>

                  
                  </div>
                </a>
              </li>`;$(d).html(h)}),$("[minus-product-id]").each((u,d)=>{var h=$(d).attr("minus-product-id");function y(){C.minusItem_(h),C.components.updateCart(),C.toastChanges()}$(d)[0].onclick=y}),$("[delete-product-id]").each((u,d)=>{var h=$(d).attr("delete-product-id");function y(){C.removeItem_(h),C.components.updateCart(),C.toastChanges()}$(d)[0].onclick=y}),ut.formatDate()},updateMCart(){var n=0,t=[],e=0;e=C.mcart_.map((s,r)=>s.qty*s.retail_price).reduce((s,r)=>s+r,0),n=C.mcart_.map((s,r)=>s.qty).reduce((s,r)=>s+r,0),$(".mbc").html(n),C.mcart_.forEach((s,r)=>{t.push(`

        <li><a class="dropdown-item" href="javascript:void(0);">
          <div style="width: 240px;" class="d-flex justify-content-between align-items-center">
            <span>`+s.name+" <br><small>(x"+s.qty+`)</small></span>
            <div class="d-flex align-items-center justify-content-between gap-2">
              <span class="font-sm format-float">`+(s.retail_price*s.qty).toFixed(2)+`</span>

           
              

            </div>
          </div>

        </a></li>

          `)}),t.length==0&&t.push(`

        <li><a class="dropdown-item" href="javascript:void(0);">Empty</a></li>

          `),$(".mac").each((s,r)=>{var i=t.join("")+`
              <li id="divider">
                <hr class="dropdown-divider">
              </li>
             <li>                  

             <a class="dropdown-item navi" href="/merchant_checkout">
                  <div class="d-flex flex-column">
                    <div class="d-flex justify-content-between align-items-center">
                      <span>Checkout</span>
                      <span class="format-float">`+e+`</span>
                    </div>
              
                  </div>
                </a>
              </li>`;$(r).html(i)}),$("[minus-product-id]").each((s,r)=>{var i=$(r).attr("minus-product-id");function a(){C.minusItem_(i,!0),C.components.updateMCart(),C.toastChanges()}$(r)[0].onclick=a}),$("[delete-product-id]").each((s,r)=>{var i=$(r).attr("delete-product-id");function a(){C.removeItem_(i,!0),C.components.updateMCart(),C.toastChanges()}$(r)[0].onclick=a}),ut.formatDate()},cart(){var n=0,t=[],e=0;e=C.cart_.map((o,l)=>o.qty*o.retail_price).reduce((o,l)=>o+l,0),n=C.cart_.map((o,l)=>o.qty).reduce((o,l)=>o+l,0),console.log("subtotal",e),console.log("count",n),C.cart_.forEach((o,l)=>{var u='<div class="font-sm">RP <span class="font-sm format-float">'+(o.retail_price*o.qty).toFixed(2)+"</span></div>";showRP||(u='<div class="font-sm">MYR <span class="font-sm format-float">'+(o.retail_price*o.qty*m.chosen_country_id_.conversion).toFixed(2)+"</span></div>"),t.push(`

                <li><a class="dropdown-item" href="javascript:void(0);">
                <div style="width: 240px;" class="d-flex justify-content-between align-items-center">
                    <span>`+o.name+" <small>(x"+o.qty+`)</small></span>
                    <div class="d-flex align-items-center justify-content-between gap-2">
                    `+u+`


                    <div class="d-lg-block d-none">
                        <div class="btn btn-sm" minus-product-id="`+o.id+`"><i class="text-danger fa fa-minus"></i></div>
                        <div class="btn btn-sm" delete-product-id="`+o.id+`"><i class="text-danger fa fa-times"></i></div>
                    </div>

                    </div>
                </div>

                </a></li>

                `)}),t.length==0&&t.push(`

                <li><a class="dropdown-item" href="javascript:void(0);">Empty</a></li>

                `);var s=[],r=[];F.ranks.map((o,l)=>{r.push(o)}),r.sort((o,l)=>o.retail_price-l.retail_price),r.map((o,l)=>{s.push(`
                <div class="col ">
                <div class="d-flex flex-column">
                    <span>`+o.name+`</span>
                    <span class="format-float">`+o.retail_price+`</span>
                    
                </div>
                </div>`)}),$("cartItems").attr("upgrade")!=null&&(e=e+F.user.rank.retail_price);var i=this.evalRank(e),a=e/(F.ranks.length>0?F.ranks[0].retail_price:1)*100;$("cart").each((o,l)=>{var u="dropstart";$(l).attr("dropup")!=null&&(u="dropup"),$(l).customHtml(`
                            <div class="`+u+`  ">
                                <div class="mx-3 py-2 btn btn-outline-light text-white rounded-xl position-relative"  data-bs-toggle="dropdown" aria-expanded="false">
                                <div style="top: 4px !important;" class="badge bg-warning position-absolute top-0 start-100 translate-middle bc">`+n+`</div>
                                <i class="fa fa-shopping-cart"></i>
                                </div>
                                <ul class="dropdown-menu dropdown-menu-end dropdown-menu-lg-start ac">
                                `+t.join("")+`
                                <li id="divider">
                                    <hr class="dropdown-divider">
                                </li>
                                <li>
                                    <a class="dropdown-item navi" href="/upgrade">
                                    <div class="d-flex flex-column">
                                        <div class="d-flex justify-content-between align-items-center">
                                        <span>Checkout</span>
                                        <span class="format-float">`+e+`</span>
                                        </div>
                                    

                                        <div class="d-flex justify-content-between align-items-center">
                                        <small>Eligible</small>
                                        <small class="text-info">`+i+`</small>
                                        </div>

                                        <div class="progress my-2" style="height: 4px;">
                                        <div class="progress-bar bg-success" role="progressbar" style="width: `+a+'%;" aria-valuenow="'+a+`" aria-valuemin="0" aria-valuemax="100"></div>
                                        </div>
                                        <div class="row text-sm">
                                        `+s.join("")+`
                                        </div>

                                    
                                    </div>
                                    </a>
                                </li>

                                </ul>
                            </div>
                        `)}),$("[minus-product-id]").each((o,l)=>{var u=$(l).attr("minus-product-id");function d(){C.minusItem_(u),C.components.updateCart()}$(l)[0].onclick=d}),$("[delete-product-id]").each((o,l)=>{var u=$(l).attr("delete-product-id");function d(){C.removeItem_(u),C.components.updateCart()}$(l)[0].onclick=d}),ut.formatDate()},mcart(){var n=0,t=[],e=0;e=C.mcart_.map((s,r)=>s.qty*s.retail_price).reduce((s,r)=>s+r,0),n=C.mcart_.map((s,r)=>s.qty).reduce((s,r)=>s+r,0),C.mcart_.forEach((s,r)=>{t.push(`

        <li><a class="dropdown-item" href="javascript:void(0);">
          <div style="width: 240px;" class="d-flex justify-content-between align-items-center">
            <span>`+s.name+"<br><small>(x"+s.qty+`)</small></span>
            <div class="d-flex align-items-center justify-content-between gap-2">
              <span class="font-sm format-float">`+(s.retail_price*s.qty).toFixed(2)+`</span>


            </div>
          </div>

        </a></li>

          `)}),t.length==0&&t.push(`

        <li><a class="dropdown-item" href="javascript:void(0);">Empty</a></li>

          `),$("mcart").each((s,r)=>{var i="dropstart";$(r).attr("dropup")!=null&&(i="dropup"),$(r).customHtml(`
          <div class="`+i+`  ">
            <div class="mx-3 py-2 btn btn-outline-danger rounded-xl position-relative"  data-bs-toggle="dropdown" aria-expanded="false">
              <div style="top: 4px !important;" class="badge bg-warning position-absolute top-0 start-100 translate-middle mbc">`+n+`</div>
              <i class="fa fa-shopping-cart"></i>
            </div>
            <ul class="dropdown-menu dropdown-menu-end dropdown-menu-lg-start mac">
              `+t.join("")+`
              <li id="divider">
                <hr class="dropdown-divider">
              </li>
              <li>
                <a class="dropdown-item navi" href="/merchant_checkout">
                  <div class="d-flex flex-column">
                    <div class="d-flex justify-content-between align-items-center">
                      <span>Checkout</span>
                      <span class="format-float">`+e+`</span>
                    </div>
                  </div>
                </a>
              </li>

            </ul>
          </div>
      `)}),$("[minus-product-id]").each((s,r)=>{var i=$(r).attr("minus-product-id");function a(){C.minusItem_(i,!0),C.components.updateMCart()}$(r)[0].onclick=a}),$("[delete-product-id]").each((s,r)=>{var i=$(r).attr("delete-product-id");function a(){C.removeItem_(i,!0),C.components.updateMCart()}$(r)[0].onclick=a}),ut.formatDate()},light(){$("light").customHtml(`
            <div class=" py-2 btn btn-outline-success rounded-xl position-relative light"  >
              <i class="fa fa-lightbulb far"></i>
            </div>
      `),$(".light").unbind(),$(".light").on("click",()=>{$("html").attr("data-bs-theme")=="light"?(localStorage.setItem("data-bs-theme","dark"),$("html").attr("data-bs-theme","dark")):(localStorage.setItem("data-bs-theme","light"),$("html").attr("data-bs-theme","light"))})},product(){$("product").customHtml(`
        <div class="text-center mt-4">
          <div class="spinner-border loading2" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
        </div>
          
      <div class="loading2 d-none" id="pcontent" />
      `),m.api("get_product",{id:pageParams.id},null,n=>{$("title").html(n.name);function t(){C.first_cart_country_id==null&&C.cart_.length==0&&(C.first_cart_country_id=m.chosen_country_id_.id,console.log("first country id is "+m.chosen_country_id_.id),localStorage.setItem("first_cart_country_id",m.chosen_country_id_.id)),console.info(check),n.countries.map((a,o)=>a.id).includes(parseInt(C.first_cart_country_id))?(C.addItem_(n),C.components.updateCart(),m.notify("Added "+n.name,{delay:2e3,type:"success",placement:{from:"top",align:"center"}}),m.toast({content:'<div class=""><ul class="">'+$(".ac").html()+"</ul></div>"})):C.first_cart_country_id==null?(C.addItem_(n),C.components.updateCart(),m.notify("Added "+n.name,{delay:2e3,type:"success",placement:{from:"top",align:"center"}}),m.toast({content:'<div class=""><ul class="">'+$(".ac").html()+"</ul></div>"})):m.notify("Not Added ! Please choose your region products.",{delay:2e3,type:"danger",placement:{from:"top",align:"center"}})}$(".spinner-border.loading2").parent().remove(),$(".loading2").removeClass("d-none");var e;if(n.img_url!=null)try{e=n.img_url}catch{e="/images/placeholder.png"}var s='<div class="font-sm fw-light text-secondary text-center ">RP <span class="format-float">'+n.retail_price+"</span></div>";includeShippingTax&&(s='<div class="font-sm fw-light text-secondary text-center "><span class="format-float">'+(n.retail_price+n.base_shipping_fee)+" </span> RP</div>"),showRP||(s='<div class="font-sm fw-light text-secondary text-center ">MYR <span class="format-float">'+n.retail_price*m.chosen_country_id_.conversion+"</span></div>",includeShippingTax&&(s='<div class="font-sm fw-light text-secondary text-center ">MYR <span class="format-float">'+n.retail_price*m.chosen_country_id_.conversion*1.1+"</span></div>",m.chosen_country_id_.name=="Singapore"&&(s='<div class="font-sm fw-light text-secondary text-center ">MYR <span class="format-float">'+n.retail_price*m.chosen_country_id_.conversion*1.05+"</span></div>")));var r='<div class="btn btn-outline-primary mt-4" product-id="'+n.id+'">Add</div>';if(n.instalment_packages.length>0){var i=[];n.instalment_packages.forEach((a,o)=>{c=`
            <div class=" col-12 col-lg-8 offset-lg-2 ">
              <div class="card m-4 p-4 ">
                <div class="d-flex justify-content-between align-items-center">
                  <div class="fs-4">`+a.name+`</div>
                  <span class="d-flex flex-column">
                    <div class="text-secondary">`+a.retail_price+` RP</div>
                    <div>`+a.point_value+` PV</div> 
                  </span>
                  <span><div class="btn btn-outline-primary" product-id="`+a.id+`">Choose</div></span>
                </div>
              </div>
            </div>

          `,i.push(c)}),r='<div class="row w-100">'+i.join("")+"</div>"}$("#pcontent").customHtml(`

      <div class="d-flex flex-column justify-content-center align-items-center ">
        <h2 id="ptitle">
        </h2>
            <div  class="d-flex justify-content-center p-4 " 
                style="
                  position: relative; 
                  width: 320px;
                  height: 340px;">
            <div class="rounded py-2" style="
                  height: 340px;
                  width: 88%;
                  filter: blur(4px);
                  position: absolute;
                  background-repeat: no-repeat;
                  background-position: center;
                  background-size: cover;
                  background-image: url('`+e+`');
                  top: 30px;
                  left: 20px;
                  ">
            </div>
            <div class="rounded py-2" style="
                  height: 340px;
                  width:  100%;
                  z-index: 1;
                  background-position: center;
                  background-repeat: no-repeat;
                  background-size: cover; 
                  background-image: url('`+e+`');
                  ">
            </div>
          </div>
        <div style="margin-top: 50px;">`+n.desc+`</div>
        `+s+`
        <div class="font-sm fw-light text-info text-center pv_label d-none">PV <span class="format-float">`+n.point_value+`</span></div>
        `+r+`
      </div>

      `),$("#ptitle").html(n.name);try{$("[product-id='"+n.id+"']")[0].onclick=t}catch{}})},products(){function n(s){var r="v2";return s=="Thailand"&&(r="th"),s=="Vietnam"&&(r="vn"),s=="China"&&(r="cn"),r}if(m.chosen_country_id_==null){var t=[];m.countries_.forEach((s,r)=>{t.push(`
                                <button type="button" aria-name="`+s.name+'" aria-country="'+s.id+'" class="btn btn-primary ">'+s.name+" "+(s.alias||"")+`</button>
                                `)}),m.modal({selector:"#mySubModal",content:`
                            <center>
                            <div class="btn-group-vertical">
                            `+t.join("")+`
                            </div>
                            </center>
                        `,header:"Choose region",autoClose:!1}),$("[aria-country]").unbind(),$("[aria-country]").click(function(){var s,r=$(this).attr("aria-country"),i=$(this).attr("aria-name");m.chosen_country_id_=r,m.notify("Chosen region: "+i),localStorage.setItem("region",i),setTimeout(()=>{$("#chosen-region").html(i)},1e3),localStorage.region!=null&&(s=n(i)),m.api("translation",{lang:s}),$("#mySubModal").modal("hide"),C.components.country(),pageParams.share_code!=null?m.api("get_share_link_by_code",{code:pageParams.share_code},null,a=>{C.components.cartItems(),m.navigateTo(location.pathname),$(".sponsor-name").customHtml("_sponsor: "+a.user.username+" _position: "+a.position),$(".sponsor-bank").html(`

                                <div class="d-flex justify-content-between align-items-center">
                                <span class="fw-bold">Bank Details</span>
                                <span class=" my-4 me-4 d-flex justify-content-end align-items-end gap-1 flex-column">
                                    <div>`+a.user.bank_name+`</div>
                                    <div>`+a.user.bank_account_holder+`</div>
                                    <div>`+a.user.bank_account_no+`</div>
                                </span>
                                </div>

                                `)}):m.navigateTo("/home")})}if(m.chosen_country_id_!=null){let s=function(r){var i=$(r).attr("product-id"),a=m.api("get_product",{id:i});try{C.first_cart_country_id==null&&C.cart_.length==0&&(C.first_cart_country_id=m.chosen_country_id_.id,console.log("first country id is "+m.chosen_country_id_.id),localStorage.setItem("first_cart_country_id",m.chosen_country_id_.id)),a.countries.map((o,l)=>o.id).includes(parseInt(C.first_cart_country_id))?(C.selectedInstalment=a,C.addItem_(a),C.components.updateCart(),C.components.cartItems(),m.notify("Added "+a.name,{delay:2e3,type:"success",placement:{from:"top",align:"center"}})):C.first_cart_country_id==null?(C.selectedInstalment=a,C.addItem_(a),C.components.updateCart(),C.components.cartItems(),m.notify("Added "+a.name,{delay:2e3,type:"success",placement:{from:"top",align:"center"}})):m.notify("Not Added ! Please choose your region products.",{delay:2e3,type:"danger",placement:{from:"top",align:"center"}})}catch(o){console.error(o)}};var e=s;$("products").each((r,i)=>{$(i).customHtml(`
                        <div class="text-center mt-4">
                            <div class="spinner-border loading" role="status">
                            <span class="visually-hidden">Loading...</span>
                            </div>
                        </div>
                            

                        <div class="row gx-0 d-none loading">
                            <div class="col-12 col-lg-10 offset-lg-1">
                            <div id="product_tab1"></div>
                            </div>
                        </div>
                        `).then(()=>{console.log("products loading?");var a=null,o="products",l=new Kr({onDrawFn:()=>{setTimeout(()=>{$("[product-id]").each((u,d)=>{d.onclick=()=>{s(d)}}),ut.formatDate(),$(".spinner-border.loading").parent().remove(),$(".loading").removeClass("d-none")},800)},xcard:u=>{var d=u.product,h="",y="/images/placeholder.png",g=`onclick="phxApp.navigateTo('/products/`+d.id+"/"+d.name+`')"`;if($(i).attr("direct")!=null&&(g="",h='<div class="btn btn-outline-primary mt-4" product-id="'+d.id+'">Add</div>'),d.img_url!=null)try{y=d.img_url}catch{y="/images/placeholder.png"}var w='<div class=" text-primary text-center ">RP <span class="format-float">'+d.retail_price+"</span></div>";includeShippingTax&&(w='<div class="text-white text-center "><span class="format-float">'+(d.retail_price+d.base_shipping_fee)+"</span> RP</div>"),showRP||(w='<div class="font-sm fw-light text-white text-center ">MYR <span class="format-float">'+d.retail_price*m.chosen_country_id_.conversion+"</span></div>",includeShippingTax&&(w='<div class="font-sm fw-light text-secondary text-center ">MYR <span class="format-float">'+d.retail_price*m.chosen_country_id_.conversion*1.1+"</span></div>",m.chosen_country_id_.name=="Singapore"&&(w='<div class="font-sm fw-light text-secondary text-center ">MYR <span class="format-float">'+d.retail_price*m.chosen_country_id_.conversion*1.05+"</span></div>")));var v=`
                                                            <div  class="m-2 d-flex flex-column gap-2" `+g+`>
                                                                <div  class="d-flex justify-content-center mb-4 py-4 background-p" 
                                                                    style="
                                                                        cursor: pointer;   
                                                                        position: relative; "
                                                                    >
                                                                <div class="rounded py-2 background-p" style="
                                                                    
                                                                        width: 80%;
                                                                        filter: blur(4px);
                                                                        position: absolute;
                                                                        background-repeat: no-repeat;
                                                                        background-position: center;
                                                                        background-size: cover;
                                                                        background-image: url('`+y+`');
                                                                        
                                                                        ">
                                                                </div>
                                                                <div class="rounded py-2 foreground-p" style="
                                                                    
                                                                        width:  100%;
                                                                        z-index: 1;
                                                                        background-position: center;
                                                                        background-repeat: no-repeat;
                                                                        background-size: contain; 
                                                                        background-image: url('`+y+`');
                                                                        ">
                                                                </div>
                                                                </div>
                                                                <div class="d-flex flex-column justify-content-center gap-2 mt-4">
                                                                <div class="font-sm fw-bold text-center">`+d.name+`</div>
                                                                <div class="d-flex flex-column justify-content-center ">
                                                                    `+w+`
                                                                    <div class="font-sm fw-light text-info text-center pv_label d-none">PV <span class="format-float">`+d.point_value+`</span></div>
                                                                </div>
                                                                `+h+`

                                                            
                                                                </div>
                                                            </div>
                                                            `;return v},data:{pageLength:12,sorts:[[2,"desc"]],additional_join_statements:[{product:"product"}],additional_search_queries:["b.is_instalment=false"],country_id:m.chosen_country_id_.id,preloads:["product"],grid_class:"col-6 col-lg-3",dom:`

                                                    <"row px-4"
                                                    <"col-lg-6 col-12"i>
                                                    <"col-12 col-lg-6">
                                                    >
                                                    <"row grid_view ">
                                                    <"list_view d-none"t>
                                                    <"row transform-75 px-4"
                                                    <"col-lg-6 col-12">
                                                    <"col-lg-6 col-12"p>
                                                    >

                                                `},columns:[{label:"id",data:"id"},{label:"product_id",data:"product_id"},{label:"Action",data:"id"}],moduleName:"ProductCountry",link:"ProductCountry",customCols:a,buttons:[],tableSelector:"#"+o});l.load(o,"#product_tab1")})})}},announcement(){try{$(".anc").slick("destroy")}catch{}$("announcement").customHtml(`
      <div class="spinner-border" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
      `),m.api("announcements",{},null,n=>{$("announcement").customHtml(""),n.forEach((t,e)=>{function s(){m.modal({selector:"#mySubModal",content:t.content,autoClose:!1,header:t.title})}var r=t.img_url,i=`
          <div class="d-flex flex-column align-items-center" >

            <div class="d-flex justify-content-center " style="cursor: pointer;   
            position: relative; height: 240px;" announcement-id="`+t.id+`">
              <div class="sub rounded py-2" style="
               
                  position: absolute;
                  filter: blur(10px); 
                              background-repeat: no-repeat;
                  background-position: center;
                  background-size: contain; 
                  background-image: url('`+r+`');
                 ">
              </div>
              <div class="su rounded py-2" style="
            
           

                  background-position: center;
                  background-repeat: no-repeat;
                  background-size: cover; 
                  background-image: url('`+r+`');
                  z-index: 1;
                  top: 16px;
                  position: absolute;">
              </div>
            </div>
            <span class="mt-3">`+t.title+`</span>
            <small>`+t.subtitle+`</small>
            
          </div>

        `;$("announcement").append(i),$("[announcement-id='"+t.id+"']")[0].onclick=s})}),$(".anc").slick()},bonusLimit(){m.api("get_bonus_limit",{token:F.user.token},null,n=>{var t=Number(n.limit)||0,e=Number(n.accumulated)||0,s=Math.max(0,t-e),r=t>0?Math.min(100,Math.round(e/t*100)):0;$("bonusLimit").customHtml(`
                <div class="d-flex flex-column gap-2">
                  <span> Remaining bonus: <span class="">`+s+`</span> BP</span>
                  <div class="progress" role="progressbar" aria-valuenow="`+r+`" aria-valuemin="0" aria-valuemax="100">
                    <div class="progress-bar progress-bar-striped progress-bar-animated" style="width: `+r+`%;"></div>
                  </div>
                  <span>Please repurchase package, to increase earning limit.</span>
                </div>
              `)})},rewardList(){$("rewardList").each((n,t)=>{$(t).customHtml(`
        <div class="text-center mt-4">
          <div class="spinner-border loading" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
        </div>
          

        <div class="row gx-0 d-none loading">
          <div class="col-12">
            <div id="tab`+n+`">No rewards</div>
          </div>
        </div>
      `);var e=$(t).attr("prev")!=null;console.log(e),m.api("get_reward_summary",{user_id:F.user.id,is_prev:e},null,s=>{$(".spinner-border.loading").parent().remove(),$(".loading").removeClass("d-none");var r=["sharing bonus","team bonus","matching bonus","elite leader","travel fund","repurchase bonus","drp sales level bonus","stockist register bonus","merchant sales level bonus","biz incentive bonus","matching biz incentive bonus"],i=[];r.forEach((a,o)=>{s.forEach((l,u)=>{a==l.name&&i.push(`

                                  <div class="my-2 d-flex align-items-center justify-content-between">

                                    <span class="fs-5">
                                      `+ut.capitalize(l.name)+`
                                    </span>
                                    <span class="d-flex justify-content-between gap-2 align-items-center">
                                      <span class="format-float">
                                        `+l.sum+`
                                      </span>
                                      <a href="/reward_details/`+l.name+"/"+l.period[0]+"/"+l.period[1]+`" class="navi btn btn-primary btn-sm">
                                      <i class="fa fa-info"></i>
                                      </a>
                                    </span>
                                  </div>


                              `)})}),$("#tab"+n).customHtml(""+i.join("")),phxApp.formatDate()})})},rewardSummary(){$("rewardSummary").each((n,t)=>{$(t).customHtml(`
                    <div class="text-center mt-4">
                      <div class="spinner-border loading" role="status">
                        <span class="visually-hidden">Loading...</span>
                      </div>
                    </div>
                      

                    <div class="row gx-0 d-none loading">
                      <div class="col-12">
                        <div id="tabw`+n+`">No rewards</div>
                      </div>
                    </div>
                  `);var e=!1;console.log(e),m.api("get_reward_summary_by_years",{user_id:F.user.id},null,s=>{var r=[];$(".spinner-border.loading").parent().remove(),$(".loading").removeClass("d-none"),console.log("testst");var i=Object.keys(s.years);i.forEach((a,o)=>{r.push(`

                                  <div class="my-2 d-flex align-items-center justify-content-between">

                                    <span class="fs-5">
                                      `+a+`
                                    </span>
                                    <span class="d-flex justify-content-between gap-2 align-items-center">
                                      <div>
                                      <span class="format-float">
                                        `+s.years[a][0].sum+` 
                                      </span>
                                      BP
                                        </div>
                                        <a class="btn btn-primary btn-sm" target="_blank" href="/pdf?type=commission&id=`+F.user.id+"&year="+a+`">
                                        Download
                                      </a>
                                    </span>
                                  </div>


                              `)}),console.info(r),$("#tabw"+n).customHtml(""+r.join("")),phxApp.formatDate()})})},wallet(){if(F.user!=null){var n=F.user,t=m.api("user_wallet",{token:n.token});t.length==0?$("wallet").parent().customHtml('<div class="p-4">Wallet info expired</div>'):$("wallet").each((e,s)=>{var r=t.filter((u,d)=>u.wallet_type==$(s).attr("aria-data"));if(r.length>0){var i=r[0],a="PTS",o=$(s).attr("aria-data").split("_").map((u,d)=>ut.capitalize(u)).join(" "),l=o.split(" ").map((u,d)=>u.split("")[0].toUpperCase()).join("")+"P";o=="Asset"?(o="Asset Token",l="TK",a="TK"):o=="Active Token"?(l="ATK",a="ATK"):o=="Bonus"&&(a="USDT"),$(s).customHtml(`
            <a href="/wallets/`+i.id+`" class="navi" >

            <div class=" card mb-3 mb-lg-0">
 
              <div class="card-body p-1 py-2 " style="width: 220px;">
                <div class="d-flex gap-1 align-items-center">
                  <div wallet-id="`+i.id+`" class="d-none d-lg-block mx-2 py-2 btn btn-outline-success rounded-xl">
                    <i class=" fa fa-dollar-sign "></i>
                  </div>
                  <div class="ps-2 ps-lg-0">
                    <span class="text-sm text-secondary text-truncate">`+o+", <b>"+l+`</b></span>
                    <div class="d-flex align-items-center gap-2">
                      <div class="fs-4 format-int" style="">`+i.total+`</div>
                      <small>${a}</small>
                    </div>
                  </div>
                </div>
              </div>

        
            </div>
            </a>

        `)}}),ut.formatDate()}},primaryBuy(){function n(e){if(!e||!e.lines){$("#quote-summary").html("No quote yet."),$("#quote-lines").html("");return}if($("#quote-summary").html(`Filled Qty: <b>${e.filled_qty}</b> • Total Cost: <b>${e.total_cost}</b>`),e.lines.length===0){$("#quote-lines").html("");return}var s=e.lines.map(r=>`
              <tr>
                <td>#${r.seq}</td>
                <td class="text-end">${r.qty}</td>
                <td class="text-end">${r.unit_price}</td>
              </tr>sudo /netsphere/bin/commerce_front 
            `).join("");$("#quote-lines").html(`
              <div class="table-responsive">
                <table class="table table-sm">
                  <thead>
                    <tr><th>Tranche</th><th class="text-end">Qty</th><th class="text-end">Unit Price</th></tr>
                  </thead>
                  <tbody>${s}</tbody>
                </table>
              </div>
            `)}$(document).on("click","#btn-quote",function(){var e=parseInt($("#asset_id").val()||"0"),s=$("#qty").val()||"0";m.api("primary_buy_quote",{asset_id:e,qty:s},null,function(r){n(r)})});let t="";$(document).on("click","#btn-execute",function(){var e=parseInt($("#asset_id").val()||"0"),s=$("#qty").val()||"0",r=crypto.randomUUID?crypto.randomUUID():Date.now().toString(36)+Math.random().toString(36).slice(2);m.post("primary_buy_execute",{token:m.user&&m.user.token,asset_id:e,qty:s,idempotency_key:r},null,function(i){$("#result-card").removeClass("d-none"),i.status==="ok"?$("#result-summary").html(`Order #${i.order_id} • Filled: ${i.filled_qty} • Paid: ${i.total_cost} • Status: ${i.status2}`):$("#result-summary").html(`<span class="text-danger">${i.reason||"Error"}</span>`)})}),m.api("list_assets",{token:m.user&&m.user.token},null,function(e){t=e.map(s=>`<option value="${s.id}">${s.name}</option>`).join("")}),$("primaryBuy").customHtml(`
                            <div class="card">
                                <div class="card-body">
                                    <div class="row g-2">
                                        <div class="col-12">
                                            <label class="form-label">Asset ID</label>
                                            <select class="form-control" id="asset_id">
                                                <option value="0">Select Asset</option>
                                                `+t+`
                                            </select>
                                        </div>
                                        <div class="col-12">
                                            <label class="form-label">Quantity</label>
                                            <input type="number" class="form-control" id="qty" placeholder="100000" />
                                        </div>
                                        <div class="col-12 d-flex gap-2">
                                            <button id="btn-quote" class="btn btn-outline-primary">Quote</button>
                                            <button id="btn-execute" class="btn btn-primary">Buy</button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="card mt-4">
                                <div class="card-body">
                                    <h5 class="card-title">Quote</h5>
                                    <div id="quote-summary" class="text-secondary">No quote yet.</div>
                                    <div id="quote-lines" class="mt-3"></div>
                                </div>
                            </div>

                            <div class="card d-none mt-4" id="result-card">
                                <div class="card-body">
                                    <h5 class="card-title">Result</h5>
                                    <div id="result-summary"></div>
                                </div>
                            </div>
        `)},secondaryBuy(){function n(i){if(!i){$("#market-depth").html("Loading market data...");return}let a=i.sell_orders.map(l=>{let u="";return m.user&&m.user.id&&m.user.id==l.user.id&&(u=`<div class="btn btn-sm btn-danger cancel-order" id="cancel-sell-${l.id}" style="padding: 4px 12px !important;">Cancel</div>`),`
            <tr>
              <td class="text-end">${Number(l.quantity).toFixed(2)}</td>
              <td class="text-end text-danger">${Number(l.price_per_unit).toFixed(5)}</td>
              <td class="text-end">${l.user.username}</td>
              <td>

                ${u}
              </td>
            </tr>
          `}).join(""),o=i.buy_orders.map(l=>`
            <tr>
              <td class="text-end">${Number(l.quantity).toFixed(2)}</td>
              <td class="text-end text-success">${Number(l.price_per_unit).toFixed(5)}</td>
              <td class="text-end">${l.user.username}</td>
              <td></td>
            </tr>
          `).join("");$("#market-depth").html(`
            <div class="row">
              <div class="col-12 col-lg-6">
                <h6 class="text-danger">Sell Orders</h6>
                <div class="table-responsive">
                  <table class="table table-sm table-striped">
                    <thead>
                      <tr><th class="text-end">Qty</th><th class="text-end">Price</th><th class="text-end">User</th><td></td></tr>
                    </thead>
                    <tbody>${a||'<tr><td colspan="4" class="text-center text-muted">No sell orders</td></tr>'}</tbody>
                  </table>
                </div>
              </div>
              <div class="col-12 col-lg-6">
                <h6 class="text-success">Buy Orders</h6>
                <div class="table-responsive">
                  <table class="table table-sm table-striped">
                    <thead>
                      <tr><th class="text-end">Qty</th><th class="text-end">Price</th><th class="text-end">User</th><td></td></tr>
                    </thead>
                    <tbody>${o||'<tr><td colspan="4" class="text-center text-muted">No buy orders</td></tr>'}</tbody>
                  </table>
                </div>
              </div>
            </div>
          `)}function t(i){m.post("cancel_order",{token:m.user&&m.user.token,order_id:i,user_id:m.user&&m.user.id},null,function(a){a.status==="ok"?($("#mySubModal").modal("hide"),$("#cancel-sell-"+i).remove(),m.notify("Sell order cancelled successfully")):m.notify("Failed to cancel sell order",{type:"danger"})})}$(document).on("click",".cancel-order",function(){var i=$(this).attr("id").split("-")[2];m.modal({selector:"#mySubModal",content:`
              <center>
              <p>Cancel this order?</p>
                <div class="btn-group-vertical">
                    <button class="btn btn-danger" id="btn-cancel-sell-${i}">Cancel</button>
                </div>
              </center>
            `,header:"Cancel Order",autoClose:!1}),$(document).on("click","#btn-cancel-sell-"+i,function(){t(i)})});function e(i){if(!i||i.length===0){$("#recent-trades").html('<div class="text-center text-muted">No recent trades</div>');return}let a=i.map(o=>`
            <tr>
              <td>${new Date(o.trade_date).toLocaleString()}</td>
              <td class="text-end">${Number(o.quantity).toFixed(2)}</td>
              <td class="text-end">${o.price_per_unit}</td>
              <td class="text-end">${Number(o.total_amount).toFixed(2)}</td>
              <td class="text-end">${o.buyer.username}</td>
              <td class="text-end">${o.seller.username}</td>
            </tr>
          `).join("");$("#recent-trades").html(`
            <div class="table-responsive">
              <table class="table table-sm table-striped">
                <thead>
                  <tr>
                    <th>Time</th>
                    <th class="text-end">Qty</th>
                    <th class="text-end">Price</th>
                    <th class="text-end">Total</th>
                    <th class="text-end">Buyer</th>
                    <th class="text-end">Seller</th>
                  </tr>
                </thead>
                <tbody>${a}</tbody>
              </table>
            </div>
          `)}function s(){var i=parseInt($("#sm_asset_id").val()||"0");i>0?(m.api("get_market_depth",{asset_id:i},null,function(a){n(a)}),m.api("get_recent_trades",{asset_id:i},null,function(a){e(a)})):($("#market-depth").html(""),$("#recent-trades").html(""))}$(document).on("change","#sm_asset_id",function(){var i=parseInt($(this).val()||"0");i>0?(m.api("get_market_depth",{asset_id:i},null,function(a){n(a)}),m.api("get_recent_trades",{asset_id:i},null,function(a){e(a)})):($("#market-depth").html(""),$("#recent-trades").html(""))}),$(document).on("click","#btn-create-sell",function(){var i=parseInt($("#sm_asset_id").val()||"0"),a=parseFloat($("#sm_sell_qty").val()||"0"),o=parseFloat($("#sm_sell_price").val()||"0");if(i===0||a<=0||o<=0){alert("Please fill in all fields with valid values");return}m.api("create_sell_order",{token:m.user&&m.user.token,asset_id:i,quantity:a,price_per_unit:o},null,function(l){l.status==="ok"?(m.notify("Sell order created successfully! Order ID: "+l.res.id),$("#sm_asset_id").trigger("change"),$("#sm_sell_qty, #sm_sell_price").val("")):$("#sell-result").html(`<div class="alert alert-danger">Error: ${l.reason||"Failed to create sell order"}</div>`)})}),$(document).on("click","#btn-create-buy",function(){var i=parseInt($("#sm_asset_id").val()||"0"),a=parseFloat($("#sm_buy_qty").val()||"0"),o=parseFloat($("#sm_buy_price").val()||"0");if(i===0||a<=0||o<=0){alert("Please fill in all fields with valid values");return}m.api("create_buy_order",{token:m.user&&m.user.token,asset_id:i,quantity:a,price_per_unit:o},null,function(l){l.status==="ok"?($("#buy-result").html(`<div class="alert alert-success">Buy order created successfully! Order ID: ${l.order_id}</div>`),$("#sm_asset_id").trigger("change"),$("#sm_buy_qty, #sm_buy_price").val("")):$("#buy-result").html(`<div class="alert alert-danger">Error: ${l.reason||"Failed to create buy order"}</div>`)})});let r="";m.api("list_assets",{token:m.user&&m.user.token},null,function(i){r=i.map(a=>`<option value="${a.id}">${a.name}</option>`).join("")}),$("secondaryBuy").customHtml(`
          <div class="row">
            <div class="col-12">
              <div class="card mb-3">
                <div class="card-header">
                  <h5 class="card-title mb-0">Profit Board</h5>
                  <small class="text-muted">Trade your staked assets with other users</small>
                </div>
                <div class="card-body">
                  <div class="row g-3">
                    <div class="col-12">
                      <label class="form-label">Select Asset</label>
                      <select class="form-select" id="sm_asset_id">
                        <option value="0">Choose an asset to trade</option>
                        ${r}
                      </select>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-12 col-lg-6">
              <div class="card mb-3">
                <div class="card-header">
                  <h6 class="card-title mb-0 text-danger">Create Sell Order</h6>
                  <small class="text-muted">Sell your active tokens for cash</small>
                </div>
                <div class="card-body">
                  <div class="row g-2">
                    <div class="col-12">
                      <label class="form-label">Quantity</label>
                      <input type="number" class="form-control" id="sm_sell_qty" placeholder="Enter quantity" step="0.01" />
                    </div>
                    <div class="col-12">
                      <label class="form-label">Price per Unit</label>
                      <input type="number" class="form-control" id="sm_sell_price" placeholder="Enter price per unit" step="0.01" />
                    </div>
                    <div class="col-12">
                      <button id="btn-create-sell" class="btn btn-danger w-100">Create Sell Order</button>
                    </div>
                  </div>
                  <div id="sell-result" class="mt-2"></div>
                </div>
              </div>
            </div>
            
            <div class="col-12 col-lg-6">
              <div class="card mb-3">
                <div class="card-header">
                  <h6 class="card-title mb-0 text-success">Create Buy Order</h6>
                  <small class="text-muted">Buy active tokens with cash</small>
                </div>
                <div class="card-body">
                  <div class="row g-2">
                    <div class="col-12">
                      <label class="form-label">Quantity</label>
                      <input type="number" class="form-control" id="sm_buy_qty" placeholder="Enter quantity" step="0.01" />
                    </div>
                    <div class="col-12">
                      <label class="form-label">Price per Unit</label>
                      <input type="number" class="form-control" id="sm_buy_price" placeholder="Enter price per unit" step="0.01" />
                    </div>
                    <div class="col-12">
                      <button id="btn-create-buy" class="btn btn-success w-100">Create Buy Order</button>
                    </div>
                  </div>
                  <div id="buy-result" class="mt-2"></div>
                </div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-12">
              <div class="card mb-3">
                <div class="card-header">
                  <h6 class="card-title mb-0">Market Depth</h6>
                  <small class="text-muted">Current buy and sell orders</small>
                </div>
                <div class="card-body">
                  <div id="market-depth" class="text-center text-muted">Select an asset to view market depth</div>
                </div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-12">
              <div class="card">
                <div class="card-header">
                  <h6 class="card-title mb-0">Recent Trades</h6>
                  <small class="text-muted">Latest completed trades</small>
                </div>
                <div class="card-body">
                  <div id="recent-trades" class="text-center text-muted">Select an asset to view recent trades</div>
                </div>
              </div>
            </div>
          </div>
        `),$("select#sm_asset_id").val(1),s()},assetTranches(){$("assetTranches").customHtml(`
            <div class="row">
              <div class="col-12">
                <div class="card mb-3">
                  <div class="card-body">
                    <div id="asset-tranches" class="text-center text-muted">Loading asset tranches...</div>
                  </div>
                </div>
              </div>
            </div>
          `),m.api("secondary_qty_by_price_with_tranche",{token:m.user&&m.user.token},null,function(n){let t=[];n.forEach(e=>{t.push(`
                    <tr>
                        <td>#${e.seq}</td>
                        <td>${e.unit_price}</td>
                           <td>${e.total_quantity}</td>
                        <td>${Number(e.total_quantity-e.total_traded).toFixed(2)}</td>
                     
                        <td>${Number(e.company_traded).toFixed(2)}</td>
                        <td>${Number(e.member_traded).toFixed(2)}</td>
                     
                        
                        
                    </tr>
                `)}),$("assetTranches").customHtml(`
            <div class="row">
                <div class="col-12">
                    <div class="card mb-3">
                        <div class="card-header">
                            <h6 class="card-title mb-0">Profit Board</h6>
                            <small class="text-muted">Current tranches</small>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead class="table-light">
                                        <tr>
                                            <th scope="col">Tranche</th>
                                             <th scope="col">Unit Price</th>
                                            <th scope="col">Total Quantity</th>
                                            <th scope="col">Balance</th>
                                            <th scope="col">Company Traded</th>
                                            <th scope="col">Members Traded</th>
                                            
                                            
                                           
                                            
                                        </tr>
                                    </thead>
                                    <tbody>
                                        `+t.join("")+`
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            `)})},userProfile(){var n=F.user;if(n){var t=["Bronze","Silver","Gold","Diamond","Shopper"],e=["Bronze","Silver","Gold","Diamond","Shopper"],s=n.rank!=null?n.rank.name:n.rank_name,r=t[e.indexOf(s)];m.chosen_country_id_.name=="China"&&(r=s);var i=n!=null?'Welcome! <a href="/profile" class="navi">'+n.fullname+" ("+r+")</a>":'<a href="/login" class="navi">Login</a>';$("userProfile").customHtml(`
          
            `+i+`
         
      `)}else $("userProfile").customHtml(`
          
          <a href="/login" class="navi">Login</a>
         
      `)}}};window.commerceApp=C;const Xm="localhost:4700",tg="http://";let m={endpoint:tg+Xm,Page:{createTable(n,t){var e=`
            <div class="table-responsive">
                <table class="table"  style="width: 100%;" id="`+n+`">
                    <thead></thead>
                    <tbody></tbody>
                </table>
            </div>
    `;$(t).append(e)}},chosen_country_id_:null,countries_:[],route_names:[{html:"landing.html",title:"Home",route:"/home",public:!0}],render(n){C.components[n]()},rowData(n){var t=n.dataSource;window.currentSelector=t.tableSelector;var e=t.table;e.row(n.row);var s=e.data()[n.index];return s},override(n){F.override(n)},updateUser(n){F.updateUser(n)},login(n){F.login(n)},logout(){F.logout()},user:null,addItem(n){var t=m.api("get_product",{id:n});t.payInstalment=!0,C.addItem_(t),C.components.updateCart(),C.components.cartItems()},filterItemsByName(n){return C.filterItemsByName(n)},hasCartItems(){return console.log("checking..."),console.log(C.hasCartItems()),C.hasCartItems()>0},merchantCheckout(n){F.merchantCheckout(n)},redeem(n){F.redeem(n)},upgrade(n){F.upgrade(n)},linkRegister(n){F.linkRegister(n)},register(n){F.register(n)},formatDate(){ut.formatDate()},ping(){console.log("tell ping o")},reinit(){$(".dataTable").each((n,t)=>{if(t.offsetParent!=null){var e=window.phoenixModels.filter((s,r)=>s.tableSelector=="#"+t.id)[0];e.reload()}})},evalTitle(n){if(localStorage.getItem("default-lang")=="cn")switch(n.replace(" ","")){case"Home":n="首页";break;case"Profile":n="个人";break;case"Upgrade":n="升级";break;case"Restocks":n="朴货";break;case"Registrations":n="审核";break;case"Sales":n="业绩";break;case"Commissions":n="佣金";break;default:n=n}return n},async navigateTo(n,t){n==null&&(n=window.location.pathname);var e=n.split("/").filter((g,w)=>g!=""),s=this.route_names.filter((g,w)=>{var v=g.route.split("/").filter((A,k)=>A!="");return v[v.length-1].includes(":")?v.length==e.length:v.length==e.length&&v[v.length-1]==e[v.length-1]}),r=s.filter((g,w)=>{var v=g.route.split("/").filter((A,k)=>A!="");return v[0]==e[0]});if(this.hide(),F.restoreUser(),r.length>0){var i={};if(r.forEach((g,w)=>{g.route.split("/").forEach((v,A)=>{v.includes(":")&&(i[v.replace(":","")]=e[A-1])})}),console.info(r),!r[0].public)if(await F.restoreUser(),console.log("resting?",r[0].route),F.user!=null){if(r[0].route=="/share_link"&&F.user.rank.name=="Shopper"){m.toast({content:"Please upgrade package to access this page",header:"Unauthorized",type:"danger"}),m.navigateTo("/");return}}else{m.navigateTo("/logout");return}window.pageParams=i;var a="";if(t==null?a="":a=t,window.back)window.back=!1;else{var o={route:n,fn:"phxApp.navigateTo('"+n+"', '"+a+"')",params:i};window.stateObj=o,window.matchTitle=r[0].title,window.matchRoute=n,Object.keys(i).includes("title")?(history.pushState(o,evalTitle(i.title),n),$("title").html(this.evalTitle(i.title))):(history.pushState(o,this.evalTitle(r[0].title),n),$("title").html(this.evalTitle(r[0].title)))}var l=this.html("blog_nav.html"),u=this.html("footer_modals.html"),d=this.html(r[0].html),h=`
      <div class="page-content pb-0">
        `+d+`
      </div>
        `+u+`
          `,y=Object.keys(r[0]);if(y.includes("skipNav"))$("#content").html(h),this.navigateCallback();else{if(y.includes("customNav"))var l=this.html(r[0].customNav);$("#content").html(l),$("#content").append(h),this.navigateCallback()}return r[0]}else{console.info(s);var l=this.html("blog_nav.html"),u=this.html("footer_modals.html"),d=this.html("landing.html"),h=`
      <div class="page-content pb-0">
        `+d+`
      </div>        `+u;$("#content").html(l),$("#content").append(h),this.navigateCallback()}},modal(n){var t={selector:"#myModal",body:".modal-body",title:".modal-title",foot:".modal-footer",header:"Modal Header",content:"Here is content for modal body",footer:"",drawFn:()=>{},autoClose:!0},e=Object.keys(t);e.forEach((s,r)=>{this[s]=t[s]}),e.forEach((s,r)=>{n[s]!=null&&(this[s]=n[s])}),$(this.selector).find(this.title).customHtml(this.header),$(this.selector).find(this.body).customHtml(this.content),$(this.selector).find(this.foot).customHtml(this.footer),$(this.selector).modal("show"),this.drawFn(),this.autoClose&&setTimeout(()=>{$(this.selector).modal("hide")},5e3)},toast(n){var t={selector:"#notification-1",body:".toast-body",title:".tbody",foot:".modal-footer",header:"Modal Header",content:"Here is content for modal body",footer:"",drawFn:()=>{},autoClose:!0},e=Object.keys(t);e.forEach((s,r)=>{this[s]=t[s]}),e.forEach((s,r)=>{n[s]!=null&&(this[s]=n[s])}),$(this.selector).find(this.title).customHtml(this.header),$(this.selector).find(this.body).customHtml(this.content),$(this.selector).toast("show"),this.drawFn(),this.autoClose},notify(n,t){t==null&&(t={});var e={delay:2e3,type:"info"},a=Object.keys(e);a.forEach((o,l)=>{this[o]=e[o]}),a.forEach((o,l)=>{t[o]!=null&&(this[o]=t[o])});var s={},r={};typeof n=="object"?r=n:r={message:n};var i={message:"Your text here",title:"System Message:",icon:"fa fa-exclamation-circle"},a=Object.keys(i);a.forEach((o,l)=>{s[o]=i[o]}),a.forEach((o,l)=>{r[o]!=null&&(s[o]=r[o])});try{typeof $.notify=="function"?(console.log(t),$.notify(s,t)):this.toast({content:s.message,header:s.title})}catch{this.toast({content:s.message,header:s.title})}},reflect(n){var t={};return n.forEach((e,s)=>{console.log(s);var r={};if(s.includes("[")){console.log("has child");var i=s.split("[")[0],a=s.split("[")[1].split("]")[0];r[a]=e,t[i]={...t[i],...r}}else{if(!Reflect.has(t,s)){t[s]=e;return}Array.isArray(t[s])||(t[s]=[t[s]]),t[s].push(e)}}),t},validateForm(n,t){var e=$(n).find("[name]").filter((r,i)=>($(i).removeClass("is-invalid"),i.checkValidity()==!1));if(e.length>0){var s=[];e.map((r,i)=>{$(i).addClass("is-invalid");var a=$(i).closest(".input-style").find("label div").html();a==null&&(a=$(i).attr("name")),s.push(a)}),m.notify("This input: "+s.join(", ")+" is not valid!",{type:"danger"})}else t()},form(n,t,e,s,r){m.show();var i="",a=new FormData($(n)[0]);if(a.append("scope",t),r!=null){var o=Object.keys(r);o.forEach((u,d)=>{a.append(u,r[u])})}t=="login"&&(i="/login");var l=this.csrf_();$.ajax({url:this.endpoint+"/svt_api/webhook"+i,dataType:"json",headers:{"phx-request":"true",Authorization:"Basic "+(m.user!=null?m.user.token:null),"x-csrf-token":l},method:"POST",enctype:"multipart/form-data",processData:!1,contentType:!1,data:a}).done(function(u){if(m.hide(),u.status=="ok"){m.notify("Added!",{type:"success"});try{u.res!=null&&e(u.res)}catch{}}else u.reason!=null?m.notify("Not added! "+u.reason,{type:"danger"}):m.notify("Not added!",{type:"danger"})}).fail(function(u){u.status==403&&F.logout(),m.notify("Not added!",{type:"danger"})})},html(n){$(".modal-body").each((i,a)=>{$(a).html("")});var t="v2";function e(i){var a="v2";return i=="Thailand"&&(a="th"),i=="Vietnam"&&(a="vn"),i=="China"&&(a="cn"),a}localStorage.region!=null&&(t=e(localStorage.region)),t="v2";var s="",r="/html/"+t+"/"+n;return console.log("url",r),$.ajax({async:!1,method:"get",url:r}).done(i=>{s=i}),s},token:null,csrf_(n){if(this.token==null)this.token=$("input[name='_csrf_token_ori']").val();else if(n)this.token=$("input[name='_csrf_token_ori']").val();else return this.token},api(n,t,e,s){var r="",i=this.csrf_();return $.ajax({async:!1,method:"get",headers:{"phx-request":"true",Authorization:"Basic "+(m.user!=null?m.user.token:null),"X-CSRF-Token":i},url:this.endpoint+"/svt_api/webhook?scope="+n,data:t}).done(a=>{console.log(a),s!=null&&s(a),r=a}).fail(function(a){a.status==403&&F.logout();try{m.notify("Not Added! reason: "+a.responseJSON.reason,{type:"danger"})}catch{m.notify("Ops, somethings' not right!",{type:"danger"})}m.show(),setTimeout(()=>{e!=null&&e(),m.hide()},500)}),r},post(n,t,e,s){var r="",i=$("input[name='_csrf_token_ori']").val(),a={...t,_csrf_token:i};return console.log(a),$.ajax({async:!1,method:"post",headers:{"phx-request":"true",Authorization:"Basic "+(m.user!=null?m.user.token:null),"X-CSRF-Token":i},url:this.endpoint+"/svt_api/webhook?scope="+n,data:a}).done(o=>{s!=null&&s(o),r=o}).fail(function(o){o.status==403,m.notify("Ops, somethings' not right!",{type:"danger"}),setTimeout(()=>{e!=null&&e(),m.hide()},500)}),r},evaluateLang(){},toTop(){$("body")[0].scrollIntoView()},async putToken(){this.csrf_(!0),$("input#need-token")&&$("input[name='_csrf_token']").val($("input[name='_csrf_token_ori']").val())},evalCart(){window.location.pathname.includes("merchant")&&($(".showMcart").toggleClass("d-none"),$(".showCart").toggleClass("d-none"))},async navigateCallback(){F.restoreUser(),C.restoreCart(),C.restoreCart(!0),this.user=F.user,this.user!=null&&(this.user.wallets=null);try{C.render()}catch{}this.evaluateLang(),this.toTop(),this.hide(),this.putToken(),this.evalCart()},show(){console.log("drop shadow.."),$(".wrapper-ring").show(),setTimeout(()=>{$(".wrapper-ring").hide()},1e3)},hide(){console.log("hide shadow..");try{$(".wrapper-ring").hide()}catch{}},repopulateFormInput(n,t){console.log(n);var e=$(t).find("[name]");$(e).each(function(s,r){var i=$(r).attr("aria-label");i==null&&(i=$(r).attr("name"));var a=$(r).attr("aria-value"),o=i.split("[")[0],l=i.replace("[","").replace("]","").replace(o,"");if($(r).prop("localName")=="select")console.log("is select"),i.includes("[")?$(r).val(n[o][l]):$(r).val(n[i]);else if(a!=null)$(r).val(a);else if($(r).hasClass("code"))try{$(r).val(n[i]);var u=document.createElement("input");u.setAttribute("type","hidden"),u.setAttribute("name",$(r).attr("name")),$(r).after(u);var d=ace.edit($("textarea")[0],{mode:"ace/mode/html",selectionStyle:"text"});d.resize(),window.editor=d,d.session.setUseWrapMode(!0),d.session.on("change",function(A){$(u).val(window.editor.getValue()),console.log("ace here")})}catch(A){console.log(A),$(r).val(n[i])}else if($(r).attr("type")=="checkbox")if(console.log("got data?"),console.log(n[i]),$(r).hasClass("many_2_many")){var h=parseInt(r.name.split("][")[1].split("]")[0]);try{var y=n[i].filter((A,k)=>A.id==h);y.length>0&&$(r).prop("checked",n[i])}catch(A){console.log(A),$(r).prop("checked",!1)}}else $(r).prop("checked",n[i]);else if(n!=null)if(console.log(i),console.log("name: "+i+", data: "+n[i]),i.includes("."))try{var g=$(r).closest("form").attr("id"),w=i.split(".");w.length==2&&($(r).val(n[w[0]][w[1]]),$(r).parent().append(`<input type='hidden' value="`+n[w[0]].id+'" name="'+g+"["+w[0]+'][id]"></input>')),w.length==3&&($(r).val(n[w[0]][w[1]][w[2]]),$(r).parent().append(`<input type='hidden' value="`+n[w[0]].id+'" name="'+g+"["+w[0]+'][id]"></input>')),w.length==1&&($(r).val(n[w[0]]),$(r).parent().append(`<input type='hidden' value="`+n[w[0]].id+'" name="'+g+"["+w[0]+'][id]"></input>'))}catch(A){console.log(A),$(r).val(n[i])}else if(i.includes("["))try{$(r).val(n[o][l])}catch(A){console.log(A),$(r).val(n[i])}else if(i=="_csrf_token"){var v=$("input[name='_csrf_token_ori']").val();$(r).val(v)}else try{$(r).val(n[i])}catch(A){console.log(A),console.log("missing dom?")}else console.log("name: "+i+", data: ?")})},generateInputs(n,t,e,s){var r="",i="",a="col-12 col-lg-6",l=t.charAt(0).toUpperCase()+t.slice(1);typeof s=="object"&&(s.alt_name!=null&&(l=s.alt_name),s.alt_class!=null&&(a=s.alt_class));var o=Object.keys(i),l=o.reduce((w,v)=>{var A=new RegExp(v,"g");return w.replace(A,i[v])},l);switch(n[t]){case"string":r='<div class="'+a+`">
                      <div class="ps-0 py-0 text-secondary">`+l+`</div>
                      <div class="col-sm-12">
                        <div class="form-group bmd-form-group">
                          <input type="text" aria-label="`+t+'" name="'+e+"["+t+`]" class="form-control-plaintext">
                        </div>
                      </div>
                    </div>`;break;case"boolean":r=`<div class="row d-flex align-items-center ">
                      <label class="offset-lg-1 col-sm-3 col-form-label text-start label-checkbox">`+l+`</label>
                      <div class="col-sm-6 checkbox-radios">
                        <div class="form-check">
                          <label class="form-check-label">
                            <input class="form-check-input" type="checkbox" aria-label="`+t+'" name="'+e+"["+t+']" value=""> This '+t+`
                            <span class="form-check-sign">
                              <span class="check"></span>
                            </span>
                          </label>
                        </div>
                        
                      </div>
                    </div>`;break;case"integer":t.includes("id")||t=="id "?r='<input  aria-label="'+t+'" name="'+e+"["+t+']" type="hidden" class="form-control" value="0">':r='<div class="'+a+`">
                      <div class="ps-1 py-2">`+l+`</div>
                      <div class="col-sm-12">
                        <div class="form-group bmd-form-group">
                          <input type="number" aria-label="`+t+'" name="'+e+"["+t+`]" class="form-control">
                        </div>
                      </div>
                    </div>`;break;case"date":r='<div class="'+a+`">
                      <div class="ps-1 py-2">`+l+`</div>
                      <div class="col-sm-12">
                        <div class="form-group">
                          <input type="text" aria-label="`+t+'" name="'+e+"["+t+`]" class="form-control datepicker">
                        </div>
                      </div>
                    </div>`;break;case"naive_datetime":r='<div class="'+a+`">
                      <div class="ps-1 py-2">`+l+`</div>
                      <div class="col-sm-12">
                        <div class="form-group bmd-form-group">
                          <input type="text" aria-label="`+t+'" name="'+e+"["+t+`]" class="form-control datetimepicker">
                        </div>
                      </div>
                    </div>`;break;default:t=="id"||t.includes("_id")?r='<input  aria-label="'+t+'" name="'+e+"["+t+']" type="hidden" class="form-control" value="0">':r='<div class="'+a+`">
                      <div class="ps-0 py-0 text-secondary">`+l+`</div>
                      <div class="col-sm-12">
                        <div class="form-group bmd-form-group">
                          <input type="text" aria-label="`+t+'" name="'+e+"["+t+`]" class="form-control-plaintext">
                        </div>
                      </div>
                    </div>`}if(typeof s=="object"){var u=[];if(s.selection!=null){var d="",h="";s.live_search!=null&&s.live_search&&(d='data-live-search="true"'),s.multiple!=null&&s.multiple&&(h="multiple"),$(s.selection).each(function(w,v){var A,k;typeof v=="object"?(A=v.name,k=v.id):(A=v,k=v),u.push('<option value="'+k+'">'+A+"</option>")}),r='<div class="'+a+`">
                      <div class="ps-1 py-2">`+l+`</div>
                      <div class="col-sm-12">
                        <div class="form-group">
                         <select `+h+" "+d+'aria-label="'+t+'" name="'+e+"["+t+`]" class="form-control selectpicker" >
                         `+u.join("")+`
                         </select>
                        </div>
                      </div>
                    </div>`}if(s.binary&&(r='<div class="'+a+`">
                      <div class="ps-1 py-2">`+l+`</div>
                      <div class="col-sm-12">
                        <div class="form-group bmd-form-group">
                          <textarea rows=12 cols=12 aria-label="`+t+'" name="'+e+"["+t+`]" class="form-control"></textarea>
                        </div>
                      </div>
                    </div>`),s.placeholder&&(r='<div class="'+a+`">
                      `+s.placeholder+`
                    </div>`),s.code&&(r=`<div class="row">
                      <label class="col-sm-3 col-form-label text-end">`+l+`</label>
                      <div class="col-sm-9">
                        <div class="form-group bmd-form-group">
                          <textarea rows=4 cols=12 aria-label="`+t+'" name="'+e+"["+t+`]" class="form-control code"></textarea>
                        </div>
                      </div>
                    </div>`),s.checkboxes!=null){var y=[];s.checkboxes.sort(function(w,v){return w.name.localeCompare(v.name)}),$(s.checkboxes).each((w,v)=>{var A=`
                    <div class="form-check">
                      <label class="text-capitalize">
                        <input aria-label="`+t+'" class="form-check-input many_2_many" type="checkbox" name="'+e+"["+t+"]["+v.id+']"  value="true"> '+v.name+`
                        <span class="form-check-sign">
                          <span class="check"></span>
                        </span>
                      </label>
                    </div>`;y.push(A)}),r=`<div class="row">
                      <label class="col-sm-2 col-form-label text-end">`+l+`</label>
                      <div class="col-sm-8">
                        <div class="form-group bmd-form-group">
                          `+y.join("")+`
                        </div>
                      </div>
                    </div>`}if(s.upload&&(r='<div class="'+a+`">
                      <div class="pb-1 pt-1 ps-1 text-start">`+l+`</div>
                      <div class="col-sm-12">
                        
                        <img style="display: none;" id="myImg" src="#" alt="your image" width=300>
                          <input style="padding-top: 2vh;" type="file" aria-label="`+t+'" name="'+e+"["+t+`]" class="">
                        
                      </div>
                    </div>`),s.editor&&(r='<div class="'+a+`">
              <div class="form-group bmd-form-group">
              <label class="bmd-label-floating my-2">`+l+`</label>
                  <textarea id="editor1" rows=10 cols=12 aria-label="`+t+'" name="'+e+"["+t+`]" class="form-control" ></textarea>
              </div>
          </div>`),s.datetime&&(r=`<div class="row">
                      <label class="offset-lg-1 col-sm-3 col-form-label text-start">`+l+`</label>
                      <div class="col-sm-6">
                        <div class="form-group bmd-form-group">
                          <input type="datetime-local" aria-label="`+t+'" name="'+e+"["+t+`]" class="form-control datepicker">
                        </div>
                      </div>
                    </div>`),s.date&&(r=`<div class="row">
                      <label class="offset-lg-1 col-sm-3 col-form-label text-start">`+l+`</label>
                      <div class="col-sm-6">
                        <div class="form-group bmd-form-group">
                          <input type="date" aria-label="`+t+'" name="'+e+"["+t+`]" class="form-control datepicker">
                        </div>
                      </div>
                    </div>`),s.alias){var g=t.split(".");console.log("not sure if onclick"),s.onClickFn!=null?(g.length==2&&(r='<div class="'+a+`">
                        <div class="pb-1 pt-1 ps-1 text-start">`+l+`</div>
                        <div class="row gx-0">
                          <div class="col-10">
                            <div class="form-group bmd-form-group">
                              <input type="text" aria-label="`+t+'" name="'+e+"["+g[0]+"]["+g[1]+`]" class="form-control">
                            </div>
                          </div>
                          <div class="col-2">
                            <div class="btn btn-outline-primary" onclick="`+s.onClickFn+`">Change</div>
                          </div>
                        </div>
                      </div>`),g.length==3&&(r='<div class="'+a+`">
                        <div class="pb-1 pt-1 ps-1 text-start">`+l+`</div>
                        <div class="row">
                          <div class="col-10">
                            <div class="form-group bmd-form-group">
                              <input type="text" aria-label="`+t+'" name="'+e+"["+g[0]+"]["+g[1]+"]["+g[2]+`]" class="form-control">
                            </div>
                          </div>
                          <div class="col-2">
                            <div class="btn btn-outline-primary" onclick="`+s.onClickFn+`">Change</div>
                          </div>
                        </div>
                      </div>`)):(g.length==2&&(r='<div class="'+a+`">
                              <div class="pb-1 pt-1 ps-1 text-start">`+l+`</div>
                              <div class="row">
                                <div class="col-12">
                                  <div class="form-group bmd-form-group">
                                    <input type="text" aria-label="`+t+'" name="'+e+"["+g[0]+"]["+g[1]+`]" class="form-control">
                                  </div>
                                </div>
                               
                              </div>
                            </div>`,s.binary&&(r='<div class="'+a+`">
                                        <div class="ps-1 py-2">`+l+`</div>
                                        <div class="col-sm-12">
                                          <div class="form-group bmd-form-group">
                                            <textarea rows=4 cols=12 aria-label="`+t+'"  name="'+e+"["+g[0]+"]["+g[1]+`]" class="form-control"></textarea>
                                          </div>
                                        </div>
                                      </div>`),s.editor&&(r='<div class="'+a+`">
                                        <div class="ps-1 py-2">`+l+`</div>
                                        <div class="col-sm-12">
                                          <div class="form-group bmd-form-group">
                                            <textarea id="editor1" rows=10 cols=12 aria-label="`+t+'"  name="'+e+"["+g[0]+"]["+g[1]+`]" class="form-control"></textarea>
                                          </div>
                                        </div>
                                      </div>`)),g.length==3&&(r='<div class="'+a+`">
                              <div class="pb-1 pt-1 ps-1 text-start">`+l+`</div>
                              <div class="row">
                                <div class="col-12">
                                  <div class="form-group bmd-form-group">
                                    <input type="text" aria-label="`+t+'" name="'+e+"["+g[0]+"]["+g[1]+"]["+g[2]+`]" class="form-control">
                                  </div>
                                </div>
                               
                              </div>
                            </div>`))}if(s.hidden)if(t.includes(".")){var g=t.split(".");r='<input type="hidden" aria-label="'+t+'" name="'+e+"["+g[0]+"]["+g[1]+']"  aria-value="'+s.data+'">'}else console.log("qv",s.data),r='<input type="hidden" aria-label="'+t+'" name="'+e+"["+t+']"  aria-value="'+s.data+'">';s.required&&(r=r.replaceAll("input type","input required type"))}return r},appendInputs(n,t,e,s){$(t).each(function(r,i){var a;typeof i=="object"?a=i.label:a=i;var o="";if(o=m.generateInputs(e,a,s,i),typeof i=="object"&&!i.binary){if(i.sub!=null){var l=i.sub.moduleName,u=i.sub.link,d=i.sub.customCols;$.ajax({headers:{"phx-request":"true"},url:this.endpoint+"/svt_api/webhook?scope=gen_inputs",dataType:"json",async:!1,data:{module:l}}).done(function(h){var y=Object.keys(h);d!=null&&d.length>0&&(y=d);var g=[];$(y).each((w,v)=>{var A;typeof v=="object"?A=v.label:A=v;var k="";k=m.generateInputs(h,A,u,v),g.push(k)}),o=o+'<div class="row subform" style="display: none;"><div class="offset-1 col-sm-9">'+g.join("")+"</div></div>"}).fail(function(h){h.status==403&&F.logout(),m.notify("Not Added!",{type:"danger"})})}}$(n).append(o)})},form_new(n,t,e,s,r){console.log(t);var i=window.phoenixModels.filter((l,u)=>l.tableSelector==n)[0],a="#mySubModal";t.modalSelector!=null&&(a=t.modalSelector),e==null&&(e=i.customCols);var o='<form style="" class="with_mod" id="'+i.link+'"  module="'+i.moduleName+`">
      </form>`;$(a).find(".modal-title").html("Create  New "+i.moduleName),$(a).find(".modal-body").html(o),m.createForm({id:0,...t},i.table,e,s,r),$(a).modal("show")},createForm(n,t,e,s,r){$(".with_mod").each(function(i,a){$(a).html("");var o=$(this).attr("module"),l=$(this).attr("id");$.ajax({async:!1,headers:{"phx-request":"true"},url:phxApp.endpoint+"/svt_api/webhook?scope=gen_inputs",dataType:"json",data:{module:o}}).then((u,d,h)=>{var y=Object.keys(u);e!=null?typeof e[0]=="object"&&e[0]!==null?(console.log("has multi list,"+e.length),$(a).customHtml(`<input type="hidden" name="_csrf_token"  value="">
                            <div class="row">
                              <div class="col-12 col-lg-4">
                                <ul class="nav nav-pills flex-column form_nav">
                                 
                               
                                </ul>

                              </div>
                              <div class="col-12 col-lg-8 p-4 pt-lg-0 px-lg-4 " id="form_panels">

                              </div>
                            </div>

                        `),$(e).each((E,P)=>{E==0?$(a).find(".form_nav").customAppend(`
                                   <li class="nav-item">
                                      <a class="active nav-link fnc" aria-index="`+E+'" href="javascript:void(0);"  >'+P.name+`</a>
                                    </li>
                          `):$(a).find(".form_nav").customAppend(`
                                   <li class="nav-item">
                                      <a class="nav-link fnc" aria-index="`+E+'" href="javascript:void(0);"  >'+P.name+`</a>
                                    </li>
                          `),$(a).find(".fnc").each((O,R)=>{R.onclick=()=>{var T=$(R).attr("aria-index");$(".form_nav .nav-link").removeClass("active"),$(".nav-link[aria-index='"+T+"']").toggleClass("active"),$(".fp").addClass("d-none"),$("#panel_"+T).toggleClass("d-none")}}),E==0?$(a).find("#form_panels").customAppend('<div class="fp row" id="panel_'+E+'"></div>'):$(a).find("#form_panels").customAppend('<div class="fp row d-none"  id="panel_'+E+'"></div>'),$(a).find("#panel_"+E).customAppend('<div class="col-lg-12"><b class="pb-4">'+P.name+"</b></div>"),m.appendInputs($(a).find("#panel_"+E),P.list,u,l)})):(y=e,$(a).append('<input type="hidden" name="_csrf_token"  value="">'),m.appendInputs(a,y,u,l),console.log(y.join("','"))):(y=y.filter((E,P)=>E!="inserted_at"),y=y.filter((E,P)=>E!="updated_at"),m.appendInputs(a,y,u,l),console.log(y.join("','"))),$($(a).find("select")).on("change",function(){var E=$(this).val(),P=$($(this).closest(".subform")).length;console.log(E),P==0&&(E==0?$(".subform").fadeIn():$(".subform").hide())});function g(){$("#myModal .modal-dialog").hasClass("modal-lg")&&$("#myModal .modal-dialog").toggleClass("modal-lg");var E=new FormData($(a).closest("form")[0]);$(a).find("input[type='checkbox']").each((O,R)=>{$(R).val($(R).prop("checked")),E.append(l+"["+$(R).attr("aria-label")+"]",$(R).prop("checked"))}),$(a).find("textarea").each((O,R)=>{E.append(l+"["+$(R).attr("aria-label")+"]",$(R).val())});var P=$(".with_mod").closest("form").find("input").filter((O,R)=>(console.log("checking vaidity"),console.log(R),R.checkValidity()==!1));console.log(P),P.length>0?P.map((O,R)=>{m.notify("This input: "+$(R).attr("placeholder")+" is not valid!",{type:"danger"})}):(m.csrf_(!0),$.ajax({url:phxApp.endpoint+"/svt_api/"+l,dataType:"json",headers:{Authorization:"Basic "+(m.user!=null?m.user.token:null)},method:"POST",enctype:"multipart/form-data",processData:!1,contentType:!1,data:E}).done(function(O){if(m.notify("Added!",{type:"success"}),$("#mySubModal").modal("hide"),$("#sideModal").modal("hide"),t!=null){console.log("redrawing table.. "+window.currentSelector),console.log(l),console.log(window.currentSelector);var R=window.phoenixModels.filter((T,B)=>T.moduleName==l&&T.tableSelector==window.currentSelector);R.forEach((T,B)=>{try{window.prev_page=T.table.page(),T.reload()}catch{console.log("cant find the table")}})}s!=null&&(n.xparams!=null?s(n.xparams):s(O))}).fail(function(O){O.status==403&&F.logout();try{console.log(O.responseJSON.status),m.notify("Not Added! reason: "+O.responseJSON.status,{type:"danger"})}catch{m.notify("Not Added!",{type:"danger"})}}))}var w=document.createElement("div");w.className="row";var v=document.createElement("div");v.className="pt-4 col-lg-12",w.append(v);try{var A=CKEDITOR.replace("editor1",{height:500,on:{instanceReady:function(){this.document.appendStyleSheet("/css/bootstrap.min.css")}}});CKEDITOR.config.allowedContent=!0,CKEDITOR.config.removeButtons="Image",CKEDITOR.instances.editor1.on("change",function(){var E=CKEDITOR.instances.editor1.getData();$(CKEDITOR.instances.editor1.element.$).val(E)}),A.addCommand("mySimpleCommand",{exec:function(E){try{callStoredMedia(CKEDITOR.instances.editor1)}catch{}}}),A.ui.addButton("SuperButton",{label:"Click me",command:"mySimpleCommand",toolbar:"insert",icon:"/images/image-solid.svg"})}catch{console.log("no editor")}var k=m.formButton({iconName:"check",color:"primary subm",name:"Submit"},{},g);v.append(k),$(a).find(".subm").length==0&&$(a).append(w),console.info(n),m.repopulateFormInput(n,a)}).fail(function(u){u.status==403&&F.logout(),console.log(u.responseJSON.status),m.notify("Not Added!",{type:"danger"})})}),r!=null&&r()},submitFormData(n,t,e,s){$("#myModal .modal-dialog").hasClass("modal-lg")&&$("#myModal .modal-dialog").toggleClass("modal-lg");var r=t,i=$(n)[0],a=new FormData(i);$(i).find("input[type='checkbox']").each((o,l)=>{$(l).val($(l).prop("checked")),a.append(r+"["+$(l).attr("aria-label")+"]",$(l).prop("checked"))}),console.log(a),$.ajax({url:this.endpoint+"/api/"+r,dataType:"json",method:"POST",headers:{Authorization:"Basic "+(m.user!=null?m.user.token:null)},enctype:"multipart/form-data",processData:!1,contentType:!1,data:a,xhr:function(){$("#helper").fadeIn();var o=$.ajaxSettings.xhr();return o.upload.onprogress=function(l){var u=Math.round(l.loaded/l.total*100);$("[role='progressbar']").css("width",u+"%"),$("#helper").text(u+"%")},o},error:function(o){console.error("Error has occurred while uploading the media file.")}}).done(function(o){m.notify("Added!",{type:"success"});try{m.reinit(),$("#myModal").modal("hide")}catch{}try{e!=null&&e(s)}catch{}m.hide()}).fail(function(o){o.status==403&&F.logout();try{console.log(o.responseJSON.status),m.notify("Not Added! reason: "+o.responseJSON.status,{type:"danger"})}catch{m.notify("Not Added! reason: 404",{type:"danger"})}})},formButton(n,t,e){var s={iconName:"fa fa-check",color:"btn btn-primary",onClickFunction:null,fnParams:null,name:"Submit",tooltipText:"Hints"},r=Object.keys(s);r.forEach((u,d)=>{this[u]=s[u]}),r.forEach((u,d)=>{n[u]!=null&&(this[u]=n[u])});var i=document.createElement("button");i.setAttribute("type","button"),i.setAttribute("data-bs-toggle","tooltip"),i.setAttribute("data-bs-original-title",""),i.setAttribute("data-bs-placement","left"),i.setAttribute("class","btn btn-"+this.color+" btn-sm"),i.setAttribute("title",this.tooltipText);var a=document.createElement("i");a.className=this.iconName,i.append(a);var o=document.createElement("span");this.name==null?this.name="":o.setAttribute("style","padding: 0 10px;"),o.innerHTML=this.name,i.append(o);var l=document.createElement("div");if(l.className="ripple-container",i.append(l),i.style="margin-left: 10px;",e!=null){try{i.id=this.fnParams.dtdata.id}catch{console.log("dont hav id in fnParams")}i.onclick=function(){$($(i).closest("tr")).attr("aria-index")==null?t.index=parseInt($($(i).closest("div")).attr("aria-index")):t.index=parseInt($($(i).closest("tr")).attr("aria-index")),t.row=$(i).closest("tr"),t.tbody=$(i).closest("tbody"),e(t)}}return i},groupedFormButton(n,t,e,s){var r=m.makeid(6),i=document.createElement("div");i.setAttribute("class","btn-group"),i.setAttribute("role","group"),i.setAttribute("aria-label","Button group with nested dropdown"),i.setAttribute("style","margin-left: 10px;");var a=document.createElement("button");a.setAttribute("type","button"),a.setAttribute("class","manage btn btn-sm btn-"+t),a.innerHTML=n,i.append(a);var o=document.createElement("div");o.setAttribute("class","btn-group"),o.setAttribute("role","group");var l=document.createElement("button");l.setAttribute("id",r),l.setAttribute("type","button"),l.setAttribute("class","btn btn-sm btn-"+t+" dropdown-toggle"),l.setAttribute("data-bs-toggle","dropdown"),l.setAttribute("aria-haspopup","true"),l.setAttribute("aria-expanded","false"),o.append(l);var u=document.createElement("div");return u.setAttribute("class","dropdown-menu"),u.setAttribute("aria-labelledby",r),$(e).each((d,h)=>{h.fnParams!=null?h.fnParams.dataSource=s.dataSource:h.fnParams=s;var y=m.childGroupedFormButton(h.name,h.onClickFunction,h.fnParams);u.append(y)}),o.append(u),i.append(o),i},childGroupedFormButton(n,t,e){var s=document.createElement("a");if(s.setAttribute("class","dropdown-item"),s.setAttribute("href","javascript:void(0);"),s.innerHTML=n,t!=null){try{s.id=e.dtdata.id}catch{}s.onclick=function(){e.index=parseInt($($(s).closest("tr")).attr("aria-index")),e.index>-1||(e.index=parseInt($($(s).closest(".card-footer")).attr("aria-index"))),e.row=$(s).closest("tr"),t(e)}}return s},makeid(n){for(var t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=e.length,r=0;r<n;r++)t+=e.charAt(Math.floor(Math.random()*s));return t},appendDtButtons(n,t,e){$(n).closest(t).find(".module_buttons").customHtml(`
                <button type="submit" onclick="toggleView('`+n+`')" class="btn btn-fill btn-round btn-primary" data-href="" data-module="" data-ref="">
                <i class="fa fa-th-large"></i></button>
                <button type="submit" onclick="phxApp.reinit()" class="btn btn-fill btn-round btn-primary" data-href="" data-module="" data-ref="">
                <i class="fa fa-circle-notch
      "></i></button>
                <button type="submit" class="btn btn-fill btn-round btn-primary"  data-href="" data-module="add_new" data-ref=""><i class="fa fa-plus"></i></button>
                `);var s=$(n).closest(t).find(".module_buttons button[data-module='add_new']");try{s[0].onclick=function(){window.currentSelector=n,console.log("sub sub table data"),console.log(e),form_new(n,e)}}catch{}},appendRowDtButtons(n,t){$(n.buttons).each((e,s)=>{if(s.buttonType!=null)if(s.buttonType=="grouped"){console.log("creating grouped...button..."),s.fnParams.dataSource=n,s.fnParams.aParams=n.data;var r=m.groupedFormButton(s.name,s.color,s.buttonList,s.fnParams);$(n.tableSelector).closest(".table-responsive").find(".gd[aria-index='"+t+"']").removeClass("d-none"),$(n.tableSelector).closest(".table-responsive").find(".gd[aria-index='"+t+"']").append(r)}else{s.fnParams.dataSource=n,s.fnParams.aParams=n.data;var r=m.formButton({iconName:s.iconName,color:s.color,name:s.name},s.fnParams,s.onClickFunction);$(n.tableSelector).closest(".table-responsive").find(".gd[aria-index='"+t+"']").removeClass("d-none"),$(n.tableSelector).closest(".table-responsive").find(".gd[aria-index='"+t+"']").append(r)}else{console.log("appending gd buttons : "+e),s.fnParams.dataSource=n,s.fnParams.aParams=n.data;var r=m.formButton({iconName:s.iconName,color:s.color,name:s.name,tooltipText:s.tooltipText},s.fnParams,s.onClickFunction);$(n.tableSelector).closest(".table-responsive").find(".gd[aria-index='"+t+"']").removeClass("d-none"),$(n.tableSelector).closest(".table-responsive").find(".gd[aria-index='"+t+"']").append(r)}})},getTableData(n,t,e){var s=100;t!=null&&(s=t);var r=Object.keys(n.data),i=[];$(r).each((a,o)=>{i.push("&"+o+"="+n.data[o])}),$.ajax({async:!1,url:this.endpoint+"/api/"+n.link+"?foo=bar"+i.join(""),data:{draw:"1",order:{0:{column:"0",dir:"desc"}},columns:{0:{data:"id"}},length:s,start:0}}).done(function(a){$(a.data).each((o,l)=>{var u=$(n.allData).filter(function(d,h){return h.id==l.id});u.length==0&&n.allData.push(l)}),e!=null&&e()}).fail(function(a){a.status==403&&F.logout(),m.notify("Not Added!",{type:"danger"})})},copyToClipboard(n){navigator.clipboard.writeText(n).then(()=>{console.log("Text copied to clipboard:",n),alert("Text copied to clipboard!")}).catch(t=>{console.error("Could not copy text: ",t),alert("Could not copy text: "+t)})},populateTableData(n,t,e){this.getTableData(n,t,e)},populateGridView(n){console.log("populateGridView",n);var t="col-12 col-lg-3 xc";try{n.data.grid_class!=null&&(t=n.data.grid_class+" xc")}catch{}$(n.tableSelector).closest(".dataTables_wrapper").find(".grid_view").html("<div></div>");var e=[];for(n.table.data().length,s=0,r=n.table.data().length;s<r;s++)n.table.data()[s].index=s,e.push(n.table.data()[s]);var s,r,i=12,a=[];for(s=0,r=e.length;s<r;s+=i)a.push(e.slice(s,s+i));a.forEach((o,l)=>{var u=document.createElement("div");u.setAttribute("class","row gx-0 "),o.forEach((d,h)=>{var y=d,g=document.createElement("div");g.setAttribute("class",t);var w=document.createElement("div");w.setAttribute("id",y.id),w.className="card-footer gd d-none",g.data=d,g.data.dataSource=n,y.index!=null&&w.setAttribute("aria-index",y.index),g.appendChild(w),u.appendChild(g)}),$(n.tableSelector).closest(".dataTables_wrapper").find(".grid_view").append(u)}),$(n.tableSelector).closest(".table-responsive").find(" .gd").each((o,l)=>{var u=$(l).attr("aria-index");console.log("there is index... d"+o),m.appendRowDtButtons(n,u)})},populateTable(n){var t=[[0,"desc"]],e=phxApp.endpoint+"/svt_api/";n.data.host!=null&&(e=n.data.host+"/svt_api/");var s=10,r=`

    <"row align-items-center"
      <"col-lg-4"l>
      <"gap-2 col-lg-8 text-center 
        module_buttons 
        d-flex justify-content-lg-end 
        justify-content-center py-2 py-lg-0">
    >
    <"row grid_view d-block d-lg-none">
    <"list_view d-lg-block d-none"t>
    <"row transform-75 p-4"
      <"col-lg-6"i><"col-lg-6"p>
    >

    `;n.data.dom!=null&&(r=n.data.dom),n.data.sorts!=null&&(t=n.data.sorts),n.data.pageLength!=null&&(s=n.data.pageLength);var i=document.createElement("tr"),a=document.createElement("tr");$(n.columns).each(function(g,w){var v=document.createElement("td");v.innerHTML=w.label,i.append(v)}),$(n.columns).each(function(g,w){var v=document.createElement("td");a.append(v)}),console.info(t),$(n.tableSelector).find("thead").append(i),$(n.tableSelector).find("tfoot").html(a),console.log(n.data);var o=Object.keys(n.data),l=[];$(o).each((g,w)=>{["modalSelector","sorts","dom","footerFn","rowFn","preloads","grid_class"].includes(w)||l.push("&"+w+"="+n.data[w]),["preloads"].includes(w)&&l.push("&"+w+"="+JSON.stringify(n.data[w])),["additional_join_statements"].includes(w)&&l.push("&"+w+"="+JSON.stringify(n.data[w]))});var u=n.tableSelector,d=$(u).DataTable({pageLength:s,processing:!0,responsive:!0,serverSide:!0,ajax:{url:e+n.link+"?foo=bar"+l.join("")},columns:n.columns,lengthMenu:[8,10,12,25,50,100],rowCallback:function(g,w,v){console.log("dt rowcallback index "+v);var A=$(n.allData).filter(function(E,P){return P.id==w.id});A.length==0&&n.allData.push(w),$(g).addClass("d-none"),$(g).attr("aria-index",v);var k=$(g).find("td").length-1;g.dataset.dtdata=JSON.stringify(w),ut.datetime(g,w,n),ut.img(g,w,n),ut.bool(g,w,n),ut.float(g,w,n),ut.child(g,w,n),ut.json(g,w,n),ut.subtitle(g,w,n),ut.progress(g,w,n),ut.custom(g,w,n),$("td:eq("+k+")",g).attr("class","td-actions text-end"),$("td:eq("+k+")",g).html(""),$(n.buttons).each((E,P)=>{if(P.buttonType!=null)if(P.buttonType=="grouped"){console.log("creating grouped...button..."),P.fnParams.dataSource=n,P.fnParams.aParams=n.data;var O=m.groupedFormButton(P.name,P.color,P.buttonList,P.fnParams);$("td:eq("+k+")",g).append(O)}else{P.fnParams.dataSource=n,P.fnParams.aParams=n.data;var O=m.formButton({iconName:P.iconName,color:P.color,name:P.name},P.fnParams,P.onClickFunction);$("td:eq("+k+")",g).append(O)}else{P.fnParams.dataSource=n,P.fnParams.aParams=n.data;var O=m.formButton({iconName:P.iconName,color:P.color,name:P.name,tooltipText:P.tooltipText},P.fnParams,P.onClickFunction);$("td:eq("+k+")",g).append(O)}}),n.data.rowFn!=null&&n.data.rowFn(g,w,v)},footerCallback:function(g,w,v,A,k){n.data!=null&&n.data.footerFn!=null&&n.data.footerFn(g,w,v,A,k)},order:t,dom:r,autoWidth:!1});n.table=d,d.on("preXhr",()=>{console.log("fetching...")}),d.on("draw",()=>{$(".jsv"+n.makeid.id).closest("tr").each((g,w)=>{var v=n.columns.filter((A,k)=>A.showJson==!0);v.forEach((A,k)=>{$($(w).find(".jsv"+n.makeid.id)[k]).jsonViewer(d.data()[g][A.data],{collapsed:!0})})}),$(".table tbody tr").each((g,w)=>{setTimeout(()=>{$(w).removeClass("d-none")},10*g+1)}),console.log("table draw"),typeof n.onDrawFn=="function"&&n.onDrawFn()}),d.on("xhr",()=>{console.log("fetched")});var h=window.phoenixModels.findIndex((g,w)=>g.tableSelector=="#subSubTable");h!=-1&&window.phoenixModels.splice(h,1);var y=window.phoenixModels.filter((g,w)=>g.moduleName==n.moduleName&&g.tableSelector==n.tableSelector);if(y.length==0)window.phoenixModels.push(n);else{console.info("the dt already exist, consider reinsert?");var h=window.phoenixModels.findIndex((w,v)=>w.moduleName==n.moduleName&&w.tableSelector==n.tableSelector);h!=-1&&(window.phoenixModels.splice(h,1),window.phoenixModels.push(n))}return d},editData(n){console.log("editing data...");var t=n.dataSource;window.currentSelector=t.tableSelector;var e=t.table,s=e.row(n.row),r=e.data()[n.index],i;n.link!=null?i=n.link:i=t.link;var a="#sideModal";$(a).length==0&&(a="#mySubModal"),t.data.modalSelector!=null&&(a=t.data.modalSelector);function o(){console.log(r);var l='<form style="margin-top: 0px;" class="with_mod" id="'+i+'"  module="'+t.moduleName+'"></form>';$(a).find(".modal-title").html("Edit "+t.moduleName),$(a).find(".modal-body").html(l),$(a).modal("show"),m.createForm(r,e,n.customCols,n.postFn),n.drawFn!=null&&n.drawFn()}s.child.isShown()?(s.child.hide(),o()):(e.rows().every(function(l,u,d){this.child.hide()}),o())},deleteData(n){console.log("editing data...");var t=n.dataSource;window.currentSelector=t.tableSelector;var e=t.table;e.row(n.row);var s=e.data()[n.index];$("#myModal").find(".modal-title").html("Confirm delete this data?");var r=m.formButton("fa fa-check","outline-danger"),i=this.csrf_();r.onclick=function(){console.log(t),$("#myModal").modal("hide"),$.ajax({url:this.endpoint+"/api/"+t.link+"/"+s.id,dataType:"json",headers:{Authorization:"Basic "+(m.user!=null?m.user.token:null),"x-csrf-token":i},method:"DELETE"}).done(function(o){if($("#myModal").modal("hide"),m.notify("Deleted!",{type:"info"}),e!=null){console.log("redrawing table.. "+window.currentSelector),console.log(t.link),console.log(window.currentSelector);var l=window.phoenixModels.filter((u,d)=>u.moduleName==t.link&&u.tableSelector==window.currentSelector);l.forEach((u,d)=>{try{window.prev_page=u.table.page(),u.reload()}catch{console.log("cant find the table")}})}}).fail(function(o){console.log(o.responseJSON.status),m.notify("Not Added! reason: "+o.responseJSON.status,{type:"warning"})})};var a=document.createElement("center");a.append(r),$("#myModal").find(".modal-body").html(a),$("#myModal").modal("show")}};window.phxApp=m;class eg{constructor(){this.init()}init(){$("html").attr("data-bs-theme",localStorage.getItem("data-bs-theme")||"light"),window.showRP=!0,window.includeShippingTax=!0,window.toggleMcart=!1,this.initializeApps(),C.restoreCart(),C.restoreCart(!0),$(document).on("click","a.navi",function(t){m.show(),t.preventDefault(),setTimeout(()=>{$(this).attr("href").includes("#")||m.navigateTo($(this).attr("href"))},200)}),window.addEventListener("popstate",t=>{try{history.state!=null?(window.back=!0,window.parsePage=!0,m.navigateTo(history.state.route)):(m.notify("Can't go back"),m.navigateTo("/home"))}catch(e){console.log("Navigation error:",e)}},!0),this.initializeTranslation(),this.loadCountries(),this.addRoutes(),m.navigateTo()}initializeApps(){window.phoenixModel=Kr,window.phoenixModels=[],window.phxApp=m,window.location.hostname==="localhost"&&(window.commerceApp=C,window.memberApp=F)}initializeTranslation(){let t="v2",e="";function s(r){return r==="Thailand"?"th":r==="Vietnam"?"vn":r==="China"?"cn":"v2"}try{localStorage.region!=null&&(t=s(localStorage.region)),e=m.api("translation",{lang:t})}catch(r){console.error("Error fetching translation:",r)}$.fn.extend({customHtml:async function(r){console.log("customHtml parsing..");var i=Object.keys(e),a=i.reduce((o,l)=>{var u=new RegExp(l,"g");return o.replace(u,e[l])},r);return this.html(a)},customAppend:async function(r){var i=Object.keys(e),a=i.reduce((o,l)=>{var u=new RegExp(l,"g");return o.replace(u,e[l])},r);return this.append(a)}})}loadCountries(){m.api("countries",{},null,t=>{window.countries=t,m.countries_=t})}addRoutes(){[{html:"crypto_wallet.html",title:"Crypto Wallet ",route:"/crypto_wallet"},{html:"secondary_buy.html",title:"Secondary Buy ",route:"/secondary_buy"},{html:"ledger_entries.html",title:"Ledger Entries ",route:"/ledger_entries"},{html:"shipping_management.html",title:"Shipping Management ",route:"/shipping_management"},{html:"override.html",title:"Override Login ",route:"/admin_override",public:!0,skipNav:!0},{html:"commissions.html",title:"Commissions ",route:"/commissions"},{html:"merchant_withdrawal.html",title:"Merchant Withdrawal ",route:"/merchant_withdrawals"},{html:"merchant_application.html",title:"Merchant Application ",route:"/merchant_application"},{html:"merchant_profile.html",title:"Merchant Profile ",route:"/merchant_profile"},{html:"merchant_checkout_register.html",title:"Merchant Checkout ",route:"/merchant_checkout_register"},{html:"merchant_checkout.html",title:"Merchant Checkout ",route:"/merchant_checkout"},{html:"merchant_checkout_bd.html",title:"Merchant Checkout Back Date",route:"/merchant_checkout_bd"},{html:"merchant_purchases.html",title:"Merchant Purchases",route:"/merchant_purchases"},{html:"merchant_sales.html",title:"Merchant Sales",route:"/merchant_sales"},{html:"merchant_mall.html",title:"Merchant Mall",route:"/merchant_mall"},{html:"merchant_products.html",title:"Merchant Products",route:"/merchant_products"},{html:"mproduct.html",title:"Merchant Product",route:"/merchant_products/:id/:name"},{html:"refund_policy.html",title:"Refund Policy ",route:"/refund_policy",public:!0,skipNav:!0},{html:"terms_condition.html",title:"Terms Condition ",route:"/terms_condition",public:!0,skipNav:!0},{html:"merchant_code_register.html",title:"Register ",route:"/merchant_code_register/:share_code",public:!0,skipNav:!0},{html:"code_register.html",title:"Register ",route:"/code_register/:share_code",public:!0,skipNav:!0},{html:"share_link.html",title:"Share Link ",route:"/share_link"},{html:"register_wallet.html",title:"Register Wallet ",route:"/register_wallet"},{html:"bonus_wallet.html",title:"Bonus Wallet ",route:"/bonus_wallet"},{html:"new_topup.html",title:"Register Point Topup ",route:"/topup_register_point"},{html:"upgrade.html",title:"Upgrade ",route:"/upgrade"},{html:"redeem.html",title:"Redeem ",route:"/redeem"},{html:"withdrawal.html",title:"Withdrawal ",route:"/withdrawals"},{html:"reward_details.html",title:"Reward Details ",route:"/reward_details/:name/:month/:year"},{html:"sales_detail.html",title:"Sales Details",route:"/sales/:id"},{html:"sales.html",title:"Sales History",route:"/sales"},{html:"pay_instalment.html",title:"Pay Instalment",route:"/pay_instalment"},{html:"instalment_payments.html",title:"Instalment Payments",route:"/instalment_payments"},{html:"wallet_transaction.html",title:"Transactions ",route:"/wallets/:id"},{html:"product.html",title:"Product",route:"/products/:id/:name"},{html:"topup_card_register.html",title:"Topup Card Register",route:"/topup_card_register"},{html:"register.html",title:"Register",route:"/register"},{html:"logout.html",title:"Logout",route:"/logout",public:!0},{html:"thank_you.html",title:"Login",route:"/thank_you",public:!0},{html:"login.html",title:"Login",route:"/login",public:!0},{html:"profile.html",title:"Profile",route:"/profile"},{html:"placement.html",title:"Placement",route:"/placement"},{html:"placement_full.html",title:"Placement(Full)",route:"/placement_full"},{html:"referal.html",title:"Referal",route:"/referal"},{html:"gs_summary.html",title:"Group Sales",route:"/group_sales"}].forEach((e,s)=>{m.route_names.push(e)})}}document.addEventListener("DOMContentLoaded",()=>{new eg});
